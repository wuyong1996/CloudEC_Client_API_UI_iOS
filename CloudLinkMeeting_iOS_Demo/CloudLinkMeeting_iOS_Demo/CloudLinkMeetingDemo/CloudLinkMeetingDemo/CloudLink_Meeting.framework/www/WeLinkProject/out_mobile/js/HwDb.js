webpackJsonp([15],{100:function(e,t,r){e.exports={default:r(126),__esModule:!0}},103:function(e,t,r){e.exports=r(0)(51)},106:function(e,t,r){"use strict";t.__esModule=!0;var n=r(133),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}},111:function(e,t,r){e.exports=r(0)(156)},1139:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=n(a),i=r(98),c=n(i),s=r(2),o=n(s),l=r(3),p=n(l),d=r(4),f=n(d),_=r(5),m=n(_),y=window.Logger("tup")("sqlite"),v=coreCommon.getTupProtocolClass(),E=function(e){return void 0===e?"":"string"!=typeof e?e.toString():e},O=function(e){return void 0===e?0:e},b=null,h=function(){function e(t){var r=this;return(0,f.default)(this,e),new p.default(function(){var e=(0,o.default)(u.default.mark(function e(n,a){var i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={key:constant.TupModuleKey.sqlite,moduleName:"tup_plugin_service_protocol",webSocketUri:"/sqlite_plugin"},(0,c.default)(i,t),e.next=4,new v(i);case 4:r.tupProtocol=e.sent,n(r);case 6:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}())}return(0,m.default)(e,[{key:"init",value:function(e,t){var r={cmd:1,description:"tup_sqlite_init_db",param:{_useraccount:t,_dbpath:e}};return this._service(r,1)}},{key:"addsysconfig",value:function(e,t){var r={cmd:2,description:"tup_sqlite_add_sysconfig",param:{_keyvalue:{id:0,strkey:e,strvalue:t}}};return this._service(r,2)}},{key:"delsysconfig",value:function(e,t){var r={cmd:3,description:"tup_sqlite_del_sysconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,3)}},{key:"querysysconfig",value:function(e,t){var r={cmd:4,description:"tup_sqlite_query_sysconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,4)}},{key:"addlogininfo",value:function(e){var t=!0===e.isAutoLogin?1:0,r=!0===e.isRememberPassWord?1:0,n={cmd:5,description:"tup_sqlite_add_logininfo",param:{_logininfo:{id:O(e.id),account:e.account,userpwd:e.encryptPassword,isautologin:t,isrememberpwd:r,displayaccount:E(e.display_account),userrandom:e.strUserRandom,timestamp:e.time_stamp.toString()}}};return this._service(n,5)}},{key:"dellogininfo",value:function(e,t){var r={cmd:6,description:"tup_sqlite_del_logininfo",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,6)}},{key:"querylogininfo",value:function(e,t){var r={cmd:7,description:"tup_sqlite_query_logininfo",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,7)}},{key:"updatelogininfo",value:function(e,t,r){var n={cmd:8,description:"tup_sqlite_update_logininfo",param:{_multimatchinfo:{datalist:e,datalen:t,operationtype:r}}};return this._service(n,8)}},{key:"addcontactgroup",value:function(e){var t={cmd:9,description:"tup_sqlite_add_contactgroup",param:{_contactgroupinfo:e}};return this._service(t,9)}},{key:"addcontactgrouplist",value:function(e){var t={cmd:10,description:"tup_sqlite_add_contactgrouplist",param:{_contactgroupinfolist:e,_arraylen:e.length}};return this._service(t,10)}},{key:"delcontactgroup",value:function(e,t){var r={cmd:11,description:"tup_sqlite_delete_contactgroup",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,11)}},{key:"querycontactgroup",value:function(e,t){var r={cmd:12,description:"tup_sqlite_query_contactgroup",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,12)}},{key:"addcontactgroupmember",value:function(e){var t={cmd:13,description:"tup_sqlite_add_contactgroupmem",param:{_contactgroupmeminfo:e}};return this._service(t,13)}},{key:"addcontactgroupmemberlist",value:function(e){var t={cmd:14,description:"tup_sqlite_add_contactgroupmemlist",param:{_contactgroupmeminfolist:e,_arraylen:e.length}};return this._service(t,14)}},{key:"delcontactgroupmember",value:function(e,t,r){var n={cmd:15,description:"tup_sqlite_delete_contactgroupmem",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,15)}},{key:"querycontactgroupmember",value:function(e,t){var r={cmd:16,description:"tup_sqlite_query_contactgroupmem",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,16)}},{key:"addstaff",value:function(e){var t={cmd:17,description:"tup_sqlite_add_staff",param:{_staffinfo:{id:O(e.id),staffid:e.staff_id,account:e.account,contactid:e.contact_id,name:e.name,qpinyin:e.q_pin_yin,gender:e.gender,mobilephone:e.mobile,officephone:e.office_phone,otherphone:e.other_phone,fax:e.fax,email:e.email,zip:e.postcode,address:e.address,title:e.title,deptname:e.dept_name,imageid:e.image_id,signature:e.signature,website:e.website,bindno:e.bindno,nativename:e.native_name,staffno:e.staff_no,corpname:e.crop_name,deptid:e.dept_id,deptnamecn:e.dept_name_cn,deptnameen:e.dept_name_en,desc:e.desc,foreignname:e.foreign_name,imno:e.im_no,imagesynctime:e.image_sync_time,ipphone:e.ip_phone,issecurity:e.is_security,nickname:e.nick_name,oldaccount:e.old_account,shortphone:e.short_phone,voip:e.voip,modifytime:e.modify_time}}};return this._service(t,17)}},{key:"addstafflist",value:function(e,t){for(var r=new Array,n=0;n<t;++n){var a=e[n];r[n]={id:O(a.id),staffid:a.staff_id,account:a.account,contactid:a.contact_id,name:a.name,qpinyin:a.q_pin_yin,gender:a.gender,mobilephone:a.mobile,officephone:a.office_phone,otherphone:a.other_phone,fax:a.fax,email:a.email,zip:a.postcode,address:a.address,title:a.title,deptname:a.dept_name,imageid:a.image_id,signature:a.signature,website:a.website,bindno:a.bindno,nativename:a.native_name,staffno:a.staff_no,corpname:a.crop_name,deptid:a.dept_id,deptnamecn:a.dept_name_cn,deptnameen:a.dept_name_en,desc:a.desc,foreignname:a.foreign_name,imno:a.im_no,imagesynctime:a.image_sync_time,ipphone:a.ip_phone,issecurity:a.is_security,nickname:a.nick_name,oldaccount:a.old_account,shortphone:a.short_phone,voip:a.voip,modifytime:a.modify_time}}var u={cmd:18,description:"tup_sqlite_add_stafflist",param:{_staffinfolist:r,_arraylen:t}};return this._service(u,18)}},{key:"delstaff",value:function(e,t){var r={cmd:19,description:"tup_sqlite_delete_staff",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,19)}},{key:"querystaff",value:function(e,t){var r={cmd:20,description:"tup_sqlite_query_staff",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,20)}},{key:"addcontact",value:function(e){var t={cmd:21,description:"tup_sqlite_add_contact",param:{_contactinfo:e}};return this._service(t,21)}},{key:"addcontactlist",value:function(e){var t={cmd:22,description:"tup_sqlite_add_contactlist",param:{_contactinfolist:e,_arraylen:e.length}};return this._service(t,22)}},{key:"delcontact",value:function(e,t){var r={cmd:23,description:"tup_sqlite_delete_contactlist",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,23)}},{key:"querycontact",value:function(e,t){var r={cmd:24,description:"tup_sqlite_query_contact",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,24)}},{key:"adduserconfig",value:function(e){var t={cmd:25,description:"tup_sqlite_add_userconfig",param:{_keyvalue:{id:O(e.id),strkey:e.key,strvalue:e.value}}};return this._service(t,25)}},{key:"adduserconfiglist",value:function(e){for(var t=new Array,r=0;r<e.length;++r){var n=e[r];t[r]={id:O(n.id),strkey:n.key,strvalue:n.value}}var a={cmd:75,description:"tup_sqlite_add_userconfiglist",param:{_keyvaluelist:t,_arraylen:e.length}};return this._service(a,75)}},{key:"deluserconfig",value:function(e,t){var r={cmd:26,description:"tup_sqlite_del_userconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,26)}},{key:"queryuserconfig",value:function(e,t){var r={cmd:27,description:"tup_sqlite_query_userconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,27)}},{key:"addgroup",value:function(e){var t={cmd:28,description:"tup_sqlite_add_group",param:{_groupinfo:e}};return this._service(t,28)}},{key:"addgrouplist",value:function(e){var t={cmd:29,description:"tup_sqlite_add_grouplist",param:{_groupinfolist:e,_arraylen:e.length}};return this._service(t,29)}},{key:"delgroup",value:function(e,t){var r={cmd:30,description:"tup_sqlite_delete_groupinfo",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,30)}},{key:"querygroup",value:function(e,t){var r={cmd:31,description:"tup_sqlite_query_groupinfo",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,31)}},{key:"addgroupmember",value:function(e){var t={cmd:37,description:"tup_sqlite_add_groupmember",param:{_memberinfo:e}};return this._service(t,37)}},{key:"addgroupmemberlist",value:function(e){var t={cmd:38,description:"tup_sqlite_add_groupmemberlist",param:{_memberinfolist:e,_arraylen:e.length}};return this._service(t,38)}},{key:"delgroupmember",value:function(e,t,r){var n={cmd:39,description:"tup_sqlite_delete_groupmember",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,39)}},{key:"querygroupmember",value:function(e,t,r){var n={cmd:40,description:"tup_sqlite_query_groupmember",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,40)}},{key:"addgroupconfig",value:function(e){var t={id:O(e.id),groupid:e.group_id,mutenotifications:e.mute_notifications,savetocontact:e.save_to_contact,stickontop:e.stick_on_top,invitepermission:e.invite_permission,timestamp:e.timestamp},r={cmd:32,description:"tup_sqlite_add_groupconfig",param:{_configinfo:t}};return this._service(r,32)}},{key:"addgroupconfiglist",value:function(e){for(var t=new Array,r=0;r<e.length;++r){var n=e[r];t[r]={id:O(n.id),groupid:n.group_id,mutenotifications:n.mute_notifications,savetocontact:n.save_to_contact,stickontop:n.stick_on_top,invitepermission:n.invite_permission,timestamp:n.timestamp}}var a={cmd:33,description:"tup_sqlite_add_groupconfiglist",param:{_configinfolist:t,_arraylen:e.length}};return this._service(a,33)}},{key:"delgroupconfig",value:function(e,t){var r={cmd:34,description:"tup_sqlite_delete_groupconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,34)}},{key:"querygroupconfig",value:function(e,t){var r={cmd:35,description:"tup_sqlite_query_groupconfig",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,35)}},{key:"addconversation",value:function(e){y.debug("addconversation",e);var t={cmd:41,description:"tup_sqlite_add_conversation",param:{_cvsinfo:e}};return this._service(t,41)}},{key:"addconversationlist",value:function(e){y.debug("addconversation",e);var t={cmd:42,description:"tup_sqlite_add_conversationlist",param:{_cvsinfolist:e,_arraylen:e.length}};return this._service(t,42)}},{key:"delconversation",value:function(e,t){var r={cmd:43,description:"tup_sqlite_delete_conversation",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,43)}},{key:"queryconversation",value:function(e,t){var r={cmd:44,description:"tup_sqlite_query_conversation",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,44)}},{key:"addfile",value:function(e){var t={cmd:46,description:"tup_sqlite_add_filerecord",param:{_filerecordinfo:e}};return this._service(t,46)}},{key:"addfilelist",value:function(e){var t={cmd:47,description:"tup_sqlite_add_filerecordlist",param:{_filerecordlist:e,_arraylen:e.length}};return this._service(t,47)}},{key:"delfile",value:function(e,t){var r={cmd:48,description:"tup_sqlite_delete_filerecord",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,48)}},{key:"queryfile",value:function(e,t,r){var n={cmd:49,description:"tup_sqlite_query_filerecord",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,49)}},{key:"addscreenshot",value:function(e){var t={cmd:50,description:"tup_sqlite_add_screenshotfile",param:{_screenfileinfo:e}};return this._service(t,50)}},{key:"addscreenshotlist",value:function(e){var t={cmd:51,description:"tup_sqlite_add_screenshotfileist",param:{_screenfileinfolist:e,_arraylen:e.length}};return this._service(t,51)}},{key:"delscreenshot",value:function(e,t){var r={cmd:52,description:"tup_sqlite_delete_screenshotfile",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,52)}},{key:"queryscreenshot",value:function(e,t,r){var n={cmd:53,description:"tup_sqlite_query_screenshotfile",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,53)}},{key:"addhistoryrecord",value:function(e){var t={cmd:54,description:"tup_sqlite_add_historyrecord",param:{_historyrecord:e}};return this._service(t,54)}},{key:"addhistoryrecordlist",value:function(e){var t={cmd:55,description:"tup_sqlite_add_historyrecordlist",param:{_historyrecordlist:e,_arraylen:e.length}};return this._service(t,55)}},{key:"deletehistoryrecord",value:function(e,t){var r={cmd:56,description:"tup_sqlite_delete_historyrecord",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,56)}},{key:"queryhistoryrecord",value:function(e,t,r){var n={cmd:57,description:"tup_sqlite_query_historyrecord",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,57)}},{key:"updatehistoryrecord",value:function(e,t,r){var n={cmd:58,description:"tup_sqlite_update_historyrecord",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,58)}},{key:"addgroupcollection",value:function(e){var t={collectionid:e.type_id,name:e.name,state:e.state},r={cmd:59,description:"tup_sqlite_add_groupcollection",param:{_groupcollectinfo:t}};return this._service(r,59)}},{key:"addgroupcollectionlist",value:function(e){for(var t=new Array,r=0;r<e.length;++r){var n=e[r];t[r]={collectionid:n.type_id,name:n.name,state:n.state}}var a={cmd:60,description:"tup_sqlite_add_groupcollectionlist",param:{_groupcollectinfolist:t,_arraylen:e.length}};return this._service(a,60)}},{key:"delgroupcollection",value:function(e,t){var r={cmd:61,description:"tup_sqlite_delete_groupcollection",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,61)}},{key:"querygroupcollection",value:function(e,t){var r={cmd:62,description:"tup_sqlite_query_groupcollection",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,62)}},{key:"addgroupcollectionmem",value:function(e){var t={collectionid:e.type_id,groupid:e.group_id},r={cmd:63,description:"tup_sqlite_add_groupcollectionmem",param:{_groupcollectmeminfo:t}};return this._service(r,63)}},{key:"addgroupcollectionmemlist",value:function(e){for(var t=new Array,r=0;r<e.length;++r){var n=e[r];t[r]={collectionid:n.type_id,groupid:n.group_id}}var a={cmd:64,description:"tup_sqlite_add_groupcollectionmemlist",param:{_groupcollectmeminfolist:t,_arraylen:e.length}};return this._service(a,64)}},{key:"delgroupcollectionmem",value:function(e,t,r){var n={cmd:65,description:"tup_sqlite_delete_groupcollectionmem",param:{_multimatchinfo:{datalist:t,datalen:r,operationtype:e}}};return this._service(n,65)}},{key:"querygroupcollectionmem",value:function(e,t){var r={cmd:66,description:"tup_sqlite_query_groupcollectionmem",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,66)}},{key:"addusertrack",value:function(e){var t={id:e.id,content:e.content,retrycount:O(e.retrycount)},r={cmd:67,description:"tup_sqlite_add_usertrack",param:{_usertrackinfo:t}};return this._service(r,67)}},{key:"addusertracklist",value:function(e){for(var t=new Array,r=0;r<e.length;++r){var n=e[r];t[r]={id:n.id,content:n.content,retrycount:n.retrycount}}var a={cmd:68,description:"tup_sqlite_add_usertracklist",param:{_usertrackinfolist:t,_arraylen:e.length}};return this._service(a,68)}},{key:"delusertrack",value:function(e,t){var r={cmd:69,description:"tup_sqlite_delete_usertrack",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,69)}},{key:"queryusertrack",value:function(e,t){var r={cmd:70,description:"tup_sqlite_query_usertrack",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,70)}},{key:"addcallrecord",value:function(e){var t={cmd:71,description:"tup_sqlite_add_callrecord",param:{_callrecordinfo:e}};return this._service(t,71)}},{key:"addcallrecordlist",value:function(e){var t={cmd:72,description:"tup_sqlite_add_callrecordlist",param:{_callrecordinfolist:e,_arraylen:e.length}};return this._service(t,72)}},{key:"delcallrecord",value:function(e,t){var r={cmd:73,description:"tup_sqlite_delete_callrecord",param:{_matchinfo:{keytype:e,match_value:t}}};return this._service(r,73)}},{key:"querycallrecord",value:function(e,t,r){var n={cmd:74,description:"tup_sqlite_query_callrecord",param:{_multimatchinfo:{operationtype:e,datalist:t,datalen:r}}};return this._service(n,74)}},{key:"querydiscnumber",value:function(){var e={cmd:76,description:"tup_sqlite_get_discnumber",param:{}};return this._service(e,76)}},{key:"setdbsaltkey",value:function(e,t,r){var n={cmd:77,description:"tup_sqlite_set_saltvalue",param:{plainvalue:e,vecvalue:t,secvalue:r}};return this._service(n,77)}},{key:"getdbsaltkey",value:function(){var e={cmd:78,description:"tup_sqlite_get_saltvalue",param:{}};return this._service(e,78)}},{key:"initdbpath",value:function(e){var t={cmd:79,description:"tup_sqlite_init_dbpath",param:{_dbpath:e}};return this._service(t,79)}},{key:"examineEncryptFile",value:function(e,t,r){var n={cmd:80,description:"tup_sqlite_examin_encrypt_file",param:{_encrypt:{aesIv:e,resources_path:t,fail_reason:r}}};return this._service(n,80)}},{key:"_service",value:function(e,t){var r=this;return new p.default(function(n,a){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){n({result:0})}else{var u={resolve:n,data:e,rspIdx:t};r.tupProtocol.setRspFuncsAndSendMessage(u)}})}}],[{key:"getinstance",value:function(){return null===b&&(b=new e),b}}]),e}();t.default=h},1140:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOGININFO_TYPE={LOGININFO_ID:0,LOGININFO_ACCOUNT:1,LOGININFO_DISPLAYACCOUNT:2,LOGININFO_PWD:3,LOGININFO_AUTOLOGIN:4,LOGININFO_REMPWD:5,LOGININFO_USERRANDOM:6,LOGININFO_TIMESTAMP:7,LOGININFO_ALL:8},t.KEYVALUE_TYPE={KEYVALUE_ID:0,KEYVALUE_KEY:1,KEYVALUE_VALUE:2,KEYVALUE_ALL:3},t.CONTACTGROUP_TYPE={CONTACTGROUP_ID:0,CONTACTGROUP_GROUPID:1,CONTACTGROUP_INDEX:2,CONTACTGROUP_NAME:3,CONTACTGROUP_STATE:4,CONTACTGROUP_ALL:5},t.CONTACTGROUPMEMBER_TYPE={CONTACTGROUPMEM_ID:0,CONTACTGROUPMEM_GROUPID:1,CONTACTGROUPMEM_CONTACTID:2,CONTACTGROUPMEM_STATE:3,CONTACTGROUPMEM_CONTACTID_GROUPID:4,CONTACTGROUPMEM_ALL:5},t.CONTACT_TYPE={CONTACTINFO_ID:0,CONTACTINFO_CONTACTID:1,CONTACTINFO_STAFFID:2,CONTACTINFO_ACCOUNT:3,CONTACTINFO_NAME:4,CONTACTINFO_QPINYIN:5,CONTACTINFO_GENDER:6,CONTACTINFO_MOBILEPHONE:7,CONTACTINFO_OFFICEPHONE:8,CONTACTINFO_OFFICEPHONE2:9,CONTACTINFO_ESPACENUMBER:10,CONTACTINFO_OTHERPHONE:11,CONTACTINFO_FAX:12,CONTACTINFO_EMAIL:13,CONTACTINFO_ZIP:14,CONTACTINFO_ADDRESS:15,CONTACTINFO_TITLE:16,CONTACTINFO_DEPTNAME:17,CONTACTINFO_IMAGEID:18,CONTACTINFO_SIGNATURE:19,CONTACTINFO_WEBSITE:20,CONTACTINFO_BINDNO:21,CONTACTINFO_NATIVENAME:22,CONTACTINFO_STAFFNO:23,CONTACTINFO_CORPNAME:24,CONTACTINFO_DEPTID:25,CONTACTINFO_DEPTNAMECN:26,CONTACTINFO_DEPTNAMEEN:27,CONTACTINFO_DESC:28,CONTACTINFO_FOREIGNNAME:29,CONTACTINFO_IMNO:30,CONTACTINFO_IMAGESYNCTIME:31,CONTACTINFO_IPPHONE:32,CONTACTINFO_ISSECURITY:33,CONTACTINFO_NICKNAME:34,CONTACTINFO_OLDACCOUNT:35,CONTACTINFO_SHORTPHONE:36,CONTACTINFO_VOIP:37,CONTACTINFO_MODIFYTIME:38,CONTACTINFO_PHONENUMBER:39,CONTACTINFO_ALL:40,CONTACTINFO_SEARCHGLOBAL:41,CONTACTINFO_HOMEPHONE:42,CONTACTINFO_OTHERPHONE2:43,CONTACTINFO_ETAG:44,CONTACTINFO_EXPARAM:45,CONTACTINFO_PHONENUMBER_ACCURATE:46},t.GROUP_TYPE={GROUPINFO_ID:0,GROUPINFO_GROUPID:1,GROUPINFO_GROUP_GROUPID:2,GROUPINFO_CAPACITY:3,GROUPINFO_NAME:4,GROUPINFO_ENNAME:5,GROUPINFO_OWNER:6,GROUPINFO_DESC:7,GROUPINFO_GROUPTYPE:8,GROUPINFO_JOINFLAG:9,GROUPINFO_MANIFESTO:10,GROUPINFO_MSGPOLICYTYPE:11,GROUPINFO_STATE:12,GROUPINFO_SETTOP:13,GROUPINFO_ORDERBY:14,GROUPINFO_TIMESTAMP:15,GROUPINFO_ALL:16,GROUPINFO_SEARCHGLOBAL:17},t.GROUPMEMBER_TYPE={GROUPMEMBER_ID:0,GROUPMEMBER_GROUPID:1,GROUPMEMBER_STAFFID:2,GROUPMEMBER_ACCOUNT:3,GROUPMEMBER_NAME:4,GROUPMEMBER_FLAG:5,GROUPMEMBER_GROUPID_STAFFID:6,GROUPMEMBER_ALL:7,GROUPMEMBER_GROUPLIST_BYACCOUNT:8,GROUPMEMBER_SEARCHTEXT:9},t.GROUPCONFIG_TYPE={GROUPCONFIG_ID:0,GROUPCONFIG_GROUPID:1,GROUPCONFIG_MUTENOTIFY:2,GROUPCONFIG_SAVETOCONTACT:3,GROUPCONFIG_STICKONTOP:4,GROUPCONFIG_INVITEPERM:5,GROUPCONFIG_TIMESTAMP:6,GROUPCONFIG_ALL:7},t.CONVERSATION_TYPE={CONV_AUTOID:0,CONV_TYPE:1,CONV_ACCOUNT:2,CONV_CONTACTAUTOID:3,CONV_GROUPID:4,CONV_LASTMESSAGE_ID:5,CONV_UNREADMSG:6,CONV_UNREADCALL:7,CONV_ISDELETE:8,CONV_TIMESTAMP:9,CONV_ALL:10,CONV_CONTACTID:11,CONV_LASTSERVERMESSAGE_ID:12,CONV_CONVID:13},t.FILERECORD_TYPE={FILERECORD_ID:0,FILERECORD_CONVID:1,FILERECORD_CONVAUTOID:2,FILERECORD_MESSAGEID:3,FILERECORD_SERVERMESSAGEID:4,FILERECORD_STAFFID:5,FILERECORD_FILEHANDLE:6,FILERECORD_FILEDEALTYPE:7,FILERECORD_FILEPATH:8,FILERECORD_ISP2P:9,FILERECORD_FILENAME:10,FILERECORD_REALNAME:11,FILERECORD_REALPATH:12,FILERECORD_SIZE:13,FILERECORD_UM_URL:14,FILERECORD_UM_ACCESSCODE:15,FILERECORD_ISDOWNLOADED:16,FILERECORD_ISQUOTE:17,FILERECORD_TIMESTAMP:18,FILERECORD_ALL:19,FILERECORD_SEARCHGLOBAL:20,FILERECORD_PAGELIMIT:21},t.SCREENFILE_TYPE={SCREENSHOT_ID:0,SCREENSHOT_CONVID:1,SCREENSHOT_CONVAUTOID:2,SCREENSHOT_MESSAGEID:3,SCREENSHOT_SERVERMESSAGEID:4,SCREENSHOT_STAFFID:5,SCREENSHOT_FILEHANDLE:6,SCREENSHOT_FILEDEALTYPE:7,SCREENSHOT_FILEPATH:8,SCREENSHOT_FILENAME:9,SCREENSHOT_REALNAME:10,SCREENSHOT_REALPATH:11,SCREENSHOT_HEIGHT:12,SCREENSHOT_WIDTH:13,SCREENSHOT_UM_URL:14,SCREENSHOT_UM_ACCESSCODE:15,SCREENSHOT_ISDOWNLOADED:16,SCREENSHOT_ISQUOTE:17,SCREENSHOT_TIMESTAMP:18,SCREENSHOT_ALL:19,SCREENSHOT_SEARCHGLOBAL:20},t.HISTORYRECORD_TYPE={HISTORYRECORD_RECORDID:0,HISTORYRECORD_CONVID:1,HISTORYRECORD_CONVAUTOID:2,HISTORYRECORD_MESSAGEID:3,HISTORYRECORD_CLIENTMESSAGEID:4,HISTORYRECORD_CHATTYPE:5,HISTORYRECORD_CONTENT:6,HISTORYRECORD_CONTENTTYPE:7,HISTORYRECORD_DELIVERTIME:8,HISTORYRECORD_FILELIST:9,HISTORYRECORD_GROUPID:10,HISTORYRECORD_GROUPNAME:11,HISTORYRECORD_PEERNAME:12,HISTORYRECORD_PEERNATIVENAME:13,HISTORYRECORD_ORIGIN:14,HISTORYRECORD_TARGET:15,HISTORYRECORD_SHOWHTML:16,HISTORYRECORD_SHOWTEXT:17,HISTORYRECORD_ISREAD:18,HISTORYRECORD_MEDIATYPE:19,HISTORYRECORD_ISDELETE:20,HISTORYRECORD_SOURCEFLAG:21,HISTORYRECORD_QUOTE:22,HISTORYRECORD_TIMESTAMP:23,HISTORYRECORD_UTCSTAMP:24,HISTORYRECORD_LIMIT:25,HISTORYRECORD_OFFSET:26,HISTORYRECORD_RESERVERINT1:27,HISTORYRECORD_RESERVERINT2:28,HISTORYRECORD_RESERVERSTR1:29,HISTORYRECORD_RESERVERSTR2:30,HISTORYRECORD_UPDATE_UNREADBYCONVID:31,HISTORYRECORD_UPDATE_UNREADBYRECORD:32,HISTORYRECORD_UPDATE_UNREADBEFORECONVMESSAGEID:33,HISTORYRECORD_UPDATE_HTMLBYID:34,HISTORYRECORD_UPDATE_TEXTBYID:35,HISTORYRECORD_UPDATE_BODYANDTEXTBYMSGID:36,HISTORYRECORD_UPDATE_MSGIDBYRECORDID:37,HISTORYRECORD_ALL:38,HISTORY_SEARCHGLOBAL:39},t.GROUPCOLLECTION_TYPE={GROUPCOLLECTION_ID:0,GROUPCOLLECTION_COLLECTID:1,GROUPCOLLECTION_NAME:2,GROUPCOLLECTION_INDEX:3,GROUPCOLLECTION_STATE:4,GROUPCOLLECTION_ALL:5},t.GROUPCOLLECTIONMEM_TYPE={GROUPCOLLECTIONMEM_ID:0,GROUPCOLLECTIONMEM_COLLECTIONID:1,GROUPCOLLECTIONMEM_GROUPID:2,GROUPCOLLECTIONMEM_GROUPID_COLLECTIONID:3,GROUPCOLLECTIONMEM_ALL:4},t.USERTRACK_TYPE={USERTRACK_ID:0,USERTRACK_CONTENT:1,USERTRACK_RETRYCOUNT:2,USERTRACK_ALL:3,USERTRACK_LIMITCOUNT:4,USERTRACK_ALLLENGTH:5},t.CALLRECORD_TYPE={CALLRECORD_ID:0,CALLRECORD_PEERACCOUNT:1,CALLRECORD_ISCALLOUT:2,CALLRECORD_CALLERNUMBER:3,CALLRECORD_CALLEENUMBER:4,CALLRECORD_CALLSTATE:5,CALLRECORD_CALLTYPE:6,CALLRECORD_CONFID:7,CALLRECORD_CONFPASSCODE:8,CALLRECORD_CONFMEMBERS:9,CALLRECORD_GROUPID:10,CALLRECORD_STARTTIME:11,CALLRECORD_DURATION:12,CALLRECORD_LIMITCOUNT:13,CALLRECORD_ALL:14,CALLRECORD_EXPARAMS:15,CALLRECORD_ALLCONF:16,CALLRECORD_ALLCALL:17}},1141:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.convertCallRecord2JsList=t.convertContactGroupMember2JsList=t.convertContactGroup2JsList=t.convertGroupMember2JsList=t.convertGroupInfo2JsList=t.convertContact2JsList=t.convertRecent2JsList=t.convertMessage2JsList=t.convertScreenShot2JsList=t.convertFile2JsList=t.convertCallRecord2Data=t.convertCallRecordList2Data=t.convertConfRecord2Data=t.convertContactGroupMemberList2SQLite=t.convertContactGroupMember2SQLite=t.convertContactGroupList2SQLite=t.convertContactGroup2SQLite=t.convertGroupMemberList2SQLite=t.convertGroupMember2SQLite=t.convertGroupList2SQLite=t.convertGroup2SQLite=t.convertContact2SqLiteList=t.convertContact2SqLite=t.convertRecent2SqLiteList=t.convertRecent2SqLite=t.convertMessage2SqLiteList=t.convertMessage2SqLite=t.convertScreenShot2SqLiteList=t.convertScreenShot2SqLite=t.convertFile2SqLiteList=t.convertFile2SqLite=void 0;var a=r(1142),u=n(a),i=r(1143),c=n(i);t.convertFile2SqLite=u.convertFile2SqLite,t.convertFile2SqLiteList=u.convertFile2SqLiteList,t.convertScreenShot2SqLite=u.convertScreenShot2SqLite,t.convertScreenShot2SqLiteList=u.convertScreenShot2SqLiteList,t.convertMessage2SqLite=u.convertMessage2SqLite,t.convertMessage2SqLiteList=u.convertMessage2SqLiteList,t.convertRecent2SqLite=u.convertRecent2SqLite,t.convertRecent2SqLiteList=u.convertRecent2SqLiteList,t.convertContact2SqLite=u.convertContact2SqLite,t.convertContact2SqLiteList=u.convertContact2SqLiteList,t.convertGroup2SQLite=u.convertGroup2SQLite,t.convertGroupList2SQLite=u.convertGroupList2SQLite,t.convertGroupMember2SQLite=u.convertGroupMember2SQLite,t.convertGroupMemberList2SQLite=u.convertGroupMemberList2SQLite,t.convertContactGroup2SQLite=u.convertContactGroup2SQLite,t.convertContactGroupList2SQLite=u.convertContactGroupList2SQLite,t.convertContactGroupMember2SQLite=u.convertContactGroupMember2SQLite,t.convertContactGroupMemberList2SQLite=u.convertContactGroupMemberList2SQLite,t.convertConfRecord2Data=u.convertConfRecord2Data,t.convertCallRecordList2Data=u.convertCallRecordList2Data,t.convertCallRecord2Data=u.convertCallRecord2Data,t.convertFile2JsList=c.convertFile2JsList,t.convertScreenShot2JsList=c.convertScreenShot2JsList,t.convertMessage2JsList=c.convertMessage2JsList,t.convertRecent2JsList=c.convertRecent2JsList,t.convertContact2JsList=c.convertContact2JsList,t.convertGroupInfo2JsList=c.convertGroupInfo2JsList,t.convertGroupMember2JsList=c.convertGroupMember2JsList,t.convertContactGroup2JsList=c.convertContactGroup2JsList,t.convertContactGroupMember2JsList=c.convertContactGroupMember2JsList,t.convertCallRecord2JsList=c.convertCallRecord2JsList},1142:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertConfRecord2Data=t.convertCallRecord2Data=t.convertCallRecordList2Data=t.convertGroup2SQLite=t.convertGroupList2SQLite=t.convertContactGroupMember2SQLite=t.convertContactGroupMemberList2SQLite=t.convertContactGroup2SQLite=t.convertContactGroupList2SQLite=t.convertGroupMember2SQLite=t.convertGroupMemberList2SQLite=t.convertContact2SqLiteList=t.convertContact2SqLite=t.convertRecent2SqLiteList=t.convertRecent2SqLite=t.convertMessage2SqLiteList=t.convertMessage2SqLite=t.convertScreenShot2SqLiteList=t.convertScreenShot2SqLite=t.convertFile2SqLiteList=t.convertFile2SqLite=void 0;var a=r(106),u=n(a),i=r(100),c=n(i),s=r(103),o=n(s),l=window.Logger("service")("DB/sqLite/convert2SqLite"),p=t.convertFile2SqLite=function(e){try{var t=e.file_deal_type,r=e.file_type,n=t;isNullOrEmpty(r)||(n+=10*r);var a={},u=(0,o.default)({},e);a.width=u.width||0,a.height=u.height||0,a.duration=u.duration||0;var i=(0,c.default)(a);return{id:C(u.id),convid:h(u.recent_owner),recordid:u.message_id,servermessageid:h(u.message_server_chat_id_str),convautoid:u.recent_id,filehandle:h(u.file_handle),filedealtype:n,filepath:h(u.file_path),isp2p:C(u.is_p2p),filename:h(u.file_name),filerealpath:h(u.file_real_save_path),filerealname:h(u.file_real_save_name),filesize:h(u.file_size),umurl:h(u.um_url),umaccesscode:h(u.um_plain_access_code),isdownloaded:C(b(u)),timestamp:C(u.time_stamp).toString(),isquote:C(u.is_quote),staffid:0,filetype:C(u.file_type),exparams:i}}catch(e){return l.error("convertFile2SqLite",{e:e.toJSON()}),null}},d=(t.convertFile2SqLiteList=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){t.push(p(e))}),t},t.convertScreenShot2SqLite=function(e){try{var t=(0,o.default)({},e);return{id:C(t.id),convid:h(t.recent_owner),recordid:t.message_id,servermessageid:h(t.message_server_chat_id_str),convautoid:t.recent_id,filehandle:h(t.file_handle),filedealtype:t.file_deal_type,filepath:h(t.file_path),filename:h(t.file_name),filerealpath:h(t.file_real_save_path),filerealname:h(t.file_real_save_name),umurl:h(t.um_url),umaccesscode:h(t.um_plain_access_code),isdownloaded:C(b(t)),timestamp:C(t.time_stamp).toString(),isquote:C(t.is_quote),staffid:0,height:h(t.height),width:h(t.width)}}catch(e){return l.error("convertScreenShot2SqLite",{e:e.toJSON()}),null}}),f=(t.convertScreenShot2SqLiteList=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=d(e);t.push(r)}),t},t.convertMessage2SqLite=function(e){try{var t=(0,o.default)({},e),r="",n=-1;if(!isNullOrEmpty(t.file_list)){var a=[].concat((0,u.default)(t.file_list));r=coreCommon.zip((0,c.default)(a))}isNullOrEmpty(t.status)||(n=t.status);var i={is_quote:0,has_quote:0,server_chat_id_str:"",client_chat_id:"",id:"",status:constant.SEND_STATUS.success,cardtype:-1};isNullOrEmpty(t.send_status)||(i.status=t.send_status),i.is_dealed_apply=t.is_dealed_apply,isNullOrEmpty(t.card_type)||(i.cardtype=t.card_type),isNullOrEmpty(t.recent_owner)&&(i.is_quote=1);var s=void 0;isNullOrEmpty(t.team_notify_is_read)||(s=t.team_notify_is_read),isNullOrEmpty(t.quote)||(i.has_quote=1,i.server_chat_id_str=t.quote.server_chat_id_str,i.client_chat_id=t.quote.client_chat_id);var p=t.recent_owner;isNullOrEmpty(p)&&(p="");var d=t.show_html;isNullOrEmpty(d)||(d=coreCommon.zip(d));var f=constant.IS_DELETE.NO;t.is_delete===constant.IS_DELETE.YES&&(f=constant.IS_DELETE.YES);return{recordid:C(t.id),convid:p,convautoid:C(t.recent_id),servermessageid:h(t.server_chat_id_str),clientmessageid:C(t.client_chat_id).toString(),chattype:t.chat_type,content:h(t.content),contenttype:t.content_type,delivertime:C(t.deliver_time).toString(),groupid:h(t.group_id),groupname:h(t.group_name),peername:h(t.name),peernativename:h(t.native_name),originaccount:h(t.origin),targetaccount:h(t.target),showhtml:h(d),showtext:h(t.show_text),sourceflag:t.source_flag,isread:t.is_read,mediatype:t.media_type,timestamp:h(t.time_stamp),utcstamp:C(t.utc_stamp).toString(),isdelete:f,teamnotifyisread:s,filelist:r,limitcount:0,offset:0,reservedint1:0,reservedint2:0,reservedstr1:"",reservedstr2:"",quote:h((0,c.default)(i)),status:n}}catch(e){return l.error("convertMessage2SqLite",{e:e.toJSON()}),null}}),_=(t.convertMessage2SqLiteList=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=f(e);t.push(r)}),t},t.convertRecent2SqLite=function(e){try{var t=(0,o.default)({},e),r="",n=0,a="",u=0,i="",s="",p=void 0,d={};coreIm.isGroup(t.chat_type)?a=isNullOrEmpty(t.group)?t.owner||t.group_id||"":t.group.group_id:coreIm.isCustomChat(t.chat_type)?d.name=t.name||t.owner:(isNullOrEmpty(t.contact)?r=t.owner||t.account||"":(r=t.contact.account,n=t.contact.id),isNullOrEmpty(t.contact_id)||(s=t.contact_id.toString())),isNullOrEmpty(t.team_notify_is_read)||(p=t.team_notify_is_read),isNullOrEmpty(t.last_message)||(u=t.last_message.id||0,i=t.last_message.server_chat_id_str);var f=constant.IS_DELETE.NO;t.is_delete===constant.IS_DELETE.YES&&(f=constant.IS_DELETE.YES),t.is_disable&&(d.is_disable="1"),isNullOrEmpty(t.messageSign)||(d.sign=t.messageSign),isNullOrEmpty(t.set_unread_num)||0===t.set_unread_num||(d.unreadnum=t.set_unread_num),isNullOrEmpty(t.group_name)||(d.groupname=t.group_name),isNullOrEmpty(t.unread_group_notify_num)||0===t.unread_group_notify_num||(d.unread_group_notify_num=t.unread_group_notify_num);var _=(0,c.default)(d);return{id:C(t.id),convtype:C(t.chat_type),account:h(r),contactautoid:C(n),contactid:h(s),groupid:h(a),lastmessagerecordid:u,unreadcall:0,unreadmsg:C(t.unread_num),timestamp:C(t.time_stamp).toString(),isdelete:f,teamnotifyisread:p,stickontop:C(t.stick_on_top),lastservermessageid:i,convid:h(t.owner),exparams:_}}catch(e){return l.error("convertRecent2SqLite",{e:e.toJSON()}),null}}),m=(t.convertRecent2SqLiteList=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=_(e);t.push(r)}),t},t.convertContact2SqLite=function(e){try{return{id:C(e.id),staffid:C(e.staff_id),account:h(e.account),etag:h(e.etag),exparam:h(e.exparam),contactid:C(e.contact_id).toString(),name:h(e.name),qpinyin:h(e.q_pin_yin),gender:C(e.gender),mobilephone:h(e.mobile),officephone:h(e.office_phone),officephone2:h(e.office_phone2),otherphone:h(e.other_phone),fax:h(e.fax),email:h(e.email),zip:h(e.postcode),address:h(e.address),title:h(e.title),deptname:h(e.dept_name),imageid:h(e.image_id),signature:h(e.signature),website:h(e.website),bindno:h(e.bind_no),nativename:h(e.native_name),homephone:h(e.home_phone),otherphone2:h(e.other_phone2),staffno:h(e.staff_no),corpname:h(e.crop_name),deptid:h(e.dept_id),deptnamecn:h(e.dept_name_cn),deptnameen:h(e.dept_name_en),desc:h(e.desc),foreignname:h(e.foreign_name),imno:h(e.im_no),imagesynctime:h(e.image_sync_time),ipphone:h(e.ip_phone),issecurity:C(e.is_security),nickname:h(e.nick_name),oldaccount:h(e.old_account),shortphone:h(e.short_phone),voip:h(e.voip),modifytime:h(e.modify_time),espacenumber:h(e.espacenumber)}}catch(e){return l.error("convertContact2SqLite",{e:e.toJSON()}),{}}}),y=(t.convertContact2SqLiteList=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=m(e);t.push(r)}),t},t.convertGroupMemberList2SQLite=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=y(e);t.push(r)}),t},t.convertGroupMember2SQLite=function(e){var t={id:C(e.id),groupid:e.group_id,account:isNullOrEmpty(e.account)?"":e.account,membername:isNullOrEmpty(e.name)?"":e.name,memberstaffid:C(e.staffid),flag:C(e.flag),groupname:h(e.groupname),qpinyin:h(e.q_pin_yin)};return t.qpinyin||(t.qpinyin=window.pinyinUtil.getPinyin(t.membername).toUpperCase()),t}),v=(t.convertContactGroupList2SQLite=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=v(e);t.push(r)}),t},t.convertContactGroup2SQLite=function(e){return{id:C(e.id),groupid:e.group_id.toString(),groupindex:e.index,name:e.name,state:e.state}}),E=(t.convertContactGroupMemberList2SQLite=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=E(e);t.push(r)}),t},t.convertContactGroupMember2SQLite=function(e){return{id:C(e.id),groupid:h(e.group_id).toString(),contactid:h(e.contact_id).toString(),state:e.state}}),O=(t.convertGroupList2SQLite=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=O(e);t.push(r)}),t},t.convertGroup2SQLite=function(e){try{var t=(0,o.default)({},e),r={};isNullOrEmpty(t.is_init_group_name)||(r.is_init_group_name=t.is_init_group_name),isNullOrEmpty(t.sync_member_time)||(r.mtime=t.sync_member_time),isNullOrEmpty(t.single_file_space)||(r.singlefilespace=t.single_file_space);var n=(0,c.default)(r);return{id:C(t.id),groupid:t.group_id,group_groupid:t.group_id,capacity:t.capacity,name:t.name,enname:"",owner:t.owner,desc:t.desc,grouptype:t.group_type,joinflag:t.auto_join_flag,manifesto:t.manifesto,msgpolicytype:t.msg_policy_type,state:parseInt(t.state),singlefilespace:0,settop:0,orderby:0,timestamp:"",isfixed:C(t.fix_discuss),exparams:n}}catch(e){return l.error("convertGroup2SQLite",{e:e.toJSON()}),null}}),b=function(e){var t=(0,o.default)({},e);return t.file_deal_type===constant.FILE_DEAL_TYPE.UPLOAD?t.is_uploaded:t.file_deal_type===constant.FILE_DEAL_TYPE.DOWNLOAD||t.file_deal_type===constant.FILE_DEAL_TYPE.RE_DOWNLOAD?t.is_downloaded:t.file_deal_type===constant.FILE_DEAL_TYPE.SEND?t.is_sent:t.file_deal_type===constant.FILE_DEAL_TYPE.RECEIVE||t.file_deal_type===constant.FILE_DEAL_TYPE.RE_RECEIVE?t.is_received:null},h=function(e){return isNullOrEmpty(e)?"":"string"!=typeof e?e.toString():e},C=function(e){return isNullOrEmpty(e)?0:parseInt(e)},R=(t.convertCallRecordList2Data=function(e){var t=[];return e=[].concat((0,u.default)(e)),e.forEach(function(e){var r=R(e);t.push(r)}),t},t.convertCallRecord2Data=function(e){try{var t=(0,o.default)({},e),r={};isNullOrEmpty(t.isCallSuccess)||(r.isCallSuccess=t.isCallSuccess),isNullOrEmpty(t.callUserName)||(r.callUserName=t.callUserName),isNullOrEmpty(t.isVideo)||(r.isVideo=t.isVideo),isNullOrEmpty(t.contact_id)||(r.contact_id=t.contact_id);var n=(0,c.default)(r);return{id:C(t.id),peeraccount:h(t.peeraccount),iscallout:t.iscallout,callernumber:h(t.callernumber),calleenumber:h(t.calleenumber),confid:h(t.confid),confpasscode:h(t.confpasscode),confmembers:t.confmembers,groupid:h(t.groupid),starttime:t.starttime,callstate:t.callstate,calltype:t.calltype,duration:t.duration,exparams:n}}catch(e){return l.error("convertCallRecord2Data",{e:e.toJSON()}),null}});t.convertConfRecord2Data=function(e){try{var t=(0,o.default)({},e),r={};isNullOrEmpty(e.media_type)||(r.mtype=e.media_type.toString()),isNullOrEmpty(e.record_type)||(r.rtype=e.record_type),isNullOrEmpty(e.scheduser_name)||(r.sname=e.scheduser_name),isNullOrEmpty(e.scheduser_number)||(r.snum=e.scheduser_number),isNullOrEmpty(e.isInPast)||(r.past=e.isInPast),isNullOrEmpty(e.conf_subject)||(r.subj=e.conf_subject),isNullOrEmpty(e.cycle_conf_id)||(r.ccid=e.cycle_conf_id);var n=(0,c.default)(r),a={id:0,peeraccount:"",iscallout:0,callernumber:"",calleenumber:"",callstate:0,calltype:0,confid:h(t.conf_id),confpasscode:h(t.general_pwd),confmembers:isNullOrEmpty(t.confmembers)?"":t.confmembers,groupid:h(t.groupid),starttime:C(t.starttime),duration:C(t.duration),exparams:n};return a.duration>2147483646&&(a.duration=2147483646),a}catch(e){return l.error("convertConfRecord2Data",{e:e.toJSON()}),null}}},1143:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertCallRecord2JsList=t.convertContactGroupMember2JsList=t.convertContactGroup2JsList=t.convertGroupInfo2JsList=t.convertGroupMember2JsList=t.convertContact2JsList=t.convertRecent2JsList=t.convertMessage2JsList=t.convertScreenShot2JsList=t.convertFile2JsList=void 0;var a=r(3),u=n(a),i=r(103),c=n(i),s=r(1),o=n(s),l=r(2),p=n(l),d=r(106),f=n(d),_=r(866),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),y=window.Logger("service")("DB/sqLite/convert2Js"),v=(t.convertFile2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(v(e))}),t},function(e){try{var t={id:e.id,file_handle:e.filehandle,file_deal_type:e.filedealtype,message_server_chat_id_str:e.servermessageid,recent_id:e.convautoid,recent_owner:e.convid,file_real_save_name:e.filerealname,file_real_save_path:e.filerealpath,file_name:e.filename,file_path:e.filepath,is_p2p:e.isp2p,file_size:e.filesize,um_url:e.umurl,time_stamp:parseInt(e.timestamp),um_plain_access_code:e.umaccesscode,message_id:e.recordid,is_quote:e.isquote,file_type:e.filetype,exparams:e.exparams};if(!isNullOrEmpty(e.exparams)){var r=JSON.parse(e.exparams);t.width=r.width||0,t.height=r.height||0,t.duration=r.duration||0}return t=A(t,e.isdownloaded)}catch(e){y.error("convertFile2Js",{e:e.toJSON()})}}),E=(t.convertScreenShot2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(E(e))}),t},function(e){try{var t={id:e.id,file_handle:e.filehandle,file_deal_type:e.filedealtype,message_server_chat_id_str:e.servermessageid,recent_id:e.convautoid,recent_owner:e.convid,file_real_save_name:e.filerealname,file_real_save_path:e.filerealpath,file_name:e.filename,file_path:e.filepath,um_url:e.umurl,time_stamp:parseInt(e.timestamp),um_plain_access_code:e.umaccesscode,message_id:e.recordid,is_quote:e.isquote,height:parseInt(e.height),width:parseInt(e.width)};return t=A(t,e.isdownloaded)}catch(e){y.error("convertScreenShot2Js",{e:e.toJSON()})}}),O=(t.convertMessage2JsList=function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t=[].concat((0,f.default)(t)),n=0;case 3:if(!(n<t.length)){e.next=12;break}return a=t[n],e.next=7,O(a);case 7:a=e.sent,r.push(a);case 9:n++,e.next=3;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a,u,i,s,l,p,d,f,_;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=(0,c.default)({},t),n=r.filelist,a=[],u=constant.SEND_STATUS.success,i=void 0,s=JSON.parse(r.quote),isNullOrEmpty(s.status)||(u=s.status),i=parseInt(s.is_dealed_apply),isNullOrEmpty(n)){e.next=12;break}coreCommon.isZipStr(n)&&(n=coreCommon.unZip(n)),n=n.replace(/\\\\/g,"/"),a=JSON.parse(n),e.next=17;break;case 12:if(!coreIm.hasScreenShot(r.mediatype)){e.next=17;break}return y.debug("convertMessage2Js press 查询截图表"),e.next=16,m.queryScreenShotList({message_server_chat_id_str:r.servermessageid});case 16:a=e.sent;case 17:if(l=r.showhtml,p=r.team_notify_is_read,isNullOrEmpty(l)||coreCommon.isZipStr(l)&&(l=coreCommon.unZip(l)),d={},1!==s.has_quote){e.next=42;break}if(s.server_chat_id_str!==r.servermessageid){e.next=26;break}y.info("convertMessage2Js 引用消息id与元消息相同，异常，不处理"),e.next=42;break;case 26:if(isNullOrEmpty(s.server_chat_id_str)){e.next=32;break}return e.next=29,m.queryMessage({server_chat_id_str:s.server_chat_id_str});case 29:d=e.sent,e.next=42;break;case 32:if(isNullOrEmpty(s.client_chat_id)){e.next=38;break}return e.next=35,m.queryMessage({client_chat_id:s.client_chat_id});case 35:d=e.sent,e.next=42;break;case 38:if(isNullOrEmpty(s.id)){e.next=42;break}return e.next=41,m.queryMessage({id:s.id});case 41:d=e.sent;case 42:if(f={id:r.recordid,recent_id:r.convautoid,recent_owner:r.convid,server_chat_id_str:r.servermessageid,client_chat_id:parseInt(r.clientmessageid),chat_type:r.chattype,content:r.content,content_type:r.contenttype,deliver_time:parseInt(r.delivertime),group_id:r.groupid,group_name:r.groupname,name:r.peername,native_name:r.peernativename,nick_name:s.nick_name,origin:r.originaccount,target:r.targetaccount,show_html:l,team_notify_is_read:p,show_text:r.showtext,source_flag:r.sourceflag,is_read:r.isread,media_type:r.mediatype,time_stamp:parseInt(r.timestamp),utc_stamp:parseInt(r.utcstamp),is_delete:r.isdelete,file_list:a,quote:d,is_quote:s.is_quote,card_type:s.cardtype,status:r.status,send_status:u,is_dealed_apply:i},!(isNullOrEmpty(f.name)&&isNullOrEmpty(f.native_name)&&isNullOrEmpty(f.nick_name))){e.next=50;break}return e.next=46,coreContact.getContactByAccount(f.origin);case 46:_=e.sent,f.name=_.name,f.native_name=_.native_name,f.nick_name=_.nick_name;case 50:return e.abrupt("return",f);case 53:return e.prev=53,e.t0=e.catch(0),y.error("convertMessage2Js",e.t0.toString()),e.abrupt("return",{});case 57:case"end":return e.stop()}},e,void 0,[[0,53]])}));return function(t){return e.apply(this,arguments)}}()),b=(t.convertRecent2JsList=function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a,u,i,c,s,l,p,d,_,v,E;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,showDealTime("convertRecent2JsList 处理基本信息 Pre"),r=[],n=[].concat((0,f.default)(t)),a=[],u=[],i=[],c={},s={},l={},p=n.length-1;case 4:if(!(p>-1)){e.next=32;break}return d=n[p],r[p]=b(d),_={},isNullOrEmpty(r[p].exparams)||(_=JSON.parse(r[p].exparams)),isNullOrEmpty(d.convid)?coreIm.isGroup(d.convtype)?(r[p].owner=d.groupid,"1"!==_.is_disable&&u.push(r[p].owner),s[r[p].owner]=p,r[p].group={}):(r[p].owner=d.account||d.contactid,a.push(r[p].owner),c[r[p].owner]=p,r[p].contact={}):coreIm.isGroup(d.convtype)?("1"!==_.is_disable&&u.push(r[p].owner),s[r[p].owner]=p,r[p].group={}):(a.push(r[p].owner),c[r[p].owner]=p,r[p].contact={}),e.next=12,T(d,r[p]);case 12:if(r[p]=e.sent,isNullOrEmpty(d.lastservermessageid)){e.next=18;break}l[d.lastservermessageid]=p,i.push(d.lastservermessageid),e.next=29;break;case 18:if(!(d.lastmessagerecordid>0)){e.next=25;break}return e.next=21,m.queryMessage({id:d.lastmessagerecordid});case 21:v=e.sent,r[p].last_message=v,e.next=29;break;case 25:return e.next=27,m.limitMessageListByNum({recent_owner:r[p].owner,utc_stamp:9999999999999},!0,1);case 27:E=e.sent,isNullOrEmpty(E)||(r[p].last_message=E[0]);case 29:p--,e.next=4;break;case 32:return e.next=34,h(a,c,u,s,i,l,r);case 34:return r=e.sent,e.abrupt("return",r);case 38:return e.prev=38,e.t0=e.catch(0),y.error("convertRecent2JsList",{e:e.t0.toJSON()}),e.abrupt("return",[]);case 42:case"end":return e.stop()}},e,void 0,[[0,38]])}));return function(t){return e.apply(this,arguments)}}(),function(e){var t=coreSetting.checkIsMuteNotify(e.convid);return{id:e.id,chat_type:e.convtype,unread_num:0,set_unread_num:0,time_stamp:parseInt(e.timestamp),stick_on_top:e.stickontop,account:e.account,group_id:e.groupid,contact_id:e.contactid,isMute:t,owner:e.convid,is_delete:e.isdelete||constant.IS_DELETE.NO,last_message_server_chat_id_str:e.lastservermessageid,team_notify_is_read:e.teamnotifyisread,is_disable:!1,exparams:e.exparams,messageSign:[]}}),h=function(){var e=(0,p.default)(o.default.mark(function e(t,r,n,a,u,i,c){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=4;break}return e.next=3,R(t,r,c);case 3:c=e.sent;case 4:if(!(n.length>0)){e.next=8;break}return e.next=7,L(n,a,c);case 7:c=e.sent;case 8:if(!(u.length>0)){e.next=12;break}return e.next=11,g(u,i,c);case 11:c=e.sent;case 12:return c=C(c),e.abrupt("return",c);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,u,i,c){return e.apply(this,arguments)}}(),C=function(e){for(var t=0;t<e.length;t++){if(!isNullOrEmpty(e[t].exparams)){var r=JSON.parse(e[t].exparams);"1"===r.is_disable&&(e[t].is_disable=!0),isNullOrEmpty(r.sign)||(e[t].messageSign=r.sign),isNullOrEmpty(r.unreadnum)||(e[t].set_unread_num=r.unreadnum),isNullOrEmpty(r.name)||(e[t].show_name=r.name),isNullOrEmpty(r.groupname)||(e[t].group_name=r.groupname),isNullOrEmpty(r.unread_group_notify_num)||(e[t].unread_group_notify_num=r.unread_group_notify_num)}coreIm.isShowRecent(e[t])?e[t].is_delete=constant.IS_DELETE.NO:e[t].is_delete=constant.IS_DELETE.YES}return e},R=function(){var e=(0,p.default)(o.default.mark(function e(t,r,n){var a,u,i,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.queryContactList({all:"",accountlist:t.join(",")});case 2:if(a=e.sent,a.length>0)for(u=0;u<a.length;++u)i=a[u],c=r[i.account],isNullOrEmpty(c)||(n[c].contact=i);return e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),L=function(){var e=(0,p.default)(o.default.mark(function e(t,r,n){var a,u,i,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.queryGroupListByIdList(t.join(","));case 2:if(a=e.sent,a.length>0)for(u=0;u<a.length;++u)i=a[u],isNullOrEmpty(i)||(c=r[i.group_id],isNullOrEmpty(c)||(n[c].group=i));return e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(o.default.mark(function e(t,r,n){var a,i,c,s,l,p,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],i=[],c=t.splitByNum(constant.AppConfig.IM.maxOnceQueryMessageNum),c.forEach(function(e){i.push(m.queryMessageList({server_chat_id_str:e.join(",")}))}),e.next=6,u.default.all(i);case 6:if(s=e.sent,s.forEach(function(e){a=a.concat(e)}),a.length>0)for(l=0;l<a.length;++l)p=a[l],d=r[p.server_chat_id_str],isNullOrEmpty(d)||(n[d].last_message=p);return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,p.default)(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isdelete===constant.IS_DELETE.YES?r.is_delete=constant.IS_DELETE.YES:r.is_delete=constant.IS_DELETE.NO,!isNullOrEmpty(r.owner)){e.next=10;break}if(!isNullOrEmpty(t.contactid)){e.next=9;break}return e.next=5,m.queryContact({contact_id:t.contactid});case 5:n=e.sent,r.contact=n,e.next=10;break;case 9:y.error("queryRecentList no support param");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),x=(t.convertContact2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(x(e))}),t},function(e){try{return{id:e.id,staff_id:e.staffid,account:e.account,etag:e.etag,contact_id:parseInt(e.contactid),name:e.name,q_pin_yin:e.qpinyin,gender:e.gender,mobile:e.mobilephone,office_phone:e.officephone,office_phone2:e.officephone2,other_phone:e.otherphone,fax:e.fax,email:e.email,postcode:e.zip,address:e.address,title:e.title,dept_name:e.deptname,image_id:e.imageid,signature:e.signature,website:e.website,bind_no:e.bindno,native_name:e.nativename,staff_no:e.staffno,crop_name:e.corpname,dept_id:e.deptid,dept_name_cn:e.deptnamecn.replace(/\*/g,"-"),dept_name_en:e.deptnameen.replace(/\*/g,"-"),desc:e.desc,foreign_name:e.foreignname,im_no:e.imno,image_sync_time:e.imagesynctime,ip_phone:e.ipphone,is_security:e.issecurity,nick_name:e.nickname,old_account:e.oldaccount,short_phone:e.shortphone,voip:e.voip,modify_time:e.modifytime,home_phone:e.homephone,other_phone2:e.otherphone2,espacenumber:e.espacenumber,exparam:e.exparam}}catch(e){y.error("convertContact2Js",{e:e.toJSON()})}}),S=(t.convertGroupMember2JsList=function(e,t){var r=[];e=[].concat((0,f.default)(e)),e.forEach(function(e){r.push(S(e))}),r.sort(function(e,t){return e.q_pin_yin===t.q_pin_yin?0:e.q_pin_yin<t.q_pin_yin?-1:1});var n=r.findIndex(function(e){return e.account===t});if(n>-1){var a=r.splice(n,1);r.unshift(a[0])}return r},function(e){try{var t={id:e.id,group_id:e.groupid,name:e.membername,staffid:e.memberstaffid,account:e.account,flag:e.flag,groupname:e.groupname,q_pin_yin:e.qpinyin};return t.q_pin_yin||(t.q_pin_yin=window.pinyinUtil.getPinyin(t.name).toUpperCase()),t}catch(e){y.error("convertGroupMember2Js",{e:e.toJSON()})}}),k=(t.convertGroupInfo2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){var r=k(e);t.push(r)}),t.sort(function(e,t){return e.q_pin_yin<t.q_pin_yin?-1:1})},function(e){try{var t={id:e.id,group_id:e.groupid,capacity:e.capacity,name:e.name,owner:e.owner,desc:e.desc,group_type:e.grouptype,auto_join_flag:e.joinflag,exparams:e.exparams,manifesto:e.manifesto,msg_policy_type:e.msgpolicytype,state:e.state.toString(),single_file_space:e.singlefilespace,fix_discuss:e.isfixed,sync_member_time:""};if(!isNullOrEmpty(t.exparams)){var r=JSON.parse(t.exparams);isNullOrEmpty(r.is_init_group_name)||(t.is_init_group_name=r.is_init_group_name),isNullOrEmpty(r.mtime)||(t.sync_member_time=r.mtime),isNullOrEmpty(r.singlefilespace)||(t.single_file_space=r.singlefilespace)}return t}catch(e){return y.error("convertGroupInfo2Js",{e:e.toJSON()}),{}}}),P=(t.convertContactGroup2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(P(e))}),t},function(e){try{return{id:e.id,group_id:parseInt(e.groupid),index:e.groupindex,name:e.name,state:e.state}}catch(e){return y.error("convertGroupInfo2Js",{e:e.toJSON()}),{}}}),N=(t.convertContactGroupMember2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(N(e))}),t},function(e){try{return{id:e.id,group_id:parseInt(e.groupid),contact_id:parseInt(e.contactid),state:e.state}}catch(e){return y.error("convertGroupInfo2Js",{e:e.toJSON()}),{}}}),A=function(e,t){var r=0,n=void 0;return e.file_deal_type>10?(r=parseInt(e.file_deal_type/10),n=e.file_deal_type-10*r):n=e.file_deal_type,n===constant.FILE_DEAL_TYPE.UPLOAD?e.is_uploaded=t:n===constant.FILE_DEAL_TYPE.DOWNLOAD||n===constant.FILE_DEAL_TYPE.RE_DOWNLOAD?e.is_downloaded=t:n===constant.FILE_DEAL_TYPE.SEND?e.is_sent=t:n!==constant.FILE_DEAL_TYPE.RECEIVE&&n!==constant.FILE_DEAL_TYPE.RE_RECEIVE||(e.is_received=t),e.file_deal_type=n,e.file_type=r,0===r&&(e.file_type=constant.FILE_TYPE.NORMAL),e},w=(t.convertCallRecord2JsList=function(e){var t=[];return e=[].concat((0,f.default)(e)),e.forEach(function(e){t.push(w(e))}),t},function(e){try{var t={id:e.id,peeraccount:e.peeraccount,iscallout:e.iscallout,callernumber:e.callernumber,calleenumber:e.calleenumber,confid:e.confid,confpasscode:e.confpasscode,confmembers:e.confmembers,groupid:e.groupid,starttime:e.starttime,callstate:e.callstate,calltype:e.calltype,duration:e.duration,exparams:e.exparams};if(!isNullOrEmpty(t.exparams)){var r=JSON.parse(t.exparams);isNullOrEmpty(r.isCallSuccess)||(t.isCallSuccess=r.isCallSuccess),isNullOrEmpty(r.callUserName)||(t.callUserName=r.callUserName),isNullOrEmpty(r.isVideo)||(t.isVideo=r.isVideo),isNullOrEmpty(r.contact_id)||(t.contact_id=r.contact_id)}return t}catch(e){return y.error("convertCallRecord2Js",{e:e.toJSON()}),{}}})},126:function(e,t,r){var n=r(8),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},133:function(e,t,r){e.exports={default:r(149),__esModule:!0}},149:function(e,t,r){r(23),r(150),e.exports=r(8).Array.from},150:function(e,t,r){"use strict";var n=r(11),a=r(10),u=r(111),i=r(33),c=r(34),s=r(28),o=r(151),l=r(27);a(a.S+a.F*!r(35)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,p,d=u(e),f="function"==typeof this?this:Array,_=arguments.length,m=_>1?arguments[1]:void 0,y=void 0!==m,v=0,E=l(d);if(y&&(m=n(m,_>2?arguments[2]:void 0,2)),void 0==E||f==Array&&c(E))for(t=s(d.length),r=new f(t);t>v;v++)o(r,v,y?m(d[v],v):d[v]);else for(p=E.call(d),r=new f;!(a=p.next()).done;v++)o(r,v,y?i(p,m,[a.value,v],!0):a.value);return r.length=v,r}})},151:function(e,t,r){"use strict";var n=r(26),a=r(152);e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},152:function(e,t,r){e.exports=r(0)(63)},1782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.examineEncryptFile=t.initDBPath=t.saveDBKeySalt=t.queryDBKeySalt=t.queryDiscSerialNumber=t.queryCallRecord=t.queryAllCallRecord=t.queryCallRecordList=t.bulkPutCallRecord=t.saveCallRecord=t.deleteUserTrack=t.queryUserTrackList=t.saveUserTrack=t.queryUserConfig=t.deleteUserConfig=t.queryUserConfigList=t.saveUserConfigList=t.saveUserConfig=t.bulkPutRecent=t.bulkPutMessage=t.bulkPutScreenShot=t.bulkPutFile=t.deleteContact=t.deleteGroup=t.deleteContactMemberGroup=t.deleteContactGroup=t.queryContactByPhonenumberAccurate=t.queryContactByNumber=t.queryFileBySearchText=t.queryMessageBySearchText=t.queryGroupBySearchText=t.queryContactBySearchText=t.queryAllRecent=t.queryAllGroupTypeMemberList=t.queryAllGroupTypeList=t.queryAllGroup=t.queryGroupMemberList=t.bulkPutGroupTypeMemberList=t.bulkPutGroupTypeList=t.deleteGroupMember=t.saveGroupMember=t.queryGroupMember=t.bulkPutGroupMember=t.bulkPutGroup=t.queryAllContactMemberGroupList=t.queryAllContactGroupList=t.queryAllContact=t.limitMessageListByNum=t.limitMessageList=t.queryScreenShotList=t.queryScreenShot=t.saveScreenShot=t.deleteRecent=t.queryRecentList=t.queryRecent=t.saveRecent=t.queryMessageList=t.deleteMessage=t.queryMessage=t.saveMessage=t.queryGroupTypeMemberList=t.bulkPutGroupTypeMember=t.queryGroupTypeList=t.bulkPutGroupType=t.queryGroupListByIdList=t.queryGroupList=t.queryGroup=t.saveGroup=t.queryFileList=t.queryFile=t.saveFile=t.bulkPutLoginSetting=t.queryContactMemberGroupList=t.bulkPutContactMemberGroup=t.saveContactMemberGroup=t.queryContactGroupList=t.bulkPutContactGroup=t.saveContactGroup=t.queryContactByContactId=t.queryContactList=t.queryContact=t.bulkPutContact=t.saveContact=t.queryAllLoginSetting=t.queryLoginSettingList=t.queryLoginSetting=t.saveLoginSetting=t.cleanEncryptValue=t.queryEncryptValue=t.saveEncryptValue=t.queryAllLoginRecord=t.deleteLoginRecord=t.queryLoginRecordList=t.queryLoginRecord=t.saveLoginRecord=t.initSQLitePrivateDB=void 0;var n=r(866),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),u=a;t.initSQLitePrivateDB=u.initSQLitePrivateDB,t.saveLoginRecord=u.saveLoginRecord,t.queryLoginRecord=u.queryLoginRecord,t.queryLoginRecordList=u.queryLoginRecordList,t.deleteLoginRecord=u.deleteLoginRecord,t.queryAllLoginRecord=u.queryAllLoginRecord,t.saveEncryptValue=u.saveEncryptValue,t.queryEncryptValue=u.queryEncryptValue,t.cleanEncryptValue=u.cleanEncryptValue,t.saveLoginSetting=u.saveLoginSetting,t.queryLoginSetting=u.queryLoginSetting,t.queryLoginSettingList=u.queryLoginSettingList,t.queryAllLoginSetting=u.queryAllLoginSetting,t.saveContact=u.saveContact,t.bulkPutContact=u.bulkPutContact,t.queryContact=u.queryContact,t.queryContactList=u.queryContactList,t.queryContactByContactId=u.queryContactByContactId,t.saveContactGroup=u.saveContactGroup,t.bulkPutContactGroup=u.bulkPutContactGroup,t.queryContactGroupList=u.queryContactGroupList,t.saveContactMemberGroup=u.saveContactMemberGroup,t.bulkPutContactMemberGroup=u.bulkPutContactMemberGroup,t.queryContactMemberGroupList=u.queryContactMemberGroupList,t.bulkPutLoginSetting=u.bulkPutLoginSetting,t.saveFile=u.saveFile,t.queryFile=u.queryFile,t.queryFileList=u.queryFileList,t.saveGroup=u.saveGroup,t.queryGroup=u.queryGroup,t.queryGroupList=u.queryGroupList,t.queryGroupListByIdList=u.queryGroupListByIdList,t.bulkPutGroupType=u.bulkPutGroupType,t.queryGroupTypeList=u.queryGroupTypeList,t.bulkPutGroupTypeMember=u.bulkPutGroupTypeMember,t.queryGroupTypeMemberList=u.queryGroupTypeMemberList,t.saveMessage=u.saveMessage,t.queryMessage=u.queryMessage,t.deleteMessage=u.deleteMessage,t.queryMessageList=u.queryMessageList,t.saveRecent=u.saveRecent,t.queryRecent=u.queryRecent,t.queryRecentList=u.queryRecentList,t.deleteRecent=u.deleteRecent,t.saveScreenShot=u.saveScreenShot,t.queryScreenShot=u.queryScreenShot,t.queryScreenShotList=u.queryScreenShotList,t.limitMessageList=u.limitMessageList,t.limitMessageListByNum=u.limitMessageListByNum,t.queryAllContact=u.queryAllContact,t.queryAllContactGroupList=u.queryAllContactGroupList,t.queryAllContactMemberGroupList=u.queryAllContactMemberGroupList,t.bulkPutGroup=u.bulkPutGroup,t.bulkPutGroupMember=u.bulkPutGroupMember,t.queryGroupMember=u.queryGroupMember,t.saveGroupMember=u.saveGroupMember,t.deleteGroupMember=u.deleteGroupMember,t.bulkPutGroupTypeList=u.bulkPutGroupTypeList,t.bulkPutGroupTypeMemberList=u.bulkPutGroupTypeMemberList,t.queryGroupMemberList=u.queryGroupMemberList,t.queryAllGroup=u.queryAllGroup,t.queryAllGroupTypeList=u.queryAllGroupTypeList,t.queryAllGroupTypeMemberList=u.queryAllGroupTypeMemberList,t.queryAllRecent=u.queryAllRecent,t.queryContactBySearchText=u.queryContactBySearchText,t.queryGroupBySearchText=u.queryGroupBySearchText,t.queryMessageBySearchText=u.queryMessageBySearchText,t.queryFileBySearchText=u.queryFileBySearchText,t.queryContactByNumber=u.queryContactByNumber,t.queryContactByPhonenumberAccurate=u.queryContactByPhonenumberAccurate,t.deleteContactGroup=u.deleteContactGroup,t.deleteContactMemberGroup=u.deleteContactMemberGroup,t.deleteGroup=u.deleteGroup,t.deleteContact=u.deleteContact,t.bulkPutFile=u.bulkPutFile,t.bulkPutScreenShot=u.bulkPutScreenShot,t.bulkPutMessage=u.bulkPutMessage,t.bulkPutRecent=u.bulkPutRecent,t.saveUserConfig=u.saveUserConfig,t.saveUserConfigList=u.saveUserConfigList,t.queryUserConfigList=u.queryUserConfigList,t.deleteUserConfig=u.deleteUserConfig,t.queryUserConfig=u.queryUserConfig,t.saveUserTrack=u.saveUserTrack,t.queryUserTrackList=u.queryUserTrackList,t.deleteUserTrack=u.deleteusertrack,t.saveCallRecord=u.saveCallRecord,t.bulkPutCallRecord=u.bulkPutCallRecord,t.queryCallRecordList=u.queryCallRecordList,t.queryAllCallRecord=u.queryAllCallRecord,t.queryCallRecord=u.queryCallRecord,t.queryDiscSerialNumber=u.queryDiscSerialNumber,t.queryDBKeySalt=u.queryDBKeySalt,t.saveDBKeySalt=u.saveDBKeySalt,t.initDBPath=u.initDBPath,t.examineEncryptFile=u.examineEncryptFile},1783:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initPublicDbAtomic=void 0;var a=r(1),u=n(a),i=r(2),c=n(i),s=r(866),o=window.Logger("service")("DB/db"),l=function(){var e=(0,c.default)(u.default.mark(function e(){var t,r,n,a,i,c,l,p,d,f,_,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return o.info("[IT-Meeting] no need to init DB"),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 3:return o.info("initPublicDB start"),e.next=6,(0,s.uninitSQliteDB)();case 6:return e.next=8,coreSecurity.startKmc();case 8:return e.next=10,(0,s.initDBPath)(window.APP_DATA_PATH);case 10:return e.next=12,(0,s.queryDBKeySalt)();case 12:if(t=e.sent,r=!1,!t||""===t){e.next=49;break}if(!(t.length>60)){e.next=37;break}if(n=t.split("|"),a="",i=n[0],2!==n.length){e.next=34;break}return a=n[1],e.next=23,coreSecurity.decryptKMC(i);case 23:if(!((c=e.sent)&&c.param&&c.param.PlainText&&""!==c.param.PlainText)){e.next=31;break}return o.info("[decrypt] localrandom success "),e.next=28,(0,s.saveDBKeySalt)(c.param.PlainText,a,t);case 28:r=!0,e.next=32;break;case 31:o.info("[decrypt] localrandom fail");case 32:e.next=35;break;case 34:o.info("local random length is not 2");case 35:e.next=49;break;case 37:if(!(t.length<60&&t.length>0)){e.next=48;break}return o.info("local random length less than 60"),e.next=41,coreSecurity.encryptKMC(t);case 41:return l=e.sent,p="",e.next=45,(0,s.saveDBKeySalt)(t,p,l.param.CiperText);case 45:r=!0,e.next=49;break;case 48:o.info("local random is empty");case 49:if(!1!==r){e.next=63;break}return e.next=52,coreSecurity.getRealRandom(16);case 52:return d=e.sent,e.next=55,coreSecurity.encryptKMC(d);case 55:return f=e.sent,e.next=58,coreSecurity.getRealRandom(16);case 58:if(_=e.sent,o.info("initial dbrandwom "),!(f&&f.param&&f.param.CiperText)){e.next=63;break}return e.next=63,(0,s.saveDBKeySalt)(d,_,f.param.CiperText+"|"+_);case 63:return e.next=65,(0,s.initSQLitePublicDB)(window.APP_DATA_PATH);case 65:return m=e.sent,o.info("node env = production"),""===m||void 0!==m.result&&0===m.result||(o.info("check[Encrypt] fail : "+m.result),window.alert(""+language.INVALID_ENCRYPT_FILE_FOUND_CONTENT).then(function(e){appService.exitApp()})),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 69:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p=new coreCommon.AtomicAction("initPublicDb",l);t.initPublicDbAtomic=p},82:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwDbSdk=void 0;var u=r(98),i=a(u),c=r(4),s=a(c),o=r(1782),l=n(o),p=r(1140),d=n(p),f=r(1141),_=n(f),m=r(1142),y=n(m),v=r(1143),E=n(v),O=r(866),b=n(O),h=r(1139),C=a(h);t.HwDbSdk=function e(){(0,s.default)(this,e),(0,i.default)(this,l),(0,i.default)(this,d),(0,i.default)(this,_),(0,i.default)(this,y),(0,i.default)(this,E),(0,i.default)(this,b),this.HWTupSqlite=C.default}},866:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initSQLitePublicDB=t.saveDBKeySalt=void 0,t.initDBPath=t.queryDBKeySalt=t.examineEncryptFile=t.queryDiscSerialNumber=t.queryCallRecordList=t.queryAllCallRecord=t.queryAllConfRecord=t.queryCallRecord=t.delcallrecord=t.bulkPutCallRecord=t.saveConfRecord=t.saveCallRecord=t.deleteusertrack=t.queryUserTrackList=t.saveUserTrack=t.limitMessageListByNum=t.limitMessageList=t.queryMessageList=t.updateMessage=t.deleteMessage=t.queryMessageBySearchText=t.queryMessage=t.bulkPutMessage=t.saveMessage=t.queryRecentList=t.queryRecent=t.queryAllRecent=t.deleteRecent=t.bulkPutRecent=t.saveRecent=t.queryScreenShotList=t.queryScreenShot=t.bulkPutScreenShot=t.saveScreenShot=t.queryFileList=t.queryFileBySearchText=t.queryFile=t.bulkPutFile=t.saveFile=t.queryAllGroupTypeMemberList=t.queryGroupTypeMemberList=t.bulkPutGroupTypeMemberList=t.bulkPutGroupTypeMember=t.queryAllGroupTypeList=t.queryGroupTypeList=t.bulkPutGroupTypeList=t.bulkPutGroupType=t.queryGroupMemberList=t.deleteGroupMember=t.saveGroupMember=t.bulkPutGroupMember=t.queryGroupList=t.queryGroup=t.queryGroupBySearchText=t.queryGroupListByIdList=t.queryAllGroup=t.deleteGroup=t.saveGroup=t.bulkPutGroup=t.deleteContact=t.queryContactList=t.queryContactByPhonenumberAccurate=t.queryContactByNumberAccurate=t.queryContactByContactId=t.queryContactByNumber=t.queryContactBySearchText=t.queryContact=t.queryAllContact=t.bulkPutContact=t.saveContact=t.deleteContactMemberGroup=t.queryAllContactMemberGroupList=t.queryContactMemberGroupList=t.saveContactMemberGroup=t.bulkPutContactMemberGroup=t.deleteContactGroup=t.queryAllContactGroupList=t.queryContactGroupList=t.saveContactGroup=t.bulkPutContactGroup=t.deleteUserConfig=t.queryUserConfigList=t.saveUserConfigList=t.saveUserConfig=t.queryUserConfig=t.queryLoginSetting=t.queryAllLoginSetting=t.queryLoginSettingList=t.saveLoginSetting=t.cleanEncryptValue=t.queryEncryptValue=t.saveEncryptValue=t.bulkPutLoginSetting=t.deleteLoginRecord=t.queryAllLoginRecord=t.queryLoginRecordList=t.queryLoginRecord=t.saveLoginRecord=t.initSQLitePrivateDB=t.uninitSQliteDB=void 0;var a=r(103),u=n(a),i=r(106),c=n(i),s=r(98),o=n(s),l=r(1),p=n(l),d=r(2),f=n(d),_=r(1139),m=n(_),y=r(1140),v=r(1141),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),O=r(1783),b=window.Logger("service")("DB/sqliteDB"),h=new Array,C=(t.uninitSQliteDB=function(){var e=(0,f.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h=new Array,b.info("resetInitSQLiteFlag"),e.next=4,new m.default;case 4:return t=e.sent,b.debug("sqliteObj",t),b.debug("window.LOG_PATH",window.LOG_PATH),e.next=9,t.init("","");case 9:b.debug(333333333),b.info("uninitSQliteDB Success");case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initSQLitePrivateDB=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==h.indexOf(t)){e.next=17;break}return e.next=3,O.initPublicDbAtomic.reset();case 3:return e.next=5,O.initPublicDbAtomic.wait();case 5:return b.info("initSQLitePrivateDB, account : "+handlePhoneNumber(t)),e.next=8,new m.default;case 8:return r=e.sent,e.next=11,r.init("1",t);case 11:return n=e.sent,b.info("initSQLitePrivateDB success"),h.push(t),e.abrupt("return",n);case 17:b.info("initSQLitePrivateDB success, already inited");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveLoginRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,B();case 6:if(!((r=e.sent)&&r.length>0)){e.next=10;break}return e.next=10,R({key:"discserialnumber",value:r});case 10:return 1!==t.isRememberPassWord&&"1"!==t.isRememberPassWord||(t.isRememberPassWord=!0),1!==t.isAutoLogin&&"1"!==t.isAutoLogin||(t.isAutoLogin=!0),e.next=14,new m.default;case 14:return n=e.sent,e.next=17,n.addlogininfo(t);case 17:if(a=e.sent,isNullOrEmpty(a)){e.next=21;break}return u=(0,o.default)({},t,{id:a.result}),e.abrupt("return",u);case 21:return e.abrupt("return",{});case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryLoginRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,C(t);case 4:if(r=e.sent,0===r.length){e.next=9;break}return e.abrupt("return",r[0]);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryLoginRecordList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c,s,o,l;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n={},!t.hasOwnProperty("all")){e.next=12;break}return e.next=9,r.querylogininfo(y.LOGININFO_TYPE.LOGININFO_ALL,"");case 9:n=e.sent,e.next=26;break;case 12:if(!t.hasOwnProperty("account")){e.next=18;break}return e.next=15,r.querylogininfo(y.LOGININFO_TYPE.LOGININFO_ACCOUNT,t.account);case 15:n=e.sent,e.next=26;break;case 18:if(!t.hasOwnProperty("display_account")){e.next=25;break}return a=t.display_account,e.next=22,r.querylogininfo(y.LOGININFO_TYPE.LOGININFO_DISPLAYACCOUNT,t.display_account);case 22:n=e.sent,e.next=26;break;case 25:b.error("queryLoginRecordList not support, by  param");case 26:if(!n||!n.param||null===n.param._logininfolist){e.next=42;break}return u=!1,e.next=30,B();case 30:if(i=e.sent,!(i.length>0)){e.next=39;break}return e.next=34,g({key:"discserialnumber"});case 34:if(c=e.sent,c&&c.value&&c.value.length>0?c.value!==i&&(u=!0):u=!1,!0!==u){e.next=39;break}return e.next=39,R({key:"discserialnumber",value:i});case 39:for(s=new Array,o=0;o<n.param._logininfolist.length;++o)l=n.param._logininfolist[o],s[o]={id:l.id,display_account:l.displayaccount,account:l.account,encryptPassword:l.userpwd,isRememberPassWord:1===l.isrememberpwd,isAutoLogin:1===l.isautologin,strUserRandom:l.userrandom},!0===u&&(s[o].isAutoLogin=!1,s[o].isRememberPassWord=!1,s[o].encryptPassword="");return e.abrupt("return",s);case 42:return e.abrupt("return",[]);case 43:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),R=(t.queryAllLoginRecord=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,C({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.deleteLoginRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("account")){e.next=10;break}return e.next=8,r.dellogininfo(y.LOGININFO_TYPE.LOGININFO_ACCOUNT,t.account);case 8:e.next=10;break;case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutLoginSetting=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=10;break}r=0;case 4:if(!(r<t.length)){e.next=10;break}return e.next=7,R(t[r]);case 7:++r,e.next=4;break;case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveEncryptValue=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info(" saveEncrptyValue key = "+t.key+"valuelen = ",t.value.length),e.next=3,new m.default;case 3:return r=e.sent,e.next=6,r.addsysconfig(t.key,t.value);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryEncryptValue=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info(" queryEncryptValue key = "+t.key),e.next=3,new m.default;case 3:return r=e.sent,n=null,e.next=7,r.querysysconfig(y.KEYVALUE_TYPE.KEYVALUE_KEY,t.key);case 7:if(!((n=e.sent)&&n.param&&null!==n.param._sysconfiglist&&n.param._sysconfiglist.length>=1)){e.next=11;break}return b.info("queryEncryptValue len = "+n.param._sysconfiglist.length+", key = "+n.param._sysconfiglist[0].strkey+", valuelen = "+n.param._sysconfiglist[0].strvalue.length),e.abrupt("return",n.param._sysconfiglist[0].strvalue);case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cleanEncryptValue=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info(" cleanEncryptValue key = "+t.key),e.next=3,new m.default;case 3:return r=e.sent,e.next=6,r.delsysconfig(y.KEYVALUE_TYPE.KEYVALUE_KEY,t.key);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveLoginSetting=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=4;break}return e.abrupt("return");case 4:if(!isNullOrEmpty(t)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,new m.default;case 8:if(r=e.sent,n=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=25;break}a=0;case 12:if(!(a<t.length)){e.next=23;break}return u=void 0,u=isNullOrEmpty(t[a])?"":isNullOrEmpty(t[a].value)?"":t[a].value.toString(),b.info(" saveLoginSetting start"),e.next=18,r.addsysconfig(t[a].key,u);case 18:n=e.sent,b.info("saveLoginSetting end");case 20:++a,e.next=12;break;case 23:e.next=32;break;case 25:return b.info(" saveLoginSetting start"),e.next=28,r.addsysconfig(t.key,t.value.toString());case 28:return n=e.sent,b.info("saveLoginSetting end"),i=(0,o.default)({},t,{id:n.result}),e.abrupt("return",i);case 32:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),L=t.queryLoginSettingList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,new m.default;case 6:if(r=e.sent,n=null,!t.hasOwnProperty("all")){e.next=14;break}return e.next=11,r.querysysconfig(y.KEYVALUE_TYPE.KEYVALUE_ALL,"");case 11:n=e.sent,e.next=21;break;case 14:if(!t.hasOwnProperty("key")){e.next=20;break}return e.next=17,r.querysysconfig(y.KEYVALUE_TYPE.KEYVALUE_KEY,t.key);case 17:n=e.sent,e.next=21;break;case 20:b.error("queryLoginSettingList not support query ");case 21:if(e.prev=21,!n||!n.param||null===n.param._sysconfiglist){e.next=26;break}for(a=new Array,u=0;u<n.param._sysconfiglist.length;++u)i=n.param._sysconfiglist[u],a[u]={id:i.id,key:i.strkey,value:i.strvalue};return e.abrupt("return",a);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(21),b.error("queryLoginSettingList error ");case 31:return e.abrupt("return",[]);case 32:case"end":return e.stop()}},e,void 0,[[21,28]])}));return function(t){return e.apply(this,arguments)}}(),g=(t.queryAllLoginSetting=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.abrupt("return",L({all:""}));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryLoginSetting=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,L(t);case 4:if(!((r=e.sent)&&"Array"===r.constructor.name&&r.length>0)){e.next=9;break}return e.abrupt("return",r[0]);case 9:return e.abrupt("return","{}");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),T=(t.queryUserConfig=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,T(t);case 4:if(r=e.sent,!isNullOrEmpty(r)){e.next=7;break}return e.abrupt("return",{});case 7:return e.abrupt("return",r[0]);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveUserConfig=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,new m.default;case 6:if(r=e.sent,n=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=20;break}a=0;case 10:if(!(a<t.length)){e.next=18;break}return e.next=13,r.adduserconfig(t[a]);case 13:n=e.sent,-1===n.result&&b.info("value is crossing!");case 15:++a,e.next=10;break;case 18:e.next=26;break;case 20:return e.next=22,r.adduserconfig(t);case 22:return n=e.sent,-1===n.result&&b.info("value is crossing!"),u=(0,o.default)({},t,{id:n.result}),e.abrupt("return",u);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveUserConfigList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,new m.default;case 6:if(r=e.sent,n=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=15;break}return e.next=11,r.adduserconfiglist(t);case 11:n=e.sent,n.result<=0&&b.info(n.result," value is crossing!"),e.next=21;break;case 15:return e.next=17,r.adduserconfig(t);case 17:return n=e.sent,-1===n.result&&b.info("value is crossing!"),a=(0,o.default)({},t,{id:n.result}),e.abrupt("return",a);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserConfigList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n={},!t.hasOwnProperty("all")){e.next=12;break}return e.next=9,r.queryuserconfig(y.KEYVALUE_TYPE.KEYVALUE_ALL,"");case 9:n=e.sent,e.next=19;break;case 12:if(!t.hasOwnProperty("key")){e.next=18;break}return e.next=15,r.queryuserconfig(y.KEYVALUE_TYPE.KEYVALUE_KEY,t.key);case 15:n=e.sent,e.next=19;break;case 18:b.error("queryUserConfigList no support param");case 19:if(null===n.param._userconfiglist){e.next=23;break}for(a=new Array,u=0;u<n.param._userconfiglist.length;++u)i=n.param._userconfiglist[u],a[u]={id:i.id,key:i.strkey,value:i.strvalue};return e.abrupt("return",a);case 23:return e.abrupt("return",[]);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),x=(t.deleteUserConfig=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("key")){e.next=10;break}return e.next=8,r.deluserconfig(y.KEYVALUE_TYPE.KEYVALUE_KEY,t.key);case 8:e.next=10;break;case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutContactGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutContactGroup 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertContactGroupList2SQLite(t),e.next=11,r.addcontactgrouplist(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveContactGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveContactGroup 空数据"),e.abrupt("return",t);case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertContactGroup2SQLite(t),e.next=11,r.addcontactgroup(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactGroupList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("all")){e.next=10;break}return e.next=9,r.querycontactgroup(y.CONTACTGROUP_TYPE.CONTACTGROUP_ALL,"");case 9:n=e.sent;case 10:if(null===n.param._groupinfolist){e.next=13;break}return a=E.convertContactGroup2JsList(n.param._groupinfolist),e.abrupt("return",a);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),S=(t.queryAllContactGroupList=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,x({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.deleteContactGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("group_id")){e.next=8;break}return e.next=8,r.delcontactgroup(y.CONTACTGROUP_TYPE.CONTACTGROUP_GROUPID,t.group_id.toString());case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutContactMemberGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutContactGroup 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertContactGroupMemberList2SQLite(t),e.next=11,r.addcontactgroupmemberlist(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveContactMemberGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveContactGroup 空数据"),e.abrupt("return",t);case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertContactGroupMember2SQLite(t),e.next=11,r.addcontactgroupmember(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactMemberGroupList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("all")){e.next=12;break}return e.next=9,r.querycontactgroupmember(y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_ALL,"");case 9:n=e.sent,e.next=19;break;case 12:if(!t.hasOwnProperty("group_id")){e.next=18;break}return e.next=15,r.querycontactgroupmember(y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_GROUPID,t.group_id.toString());case 15:n=e.sent,e.next=19;break;case 18:b.error("queryContactMemberGroupList no support param");case 19:if(null===n.param._groupmeminfolist){e.next=22;break}return a=E.convertContactGroupMember2JsList(n.param._groupmeminfolist),e.abrupt("return",a);case 22:return e.abrupt("return",[]);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),k=(t.queryAllContactMemberGroupList=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,S({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.deleteContactMemberGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("contact_id")||!t.hasOwnProperty("group_id")){e.next=14;break}return n=y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_CONTACTID_GROUPID,a=new Array,a[0]={keytype:y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_CONTACTID,match_value:t.contact_id.toString()},a[1]={keytype:y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_GROUPID,match_value:t.group_id.toString()},e.next=12,r.delcontactgroupmember(n,a,a.length);case 12:e.next=20;break;case 14:if(!t.hasOwnProperty("group_id")){e.next=20;break}return u=y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_GROUPID,i=new Array,i[0]={keytype:y.CONTACTGROUPMEMBER_TYPE.CONTACTGROUPMEM_GROUPID,match_value:t.group_id.toString()},e.next=20,r.delcontactgroupmember(u,i,i.length);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveContact=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveContact 空数据"),e.abrupt("return",{});case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertContact2SqLite(t,i),e.next=11,r.addcontact(n);case 11:return a=e.sent,u=(0,o.default)({},t,{id:a.result}),e.abrupt("return",u);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutContact=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutContact 空数据"),e.abrupt("return");case 5:return r=50,e.next=8,new m.default;case 8:n=e.sent,a=t.splitByNum(r),u=0;case 11:if(!(u<a.length)){e.next=18;break}return i=E.convertContact2SqLiteList(a[u]),e.next=15,n.addcontactlist(i);case 15:u++,e.next=11;break;case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllContact=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,P({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryContact=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,P(t);case 4:if(r=e.sent,0===r.length){e.next=7;break}return e.abrupt("return",r[0]);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),P=(t.queryContactBySearchText=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,P({searchtext:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactByNumber=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,P({phonenumber:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactByContactId=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,k({contact_id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactByNumberAccurate=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,P({phonenumber_accurate:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactByPhonenumberAccurate=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({phonenumber_accurate:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryContactList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("account")){e.next=12;break}return e.next=9,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_ACCOUNT,t.account);case 9:n=e.sent,e.next=49;break;case 12:if(!t.hasOwnProperty("phonenumber")){e.next=18;break}return e.next=15,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_PHONENUMBER,t.phonenumber);case 15:n=e.sent,e.next=49;break;case 18:if(!t.hasOwnProperty("all")){e.next=30;break}if(!t.hasOwnProperty("accountlist")){e.next=25;break}return e.next=22,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_ALL,t.accountlist);case 22:n=e.sent,e.next=28;break;case 25:return e.next=27,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_ALL,"");case 27:n=e.sent;case 28:e.next=49;break;case 30:if(!t.hasOwnProperty("searchtext")){e.next=36;break}return e.next=33,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_SEARCHGLOBAL,t.searchtext);case 33:n=e.sent,e.next=49;break;case 36:if(!t.hasOwnProperty("contact_id")){e.next=42;break}return e.next=39,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_CONTACTID,t.contact_id.toString());case 39:n=e.sent,e.next=49;break;case 42:if(!t.hasOwnProperty("phonenumber_accurate")){e.next=48;break}return e.next=45,r.querycontact(y.CONTACT_TYPE.CONTACTINFO_PHONENUMBER_ACCURATE,t.phonenumber_accurate);case 45:n=e.sent,e.next=49;break;case 48:return e.abrupt("return",[]);case 49:if(!n.param||null===n.param._contactinfolist){e.next=53;break}return a=n.param._contactinfolist,u=E.convertContact2JsList(a),e.abrupt("return",u);case 53:return e.abrupt("return",[]);case 54:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),N=(t.deleteContact=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("deleteContact data null"),e.abrupt("return",{});case 5:return e.next=7,new m.default;case 7:if(r=e.sent,!t.hasOwnProperty("all")){e.next=14;break}return e.next=11,r.delcontact(y.CONTACT_TYPE.CONTACTINFO_ALL,"");case 11:return e.abrupt("return",e.sent);case 14:if(!t.hasOwnProperty("id")){e.next=18;break}return e.next=17,r.delcontact(y.CONTACT_TYPE.CONTACTINFO_ID,t.id.toString());case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroup 空数据"),e.abrupt("return");case 5:return r=50,e.next=8,new m.default;case 8:n=e.sent,a=t.splitByNum(r),u=0;case 11:if(!(u<a.length)){e.next=18;break}return i=E.convertGroupList2SQLite(a[u]),e.next=15,n.addgrouplist(i);case 15:u++,e.next=11;break;case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveGroup 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertGroup2SQLite(t),e.next=11,r.addgroup(n);case 11:return a=e.sent,u=(0,o.default)({},t,{id:a.result}),e.abrupt("return",u);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("group_id")){e.next=9;break}return e.next=8,r.delgroup(y.GROUP_TYPE.GROUPINFO_GROUPID,t.group_id.toString());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllGroup=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,N({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryGroupListByIdList=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",N({all:"",groupidlist:t}));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryGroupBySearchText=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,N({searchtext:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryGroup=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,N(t);case 4:if(r=e.sent,0===r.length){e.next=7;break}return e.abrupt("return",r[0]);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryGroupList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("group_id")){e.next=12;break}return e.next=9,r.querygroup(y.GROUP_TYPE.GROUPINFO_GROUPID,isNullOrEmpty(t.group_id)?"":t.group_id.toString());case 9:n=e.sent,e.next=31;break;case 12:if(!t.hasOwnProperty("searchtext")){e.next=18;break}return e.next=15,r.querygroup(y.GROUP_TYPE.GROUPINFO_SEARCHGLOBAL,t.searchtext);case 15:n=e.sent,e.next=31;break;case 18:if(!t.hasOwnProperty("all")){e.next=30;break}if(!t.hasOwnProperty("groupidlist")){e.next=25;break}return e.next=22,r.querygroup(y.GROUP_TYPE.GROUPINFO_ALL,t.groupidlist);case 22:n=e.sent,e.next=28;break;case 25:return e.next=27,r.querygroup(y.GROUP_TYPE.GROUPINFO_ALL,"");case 27:n=e.sent;case 28:e.next=31;break;case 30:return e.abrupt("return",[]);case 31:if(null===n.param._groupinfolist){e.next=35;break}return a=n.param._groupinfolist,u=E.convertGroupInfo2JsList(a),e.abrupt("return",u);case 35:return e.abrupt("return",[]);case 36:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),A=(t.bulkPutGroupMember=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroupMember empty"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:r=e.sent,n=t.splitByNum(50),a=0;case 10:if(!(a<n.length)){e.next=19;break}return u=E.convertGroupMemberList2SQLite(n[a]),e.next=14,r.addgroupmemberlist(u);case 14:i=e.sent,i.result<=0&&b.error(i.result," membername value is crossing!");case 16:a++,e.next=10;break;case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveGroupMember=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveGroupMember empty"),e.abrupt("return",{});case 5:return e.next=7,new m.default;case 7:return r=e.sent,b.debug("saveGroupMember",t),t=E.convertGroupMember2SQLite(t),e.next=12,r.addgroupmember(t);case 12:return n=e.sent,-1===n.result&&b.error("memberName value is crossing!"),a=(0,o.default)({},t,{id:n.result}),e.abrupt("return",a);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteGroupMember=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.initPublicDbAtomic.wait();case 3:return e.next=5,new m.default;case 5:if(r=e.sent,!t.hasOwnProperty("group_id")||!t.hasOwnProperty("account")){e.next=15;break}return n=y.GROUPMEMBER_TYPE.GROUPMEMBER_ACCOUNT,a=new Array,a[0]={keytype:y.GROUPMEMBER_TYPE.GROUPMEMBER_GROUPID,match_value:t.group_id.toString()},a[1]={keytype:y.GROUPMEMBER_TYPE.GROUPMEMBER_ACCOUNT,match_value:t.account.toString()},e.next=13,r.delgroupmember(n,a,a.length);case 13:e.next=21;break;case 15:if(!t.hasOwnProperty("group_id")){e.next=21;break}return u=y.GROUPMEMBER_TYPE.GROUPMEMBER_GROUPID,i=new Array,i[0]={keytype:y.GROUPMEMBER_TYPE.GROUPMEMBER_GROUPID,match_value:t.group_id.toString()},e.next=21,r.delgroupmember(u,i,i.length);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),b.error("deleteGroupMember",e.t0.toString());case 26:case"end":return e.stop()}},e,void 0,[[0,23]])}));return function(t){return e.apply(this,arguments)}}(),t.queryGroupMemberList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,a=new Array,u=void 0,!t.hasOwnProperty("group_id")){e.next=12;break}u=y.GROUPMEMBER_TYPE.GROUPMEMBER_GROUPID,a.unshift({keytype:u,match_value:t.group_id.toString()}),e.next=23;break;case 12:if(!t.hasOwnProperty("account")){e.next=17;break}u=y.GROUPMEMBER_TYPE.GROUPMEMBER_ACCOUNT,a.unshift({keytype:u,match_value:t.account.toString()}),e.next=23;break;case 17:if(!t.hasOwnProperty("searchtext")){e.next=22;break}u=y.GROUPMEMBER_TYPE.GROUPMEMBER_SEARCHTEXT,a.unshift({keytype:u,match_value:t.searchtext}),e.next=23;break;case 22:return e.abrupt("return",[]);case 23:return e.next=25,r.querygroupmember(u,a,a.length);case 25:if(n=e.sent,null===n.param._memberinfolist){e.next=29;break}return i=n.param._memberinfolist,e.abrupt("return",E.convertGroupMember2JsList(i,t.owner));case 29:return e.abrupt("return",[]);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutGroupType=function(){var e=(0,f.default)(p.default.mark(function e(t,r){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroupType 空数据"),e.abrupt("return");case 5:return e.next=7,A(t,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.bulkPutGroupTypeList=function(){var e=(0,f.default)(p.default.mark(function e(t,r){var n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroupTypeList 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:if(n=e.sent,a=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=15;break}return e.next=12,n.addgroupcollectionlist(t);case 12:a=e.sent,e.next=20;break;case 15:return e.next=17,n.addgroupcollection(t);case 17:return a=e.sent,u=(0,o.default)({},info,{id:a.result}),e.abrupt("return",u);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),w=t.queryGroupTypeList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("all")){e.next=10;break}return e.next=9,r.querygroupcollection(y.GROUPCOLLECTION_TYPE.GROUPCOLLECTIONMEM_ALL,"");case 9:n=e.sent;case 10:if(null===n.param._groupcollectinfolist){e.next=23;break}a=new Array,u=n.param._groupcollectinfolist,i=0;case 14:if(!(i<u.length)){e.next=21;break}return c=u[i],a[i]={id:c.id,type_id:c.collectionid,name:c.name,state:c.state},e.abrupt("return",a);case 18:++i,e.next=14;break;case 21:e.next=24;break;case 23:return e.abrupt("return",[]);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=(t.queryAllGroupTypeList=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,w({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.bulkPutGroupTypeMember=function(){var e=(0,f.default)(p.default.mark(function e(t,r){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroupTypeMember 空数据"),e.abrupt("return");case 5:return e.next=7,I(t,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.bulkPutGroupTypeMemberList=function(){var e=(0,f.default)(p.default.mark(function e(t,r){var n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutGroupTypeMemberList 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:if(n=e.sent,a=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=15;break}return e.next=12,n.addgroupcollectionmemlist(t);case 12:a=e.sent,e.next=20;break;case 15:return e.next=17,n.addgroupcollectionmem(t);case 17:return a=e.sent,u=(0,o.default)({},t,{id:a.result}),e.abrupt("return",u);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),D=t.queryGroupTypeMemberList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,!t.hasOwnProperty("all")){e.next=10;break}return e.next=9,r.querygroupcollectionmem(y.GROUPCOLLECTIONMEM_TYPE.GROUPCOLLECTION_ALL,"");case 9:n=e.sent;case 10:if(null===n.param._groupcollectmeminfolist){e.next=23;break}a=new Array,u=n.param._groupcollectmeminfolist,i=0;case 14:if(!(i<u.length)){e.next=21;break}return c=u[i],a[i]={id:c.id,type_id:c.collectionid,group_id:c.groupid},e.abrupt("return",a);case 18:++i,e.next=14;break;case 21:e.next=24;break;case 23:return e.abrupt("return",[]);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),q=(t.queryAllGroupTypeMemberList=function(){var e=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,D({all:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.saveFile=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveFile 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertFile2SqLite(t),e.next=11,r.addfile(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutFile=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutFile 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:r=e.sent,n=t.splitByNum(30),a=0;case 10:if(!(a<n.length)){e.next=17;break}return u=E.convertFile2SqLiteList(n[a]),e.next=14,r.addfilelist(u);case 14:a++,e.next=10;break;case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryFile=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,q(t);case 4:if(r=e.sent,isNullOrEmpty(r)){e.next=9;break}return e.abrupt("return",r[0]);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryFileBySearchText=function(){var e=(0,f.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,q({searchtext:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryFileList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,a=void 0,u=new Array,!t.hasOwnProperty("file_handle")){e.next=13;break}a=y.FILERECORD_TYPE.FILERECORD_FILEHANDLE,u[0]={keytype:a,match_value:t.file_handle},e.next=36;break;case 13:if(!t.hasOwnProperty("recent_id")&&!t.hasOwnProperty("recent_owner")){e.next=20;break}t.hasOwnProperty("recent_id")&&(a=y.FILERECORD_TYPE.FILERECORD_CONVAUTOID,u[0]={keytype:a,match_value:t.recent_id.toString()}),t.hasOwnProperty("recent_owner")&&(a=y.FILERECORD_TYPE.FILERECORD_CONVID,u[0]={keytype:a,match_value:t.recent_owner.toString()}),i=1,t.hasOwnProperty("utc_stamp")&&t.hasOwnProperty("searchtext")&&t.hasOwnProperty("limitcount")&&(u[i++]={keytype:y.FILERECORD_TYPE.FILERECORD_TIMESTAMP,match_value:t.utc_stamp.toString()},u[i++]={keytype:y.FILERECORD_TYPE.FILERECORD_SEARCHGLOBAL,match_value:t.searchtext},u[i++]={keytype:y.FILERECORD_TYPE.FILERECORD_PAGELIMIT,match_value:t.limitcount.toString()}),e.next=36;break;case 20:if(!t.hasOwnProperty("searchtext")){e.next=25;break}a=y.FILERECORD_TYPE.FILERECORD_SEARCHGLOBAL,u[0]={keytype:a,match_value:t.searchtext},e.next=36;break;case 25:if(!t.hasOwnProperty("message_id")){e.next=30;break}a=y.FILERECORD_TYPE.FILERECORD_MESSAGEID,u[0]={keytype:a,match_value:t.message_id.toString()},e.next=36;break;case 30:if(!t.hasOwnProperty("message_server_chat_id_str")){e.next=35;break}a=y.FILERECORD_TYPE.FILERECORD_SERVERMESSAGEID,u[0]={keytype:a,match_value:t.message_server_chat_id_str},e.next=36;break;case 35:return e.abrupt("return",[]);case 36:if(!(u.length>0)){e.next=40;break}return e.next=39,r.queryfile(a,u,u.length);case 39:n=e.sent;case 40:if(isNullOrEmpty(n)||isNullOrEmpty(n.param)||isNullOrEmpty(n.param._filerecordlist)){e.next=45;break}return c=n.param._filerecordlist,e.abrupt("return",E.convertFile2JsList(c));case 45:return e.abrupt("return",[]);case 46:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),G=(t.saveScreenShot=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveScreenShot 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertScreenShot2SqLite(t),e.next=11,r.addscreenshot(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutScreenShot=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutScreenShot 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:r=e.sent,n=t.splitByNum(30),a=0;case 10:if(!(a<n.length)){e.next=17;break}return u=E.convertScreenShot2SqLiteList(n[a]),e.next=14,r.addscreenshotlist(u);case 14:a++,e.next=10;break;case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryScreenShot=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,G(t);case 4:if(r=e.sent,isNullOrEmpty(r)){e.next=9;break}return e.abrupt("return",r[0]);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryScreenShotList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,a=void 0,u=new Array,!t.hasOwnProperty("um_url")){e.next=13;break}a=y.SCREENFILE_TYPE.SCREENSHOT_UM_URL,u[0]={keytype:a,match_value:t.um_url},e.next=44;break;case 13:if(!t.hasOwnProperty("file_handle")){e.next=18;break}a=y.SCREENFILE_TYPE.SCREENSHOT_FILEHANDLE,u[0]={keytype:a,match_value:t.file_handle},e.next=44;break;case 18:if(!t.hasOwnProperty("message_id")){e.next=23;break}a=y.SCREENFILE_TYPE.SCREENSHOT_MESSAGEID,u[0]={keytype:a,match_value:t.message_id.toString()},e.next=44;break;case 23:if(!t.hasOwnProperty("server_message_id")){e.next=28;break}a=y.SCREENFILE_TYPE.SCREENSHOT_SERVERMESSAGEID,u[0]={keytype:a,match_value:t.server_message_id},e.next=44;break;case 28:if(!t.hasOwnProperty("recent_id")){e.next=33;break}a=y.SCREENFILE_TYPE.SCREENSHOT_CONVAUTOID,u[0]={keytype:a,match_value:t.recent_id.toString()},e.next=44;break;case 33:if(!t.hasOwnProperty("message_server_chat_id_str")){e.next=38;break}a=y.SCREENFILE_TYPE.SCREENSHOT_SERVERMESSAGEID,u[0]={keytype:a,match_value:t.message_server_chat_id_str},e.next=44;break;case 38:if(!t.hasOwnProperty("recent_owner")){e.next=43;break}a=y.SCREENFILE_TYPE.SCREENSHOT_CONVID,u[0]={keytype:a,match_value:t.recent_owner.toString()},e.next=44;break;case 43:return e.abrupt("return",[]);case 44:if(!(u.length>0)){e.next=48;break}return e.next=47,r.queryscreenshot(a,u,u.length);case 47:n=e.sent;case 48:if(isNullOrEmpty(n)||isNullOrEmpty(n.param)||isNullOrEmpty(n.param._screenfileinfolist)){e.next=53;break}return i=n.param._screenfileinfolist,e.abrupt("return",E.convertScreenShot2JsList(i));case 53:return e.abrupt("return",[]);case 54:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),M=(t.saveRecent=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveRecent 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertRecent2SqLite(t),e.next=11,r.addconversation(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutRecent=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.info("bulkPutRecent 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:r=e.sent,n=t.splitByNum(30),a=0;case 10:if(!(a<n.length)){e.next=17;break}return u=E.convertRecent2SqLiteList(n[a]),e.next=14,r.addconversationlist(u);case 14:a++,e.next=10;break;case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteRecent=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("id")){e.next=9;break}return e.next=8,r.delconversation(y.CONVERSATION_TYPE.CONV_AUTOID,t.id.toString());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllRecent=function(){var e=(0,f.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({all:""});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryRecent=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(r=e.sent,isNullOrEmpty(r)){e.next=7;break}return e.abrupt("return",r[0]);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryRecentList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,showDealTime("queryRecentList 查询会话信息"),n=null,!isNullOrEmpty(t)){e.next=9;break}return e.abrupt("return",[]);case 9:if(!t.hasOwnProperty("all")){e.next=15;break}return e.next=12,r.queryconversation(y.CONVERSATION_TYPE.CONV_ALL,"");case 12:n=e.sent,e.next=22;break;case 15:if(!t.hasOwnProperty("owner")||isNullOrEmpty(t.owner)){e.next=21;break}return e.next=18,r.queryconversation(y.CONVERSATION_TYPE.CONV_CONVID,t.owner);case 18:n=e.sent,e.next=22;break;case 21:return e.abrupt("return",[]);case 22:if(null===n||void 0===n.param||void 0===n.param._cvsinfolist||null===n.param._cvsinfolist){e.next=25;break}return showDealTime("queryRecentList 处理会话信息"),e.abrupt("return",E.convertRecent2JsList(n.param._cvsinfolist));case 25:return e.abrupt("return",[]);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),U=(t.saveMessage=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveMessage 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertMessage2SqLite(t),e.next=11,r.addhistoryrecord(n);case 11:return a=e.sent,b.debug("saveMessage 到db"),e.abrupt("return",(0,o.default)({},t,{id:a.result}));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutMessage=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutMessage 空数据"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:r=e.sent,n=t.splitByNum(30),a=0;case 10:if(!(a<n.length)){e.next=17;break}return u=E.convertMessage2SqLiteList(n[a]),e.next=14,r.addhistoryrecordlist(u);case 14:a++,e.next=10;break;case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryMessage=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,F(t);case 4:if(r=e.sent,isNullOrEmpty(r)){e.next=9;break}return e.abrupt("return",r[0]);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryMessageBySearchText=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,F({searchtext:t});case 4:return r=e.sent,r.filter(function(e){return 0===e.is_quote}),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteMessage=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return b.debug("deleteMessage from db"),e.next=5,new m.default;case 5:if(r=e.sent,!t.hasOwnProperty("id")){e.next=10;break}return e.next=9,r.deletehistoryrecord(y.HISTORYRECORD_TYPE.HISTORYRECORD_RECORDID,t.id.toString());case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateMessage=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return b.debug("updateMessage 到db"),e.next=5,new m.default;case 5:if(r=e.sent,!(t.hasOwnProperty("client_chat_id")&&t.hasOwnProperty("server_chat_id_str")&&t.hasOwnProperty("utc_stamp"))){e.next=10;break}return e.next=9,r.addhistoryrecord(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,f.default)(p.default.mark(function e(t,r){var n,a,u,i,c,s;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return n=new Array,a=void 0,u=!0,t.hasOwnProperty("recent_id")&&(a=y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVAUTOID,n[0]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVAUTOID,match_value:t.recent_id.toString()}),t.hasOwnProperty("recent_owner")&&(a=y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVID,n[0]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVID,match_value:t.recent_owner.toString()}),i=1,t.hasOwnProperty("is_read")&&(n[i++]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_ISREAD,match_value:t.is_read.toString()}),t.hasOwnProperty("utc_stamp")&&(n[i++]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_UTCSTAMP,match_value:t.utc_stamp.toString()}),t.hasOwnProperty("timedirection")?(n[i++]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_RESERVERINT1,match_value:t.timedirection},"1"===t.timedirection&&(u=!1)):n[i++]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_RESERVERINT1,match_value:"0"},c=window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.MOBILE_MESSAGE_LIST_PAGE_SIZE:window.CLIENTCONFIG.MESSAGE_LIST_PAGE_SIZE,t.hasOwnProperty("limitcount")&&(c=t.limitcount),n[i++]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_LIMIT,match_value:c.toString()},e.next=16,r.queryhistoryrecord(a,n,n.length);case 16:return s=e.sent,e.abrupt("return",{content:s,isReverse:u});case 18:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),F=t.queryMessageList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c,s,o,l,d,f,_,v,b;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,a=!0,!t.hasOwnProperty("id")){e.next=16;break}return u=y.HISTORYRECORD_TYPE.HISTORYRECORD_RECORDID,i=new Array,i[0]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_RECORDID,match_value:t.id.toString()},e.next=13,r.queryhistoryrecord(u,i,i.length);case 13:n=e.sent,e.next=60;break;case 16:if(!t.hasOwnProperty("searchtext")){e.next=26;break}return c=y.HISTORYRECORD_TYPE.HISTORYRECORD_SHOWTEXT,s=new Array,s[0]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_SHOWTEXT,match_value:t.searchtext},t.hasOwnProperty("recent_id")?s[1]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVAUTOID,match_value:t.recent_id.toString()}:t.hasOwnProperty("recent_owner")&&(s[1]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_CONVID,match_value:t.recent_owner.toString()}),e.next=23,r.queryhistoryrecord(c,s,s.length);case 23:n=e.sent,e.next=60;break;case 26:if(!t.hasOwnProperty("recent_id")&&!t.hasOwnProperty("recent_owner")){e.next=34;break}return e.next=29,U(t,r);case 29:o=e.sent,n=o.content,a=o.isReverse,e.next=60;break;case 34:if(!t.hasOwnProperty("client_chat_id")){e.next=43;break}return l=y.HISTORYRECORD_TYPE.HISTORYRECORD_CLIENTMESSAGEID,d=new Array,d[0]={keytype:y.HISTORYRECORD_TYPE.HISTORYRECORD_CLIENTMESSAGEID,match_value:t.client_chat_id.toString()},e.next=40,r.queryhistoryrecord(l,d,d.length);case 40:n=e.sent,e.next=60;break;case 43:if(!t.hasOwnProperty("server_chat_id_str")){e.next=52;break}return f=y.HISTORYRECORD_TYPE.HISTORYRECORD_MESSAGEID,_=new Array,_[0]={keytype:f,match_value:t.server_chat_id_str||""},e.next=49,r.queryhistoryrecord(f,_,_.length);case 49:n=e.sent,e.next=60;break;case 52:if(!t.hasOwnProperty("all")){e.next=59;break}return v=new Array,e.next=56,r.queryhistoryrecord(y.HISTORYRECORD_TYPE.HISTORYRECORD_ALL,v,v.length);case 56:n=e.sent,e.next=60;break;case 59:return e.abrupt("return",[]);case 60:if(null===n.param._historyrecordlist){e.next=68;break}return e.next=63,E.convertMessage2JsList(n.param._historyrecordlist);case 63:return b=e.sent,a&&b.reverse(),e.abrupt("return",b);case 68:return e.abrupt("return",[]);case 69:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Y=(t.limitMessageList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(e.prev=2,r=window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.MOBILE_MESSAGE_LIST_PAGE_SIZE:window.CLIENTCONFIG.MESSAGE_LIST_PAGE_SIZE,!n){e.next=10;break}return e.next=7,F((0,o.default)({},t,{limitcount:r,timedirection:"0"}));case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,F((0,o.default)({},t,{limitcount:r,timedirection:"1"}));case 12:return e.abrupt("return",e.sent);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(2),b.error("limitMessageList",{e:e.t0.toJSON()}),e.abrupt("return",[]);case 19:case"end":return e.stop()}},e,void 0,[[2,15]])}));return function(t){return e.apply(this,arguments)}}(),t.limitMessageListByNum=function(){var e=(0,f.default)(p.default.mark(function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(e.prev=2,b.debug("limitMessageListByNum"),0===n&&(n=window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.MOBILE_MESSAGE_LIST_PAGE_SIZE:window.CLIENTCONFIG.MESSAGE_LIST_PAGE_SIZE),!r){e.next=11;break}return e.next=8,F((0,o.default)({},t,{limitcount:n,timedirection:"0"}));case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,F((0,o.default)({},t,{limitcount:n,timedirection:"1"}));case 13:return e.abrupt("return",e.sent);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),b.error("limitMessageListByNum",{e:e.t0.toJSON()}),e.abrupt("return",[]);case 20:case"end":return e.stop()}},e,void 0,[[2,16]])}));return function(t){return e.apply(this,arguments)}}(),t.saveUserTrack=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,i,s,l,d,f,_,y,v;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveUserTrack param empty"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:if(r=e.sent,n=void 0,!(t&&"Array"===t.constructor.name&&t.length>0)){e.next=36;break}if(t=[].concat((0,c.default)(t)),a=50,!(t.length>a)){e.next=32;break}i=Math.floor(t.length/a),b.debug("write usertrack count "+t.length),s=0;case 16:if(!(s<i)){e.next=23;break}return l=t.slice(s*a,s*a+a-1),e.next=20,r.addusertracklist(l);case 20:++s,e.next=16;break;case 23:if(!((d=t.length%a)>0)){e.next=30;break}return f=i*a,_=i*a+d-1,y=t.slice(f,_),e.next=30,r.addusertracklist(y);case 30:e.next=34;break;case 32:return e.next=34,r.addusertracklist(t);case 34:e.next=42;break;case 36:return t=(0,u.default)({},t),e.next=39,r.addusertrack(t);case 39:return n=e.sent,v=(0,o.default)({},t,{id:n.result}),e.abrupt("return",v);case 42:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserTrackList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n={},!isNullOrEmpty(t)){e.next=12;break}return e.next=9,r.queryusertrack(y.USERTRACK_TYPE.USERTRACK_ALL,"");case 9:n=e.sent,e.next=37;break;case 12:if(!t.hasOwnProperty("all")){e.next=18;break}return e.next=15,r.queryusertrack(y.USERTRACK_TYPE.USERTRACK_ALL,"");case 15:n=e.sent,e.next=37;break;case 18:if(!t.hasOwnProperty("alllength")){e.next=24;break}return e.next=21,r.queryusertrack(y.USERTRACK_TYPE.USERTRACK_ALLLENGTH,"");case 21:n=e.sent,e.next=37;break;case 24:if(!t.hasOwnProperty("id")){e.next=30;break}return e.next=27,r.queryusertrack(y.USERTRACK_TYPE.USERTRACK_ID,t.id.toString());case 27:n=e.sent,e.next=37;break;case 30:if(!t.hasOwnProperty("limitcount")){e.next=36;break}return e.next=33,r.queryusertrack(y.USERTRACK_TYPE.USERTRACK_LIMITCOUNT,t.limitcount.toString());case 33:n=e.sent,e.next=37;break;case 36:b.error("queryUserTrackList no support param");case 37:if(!n.param||isNullOrEmpty(n.param._usertrackinfolist)){e.next=43;break}for(a=new Array,u=0;u<n.param._usertrackinfolist.length;++u)i=n.param._usertrackinfolist[u],a[u]={id:i.id,content:i.content,retrycount:i.retrycount};return e.abrupt("return",a);case 43:if(!n.param||!n.param._retlen||isNullOrEmpty(t)||!t.hasOwnProperty("alllength")){e.next=48;break}return c=n.param._retlen,e.abrupt("return",c);case 48:return e.abrupt("return",[]);case 49:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteusertrack=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,!t.hasOwnProperty("id")){e.next=10;break}return e.next=8,r.delusertrack(y.USERTRACK_TYPE.USERTRACK_ID,t.id.toString());case 8:e.next=21;break;case 10:if(!t.hasOwnProperty("all")){e.next=20;break}if(!t.hasOwnProperty("idlist")){e.next=16;break}return e.next=14,r.delusertrack(y.USERTRACK_TYPE.USERTRACK_ALL,t.idlist);case 14:e.next=18;break;case 16:return e.next=18,r.delusertrack(y.USERTRACK_TYPE.USERTRACK_ALL,"");case 18:e.next=21;break;case 20:b.debug(" deleteusertrack not support, by param : "+t);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveCallRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveCallRecord empty"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertCallRecord2Data(t),e.next=11,r.addcallrecord(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},n,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveConfRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("saveConfRecord empty"),e.abrupt("return");case 5:return e.next=7,new m.default;case 7:return r=e.sent,n=E.convertConfRecord2Data(t),e.next=11,r.addcallrecord(n);case 11:return a=e.sent,e.abrupt("return",(0,o.default)({},n,{id:a.result}));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bulkPutCallRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:if(!isNullOrEmpty(t)){e.next=5;break}return b.debug("bulkPutCallRecord empty"),e.abrupt("return");case 5:return r=50,e.next=8,new m.default;case 8:return n=e.sent,a=t.splitByNum(r),u=E.convertCallRecordList2Data(a),e.next=13,n.addcallrecordlist(u);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.delcallrecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return b.debug("delcallrecord"),e.next=5,new m.default;case 5:if(r=e.sent,n=void 0,a=void 0,!t.hasOwnProperty("peeraccount")){e.next=13;break}n=y.CALLRECORD_TYPE.CALLRECORD_PEERACCOUNT,a=t.peeraccount.toString(),e.next=24;break;case 13:if(!t.hasOwnProperty("autoid")){e.next=18;break}n=y.CALLRECORD_TYPE.CALLRECORD_ID,a=t.groupid.toString(),e.next=24;break;case 18:if(!t.hasOwnProperty("confid")){e.next=23;break}n=y.CALLRECORD_TYPE.CALLRECORD_CONFID,a=t.confid.toString(),e.next=24;break;case 23:return e.abrupt("return",[]);case 24:return e.next=26,r.delcallrecord(n,a);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryCallRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return b.debug("queryCallRecord"),e.next=5,Y(t);case 5:if(r=e.sent,isNullOrEmpty(r)){e.next=11;break}return b.debug("queryCallRecord result"),e.abrupt("return",r[0]);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllConfRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return r=(0,o.default)({},t,{allconf:"allconf"}),e.next=5,Y(r);case 5:return n=e.sent,b.info("db test queryAllConfRecord "),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllCallRecord=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return r=(0,o.default)({},t,{allcall:"allcall"}),e.next=5,Y(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryCallRecordList=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n,a,u,i,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:if(r=e.sent,n=null,a=void 0,u=new Array,!(t.hasOwnProperty("peeraccount")&&t.hasOwnProperty("starttime")&&t.hasOwnProperty("limitcount"))){e.next=16;break}a=y.CALLRECORD_TYPE.CALLRECORD_PEERACCOUNT,u[0]={keytype:a,match_value:t.peeraccount.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[2]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord by peeraccount"),e.next=54;break;case 16:if(!(t.hasOwnProperty("groupid")&&t.hasOwnProperty("starttime")&&t.hasOwnProperty("limitcount"))){e.next=24;break}a=y.CALLRECORD_TYPE.CALLRECORD_GROUPID,u[0]={keytype:a,match_value:t.groupid.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[2]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord by groupid"),e.next=54;break;case 24:if(!(t.hasOwnProperty("confid")&&t.hasOwnProperty("starttime")&&t.hasOwnProperty("limitcount"))){e.next=32;break}a=y.CALLRECORD_TYPE.CALLRECORD_CONFID,u[0]={keytype:a,match_value:t.confid.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[2]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord by confid"),e.next=54;break;case 32:if(!(t.hasOwnProperty("allconf")&&t.hasOwnProperty("starttime")&&t.hasOwnProperty("limitcount"))){e.next=39;break}a=y.CALLRECORD_TYPE.CALLRECORD_ALLCONF,u[0]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord  allconf"),e.next=54;break;case 39:if(!(t.hasOwnProperty("allcall")&&t.hasOwnProperty("starttime")&&t.hasOwnProperty("limitcount"))){e.next=46;break}a=y.CALLRECORD_TYPE.CALLRECORD_ALLCALL,u[0]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord  allcall"),e.next=54;break;case 46:if(!t.hasOwnProperty("starttime")||!t.hasOwnProperty("limitcount")){e.next=53;break}a=y.CALLRECORD_TYPE.CALLRECORD_ALL,u[0]={keytype:y.CALLRECORD_TYPE.CALLRECORD_STARTTIME,match_value:t.starttime.toString()},u[1]={keytype:y.CALLRECORD_TYPE.CALLRECORD_LIMITCOUNT,match_value:t.limitcount.toString()},b.debug("queryCallRecord  all"),e.next=54;break;case 53:return e.abrupt("return",[]);case 54:if(!(u.length>0)){e.next=58;break}return e.next=57,r.querycallrecord(a,u,u.length);case 57:n=e.sent;case 58:if(null===n.param._callrecordlist){e.next=65;break}return i=n.param._callrecordlist,c=E.convertCallRecord2JsList(i),b.debug("queryCallRecord  all",c),e.abrupt("return",c);case 65:return e.abrupt("return",[]);case 66:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),B=t.queryDiscSerialNumber=function(){var e=(0,f.default)(p.default.mark(function e(){var t,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:return t=e.sent,e.next=7,t.querydiscnumber();case 7:return r=e.sent,e.abrupt("return",r.param.discserialnumber);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.examineEncryptFile=function(){var e=(0,f.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.initPublicDbAtomic.wait();case 2:return e.next=4,new m.default;case 4:return r=e.sent,e.next=7,r.examineEncryptFile();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryDBKeySalt=function(){var e=(0,f.default)(p.default.mark(function e(){var t,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m.default;case 2:return t=e.sent,e.next=5,t.getdbsaltkey();case 5:return r=e.sent,e.abrupt("return",r.param.secvalue);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initDBPath=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m.default;case 2:return r=e.sent,e.next=5,r.initdbpath(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveDBKeySalt=function(){var e=(0,f.default)(p.default.mark(function e(t,r,n){var a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m.default;case 2:return a=e.sent,e.next=5,a.setdbsaltkey(t,r,n);case 5:u=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.initSQLitePublicDB=function(){var e=(0,f.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("initSQLitePublicDB, syspath : "+t),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return b.info("has initSQLitePublicDB"),e.abrupt("return","");case 4:return e.next=6,new m.default;case 6:return r=e.sent,e.next=9,r.init(t,"public");case 9:return n=e.sent,b.info("initSQLitePublicDB Success"),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},98:function(e,t,r){e.exports=r(0)(276)}});