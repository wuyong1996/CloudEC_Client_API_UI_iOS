webpackJsonp([6],{100:function(e,t,n){e.exports={default:n(126),__esModule:!0}},103:function(e,t,n){e.exports=n(0)(51)},104:function(e,t,n){e.exports=n(0)(424)},106:function(e,t,n){"use strict";t.__esModule=!0;var r=n(133),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},110:function(e,t,n){e.exports={default:n(162),__esModule:!0}},111:function(e,t,n){e.exports=n(0)(156)},1112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.cpuUsage=function(e){a(e,!1)},function(){return window.require("os").cpus()}),a=function(e,t){var n=o(),r=n.idle,a=n.total;setTimeout(function(){var n=o(),i=n.idle,s=n.total,c=i-r,u=s-a,f=c/u;e(!0===t?f:1-f)},1e3)},o=function(e){var t=r(),n=0,a=0,o=0,i=0,s=0;for(var c in t)t.hasOwnProperty(c)&&(n+=t[c].times.user,a+=t[c].times.nice,o+=t[c].times.sys,s+=t[c].times.irq,i+=t[c].times.idle);return{idle:i,total:n+a+o+i+s}}},1113:function(e,t,n){e.exports={default:n(1658),__esModule:!0}},1114:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshShareSize=void 0;var a=n(1),o=r(a),i=n(2),s=r(i);t.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:-3===t?(n=coreCall.getBigContainerSize(),n={width:n.width,height:n.height-54-74},coreCall.setSvcBFCPVideoRender(n)):-2===t&&(r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},1115:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confInfoMap=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(100),f=a(u),l=n(2),d=a(l),h=n(98),p=a(h),_=n(112),C=a(_),v=n(4),m=a(v),S=n(5),g=a(S),E=(n(209),n(186)),w=n(1116),I=a(w),T=n(1662),N=a(T),b=n(224),O=n(861),A=r(O),R=n(1664),y=a(R),L=n(204),M=r(L),D=window.Logger("confModel")("service"),x=t.confInfoMap={CONF_HANDLE:"confHandle",CONF_SERVER_ID:"confServerId",CALL_ID:"confCallId",CONF_SUBJECT:"confSubject",GROUP_URI:"groupUri",MEDIA_TYPE:"mediaType",CONF_PASSCODE:"confPasscode",VMR_ID:"vmrId",DATA_RANDOM:"dataRandom",AC_TEMP_TOKEN:"acTmpToken",CONF_ACSSCODE:"confAcsscode",CONF_PWD_ENCODE:"confPwdEncode",CONF_ID_INPUT:"confIdInput",CONF_ROLE:"confRole",COMPERE_NUMBER:"compereNumber",IS_SMC_VMR:"isSmcVmr"},k={B_CONNECT_TO_CONF:"bConnectToConf",IS_SMC_FIRST_REQUEST_CHAIRMAN:"isSmcFirstRequestCharimanRest",IS_RECALL:"isRecall",IS_ALREADY_JOIN_CONF:"isAlreadyJoinConf",IS_AVC_MULTIVIEW_BROADCAST:"isAvcMultiViewBroadcast",IS_FIRST_ENTER_CONF:"isFirstEnterConf",IS_USER_END_CONF:"isUserEndConf"},P=function(){function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,m.default)(this,e),this.getUpdatedParticipants=function(){return n.confInfo.updatedParticipants};var a=(new Date).getTime(),o=formatDateYYYYMMDDHHMM(a),i=[];if(this.showModeTaskQueue=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),t&&t.memberList&&t.memberList.length>0){var s=!0,c=!1,u=void 0;try{for(var f,l=(0,C.default)(t.memberList);!(s=(f=l.next()).done);s=!0){var d=f.value,h={number:d.number?d.number:d.bind_no,userInfo:d,role:d.bind_no===t.compereNumber?1:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:d.bind_no===t.selfNumber,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0,type:isNullOrEmpty(d.type)?0:parseInt(d.type)};1===t.memberList.length&&17===t.mediaType&&""===h.number&&(h.number=d.short_phone),1!==t.memberList.length&&""!==t.groupUri&&h.number!==t.selfNumber&&""===h.number&&(h.number=d.short_phone),i.push(h)}}catch(e){c=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}}this.confInfo={confHandle:"",confServerId:"",confCallId:"",mediaType:"",members:i,confPasscode:"",isAllMute:0,numOfParticipant:0,confRole:0,groupUri:"",compereNumber:t?t.compereNumber:"",confSubject:"",startTime:o.time,date:o.date,updatedParticipants:[],recordType:t&&t.recordType||0,vmrId:"",dataRandom:"",acTmpToken:"",confAcsscode:"",confPwdEncode:"",confIdInput:"",isSmcVmr:!1},this.confFlag={bConnectToConf:!1,isRecall:!1,isSmcFirstRequestCharimanRest:!window.isSupportiDo&&$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,isAlreadyJoinConf:!1,isAvcMultiViewBroadcast:!1,isFirstEnterConf:!1,isUserEndConf:!1},this.isFirstGetMemberList=!0,this.isCallTransToConf=!1,r&&(this.setConfInfo(x.CONF_PASSCODE,t?t.passcode:""),this.setConfInfo(x.CONF_HANDLE,t?t.confId:""),this.setConfInfo(x.CALL_ID,t?t.callId:""),this.setConfInfo(x.MEDIA_TYPE,t?t.mediaType:""),this.setConfInfo(x.GROUP_URI,t?t.groupUri:""),this.updateConfSubject(t?t.confSubject:"")),this.svc={}}return(0,g.default)(e,[{key:"setIsCallTransToConfTrue",value:function(){this.isCallTransToConf=!0}},{key:"setConfInfo",value:function(e,t){var n={};n[e]=t,e===x.MEDIA_TYPE&&I.default.changeMediaTypeToAudioData()&&(n[e]=17);var r=(0,p.default)({},this.confInfo,n);this.confInfo=r,e!==x.CONF_HANDLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfHanlde",t),e!==x.CONF_SERVER_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfServerId",t,this.getConfInfo(x.VMR_ID)),e!==x.VMR_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeVmrId",t),e!==x.CONF_SUBJECT||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfSubject",t),e===x.CALL_ID&&(coreCommon.CameraControl.getInstance().setCallId(t),coreCommon.SpkControl.getInstance().setCallId(t),coreCommon.MicControl.getInstance().setCallId(t),coreCommon.Observer.publish("changeCallId",t)),e!==x.CONF_ROLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfRole",t),e!==x.GROUP_URI||isNullOrEmpty(t)||coreCommon.Observer.publish("changeGroupUri",t)}},{key:"getConfInfo",value:function(e){return this.confInfo[e]}},{key:"setConfFlag",value:function(e,t){var n={};n[e]=t;var r=(0,p.default)({},this.confFlag,n);this.confFlag=r}},{key:"getConfFlag",value:function(e){return this.confFlag[e]}},{key:"isUserEndConf",value:function(){return this.getConfFlag(k.IS_USER_END_CONF)}},{key:"isVideoConf",value:function(){return 0!=(this.getConfInfo(x.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(this.getConfInfo(x.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)}},{key:"isDataConf",value:function(){return 0!=(this.getConfInfo(x.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)}},{key:"getSsrcRange",value:function(){return isNullOrEmpty(this.svc)?{}:this.svc.getSsrcRange()}},{key:"getIsSmcFirstRequestCharimanRest",value:function(){return this.getConfFlag(k.IS_SMC_FIRST_REQUEST_CHAIRMAN)}},{key:"setIsSmcFirstRequestCharimanRest",value:function(e){this.setConfFlag(k.IS_SMC_FIRST_REQUEST_CHAIRMAN,e)}},{key:"setIsFirstEnterConf",value:function(e){this.setConfFlag(k.IS_FIRST_ENTER_CONF,e)}},{key:"getIsFirstEnterConf",value:function(){return this.getConfFlag(k.IS_FIRST_ENTER_CONF)}},{key:"getIsRecall",value:function(){return this.getConfFlag(k.IS_RECALL)}},{key:"isMemberListNull",value:function(){return isNullOrEmpty(this.confInfo.members)}},{key:"getIsSvc",value:function(){return!isNullOrEmpty(this.svc)}},{key:"cleanSvc",value:function(){this.svc={}}},{key:"getCurrentConfId",value:function(){return this.confInfo.confServerId}},{key:"setIsAvcMultiViewBroadcast",value:function(e){this.setConfFlag(k.IS_AVC_MULTIVIEW_BROADCAST,e)}},{key:"getIsAvcMultiViewBroadcast",value:function(){return this.getConfFlag(k.IS_AVC_MULTIVIEW_BROADCAST)}},{key:"getCallIdOfConf",value:function(){return this.getConfInfo(x.CALL_ID)}},{key:"getGroupIdOfConf",value:function(){return this.getConfInfo(x.GROUP_URI)}},{key:"createConf",value:function(){function e(e,n,r,a,o,i,s){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s){var u,l,d,h,p,_,v,m,S,g,E,w,I,T,N,b,O,A,R,y,L,M,P,F,U,B,W;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(u=1,l=1,s&&!0===s.isCloseCameraDe&&(coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),l=0),s&&!0===s.isMuteMicDe&&(coreCommon.MicControl.getInstance().setIsMuteMicDe(),u=0),d=this.confInfo.members.length,this.setConfFlag(k.B_CONNECT_TO_CONF,!1),h=[],p=$getState().conf.hasConFRight,_=$getState().conf.showvmrornot,v=p&&_?15:1,m=$getState().conf.isSupportAS,S=_?1:0,D.info("create conf,this mediax_conf_type is",v),g=!0,E=!1,w=void 0,e.prev=16,I=(0,C.default)(this.confInfo.members);!(g=(T=I.next()).done);g=!0)N=T.value,b={number:N.number,name:N.userInfo.name,acount_id:N.userInfo.account,role:N.role,is_mute:0,email:N.userInfo.email,sms:"",is_auto_invite:!N.is_self,type:m?parseInt(N.type):0},h.push(b);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),E=!0,w=e.t0;case 24:e.prev=24,e.prev=25,!g&&I.return&&I.return();case 27:if(e.prev=27,!E){e.next=30;break}throw w;case 30:return e.finish(27);case 31:return e.finish(24);case 32:if(O=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),A={create_conf_info:{subject:t,group_uri:n,multi_stream_flag:r,media_type:a,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==O?0:1,user_type:o,num_of_attendee:d,attendee:h,nopassword:i,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:v}},$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&(A.create_conf_info.time_zone=getDefaultTimeZone(constant.TIME_ZONE_FLAG).toString()),m&&(A.create_conf_info.vmr_flag=S),this.setConfInfo(x.MEDIA_TYPE,a),!this.isVideoConf()){e.next=40;break}return e.next=40,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 40:return e.next=42,new coreTup.HwTupConfCtrlSdk;case 42:return R=e.sent,y=this,L=new PromiseObject,R.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===y.getConfInfo(x.CONF_HANDLE)&&L.resolve(e)}),e.next=48,R.createConf(A);case 48:if(M=e.sent,P=0===A.create_conf_info.record_type?0:1,F=0===i?1:0,0!==M.result){e.next=60;break}D.info("createConf send to tup suc, handle = "+M.param.handle+",subject = "+(isNullOrEmpty(t)?"":t.substr(0,1)+"***")),this.isVideoConf()?coreUt.utEventStart(constant.EVENT_ID.UT_CONF_CREATE,null,[a,t,u,l,P,F]):coreUt.utEventStart(constant.EVENT_ID.UT_CONF_CREATE,null,[a,t,u,F]),this.setConfInfo(x.CONF_HANDLE,M.param.handle),this.setConfInfo(x.CONF_ROLE,1),this.updateConfSubject(t),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=64;break;case 60:return this.isVideoConf()?coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_CREATE,[a,t,u,l,P,F,0,M.result]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_CREATE,[a,t,u,F,0,M.result]),D.error("create conf failed, result = "+M.result),this.unInit(),e.abrupt("return",{isSuc:!1,errorCode:-1});case 64:return e.next=66,L;case 66:if(U=e.sent,R.setNotifyFunc(491546,null),0!==U.param.ret){e.next=76;break}return U.param.create_conf_result?(B=U.param.create_conf_result,D.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+B.conf_id+",conf_role = "+B.conf_role+",media_type = "+B.media_type+",len of pas = "+B.password.length+",handle = "+U.param.handle),this.setConfInfo(x.CONF_ROLE,1),this.setConfInfo(x.CONF_SERVER_ID,B.conf_id),this.setConfInfo(x.MEDIA_TYPE,B.media_type),this.setConfInfo(x.CONF_PASSCODE,B.password)):D.warn("create_conf_result is null, res = "+(0,f.default)(U)),W=U.param.create_conf_result,coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_CREATE,null,[1,W.conf_id]),coreUt.utEventStart(constant.EVENT_ID.UT_CONF_JOIN,null,[constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_AFTER_CREATE,W.conf_id]),e.abrupt("return",{isSuc:!0});case 76:return D.info("notify create conf failed, ret = "+U.param.ret+",handle = "+U.param.handle),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_CREATE,null,[0,U.param.ret]),e.next=80,R.endConf(U.param.handle);case 80:return this.unInit(),e.abrupt("return",{isSuc:!1,errorCode:U.param.ret});case 82:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));return e}()},{key:"oneKeyEnterConf",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&this.setConfInfo(x.IS_SMC_VMR,!0),u&&!0===u.isCloseCameraDe&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),u&&!0===u.isMuteMicDe&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),u&&!0===u.isMuteSpkDe&&coreCommon.SpkControl.getInstance().setIsMuteSpkDe(),u&&!isNullOrEmpty(u.speakerMode)&&coreCommon.SpkControl.getInstance().setSpeakerModeDe(u.speakerMode),A.isInReCall()&&(D.info("oneKeyEnterConf caused by isRecall"),this.setConfFlag(k.IS_RECALL,!0)),!a){e.next=9;break}return e.next=9,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 9:return e.next=11,N.default.oneKeyEnterConfTup(t,n,r,a,f);case 11:if(o=e.sent,i=o.errorCode,s=o.callId,0!==i){e.next=26;break}if(this.setConfInfo(x.CALL_ID,s),coreCommon.Observer.publish("showVideoPreview"),this.setConfInfo(x.CONF_ACSSCODE,t),this.saveConfPas(r),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),!a){e.next=23;break}return e.next=23,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 23:return e.abrupt("return",!0);case 26:return window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreCommon.Observer.publish("meetingHWstartCallFailed",i),this.unInit(),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveConfPas",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("saveConfPas"),e.next=3,coreSecurity.encryptKMC(t);case 3:n=e.sent,D.info("save enter conf param for recall,result = ",n.result),0===n.result&&this.setConfInfo(x.CONF_PWD_ENCODE,n.param.CiperText);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSavedRecallInfo",value:function(){var e=this.getConfInfo(x.CONF_SERVER_ID),t=this.getConfInfo(x.IS_SMC_VMR);return isNullOrEmpty(this.getConfInfo(x.CONF_ACSSCODE))||isNullOrEmpty(e)?(D.warn("getSavedRecallInfo no pas"),""):{isVideo:this.isVideoConf(),confid:e,access_code:this.getConfInfo(x.CONF_ACSSCODE),conf_paswd:this.getConfInfo(x.CONF_PWD_ENCODE),call_type:1,isVMR:t}}},{key:"enterConfInConfList",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("enterConfInConfList . confId =",t),this.setConfInfo(x.CONF_SERVER_ID,t),r={page_index:1,page_size:100},r.sub_conf_id=n,r.conf_id=t,e.next=7,this.getConfInfoFromServer(r);case 7:if(!((a=e.sent)&&a.param&&a.param.get_conf_info_result&&a.param.get_conf_info_result.conf_list_info)){e.next=32;break}return o=a.param.get_conf_info_result.conf_list_info,i=o.conf_id,s=o.vmr_id,this.setConfInfo(x.MEDIA_TYPE,o.media_type),this.setConfInfo(x.CONF_SERVER_ID,i),this.setConfInfo(x.VMR_ID,s),this.setConfInfo(x.CONF_ACSSCODE,o.access_number),u=o.chairman_pwd,(""===u||isNaN(u))&&(u=o.general_pwd),t=isNullOrEmpty(s)?i:s,e.next=21,this.oneKeyEnterConf(o.access_number,t,u,this.isVideoConf());case 21:if(!(f=e.sent)){e.next=27;break}return D.info("enterConfInConfList oneKeyEnterConf suc"),e.abrupt("return",!0);case 27:return D.error("enterConfInConfList oneKeyEnterConf fail"),this.unInit(),e.abrupt("return",!1);case 30:e.next=35;break;case 32:return D.error("enterConfInConfList getConfInfoRes fail"),this.unInit(),e.abrupt("return",!1);case 35:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterConfByIdOnly",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,l,d,h,p,_,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("enterConfByIdOnly . confId =",t),this.setConfInfo(x.CONF_ID_INPUT,t),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return r=e.sent,a=new PromiseObject,r.setNotifyFunc(491594,function(e){a.resolve(e)}),e.next=9,r.getConfAuthInfo(t);case 9:if(!(o=e.sent)){e.next=14;break}D.info("enterConfByIdOnly getConf[Auth]Info send to tup suc"),e.next=17;break;case 14:return D.error("enterConfByIdOnly getConf[Auth]Info send to tup fail,res = "+o),this.unInit(),e.abrupt("return",{isSuc:!1,errorCode:-1});case 17:return e.next=19,a;case 19:if(i=e.sent,r.setNotifyFunc(491594,null),i&&i.param){e.next=24;break}return D.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.abrupt("return",{isSuc:!1,errorCode:-1});case 24:if(0===i.param.result){e.next=28;break}return D.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),this.unInit(),e.abrupt("return",{isSuc:!1,errorCode:i.param.result});case 28:if(s=i.param.conf_authinfo,u=s.access_number,l=s.hasAccessNumber,d=s.needPassword,h=1===l?u:"",D.info("needPassword = "+d+",hasAccessNumber = "+l),0!==d&&isNullOrEmpty(n)){e.next=44;break}return p="",isNullOrEmpty(n)||(p=n),e.next=36,this.oneKeyEnterConf(h,t,p,!0,C);case 36:if(!(_=e.sent)){e.next=41;break}return e.abrupt("return",{isSuc:!0,accessNum:h});case 41:return e.abrupt("return",{isSuc:!1,errorCode:-2,accessNum:h});case 42:e.next=46;break;case 44:return this.unInit(),e.abrupt("return",{isSuc:!1,isNeedPwd:!0,accessNum:h});case 46:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCallEndedForOneKeyEnterConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return D.error("callEndedForOne[Key]EnterConf data or data.param is null, = "+(0,f.default)(t)),e.abrupt("return",!1);case 3:if(t.param.call_id===this.getConfInfo(x.CALL_ID)){e.next=6;break}return D.warn("callEndedForOne[Key]EnterConf callid is differ,so return"),e.abrupt("return",!1);case 6:return n=t.param.reason_code,r=t.param.endcall_reason,coreCommon.Observer.publish("CallEndedInConf",n,r,this.getConfInfo(x.CALL_ID)),e.next=11,this.unInit();case 11:return window.CLIENTCONFIG.ISBIGWIN&&(4041===n&&(coreConf.NotifyConfNoStart(0),D.info("NotifyConfNoStart")),4042===n&&(coreConf.NotifyConfTermination(0),D.info("NotifyConfTermination"))),A.reCallEnterConf(),coreCall.deleteCallObject(this.getConfInfo(x.CALL_ID)),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"endCall",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("call service ,callId = "+this.getConfInfo(x.CALL_ID)),isNullOrEmpty(this.getConfInfo(x.CALL_ID))){e.next=11;break}return e.next=4,new coreTup.HWTupCall;case 4:return t=e.sent,e.next=7,t.endCall(this.getConfInfo(x.CALL_ID));case 7:n=e.sent,D.info("endCall endcall res = "+(0,f.default)(n)),e.next=12;break;case 11:D.info("callid is null,no need to tell tup");case 12:this.unInit(),coreCall.deleteCallObject(this.getConfInfo(x.CALL_ID));case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"bookConf",value:function(){function e(e,n,r,a,o,i,s,c,u){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u,f){var l,d,h,p,_,v,m,S,g,E,w,I,T,N,b,O,A,R,y,L;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(l=this.confInfo.members.length,this.setConfFlag(k.B_CONNECT_TO_CONF,!1),d=[],h=$getState().conf.isSupportAS,p=!0,_=!1,v=void 0,e.prev=7,m=(0,C.default)(this.confInfo.members);!(p=(S=m.next()).done);p=!0)g=S.value,E={number:g.number,name:g.userInfo.name,acount_id:g.userInfo.account,role:g.role,is_mute:0,email:g.userInfo.email,sms:g.userInfo.mobile,is_auto_invite:!0,type:h?parseInt(g.type):0},d.push(E);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),_=!0,v=e.t0;case 15:e.prev=15,e.prev=16,!p&&m.return&&m.return();case 18:if(e.prev=18,!_){e.next=21;break}throw v;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return w=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),I=$getState().conf.hasConFRight,T=$getState().conf.showvmrornot,N=I&&T?15:1,b=T?1:0,D.info("book conf,this mediax_conf_type is",N),O={book_conf_info_uportal:{size:l,subject:t,group_uri:n,multi_stream_flag:r,media_type:a,start_time:i,conf_len:s,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==w?0:1,user_type:o,num_of_attendee:l,attendee:d,time_zone:u.toString(),nopassword:f,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:N}},h&&(O.book_conf_info_uportal.vmr_flag=b),e.next=33,new coreTup.HwTupConfCtrlSdk;case 33:return A=e.sent,e.next=36,A.bookConf(O);case 36:return R=e.sent,y=0===f?1:0,L=2===this.confInfo.recordType?1:0,0===R.result?(coreUt.utEventStart(constant.EVENT_ID.UT_CONF_BOOK,null,[a,t,i,s,u.toString(),y,L]),D.info("bookConf success")):(coreUt.utCustomEvent(constant.EVENT_ID.UT_CONF_BOOK,[a,t,i,s,u.toString(),y,L,0,R.result]),D.error("bookConf failed, result = "+R.result),window.ToastNew(language.CONFERENCE_BOOK_FAILED,2)),e.abrupt("return",R);case 41:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return e}()},{key:"p2pTransferConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,l,d,h,p,_,v,m,S,g,E,w,I,T,N,b,O;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.confInfo.members.length,this.initMemberState(t),r=[],a=$getState().conf.hasConFRight,o=$getState().conf.showvmrornot,i=a&&o?15:1,s=$getState().conf.isSupportAS,u=o?1:0,D.info("book conf,this mediax_conf_type is",i),l=!0,d=!1,h=void 0,e.prev=12,p=(0,C.default)(this.confInfo.members);!(l=(_=p.next()).done);l=!0)v=_.value,m=!0,(v.role||v.number===t.userInfo.number)&&(m=!1),S={number:v.number,name:v.userInfo.name,acount_id:v.userInfo.account,role:v.role,is_mute:0,email:v.userInfo.email,sms:"",is_auto_invite:m,type:s?parseInt(v.type):0},r.push(S);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),d=!0,h=e.t0;case 20:e.prev=20,e.prev=21,!l&&p.return&&p.return();case 23:if(e.prev=23,!d){e.next=26;break}throw h;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return g={call_id:t.callId,create_conf_info:{subject:t.confSubject,group_uri:t.groupUri,multi_stream_flag:t.isMultiStream,media_type:t.mediaType,language:"2052"===window.langcode?0:1,user_type:t.userType,num_of_attendee:n,attendee:r,nopassword:t.noPassword,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:i}},s&&(g.create_conf_info.vmr_flag=u),e.next=32,new coreTup.HwTupConfCtrlSdk;case 32:return E=e.sent,w=this,I=new PromiseObject,E.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===w.getConfInfo(x.CONF_HANDLE)&&I.resolve(e)}),e.next=38,E.p2pTransferConf(g);case 38:if(T=e.sent,0!==T.result){e.next=48;break}N="*****"+t.confSubject.substr(4),D.info("p2pTransferConf success, confhandle = "+T.param.conf_handle+",confSubject = "+desensitive(N)),this.confInfo.confHandle=T.param.conf_handle,this.setConfInfo(x.CONF_ROLE,1),this.updateConfSubject(t.confSubject),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=50;break;case 48:return D.error("p2pTransferConf failed, result = "+T.result),e.abrupt("return",{isSuc:!1,errorCode:-1});case 50:return e.next=52,I;case 52:if(b=e.sent,E.setNotifyFunc(491546,null),0!==b.param.ret){e.next=59;break}return b.param.create_conf_result?(O=b.param.create_conf_result,D.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+O.conf_id+",conf_role = "+O.conf_role+",media_type = "+O.media_type+",len of pas = "+O.password.length+",handle = "+b.param.handle),this.setConfInfo(x.CONF_ROLE,O.conf_role),this.setConfInfo(x.CONF_SERVER_ID,O.conf_id),this.setConfInfo(x.MEDIA_TYPE,O.media_type),this.setConfInfo(x.CONF_PASSCODE,O.password)):D.warn("create_conf_result is null, res = "+(0,f.default)(b)),e.abrupt("return",{isSuc:!0});case 59:return D.info("notify create conf failed, ret = "+b.param.ret),e.abrupt("return",{isSuc:!1,errorCode:b.param.ret});case 61:case"end":return e.stop()}},e,this,[[12,16,20,28],[21,,23,27]])}));return e}()},{key:"initMemberState",value:function(e){if(D.info("init conf member state for p2p trans to conf"),e.selfInfo){var t=this.confInfo.members.findIndex(function(t){return e.selfInfo.account===t.userInfo.account});-1!==t&&(this.confInfo.members[t].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF)}}},{key:"upgradeConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={conf_handle:this.confInfo.confHandle,add_media:{media_type:16|this.confInfo.mediaType,group_uri:this.confInfo.groupUri}},e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.upgradeConf(t);case 6:if(r=e.sent,0!==r.result){e.next=12;break}return D.info("upgrade conf success"),e.abrupt("return",!0);case 12:D.error("upgrade conf failed, result = "+r.result);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"endConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setConfFlag(k.IS_USER_END_CONF,!0),this.getConfFlag(k.B_CONNECT_TO_CONF)){e.next=5;break}return D.info("not connect to conf, request conf control [token] before end conf"),e.next=5,this.requestConfToken();case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(x.CONF_HANDLE))){e.next=37;break}return D.info("endConf confHandle is exsit"),e.next=10,new coreTup.HwTupConfCtrlSdk;case 10:return n=e.sent,r=this,a=new PromiseObject,n.setNotifyFunc(491547,function(e){e&&e.param&&e.param.handle===r.getConfInfo(x.CONF_HANDLE)&&a.resolve(e)}),e.next=16,n.endConf(this.getConfInfo(x.CONF_HANDLE));case 16:if(t=e.sent,o=this.getCurrentConfId(),0!==t.result){e.next=32;break}return D.info("endconf send to tup suc"),coreUt.utEventStart(constant.EVENT_ID.UT_CONF_END,null,[o]),i=setTimeout(function(){a.resolve({param:{ret:-1}})},3e3),e.next=24,a;case 24:s=e.sent,D.info("endconf result back,res = "+(0,f.default)(s)),clearTimeout(i),i=null,0===s.param.ret?(coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_END,null,[1]),coreConf.getConfInfoFromDb()):coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_END,null,[0,s.param.ret]),t=!0,e.next=35;break;case 32:D.info("endconf send to tup fail,errorCode = "+(0,f.default)(t)),coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_END,[0,t.result]),t=!1;case 35:e.next=49;break;case 37:if(isNullOrEmpty(this.getConfInfo(x.CALL_ID))){e.next=48;break}return e.next=40,new coreTup.HWTupCall;case 40:return u=e.sent,e.next=43,u.endCall(this.getConfInfo(x.CALL_ID));case 43:t=e.sent,D.info("endConf endcall res = "+(0,f.default)(t)),t=0===t.result,e.next=49;break;case 48:D.info("end conf do nothing");case 49:return this.unInit(),coreCall.deleteCallObject(this.getConfInfo(x.CALL_ID)),t?D.info("end conf success"):(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_END,[0,t.result]),D.error("end conf failed, result = "+t.result)),this.timeoutTimer=setTimeout(function(){D.info("endConf 500ms leave dataconf"),window.CLIENTCONFIG.ISMOBILE?M.beLeaveDataConf():M.terminateconf()},500),e.abrupt("return",t);case 54:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfMTnumber",value:function(e){coreCommon.Observer.publish("ConfMTnumber",e.param)}},{key:"handleConfConnected",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return D.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.getConfInfo(x.CONF_HANDLE)===t.param.handle){e.next=6;break}return D.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_JOIN,["handleConfConnected",1]),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[1],!0),D.info("handleConfConnected ",t.param.handle),coreCommon.BigwinObserver.publish("OnChangeHasSent",!1),this.setConfFlag(k.B_CONNECT_TO_CONF,!0),this.setConfInfo(x.CALL_ID,t.param.call_id),n=!1,t.param.connect_info&&(r=t.param.connect_info.conf_subject,D.info("conf connected! conf_subject = "+handlePhoneNumber(r.substr(0,3))+handlePhoneNumber(r.substr(3))+",media_type = "+t.param.connect_info.media_type+",is_svc_conf = "+t.param.connect_info.is_svc_conf),this.setConfInfo(x.MEDIA_TYPE,t.param.connect_info.media_type),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=""),this.updateConfSubject(r),n=1===t.param.connect_info.is_svc_conf),!window.isHubEnv){e.next=18;break}if(this.isVideoConf()){e.next=18;break}return D.info("not video conf in maxhub, return confConnected"),e.abrupt("return");case 18:if(!n){e.next=26;break}return D.info("handleConfConnected isSvc = "+n+",current isSvc = "+this.getIsSvc()),a=!1,this.getIsSvc()||(this.svc=new y.default,a=!0),this.svc.changeSsrcRange(t.param.connect_info),a&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=26,this.svc.init(this.getConfInfo(x.CALL_ID));case 26:this.joinConf();case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfInfoNotify",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return D.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.confInfo.confHandle===t.param.handle){e.next=6;break}return D.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(n=!1,t.param.conf_info?(this.setConfInfo(x.VMR_ID,t.param.conf_info.vmr_id),this.setConfInfo(x.CONF_SERVER_ID,t.param.conf_info.conf_id),this.setConfInfo(x.MEDIA_TYPE,t.param.conf_info.media_type),this.setConfInfo(x.DATA_RANDOM,t.param.conf_info.data_random),this.setConfInfo(x.AC_TEMP_TOKEN,t.param.conf_info.acTmpToken),n=1===t.param.conf_info.is_svc_conf):D.error("handleConfInfoNotify data.param.conf_info is null"+(0,f.default)(t.param.conf_info)),!window.isHubEnv&&(window.isPluginEnv,1)){e.next=12;break}if(this.isVideoConf()){e.next=12;break}return coreCommon.Observer.publish("confInfoNotifyIsNotVideoConf"),e.abrupt("return");case 12:if(coreCommon.Observer.publish("ConfInfoNotify"),window.isHubEnv&&(window.pairId&&0!==window.pairId&&(D.info("send maxhub pair join conf success"),coreConf.sendJoinPairResult(window.pairId,constant.PAIR_CONF_RESULT.SUCCESS)),D.info("send maxhub join conf success"),(0,b.NotifyMyJoinConf)(0,"")),I.default.getEnterDataConfInAdvance()||this.enterDataConf(t),this.getDetailConfInfo(),!n){e.next=24;break}return D.info("handleConfInfoNotify isSvc = "+n+",current isSvc = "+this.getIsSvc()),r=!1,this.getIsSvc()||(this.svc=new y.default,r=!0),this.svc.changeSsrcRange(t.param.conf_info),r&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=24,this.svc.init();case 24:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSvcSeessionModify",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.svc_lables))return void D.error("handleSvcSeessionModify param is null,param = "+(0,f.default)(t));var t=e.param;if(1!==t.is_svccall)return void D.warn("handleSvcSeessionModify is not svcConf, no need deal");D.info("handleSvcSeessionModify isSvc = true, current isSvc = "+this.getIsSvc());var n=!1;this.getIsSvc()||(this.svc=new y.default,n=!0),this.svc.changeSsrcRange(t,!0),n&&coreCommon.Observer.publish("changeIsSvcConf"),coreCommon.Observer.publish("SvcSessionModify")}},{key:"getConfInfoFromServer",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new PromiseObject,e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return r=e.sent,a=function(e){if(e.param&&e.param.get_conf_info_result&&e.param.get_conf_info_result.conf_list_info){e.param.get_conf_info_result.conf_list_info.conf_id===s.getConfInfo(x.CONF_SERVER_ID)?(D.info("confInfo for getConfInfoFromServer suc"),n.resolve(e)):D.info("confInfo for getConfInfoFromServer wait for next")}else D.error("confInfo for getConfInfoFromServer error"),n.resolve(e)},r.setMultiNotifyFunc(491564,a),o=r.getConfInfo(t),o?D.info("getConfInfoFromServer getConfInfo  send to tup suc"):(D.error("getConfInfoFromServer getConfInfo send to tup fail,res = "+o),n.resolve(!1)),e.next=10,n;case 10:return i=e.sent,r.getNotifyCallbacks(491564).remove(a),e.abrupt("return",i);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDetailConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(this.getSavedRecallInfo())||window.isSupportiDo){e.next=3;break}return D.info("no need to get confInfo"),e.abrupt("return");case 3:return t=this.getConfInfo(x.CONF_SERVER_ID),n={page_index:1,page_size:100},n.sub_conf_id="0",n.conf_id=t,e.next=9,this.getConfInfoFromServer(n);case 9:r=e.sent,r&&r.param&&r.param.get_conf_info_result&&r.param.get_conf_info_result.conf_list_info?(a=r.param.get_conf_info_result.conf_list_info,t=a.conf_id,o=a.vmr_id,this.setConfInfo(x.MEDIA_TYPE,a.media_type),this.setConfInfo(x.CONF_SERVER_ID,t),this.setConfInfo(x.VMR_ID,o),this.setConfInfo(x.CONF_ACSSCODE,a.access_number),i=a.chairman_pwd,(""===i||isNaN(i))&&(i=a.general_pwd),this.saveConfPas(i),s=a.conf_subject,D.info("handleGetConfInfoRes suc,confSubject = "+(s?s.substr(0,1)+"***":"")),this.updateConfSubject(s)):D.info("handleGetConfInfoRes fail");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterDataConf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(isNullOrEmpty(e)){if(this.isDataConf()){D.info("[IT-Meeting] start enter data conf.");var t={};t.confKey=this.getConfInfo(x.CONF_PASSCODE),t.mediaType=this.getConfInfo(x.MEDIA_TYPE),t.confServerId=this.getConfInfo(x.CONF_SERVER_ID),t.confCallId=this.getConfInfo(x.CALL_ID),coreConf.handleSmcEnterDataConf(t)}}else if(window.CLIENTCONFIG.USE_MEETING&&(""!==this.getConfInfo(x.DATA_RANDOM)||this.isDataConf()))if(window.CLIENTCONFIG.ISMOBILE||(D.info(" confinfonotify  PC Logic  "),coreCommon.Observer.publish("OnConfInfoNotify",{})),I.default.getDeployMode()!==constant.MEETING_NET_TYPE.SMC_MEETING){var n=e.param.conf_info;n.getParamType=3,coreConf.joinDataConf(n,this.confInfo.confCallId)}else{var r={};r.confKey=this.getConfInfo(x.CONF_PASSCODE),r.confToken=this.getConfInfo(x.AC_TEMP_TOKEN),r.mediaType=this.getConfInfo(x.MEDIA_TYPE),r.confServerId=this.getConfInfo(x.CONF_SERVER_ID),r.confCallId=this.getConfInfo(x.CALL_ID),coreConf.handleSmcEnterDataConf(r)}}},{key:"handleConfRightResult",value:function(e){if(D.info("handleConfRightResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);this.setSpeakerReport()}},{key:"setSpeakerReport",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING){e.next=6;break}return D.info("setSpeakerReport, confHandle = ",this.confInfo.confHandle),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:t=e.sent,t.setSpeakerReport(this.confInfo.confHandle);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfAttendeeListUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("handleConfAttendeeListUpdate, handle="+t.param.handle+", attendeeNum="+t.param.conf_status.num_of_participant),this.confInfo.confHandle===t.param.handle){e.next=4;break}return D.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 4:0===t.param.conf_status.num_of_participant&&(D.info("handleConfAttendeeListUpdate, clear AttendeeList"),t.param.conf_status.participants=[]),this.confInfo.updatedParticipants=t.param.conf_status.participants,t.param.conf_status.is_all_mute?this.confInfo.isAllMute=1:this.confInfo.isAllMute=0,this.confInfo.numOfParticipant=t.param.conf_status.num_of_participant,this.confInfo.confSubject=t.param.conf_status.subject,coreCommon.Observer.publish("AttendeeListUpdate",t.param.conf_status.participants,t.param.conf_status.subject,!1,t.param.conf_status.is_all_mute);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBigConfInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("BigConfInfoNotify",t);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleVideoWatchResult",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||this.confInfo.confHandle===t.param.handle){e.next=3;break}return D.error("handleVideoWatchResult not same conf, ret.handle is = "+t.param.handle+",confInfo.confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:t&&t.param?(0===t.param.operation_rsp_reason?D.error("handleVideoWatchResult fail,hanlde = "+t.param.handle+",operation_rsp_reason = "+t.param.operation_rsp_reason):D.info("handleVideoWatchResult suc,hanlde = "+t.param.handle),coreCommon.Observer.publish("handleVideoWatchRes",t.param.operation_rsp_reason)):D.error("handleVideoWatchResult ret is null or ret.param is null");case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"lockConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("lockAttendee, operator isLock = "+t),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.lockConf(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleLockConfResult",value:function(e){if(D.info("handleLockConfResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("lockResult",e)}},{key:"handleConfstateLock",value:function(e){D.info("handleConfstateLock ",e.param.handle),coreCommon.Observer.publish("lockState",e)}},{key:"handup",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("handup, operator isHandup = "+t),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return r=e.sent,e.next=6,r.handupAttendee(this.confInfo.confHandle,n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleHandupAttendeeResult",value:function(e){if(D.info("handleHandupAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("handupResult",e)}},{key:"muteAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.confInfo.members.find(function(e){return e.number===n})||D.error("not conf attendee, numer =",handlePhoneNumber(n)),D.info("muteAttendee, operator ismute = "+t+", attendee = "+handlePhoneNumber(n)),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return r=e.sent,e.next=7,r.muteAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,0===a.result?coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,[t?1:0,1]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,[t?1:0,0,a.result]),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMuteAttendeeResult",value:function(e){if(D.info("handleMuteAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("MuteAttendeeResult",e)}},{key:"muteConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("muteConf, operator ismute = "+t+", confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.muteConf(this.confInfo.confHandle,t);case 6:r=e.sent,a=this.getCurrentConfId(),0===r.result?coreUt.utEventStart(constant.EVENT_ID.UT_CONF_MUTE,null,[a,t?1:0]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_MUTE,[t?1:0]);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMuteConfResult",value:function(e){if(D.info("handleMuteConfResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);this.confInfo.isAllMute=e.param.to_mute,coreCommon.Observer.publish("MuteConfResult",e)}},{key:"handleConfBroadCastLocal",value:function(e){D.info("handleConfBroadCastLocal ",e.param.handle),coreCommon.Observer.publish("IsBroadcastLocal",e)}},{key:"releaseChairman",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("releaseChairman, confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.releaseChairman(this.confInfo.confHandle,t);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReleaseChairmanResult",value:function(e){if(D.info("handleReleaseChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);!$getState().conf.isVideoConf||window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReleaseChairmanResult",e):coreCommon.Observer.publish("handleConfReleaseChairman",e)}},{key:"requestChairman",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("requestChairman, confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return r=e.sent,e.next=6,r.requestChairman(this.confInfo.confHandle,t,n);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReqChairmanResult",value:function(e){if(D.info("handleReqChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);!$getState().conf.showqusetchairman||window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReqChairmanResult",e):coreCommon.Observer.publish("handleConfRequestChairman",e)}},{key:"handleEnterPwdToChairmanResult",value:function(e){if(D.info("smc reqChairman result",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("EnterPwdToChairmanResult",e)}},{key:"reInviteAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("reInvite attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),n=void 0,r=this.confInfo.members.length,a=-1,o=$getState().conf.isSupportAS,i=0;case 6:if(!(i<r)){e.next=15;break}if(this.confInfo.members[i].number!==t){e.next=12;break}return this.confInfo.members[i].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,n={number:t,name:this.confInfo.members[i].userInfo.name,acount_id:this.confInfo.members[i].userInfo.account,role:this.confInfo.members[i].role,is_mute:0,email:this.confInfo.members[i].userInfo.email,sms:this.confInfo.members[i].userInfo.sms,is_auto_invite:1,type:o?parseInt(this.confInfo.members[i].type):0},a=i,e.abrupt("break",15);case 12:++i,e.next=6;break;case 15:if(!n){e.next=28;break}return coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),s={num_of_attendee:1,attendee_info:[n]},e.next=20,new coreTup.HwTupConfCtrlSdk;case 20:return u=e.sent,e.next=23,u.inviteAttendee(this.confInfo.confHandle,s);case 23:f=e.sent,0===f.result?coreUt.utEventStart(constant.EVENT_ID.UT_CONF_INVITE,null,[this.getCurrentConfId()]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_INVITE,[0,f.result]),0!==f.result&&a>=0&&(this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)),e.next=29;break;case 28:D.error("can not find conf member");case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,h,p,_,C;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("add attendee size = "+t.length+", confHandle = "+this.confInfo.confHandle),n=[],r=[],a=$getState().conf.isSupportAS,o=0;case 5:if(!(o<t.length)){e.next=30;break}if(i=t[o],window.isSupportiDo){e.next=21;break}s=!1,u=this.confInfo.members.length,f=0;case 11:if(!(f<u)){e.next=19;break}if(this.confInfo.members[f].number!==i.number){e.next=16;break}return this.confInfo.members[f].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT?(D.info("attendee("+handlePhoneNumber(i.number)+") is quit state in conf, reinvite"),this.confInfo.members[f].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,l={number:i.number,name:this.confInfo.members[f].userInfo.name,acount_id:this.confInfo.members[f].userInfo.account,role:this.confInfo.members[f].role,is_mute:0,email:this.confInfo.members[f].userInfo.email,sms:this.confInfo.members[f].userInfo.sms,is_auto_invite:1,type:a?parseInt(this.confInfo.members[o].type):0},n.push(l)):D.info("attendee("+handlePhoneNumber(i.number)+") is already in conf, do nothing"),s=!0,e.abrupt("break",19);case 16:++f,e.next=11;break;case 19:if(!s){e.next=21;break}return e.abrupt("continue",27);case 21:d={number:i.number,userInfo:i,role:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:0,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0},this.confInfo.members.push(d),this.confInfo.numOfParticipant++,i.number===i.bind_no&&r.push(i),h={number:i.number,name:i.name,acount_id:i.account,role:0,is_mute:0,email:i.email,sms:i.sms,is_auto_invite:1,type:a?parseInt(i.type):0},n.push(h);case 27:++o,e.next=5;break;case 30:if(!(n&&n.length>0)){e.next=43;break}return window.isSupportiDo||coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),this.dealAddToGroup(r,this.confInfo.groupUri),p={num_of_attendee:n.length,attendee_info:n},e.next=36,new coreTup.HwTupConfCtrlSdk;case 36:return _=e.sent,e.next=39,_.inviteAttendee(this.confInfo.confHandle,p);case 39:C=e.sent,0!==C.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_INVITE,[0,C.result]),D.error("invite attendees failed"),"win"===window.CLIENTCONFIG.PLATFORM&&E.SvcAtdManager.alertBox("LANG_NATIVE_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_INVITE_FAILED,4,!1,"pcToast",""),this.updateAttendeesToQuit(t)):(coreUt.utEventStart(constant.EVENT_ID.UT_CONF_INVITE,null,[this.getCurrentConfId()]),D.info("invite attendees succeed")),e.next=44;break;case 43:D.error("no attendee to invite");case 44:case"end":return e.stop()}},e,this)}));return e}()},{key:"hangupAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("userClick  hangup attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.hangupAttendee(this.confInfo.confHandle,t);case 6:r=e.sent,0===r.result?coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_HANGUP,[1]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_HANGUP,[0,r.result]);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"callAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("call attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.callAttendee(this.confInfo.confHandle,t);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("remove attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.removeAttendee(this.confInfo.confHandle,t);case 6:return r=e.sent,D.info("bbbbbbbb remove attender",r),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"localRemoveAttendee",value:function(e){D.info("localRemoveAttendee attendeeNum ",handlePhoneNumber(e));for(var t=this.confInfo.members.length,n=0;n<t;++n)if(this.confInfo.members[n].number===e){this.confInfo.members.splice(n,1);break}}},{key:"updateAttendeesToQuit",value:function(e){for(var t=0;t<e.length;++t)for(var n=e[t],r=this.confInfo.members.length,a=0;a<r;++a)if(this.confInfo.members[a].number===n.number){this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;break}coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)}},{key:"handleConfIncoming",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.conf_incoming_ind))return D.error("handleConfIncoming incomingInfo is null, incomingInfo = "+JSON.stringfy(e)),!1;D.info("conf incoming, handle = "+e.param.handle+", caller is "+handlePhoneNumber(e.param.conf_incoming_ind.number)+", mediaType is "+e.param.conf_incoming_ind.media_type),this.setConfInfo(x.CONF_SERVER_ID,e.param.conf_incoming_ind.conf_id),this.setConfInfo(x.CONF_HANDLE,e.param.handle),this.setConfInfo(x.CALL_ID,e.param.call_id),this.setConfInfo(x.GROUP_URI,e.param.conf_incoming_ind.group_uri),this.setConfInfo(x.COMPERE_NUMBER,e.param.conf_incoming_ind.number),this.setConfInfo(x.MEDIA_TYPE,e.param.conf_incoming_ind.media_type);var t=e.param.conf_incoming_ind.subject;!window.isSupportiDo&&isNullOrEmpty(t)&&(t=e.param.conf_incoming_ind.number+language.CONFERENCE_SUBJECT_INFO),D.info("handleConfIncoming subject = "+(t<2?t.substr(0,1)+"***":t.substr(0,1)+"***"+t.substr(-1))),this.updateConfSubject(t);var n={confHandle:this.getConfInfo(x.CONF_HANDLE),confSubject:this.getConfInfo(x.CONF_SUBJECT),compereNumber:this.getConfInfo(x.COMPERE_NUMBER),mediaType:this.getConfInfo(x.MEDIA_TYPE),groupUri:this.getConfInfo(x.GROUP_URI),isVideo:this.isVideoConf()};return coreCommon.Observer.publish("ConfIncoming",n),!0}},{key:"handleConfBeTransferToConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)&&!isNullOrEmpty(t.param)){e.next=3;break}return D.error("handleConfBeTransferToConf data.param error"+(0,f.default)(t)),e.abrupt("return");case 3:if(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_JOIN,["handleConfBeTransferToConf",1]),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[1],!0),this.setConfInfo(x.CONF_HANDLE,t.param.handle),this.setConfInfo(x.CALL_ID,t.param.call_id),t.param.conf_info?(this.updateConfSubject(t.param.conf_info.subject),this.setConfInfo(x.GROUP_URI,t.param.conf_info.group_uri),this.setConfInfo(x.MEDIA_TYPE,t.param.conf_info.media_type),isNullOrEmpty(this.getConfInfo(x.CONF_PASSCODE))&&this.setConfInfo(x.CONF_PASSCODE,t.param.conf_info.conf_id)):D.warn("handleConfBeTransferToConf data.param.conf_info error"+(0,f.default)(t.param)),!window.isHubEnv||this.getConfInfo(x.IS_VIDEO_CONF)){e.next=11;break}return D.info("not video conf in maxhub, return handleConfBeTransferToConf"),e.abrupt("return");case 11:if(this.joinConf(),!0!==this.getConfFlag(k.IS_RECALL)){e.next=30;break}if(D.info("start mute speak on recall"),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=19;break}return e.next=18,window.isSimCardCall();case 18:e.t0=e.sent;case 19:if(!e.t0){e.next=29;break}return D.info("confTransferToConf now is in simcard call"),e.next=23,coreCommon.SpkControl.getInstance().muteSpk(!0,!1);case 23:return e.next=25,coreCall.muteMicAndSpeaker(1,1);case 25:return e.next=27,coreCall.switchAudioChannel(1);case 27:e.next=30;break;case 29:coreCommon.SpkControl.getInstance().muteSpkForIntervel(3700);case 30:I.default.getEnterDataConfInAdvance()&&this.enterDataConf();case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateConfSubject",value:function(e){var t=this.getConfInfo(x.CONF_SUBJECT);isNullOrEmpty(e)||(t=e),isNullOrEmpty(t)&&(t=this.getConfInfo(x.CONF_ACSSCODE)),this.setConfInfo(x.CONF_SUBJECT,t)}},{key:"joinConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getConfFlag(k.IS_ALREADY_JOIN_CONF)){e.next=3;break}return D.info("already join conf, so return"),e.abrupt("return");case 3:if(this.setConfFlag(k.IS_ALREADY_JOIN_CONF,!0),t=this.isCallTransToConf,coreCommon.Observer.publish("ConfConnected",t),D.info("join conf start"),A.reCallSuc(),window.webView&&window.webView.setKeepScreenOn(),!this.isVideoConf()){e.next=18;break}return coreCall.newCallObject(this.getConfInfo(x.CALL_ID),1),D.info("joinConf isVideoConf to deal camera"),e.next=14,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 14:return e.next=16,coreCommon.CameraControl.getInstance().resetCameraOrient();case 16:e.next=19;break;case 18:coreCall.newCallObject(this.getConfInfo(x.CALL_ID),0);case 19:coreCommon.MicControl.getInstance().init(),coreCommon.SpkControl.getInstance().init(),D.info("video or video conf open speaker outer : "+window.otherAudioDevicesConnect),!window.otherAudioDevicesConnect&&this.isVideoConf()?coreCommon.SpkControl.getInstance().initSetSpeaker(!0):coreCommon.SpkControl.getInstance().initSetSpeaker(!1),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),this.setConfFlag(k.IS_FIRST_ENTER_CONF,!0);case 25:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return D.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return D.info("reject conf, confHandle = "+t),e.next=6,new coreTup.HwTupConfCtrlSdk;case 6:return n=e.sent,e.next=9,n.rejectConf(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return D.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return D.info("accept conf, confHandle = "+t),e.next=6,new coreTup.HwTupConfCtrlSdk;case 6:return r=e.sent,e.next=9,r.acceptConf(t,n);case 9:if(a=e.sent,(0,p.default)(a,{groupUri:this.confInfo.groupUri}),!a||0!==a.result){e.next=16;break}if(!n){e.next=15;break}return e.next=15,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 15:coreCommon.SpkControl.getInstance().cancelSysSpkMute();case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"leaveConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("leave conf, confHandle = "+this.getConfInfo(x.CONF_HANDLE)+"callId = "+handlePhoneNumber(this.getConfInfo(x.CALL_ID))),$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||window.isSupportiDo||this.setConfFlag(k.IS_SMC_FIRST_REQUEST_CHAIRMAN,!0),D.info("leaveMobileDataConf type "+this.getConfInfo(x.MEDIA_TYPE)),e.next=5,M.leaveDataConf();case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(x.CONF_HANDLE))){e.next=16;break}return e.next=9,new coreTup.HwTupConfCtrlSdk;case 9:return n=e.sent,e.next=12,n.leaveConf(this.confInfo.confHandle);case 12:t=e.sent,D.info("leave conf res "+(0,f.default)(t)),e.next=27;break;case 16:if(isNullOrEmpty(this.getConfInfo(x.CALL_ID))){e.next=26;break}return e.next=19,new coreTup.HWTupCall;case 19:return r=e.sent,e.next=22,r.endCall(this.getConfInfo(x.CALL_ID));case 22:t=e.sent,D.info("leaveConf endcall res = "+(0,f.default)(t)),e.next=27;break;case 26:D.info("leave conf do nothing");case 27:return coreCall.deleteCallObject(this.getConfInfo(x.CALL_ID)),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.isOffline&&this.unInit():this.unInit(),e.abrupt("return",t);case 30:case"end":return e.stop()}},e,this)}));return e}()},{key:"broadcastAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("broadcastAttendee, confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return r=e.sent,n=1===t?n:"",e.next=7,r.broadcastAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,0===a.result?coreUt.utEventStart(constant.EVENT_ID.UT_CONF_BROADCAST,null,[this.getCurrentConfId(),t?1:0]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_BROADCAST,[t?1:0,0,a.result]),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfEnded",value:function(e){return e.param.handle!==this.getConfInfo(x.CONF_HANDLE)?(D.error("not same conf, confId = "+e.param.handle+", confHandle = "+this.getConfInfo(x.CONF_HANDLE)),0):(D.info("conf ended, confHandle = "+this.getConfInfo(x.CONF_HANDLE)),e&&e.param&&836===e.param.reason&&!isNullOrEmpty(this.getSavedRecallInfo())?coreCall.recallOrHangup(this.getSavedRecallInfo(),!1,""):coreCommon.Observer.publish("ConfEnded",e),coreCall.deleteCallObject(this.getConfInfo(x.CALL_ID)),this.unInit(),1)}},{key:"handleConfSpeakerNotify",value:function(e){if(D.info("handleConfSpeakerNotify handle="+e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("ConfSpeakerNotify",e.param.floor_attendee_info)}},{key:"handleTransToConfResult",value:function(e){if(D.info("handleTransToConfResult handle=",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void D.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("TransToConfResult",e)}},{key:"updateConfMemberList",value:function(e){this.confInfo.members=e}},{key:"dealAddToGroup",value:function(e,t){if(e.length>0&&""!==this.confInfo.groupUri){for(var n=0,r=0;r<this.confInfo.members.length;r++)""!==this.confInfo.members[r].account&&n++;n+=e.length,n>100?coreCommon.Observer.publish("ExceedGroupMemNum"):coreCommon.Observer.publish("AddToGroupFromConf",e,t)}}},{key:"getConfMemberListContent",value:function(){for(var e=this.confInfo.members,t=e?e.length:0,n=language.COMMON_NAME+"        "+language.NEW_CONT_NUMBER+"        "+language.CONFERENCE_STATE+"\r\n",r=n+"---------------------------------------------\r\n",a="",o=0;o<t;++o){var i=e[o].userInfo.name?e[o].userInfo.name:"null",s="null";switch(isNullOrEmpty(e[o].userInfo.number)?isNullOrEmpty(e[o].userInfo.bind_no)||(s=e[o].userInfo.bind_no):s=e[o].userInfo.number,e[o].state){case constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:a=language.CONFERENCE_MEMBER_STATE_INVITING;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:a=language.CONFERENCE_MEMBER_STATE_INCONF;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT:a=language.CONFERENCE_MEMBER_STATE_QUIT;break;default:a="null"}r+=i+"    "+s+"    "+a+"\r\n"}return r}},{key:"requestConfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("request conf [token] ","confHandle:"+this.confInfo.confHandle),!this.confInfo.confRole||!this.confInfo.confPasscode){e.next=11;break}return t="",e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return n=e.sent,e.next=8,n.requestConfCtrlRight(this.confInfo.confHandle,this.confInfo.compereNumber,this.confInfo.confPasscode,t);case 8:return e.abrupt("return",e.sent);case 11:return D.warn("role is not compere or conf passcode is null"),e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendWatchSvcRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,h,p,_;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return D.error("sendWatchSvcRequest param error, the attendeeList is empty"),e.abrupt("return",!1);case 3:return e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return r=e.sent,a={user_num:n,conf_handle:this.confInfo.confHandle,svc_watch_attendee:{count:t.length,attendee:t}},e.next=9,r.sendWatchSvcRequest(a);case 9:for(o=e.sent,i=new Array,s=!0,u=!1,f=void 0,e.prev=14,l=(0,C.default)(t);!(s=(d=l.next()).done);s=!0)h=d.value,p=h.number,-1===i.indexOf(p)&&i.push(handlePhoneNumber(p));e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),u=!0,f=e.t0;case 22:e.prev=22,e.prev=23,!s&&l.return&&l.return();case 25:if(e.prev=25,!u){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return _=i.join(),0===o.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_WATCH_SVC,[1,_,1]),D.info("sendWatchSvcRequest success",o.result)):(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_WATCH_SVC,[1,_,0,o.result]),D.info("sendWatchSvcRequest failed",o.result)),e.abrupt("return",o);case 33:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"confctrlWatchAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("confctrlWatchAttendee"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.confctrlWatchAttendee(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeActiveDirection",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("changeActiviteDirection"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.changeActiveDirection(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"cloudRecordRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("cloudRecordRequest, confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return r=e.sent,e.next=6,r.cloudRecordRequest(this.confInfo.confHandle,t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"confSignRequest",value:function(){function e(e,n,r,a,o,i){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i){var s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("confSignRequest, confHandle = "+this.confInfo.confHandle),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return s=e.sent,e.next=6,s.confSignRequest(this.confInfo.confHandle,t,n,r,a,o,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInitDeviceControl",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("unInitDeviceControl"),e.next=3,coreCommon.SpkControl.getInstance().makeSysSpkMute();case 3:coreCommon.CameraControl.getInstance().unInit(),coreCommon.SpkControl.getInstance().unInit(),coreCommon.MicControl.getInstance().unInit();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMobileBfcpStatus",value:function(){if(!window.CLIENTCONFIG.ISMOBILE)return void D.info("handleMobileBfcpStatus is no need for pc");D.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}},{key:"configMsDataConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("configMsDataconf "+t),n={conf:{enable_ms_dataconf:t}},e.next=4,new coreTup.HWTupCall;case 4:return r=e.sent,e.next=7,r.config(n);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopBfcpData",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==$getState().call.iSreceivingBFCP){e.next=7;break}return D.info("stop bfcp call in end call"),$dispatch(coreUi.setBfcpReceiving(!1)),e.next=5,new coreTup.HWTupCall;case 5:t=e.sent,t.stopData(this.getConfInfo(x.CALL_ID));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCanvasSocket",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=4;break}return e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:coreCall.closeSvcDataSocket();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInit",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("unInit"),this.closeCanvasSocket(),this.handleMobileBfcpStatus(),e.next=5,this.configMsDataConf(1);case 5:this.stopBfcpData(),coreCommon.SpkControl.getInstance().setHandsFree(!1),this.unInitDeviceControl();case 8:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new i.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=P},1116:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"getDeployMode",value:function(){return $getState().login.deployMode}},{key:"getIsUseITBuried",value:function(){return!!window.CLIENTCONFIG.ISBIGWIN}},{key:"getInterfaceToOneKeyEnterConf",value:function(){return e.getDeployMode()===constant.MEETING_NET_TYPE.MEDIAX_MEETING}},{key:"getInterfaceToStartVipCall",value:function(){return!(!window.CLIENTCONFIG.ISBIGWIN||isNullOrEmpty(window.confVip))}},{key:"getEnterDataConfInAdvance",value:function(){return!!(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN&&window.isSupportiDo)}},{key:"changeMediaTypeToAudioData",value:function(){return!(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN||!1!==window.linkSmcIsVideo&&!1!==window.bigConfIsVideo)}}]),e}();t.default=c},1117:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransferConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.createConf=t.endCall=t.endConf=t.leaveConf=t.setConfNotifyFuncAtomic=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(600),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=window.Logger("confModel")("queue"),l=coreCommon.TaskQueue.getInstance("confServiceQueue"),d=coreCommon.TaskOptions.defaultOptions(),h=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("set confctrl service callback func"),e.next=3,new coreTup.HWTupCall;case 3:return t=e.sent,t.setMultiNotifyFunc(98311,_),t.setMultiNotifyFunc(98341,E),e.next=8,new coreTup.HwTupConfCtrlSdk;case 8:return n=e.sent,n.setNotifyFunc(491539,C),n.setNotifyFunc(491559,v),n.setNotifyFunc(491543,m),n.setNotifyFunc(491540,S),n.setNotifyFunc(491541,g),n.setNotifyFunc(491542,w),e.next=17,u.setConfNotifyFunc();case 17:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p=new coreCommon.AtomicAction("setConfNotifyFunc",h);t.setConfNotifyFuncAtomic=p;var _=(t.leaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("leaveConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.leaveConf,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("endConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.endConf,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.endCall=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("endCall add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.endCall,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("createConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.createConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("oneKeyEnterConfService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.oneKeyEnterConfService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfInConfListService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfInConfListService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfByIdOnlyService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfByIdOnlyService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("p2pTransferConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.p2pTransferConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){f.info("handleCallEndedPostConf add in queue"),l.addTask(u.handleCallEndedPostConf,d,null,e)}),C=function(e){f.info("handleConfIncoming add in queue"),l.addTask(u.handleConfIncoming,d,null,e)},v=function(e){f.info("handleTransToConfResult add in queue"),l.addTask(u.handleTransToConfResult,d,null,e)},m=function(e){f.info("handleConfBeTransferToConf add in queue"),l.addTask(u.handleConfBeTransferToConf,d,null,e)},S=function(e){f.info("handleConfConnected add in queue"),l.addTask(u.handleConfConnected,d,null,e)},g=function(e){f.info("handleConfInfoNotify add in queue"),l.addTask(u.handleConfInfoNotify,d,null,e)},E=function(e){f.info("handleSvcSeessionModify add in queue"),l.addTask(u.handleSvcSeessionModify,d,null,e)},w=function(e){f.info("handleConfEnded add in queue"),l.addTask(u.handleConfEnded,d,null,e)}},1118:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confctrlInitAtomic=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(204),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=window.Logger("conf")("ctrlinit"),h=function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreCommon.registeModuleListener("login",_),e.next=3,s.default.all([m(),S(),E(),g()]);case 3:return e.next=5,w();case 5:return e.next=7,I();case 7:return e.next=9,C();case 9:return v(),T(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p=new coreCommon.AtomicAction("confctrlInit",h);t.confctrlInitAtomic=p;var _=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("tokenUpdate"===t.event){e.next=2;break}return e.abrupt("return");case 2:return d.info("refresh[Token] tk length = "+desensitive(t.data.length)),e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return n=e.sent,e.next=8,n.setToken(t.data);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=coreAccount.getLoginModel(),n=t.stgAccount,r=t.stgUri,a=t.fireWallMode,i=t.deployMode,s="",e.next=4,coreSecurity.PasswordManager.getPassword("stgPassword");case 4:return c=e.sent,r&&(s=r+","+n+","+c),d.info("initDataConf deployMode = "+i+",fireWallMode = "+a+",stgURL length = "+r.length),e.next=9,l.initDataConf(i,a,s);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().login.isSupportCACertCheck,n=$getState().conf.isSupportAS,d.info("confCertificateCheck isSupportCACertCheck = "+t+",isSupportAS = "+n),n&&t){e.next=6;break}return d.info("no need set cert for confctrl"),e.abrupt("return");case 6:return e.next=8,new coreTup.HwTupConfCtrlSdk;case 8:return r=e.sent,a=window.EXEC_PATH,i={ca_cert_path:a,client_cert_path:"",client_key_path:"",client_privkey_pwd:"",verify_mode:1,verify_server_mode:0},e.next=13,r.confCertificateCheck(i);case 13:s=e.sent,0!==s.result?d.info("conf certificate check fail"):d.info("conf certificate check success");case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=coreAccount.getLoginModel(),n=t.deployMode,r=window.isSupportiDo?1:0,d.info("setInitParam, deployMode = "+n+",confctrl_ido = "+r),a={init_param:{wait_msgp_thread:1,batch_update:0,connect_call:1,confctrl_ido:r,save_participant_list:n===constant.MEETING_NET_TYPE.MEDIAX_MEETING?1:0},log:{log_level:3,maxsize_kb:1e4,file_count:2,log_path:window.LOG_PATH,enable_json_log:0|window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG}},e.next=6,new coreTup.HwTupConfCtrlSdk;case 6:return i=e.sent,e.next=9,i.confCtrlInit(a);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=coreAccount.getLoginModel(),n=t.deployMode,d.info("setConfEnvType, deployMode = "+n),r=n===constant.MEETING_NET_TYPE.SMC_MEETING?4:3,e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return a=e.sent,e.next=8,a.setConfEnvType(r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=coreAccount.getLoginModel(),n=t.authToken,d.info("setInit[Token], tk length = "+desensitive(n.length)),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return r=e.sent,e.next=7,r.setToken(n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.isSupportAS,n=coreAccount.getLoginModel(),r=n.serverUportalAddress,a=n.serverPort,i=n.asAddress,s=n.tempsipserverAddress,c=n.sipLoginOnly,u="",f="",c?(d.info("set sipLoginOnly address to use"),u=s,f=8443):t&&!isNullOrEmpty(i)?(d.info("set asAddress to use"),u=i.split(":")[0],f=i.split(":")[1]):(d.info("set medixAddress to use"),u=r,f=a),d.info("conf ctrl init, isSupportAS = "+t+",serverUportalAddress = "+u+",serverPort = "+f+",asAddress = "+i+",sipLoginOnly = "+c),e.next=8,new coreTup.HwTupConfCtrlSdk;case 8:return l=e.sent,e.next=11,l.setServerParams(u,f);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSupportiDo){e.next=3;break}return d.info("setLocalConfName is no need in rest"),e.abrupt("return");case 3:if(t=coreAccount.getLoginModel(),n=t.sipLoginOnly,r=t.account,a="",!n){e.next=9;break}a=$getState().login.tempSipNick,e.next=13;break;case 9:return e.next=11,coreContact.getContactByAccount(r);case 11:i=e.sent,a=getContactName(i);case 13:return s="",isNullOrEmpty(a)||(s=a.length<=2?a.substr(0,1)+"**":a.substr(0,1)+"**"+a.substr(-1)),d.info("setLocalConfName, sipLoginOnly = "+n+",userName = "+s),e.next=18,new coreTup.HwTupConfCtrlSdk;case 18:c=e.sent,c.setLocalConfName(a);case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.isSupportProxy,r=t.proxyAddress,a=t.proxyPort,i=t.proxyAccount,e.next=3,coreSecurity.PasswordManager.getPassword("proxyPassword");case 3:return s=e.sent,n||(d.info("is not support proxy"),r="",a="0",i="",s=""),c={port:parseInt(a),uri:r,user_name:i,password:s},d.info("proxy_param.uri = "+c.uri+",proxy_param.port = "+c.port),e.next=9,new coreTup.HwTupConfCtrlSdk;case 9:u=e.sent,u.confCtrlSetProxy(c);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=coreAccount.getLoginModel().sipLoginOnly?1:0,d.info("settempuserflag param = "+t),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return n=e.sent,e.next=7,n.settempuserflag(t);case 7:r=e.sent,0===r.result?d.info("settempuserflag success"):d.info("settempuserflag failed, result = ",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressSaveDesktopShareSet=t.hidePickSharingWindow=t.startShareScreen=t.getDesktopShareInDbLogic=t.saveDesktopShareSettingLogic=t.hideSetDesktopShareModal=t.showDesktopShareSettingContact=t.setIsUsePrimarySize=t.startAppSharingWindow=t.rejectRemoteControl=t.setRemoteControl2Other=t.initializeDataConf=void 0;var r=n(1671),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.initializeDataConf=function(){return(new a.default).initializeDataConf()},t.setRemoteControl2Other=function(e){return(new a.default).setRemoteControl2Other(e)},t.rejectRemoteControl=function(e){return(new a.default).rejectRemoteControl(e)},t.startAppSharingWindow=function(e){return(new a.default).startAppSharingWindow(e)},t.setIsUsePrimarySize=function(){return(new a.default).setIsUsePrimarySize()},t.showDesktopShareSettingContact=function(e,t){return(new a.default).showDesktopShareSettingContact(e,t)},t.hideSetDesktopShareModal=function(){return(new a.default).hideSetDesktopShareModal()},t.saveDesktopShareSettingLogic=function(e){return(new a.default).saveDesktopShareSettingLogic(e)},t.getDesktopShareInDbLogic=function(){return(new a.default).getDesktopShareInDbLogic()},t.startShareScreen=function(){return(new a.default).startShareScreen()},t.hidePickSharingWindow=function(){return(new a.default).hidePickSharingWindow()},t.compressSaveDesktopShareSet=function(e,t){return(new a.default).compressSaveDesktopShareSet(e,t)}},112:function(e,t,n){e.exports={default:n(160),__esModule:!0}},1120:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(98),i=a(o),s=n(217),c=a(s),u=n(110),f=a(u),l=n(1),d=a(l),h=n(2),p=a(h),_=n(4),C=a(_),v=n(5),m=a(v),S=n(186),g=n(400),E=r(g),w=n(204),I=r(w),T=n(234),N=n(413),b=n(224),O=n(401),A=n(209),R=window.Logger("dataconf")("logic"),y=function(){function e(){var t=this;(0,C.default)(this,e),this.handleApplistResult=function(){var e=(0,p.default)(d.default.mark(function e(n){var r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=I.getShareAppHwnd())||!O.DFConfig.isAppShareEnabled){e.next=10;break}return e.next=4,t.processProgramList(n);case 4:a=e.sent,R.info("get program list , length = "+a.length),$dispatch(coreUi.changeSharingAppWindow(a)),t.toggleShowPickSharingWindow(),e.next=21;break;case 10:return e.next=12,I.setSharingapp(r);case 12:return e.next=14,T.NativeInterface.setHightlightShareWnd(r,!0);case 14:return o=e.sent,e.next=17,I.setAppShareScreenParam(9,{width:3,height:0});case 17:return e.next=19,I.setStart();case 19:$dispatch(coreUi.changeFirstActiveShareApp(!1)),o&&I.setTransparentwindow(o,7);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramList=function(){var e=(0,p.default)(d.default.mark(function e(n){var r,a,o,i,s,u,l,h,p,_,C,v,m,S,g;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,f.default)(n.param).map(function(e){return[String(e),n.param[e]]}),a=[],(0,f.default)(n.param).map(function(e){if(-1!==e.indexOf("hwnd")){var t=n.param[e];t>0&&a.push(t)}}),R.info("processProgramList getWindowIcon start "),o=new c.default,e.next=7,T.NativeInterface.getWindowIcon(a);case 7:i=e.sent,i&&(R.info("get window thumbnail result"),o=t.processProgramThumbnail(i.param,r)),R.info("processProgramList getWindowIcon end"),s=[],u={handler:0,title:language.SHARING_DESKTOP,thumbnail:window.__dirname+"/../resources/icon/share_desktop.png"},s.push(u),l={handler:0,title:language.SHARING_WHITE_BOARD,thumbnail:window.__dirname+"/../resources/icon/whiteboard.png"},s.push(l),!0===O.DFConfig.isDocShareEnabled()&&(h={handler:0,title:language.SHARING_DOCUMENTS,thumbnail:window.__dirname+"/../resources/icon/share_doc.png"},s.push(h)),p=0;case 17:if(!(p<r.length)){e.next=35;break}if(_=r[p],-1===_[0].indexOf("hwnd")||isNullOrEmpty(_[1])||!(_[1]>0)){e.next=32;break}C=_[0].replace("hwnd",""),v="wndTitle"+C,m=0;case 23:if(!(m<r.length)){e.next=32;break}if(S=r[m],S[0]!==v){e.next=29;break}return g={handler:_[1],title:S[1],thumbnail:o.get(_[0])},"CloudLink"!==g.title&&""!==g.title&&"Huawei Meeting"!==g.title&&void 0!==g.thumbnail&&s.push(g),e.abrupt("break",32);case 29:m++,e.next=23;break;case 32:p++,e.next=17;break;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramThumbnail=function(e,t){var n=new c.default;if(!isNullOrEmpty(e)){R.info("processProgramThumbnail start ");for(var r=0;r<e.length;r++)for(var a=e[r],o=parseInt(a.hwnd),i=0;i<t.length;i++){var s=t[i],u=parseInt(s[1]);if(o===u){n.set(s[0],a.path);break}}R.info("processProgramThumbnail end")}return n},this.toggleShowPickSharingWindow=function(){$getState().conf.isShowPickSharingWindow?$dispatch(coreUi.togglePickSharingWindow(!1)):$dispatch(coreUi.togglePickSharingWindow(!0))},this.showPickSharingWindow=function(){if(!isNullOrEmpty(window.pickSharingWin))return void t.hidePickSharingWindow();R.info("testwhite pickSharingWin new windows");var e=new remote.BrowserWindow({useContentSize:!0,height:454,width:570,alwaysOnTop:!0,resizable:!1,minimizable:!1,maximizable:!1,autoHideMenuBar:!0,fullscreenable:!1,title:language.SHARING_SHARE}),r=n(955).format({protocol:"file",slashes:!0,pathname:n(956).join(window.__dirname,"pickSharingWindow.html")});e.loadURL(r),window.pickSharingWin=e,e.on("closed",function(){window.pickSharingWin=null,t.hidePickSharingWindow()}),e.once("ready-to-show",function(e){R.info("testwhite pickSharingWin ready to show"),$dispatch(coreUi.togglePickSharingWindow(!0))}),e.webContents.on("did-finish-load",function(){isNullOrEmpty(window.pickSharingWin)||isNullOrEmpty(window.pickSharingWin.getURL())||R.info("testwhite pickSharingWin did-finish-load"),$dispatch(coreUi.togglePickSharingWindow(!0))})},this.hidePickSharingWindow=function(){$dispatch(coreUi.togglePickSharingWindow(!1))},this.openShareScreen=(0,p.default)(d.default.mark(function e(){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf,r=n.isSvcConf,a=n.setShareQuality,o={},r?S.SvcAtdManager.switchVideoToMin():E.switchVideoToMin(),a=100===a?1:40===a?0:2,o=(0,i.default)(o,{share_quality:a}),S.SvcAtdManager.setParam(o);case 6:case"end":return e.stop()}},e,t)})),this.resumeVideoWhenDataEnd=function(){},this.onRequestOperateTokenFail=function(){S.SvcAtdManager.alertBox(language.START_SHAIRE_FAILED,3),t.proxy.stopShareScreen()},this.updateComponentStatus=function(){var e=(0,p.default)(d.default.mark(function e(n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("docshare updateComponentStatus: ",n),r=n.component,r!==constant.COMPONENT_IID.IID_COMPONENT_DS&&r!==constant.COMPONENT_IID.IID_COMPONENT_AS&&r!==constant.COMPONENT_IID.IID_COMPONENT_WB&&t.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleReceiveScreenKeyFrame=function(e){t.onAsOnRecvFirstFrame(e)},this.onAsOnRecvFirstFrame=function(){var e=(0,p.default)(d.default.mark(function e(n){var r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("recv first frame"),e.next=3,new A.HwNativeWndSdk;case 3:return r=e.sent,e.next=6,r.notifyDataRecvFirstFrame();case 6:a=e.sent,R.info("onAsOnRecvFirstFrame,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleDataShareEnd=function(){},this.switchVideoFloating=function(){},this.resumeVideoWhenDataEnd=function(){},this.proxy=null}return(0,m.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(O.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("updateComponentStatus",this.updateComponentStatus,e)}},{key:"closeBfcpFrameForSharingSession",value:function(){}},{key:"closeBfcpFrameForOwnerChanged",value:function(){S.SvcAtdManager.closeBfcpFrame(),E.closeBfcpFrame()}},{key:"clearBfcpTimer",value:function(){}},{key:"closeAppShare",value:function(){}},{key:"initDeviceStates",value:function(){N.ToolbarManager.initDeviceStates()}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(d.default.mark(function e(t,n){var r,a,o,i,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf,a=r.bfcpFrameHwnd,o=r.isSvcConf,i=$getState().call.avcBfcpHwnd,s=0,!((s=o?a:i)>0)){e.next=10;break}return R.info("changeDataConfShowMode bfcpFrameHwnd = "+s+" ,destoryBFCPFram"),e.next=8,S.SvcAtdManager.closeBfcpFrame();case 8:return e.next=10,E.closeBfcpFrame();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){R.info("handleCloseNativeDataWnd")}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(d.default.mark(function e(){var t,n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:t=$getState().conf,n=t.confHandle,r=t.isVideoConf,r&&!isNullOrEmpty(n)?S.SvcAtdManager.alertBox(language.SHARING_JOINCONF_FAIL,3):window.alert(language.SHARING_JOINCONF_FAIL);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){"CALL_CONNECTED"===$getState().call.callStatus&&appService.showMainWindow(!0),coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){I.setShareAppHwnd(0),I.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;R.info("recv first frame, notify to proxy other share is start",e),(0,b.NotifyStartSharing)(0,e)}}]),e}();t.default=y},1121:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.JsInterface=t.unregisterNativeWndEvent=t.registerNativeWndEvent=void 0;var a,o,i=n(98),s=r(i),c=n(4),u=r(c),f=n(1),l=r(f),d=n(100),h=r(d),p=n(2),_=r(p),C=n(186),v=n(1122),m=r(v),S=n(234),g=n(851),E=n(158),w=n(413),I=n(400),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(I),N=n(204),b=n(224),O=window.Logger("conf")("logic/nativeWnd/JsInterface"),A=[],R=(t.registerNativeWndEvent=function(){var e=(0,_.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("registerNativeWndEvent"),m.default.setNativeWndNotifyFunc(),A=[],t=coreCommon.Observer.subscribe("handlePageSwitchNotify",R.handlePageSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleModeSwitchNotify",R.handleModeSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleWatchNotify",R.handleWatchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetMicVol",R.handleSetMicVolNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetSpkVol",R.handleSetSpkVolNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetCamera",R.handleSetCameraNotify),A.push(t),t=coreCommon.Observer.subscribe("handleDial",R.handleDialNotify),A.push(t),t=coreCommon.Observer.subscribe("handleChairman",R.handleChairmanNotify),A.push(t),t=coreCommon.Observer.subscribe("handleConfReleaseChairman",R.handleReleaseChairmanResNotify),A.push(t),t=coreCommon.Observer.subscribe("handleConfRequestChairman",R.handleRequestChairmanResNotify),A.push(t),t=coreCommon.Observer.subscribe("handleHangup",R.handleHangupNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSelectBoxSwitch",R.handleSelectBoxSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("OnSharingAppEnded",R.onSharingAppEnded),A.push(t),t=coreCommon.Observer.subscribe("handleAddMemberDialog",R.handleAddMemberDialog),A.push(t),t=coreCommon.Observer.subscribe("handleAttendanceDialog",R.handleAttendanceDialog),A.push(t),t=coreCommon.Observer.subscribe("handleShowQos",R.handleShowQos),A.push(t),t=coreCommon.Observer.subscribe("handleQueryUserInfo",R.handleQueryUserInfo),A.push(t),t=coreCommon.Observer.subscribe("handleConfCtrl",R.handleConfCtrl),A.push(t),t=coreCommon.Observer.subscribe("handleRemoveVideo",R.handleRemoveVideo),A.push(t),t=coreCommon.Observer.subscribe("handleConfRecording",R.handleConfRecording),A.push(t),t=coreCommon.Observer.subscribe("handleActiveBidirection",R.handleActiveBidirection),A.push(t),t=coreCommon.Observer.subscribe("handleCPURate",R.handleCPURate),A.push(t),t=coreCommon.Observer.subscribe("handleProgramSharing",R.handleProgramSharing),A.push(t),t=coreCommon.Observer.subscribe("handleShowVideoDevSettings",R.handleShowVideoDevSettings),A.push(t),t=coreCommon.Observer.subscribe("handleUpdateAuxHwnd",R.handleUpdateAuxHwnd),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListMoving",R.handleMemberListMoving),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListFocus",R.handleMemberListFocus),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListWindowStatus",R.handleMemberListWindowStatus),A.push(t),t=coreCommon.Observer.subscribe("handleStartIMChat",R.handleStartIMChat),A.push(t),O.info("registerNativeWndEvent JsInterfaceTokens = "+(0,h.default)(A));case 62:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unregisterNativeWndEvent=function(){var e=(0,_.default)(l.default.mark(function e(){var t,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(O.info("unregisterNativeWndEvent"),t=0;t<A.length;t++)n=coreCommon.Observer.unsubscribeToken(A[t]),n?O.debug("unsubscribeToken success token = "+A[t]):O.debug("unsubscribeToken false token = "+A[t]);A=[];case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.JsInterface=(o=a=function e(){(0,u.default)(this,e)},a.handlePageSwitchNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.pos-1)>=0&&C.SvcAtdManager.handlePageSwitch(n);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleModeSwitchNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.layout,r=t.frameHwnd,a=$getState().conf.isSvcConf,n>0&&(a?(O.info("insrte handleModeSwitch to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(C.SvcAtdManager.handleModeSwitch,{},null,n,r)):T.setViewMode(n,r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleWatchNotify=function(e){if(!window.CLIENTCONFIG.ISBIGWIN){var t=$getState().conf,n=t.svcViewMode,r=t.isSvcBroadcastMode,a=t.isDataConfSharing,o=t.selfRole,i=$getState().call.iSreceivingBFCP;if(r&&!i&&!a&&!o){$dispatch(coreUi.changeIsSvcSelectMode(!1));var c={};return c=(0,s.default)(c,{isSvcSelectMode:!1}),void C.SvcAtdManager.setParam(c)}var u=e.hwnd;if(null===u||0===u)C.SvcAtdManager.handleCancelWatch();else{var f=C.SvcAtdManager.getAttendeeByHwnd(u);C.SvcAtdManager.handleWatch(n,f)}var l=$getState().conf,d=l.svcPreViewMode,h=l.svcOnLineAttendances,p=d||g.SVC_VIEW_MODE.BIG_SMALL_MODE;C.SvcAtdManager.setPageNum(p,h.length)}},a.handleSetMicVolNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetMicVolNotify, param = "+(0,h.default)(t)),w.ToolbarManager.setMicVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSetSpkVolNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetSpkVolNotify, param = "+(0,h.default)(t)),w.ToolbarManager.setSpkVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSetCameraNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetCameraNotify, param = "+(0,h.default)(t)),w.ToolbarManager.setCameraStu(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleDialNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleDialNotify, param = "+(0,h.default)(t)),e.next=3,w.ToolbarManager.dialClk(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleChairmanNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleChairmanNotify, param = "+(0,h.default)(t)),w.ToolbarManager.applyOrReleasechairman(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleRequestChairmanResNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleRequestChairmanResNotify, res = "+(0,h.default)(t)),w.ToolbarManager.handleRequestChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.onSharingAppEnded=(0,_.default)(l.default.mark(function e(){var t,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,N.getShareAppHwnd)(),n=(0,N.getCloseShareDataOperate)(),O.info("The SharingApp handle  is invalidate, Stop Sharing. hasCloseShareDataOperate:",n),n&&window.CLIENTCONFIG.ISBIGWIN||O.info("onSharingAppEnded,  stopShareScreen."),O.info("onSharingAppEnded ",t),S.NativeInterface.setHightlightShareWnd(t,!1),(0,N.setShareAppHwnd)(0),(0,N.setOldShareAppHwnd)(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));case 9:case"end":return e.stop()}},e,void 0)})),a.handleReleaseChairmanResNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleReleaseChairmanResNotify, res = "+(0,h.default)(t)),w.ToolbarManager.handleReleaseChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleHangupNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleHangupNotify, param = "+(0,h.default)(t)),e.next=3,w.ToolbarManager.hangup(t);case 3:coreUi.selectBoxCancelDataNWin(),(0,E.cancleConfMemberlistMessage)();case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleAddMemberDialog=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState(),r=n.selectContact.selectcontactisshow,a=!1,isNullOrEmpty(t.move_only)||(a=t.move_only),o={x:t.coordinate.center_x,y:t.coordinate.center_y,w:t.coordinate.width,h:t.coordinate.height},a?r&&(coreUi.selectBoxCancelDataNWin(a),coreUi.initConfSelectBoxAddMember(o)):(O.info("userClick handleAddMemberDialog, param = "+(0,h.default)(t)+",selectcontactisshow = "+r),r?coreUi.selectBoxCancelDataNWin():coreUi.initConfSelectBoxAddMember(o));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleAttendanceDialog=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("userClick The confmember openorclose process:","recevice to openorclose confmember :",t),n=!1,isNullOrEmpty(t.move_only)||(n=t.move_only),r={x:t.coordinate.left_top_x,y:t.coordinate.left_top_y,w:t.coordinate.width,h:t.coordinate.height,isMove:t.move_enable},(0,E.handleShowMemberList)(r,n),coreUi.hideConfRightMenuLogic();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleShowQos=function(e){1===e.show?($dispatch(coreUi.changeShowCallMediaInfo(!0)),coreCall.getCallMediaInfoOfNative()):$dispatch(coreUi.changeShowCallMediaInfo(!1))},a.handleQueryUserInfo=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.SvcAtdManager.getUserInfoByHwnd(t.hwnd);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfCtrl=function(e){C.SvcAtdManager.handleConfCtrl(e)},a.handleRemoveVideo=function(e){w.ToolbarManager.removeVideo(e),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew())},a.handleActiveBidirection=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleActiveBidirection, param = "+(0,h.default)(t)),e.next=3,coreConf.changeActiveDirection(t.dir);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfRecording=function(e){O.info("handleConfRecording, param = "+(0,h.default)(e));var t=$getState(),n=t.conf.isReacrd;e.flag&&0===n?(0,E.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_START):e.flag||1!==n||(0,E.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_END)},a.handleCPURate=function(e){$getState().conf.isSvcConf?C.SvcAtdManager.handleCPURate(e):T.handleCPURate(e)},a.handleProgramSharing=function(e){(0,b.NotifySharingType)(0,e.type)},a.handleShowVideoDevSettings=function(e){O.info("handleShowVideoDevSettings start"),coreUi.toggleShowAudioSetting()},a.handleMemberListMoving=function(e){O.info("handleMemberListMoving",e),e.is_meet_page_moving?coreIpcMainProcess.startWindowToMemberListMove({x:e.coordinate.left_top_x,y:e.coordinate.left_top_y}):coreIpcMainProcess.endWindowToMemberListMove({x:e.coordinate.left_top_x,y:e.coordinate.left_top_y})},a.handleMemberListFocus=function(e){O.debug("handleMemberListFocus",e),e.is_nativewnd_focus&&window.ipcNativeClss.nativeFollowDisplay(e)},a.handleMemberListWindowStatus=function(e){O.info("handleMemberListWindowStatus",e),0===e.nativewnd_size?window.ipcNativeClss.nativeNormalimizeDisplay(e):1===e.nativewnd_size||2===e.nativewnd_size?window.ipcNativeClss.nativeMaximizeDisplay(e):3===e.nativewnd_size&&window.ipcNativeClss.nativeMinimizeDisplay(e)},a.handleStartIMChat=function(e){O.info("handleStartIMChat",e);var t=$getState().call.userInfo,n=$getState().conf.groupId;isNullOrEmpty(n)?isNullOrEmpty(t)?O.error("start chat failed because there is no groupid or userinfo.account!"):(O.info("user click show contact chat,userinfo = "+handlePhoneNumber(t.account)),coreContact.openContactConversationByConf(t,!0),appService.showMainWindow(!0)):(O.info("user click show group dialog btn"),coreIm.openGroupConversationByConf({group_id:n},!0),appService.showMainWindow(!0))},a.handleUpdateAuxHwnd=function(e){O.info("start bfcphwnd = "+e.bfcphwnd+", isBigwnd = "+e.isBigWnd),$getState().conf.isSvcConf?(O.info("insrte nativeNotifyUpdateBfcpFrameWnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(C.SvcAtdManager.nativeNotifyUpdateBfcpFrameWnd,{},null,e.bfcphwnd,e.isBigWnd)):T.nativeNotifyUpdateBfcpFrameWnd(e.bfcphwnd)},o))},1122:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(100),u=r(c),f=n(4),l=r(f),d=n(5),h=r(d),p=n(209),_=window.Logger("model")("model/nativeWndService/nativeWndService"),C=function(){function e(){(0,l.default)(this,e)}return(0,h.default)(e,null,[{key:"handlePageSwitch",value:function(e){_.info("handlePageSwitch,",e.param),coreCommon.Observer.publish("handlePageSwitch",e.param)}},{key:"handleSharingAppEnded",value:function(){coreCommon.Observer.publish("OnSharingAppEnded")}},{key:"handleNotifyNativeDataRenderSize",value:function(e){_.info("handleNotifyNativeDataRenderSize,",e.param),coreCommon.Observer.publish("handleNativeDataRenderSize",e)}},{key:"handleNotifyStartShare",value:function(e){_.info("handleNotifyStartShare",e.param),coreCommon.Observer.publish("OnNativeUserStartDataShare",e)}},{key:"handleNotifyStopShare",value:function(e){_.info("handleNotifyStopShare",e.param),coreCommon.Observer.publish("OnNativeUserStopDataShare",e)}},{key:"handleLeaveConf",value:function(e){_.info("handleLeaveConf"),coreCommon.Observer.publish("OnNativeUserLeaveConf",e)}},{key:"handleEndConf",value:function(e){_.info("handleEndConf"),coreCommon.Observer.publish("OnNativeUserEndConf",e)}},{key:"handleNotifyRequestControl",value:function(e){_.info("handleNotifyRequestControl"),coreCommon.Observer.publish("onNativeNotifyRequestControl",e)}},{key:"handleNotifyReleaseControl",value:function(e){_.info("handleNotifyReleaseControl"),coreCommon.Observer.publish("onNativeNotifyReleaseControl",e)}},{key:"handleNotifyShowConfMember",value:function(e){_.info("handleNotifyShowConfMember"),coreCommon.Observer.publish("onNativeNotifyShowConfMember",e)}},{key:"handleNotifyAddConfMember",value:function(e){_.info("handleNotifyAddConfMember"),coreCommon.Observer.publish("onNativeNotifyAddConfMember",e)}},{key:"handleSetMic",value:function(e){_.info("handleSetMic"),coreCommon.Observer.publish("onNativeNotifySetMic",e)}},{key:"handleSetSpeaker",value:function(e){_.info("handleSetSpeaker"),coreCommon.Observer.publish("onNativeNotifySetSpeaker",e)}},{key:"handleDataFirstFrameRecv",value:function(e){_.info("handleDataFirstFrameRecv start"),coreCommon.Observer.publish("onNativeNotifyDataFirstFrameRecv",e)}},{key:"handleWatchNotify",value:function(e){_.info("handleWatchNotify,",e.param),coreCommon.Observer.publish("handleWatchNotify",e.param)}},{key:"handlePageSwitchNotify",value:function(e){_.info("handlePageSwitchNotify,",e.param),coreCommon.Observer.publish("handlePageSwitchNotify",e.param)}},{key:"handleModeSwitchNotify",value:function(e){_.info("handleModeSwitchNotify,",e.param),coreCommon.Observer.publish("handleModeSwitchNotify",e.param)}},{key:"handleSetMicVol",value:function(e){_.info("handleSetMicVol",e.param),coreCommon.Observer.publish("handleSetMicVol",e.param)}},{key:"handleSetSpkVol",value:function(e){_.info("handleSetSpkVol",e.param),coreCommon.Observer.publish("handleSetSpkVol",e.param)}},{key:"handleSetCamera",value:function(e){_.info("handleSetCamera",e.param),coreCommon.Observer.publish("handleSetCamera",e.param)}},{key:"handleDial",value:function(e){_.info("handleDial",e.param),coreCommon.Observer.publish("handleDial",e.param)}},{key:"handleChairman",value:function(e){_.info("handleChairman",e.param),coreCommon.Observer.publish("handleChairman",e.param)}},{key:"handleHangup",value:function(e){_.info("handleHangup",e.param),coreCommon.Observer.publish("handleHangup",e.param)}},{key:"handleAddMemberDialog",value:function(e){_.info("handleAddMemberDialog",e.param),coreCommon.Observer.publish("handleAddMemberDialog",e.param)}},{key:"handleAttendanceDialog",value:function(e){_.info("handleAttendanceDialog",e.param),coreCommon.Observer.publish("handleAttendanceDialog",e.param)}},{key:"handleShowQos",value:function(e){_.info("handleShowQos",e),coreCommon.Observer.publish("handleShowQos",e.param)}},{key:"handleShowClient",value:function(e){_.info("handleShowClient",e),coreCommon.Observer.publish("onNativeNotifyShowClient",e)}},{key:"handleNotifyPrepareShowRemoteControl",value:function(e){_.info("handleNotifyPrepareShowRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyPrepareRemoteControl",e)}},{key:"handleNotifyChairmanRemoteControl",value:function(e){_.info("handleNotifyChairmanRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyChairmanRemoteControl",e)}},{key:"handleNotifyDataShareQuality",value:function(e){_.info("handleNotifyDataShareQuality ",e),coreCommon.Observer.publish("onNativeNotifyDataShareQuality",e)}},{key:"handleQueryUserInfo",value:function(e){_.info("handleQueryUserInfo "+(0,u.default)(e)),coreCommon.Observer.publish("handleQueryUserInfo",e.param)}},{key:"handleConfCtrl",value:function(e){coreCommon.Observer.publish("handleConfCtrl",e.param)}},{key:"handleCPURate",value:function(e){_.info("handleCPURate "+(0,u.default)(e)),coreCommon.Observer.publish("handleCPURate",e.param)}},{key:"handleActiveBidirection",value:function(e){_.info("handleActiveBidirection "+(0,u.default)(e)),coreCommon.Observer.publish("handleActiveBidirection",e.param)}},{key:"handleRemoveVideo",value:function(e){_.info("handleRemoveVideo "+(0,u.default)(e)),coreCommon.Observer.publish("handleRemoveVideo",e.param)}},{key:"handleConfRecording",value:function(e){_.info("handleConfRecording "+(0,u.default)(e)),coreCommon.Observer.publish("handleConfRecording",e.param)}},{key:"handleProgramSharing",value:function(e){_.info("handleProgramSharing "+(0,u.default)(e)),coreCommon.Observer.publish("handleProgramSharing",e.param)}},{key:"handleShowVideoDevSettings",value:function(e){_.info("handleShowVideoDevSettings "+(0,u.default)(e)),coreCommon.Observer.publish("handleShowVideoDevSettings",e.param)}},{key:"handleMemberListMoving",value:function(e){_.info("handleMemberListMoving"),coreCommon.Observer.publish("handleMemberListMoving",e.param)}},{key:"handleMemberListFocus",value:function(e){_.info("handleMemberListFocus"),coreCommon.Observer.publish("handleMemberListFocus",e.param)}},{key:"handleMemberListWindowStatus",value:function(e){_.info("handleMemberListWindowStatus"),coreCommon.Observer.publish("handleMemberListWindowStatus",e.param)}},{key:"handleStartIMChat",value:function(e){_.info("handleStartIMChat"),coreCommon.Observer.publish("handleStartIMChat",e.param)}},{key:"handleUpdateAuxHwnd",value:function(e){_.info("handleUpdateAuxHwnd "+(0,u.default)(e)),coreCommon.Observer.publish("handleUpdateAuxHwnd",e.param)}}]),e}();C.setNativeWndNotifyFunc=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.HwNativeWndSdk;case 2:t=e.sent,t.setNotifyFunc(1,C.handleNotifyNativeDataRenderSize),t.setNotifyFunc(2,C.handleNotifyShowConfMember),t.setNotifyFunc(3,C.handleNotifyAddConfMember),t.setNotifyFunc(4,C.handleNotifyStartShare),t.setNotifyFunc(5,C.handleNotifyRequestControl),t.setNotifyFunc(6,C.handleNotifyReleaseControl),t.setNotifyFunc(9,C.handleLeaveConf),t.setNotifyFunc(10,C.handleEndConf),t.setNotifyFunc(11,C.handleSetMic),t.setNotifyFunc(12,C.handleSetSpeaker),t.setNotifyFunc(13,C.handleSharingAppEnded),t.setNotifyFunc(14,C.handleShowClient),t.setNotifyFunc(15,C.handleNotifyStopShare),t.setNotifyFunc(16,C.handleNotifyPrepareShowRemoteControl),t.setNotifyFunc(17,C.handleNotifyChairmanRemoteControl),t.setNotifyFunc(18,C.handleNotifyDataShareQuality),t.setNotifyFunc(19,C.handleDataFirstFrameRecv),t.setNotifyFunc(21,C.handleProgramSharing),t.setNotifyFunc(101,C.handleSetMicVol),t.setNotifyFunc(102,C.handleSetSpkVol),t.setNotifyFunc(103,C.handleSetCamera),t.setNotifyFunc(104,C.handleModeSwitchNotify),t.setNotifyFunc(105,C.handleDial),t.setNotifyFunc(106,C.handlePageSwitchNotify),t.setNotifyFunc(107,C.handleWatchNotify),t.setNotifyFunc(108,C.handleChairman),t.setNotifyFunc(109,C.handleHangup),t.setNotifyFunc(110,C.handleAddMemberDialog),t.setNotifyFunc(111,C.handleAttendanceDialog),t.setNotifyFunc(112,C.handleShowQos),t.setNotifyFunc(113,C.handleQueryUserInfo),t.setNotifyFunc(114,C.handleConfCtrl),t.setNotifyFunc(115,C.handleCPURate),t.setNotifyFunc(116,C.handleActiveBidirection),t.setNotifyFunc(117,C.handleRemoveVideo),t.setNotifyFunc(118,C.handleConfRecording),t.setNotifyFunc(119,C.handleShowVideoDevSettings),t.setNotifyFunc(120,C.handleUpdateAuxHwnd),t.setNotifyFunc(121,C.handleMemberListMoving),t.setNotifyFunc(122,C.handleMemberListFocus),t.setNotifyFunc(123,C.handleMemberListWindowStatus),t.setNotifyFunc(124,C.handleStartIMChat),t.setNativeWndLogPath(LOG_PATH);case 46:case"end":return e.stop()}},e,void 0)})),t.default=C},1123:function(e,t,n){"use strict";(function(t,r){function a(e,t){e="string"==typeof e?{ec_level:e}:e||{};var n={type:String(t||e.type||"png").toLowerCase()},r="png"==n.type?h:p;for(var a in r)n[a]=a in e?e[a]:r[a];return n}function o(e,n){n=a(n);var r=u(e,n.ec_level,n.parse_url),o=new c;switch(o._read=d,n.type){case"svg":case"pdf":case"eps":t.nextTick(function(){l[n.type](r,o,n.margin,n.size)});break;case"svgpath":t.nextTick(function(){var e=l.svg_object(r,n.margin,n.size);o.push(e.path),o.push(null)});break;case"png":default:t.nextTick(function(){var e=f.bitmap(r,n.size,n.margin);n.customize&&n.customize(e),f.png(e,o)})}return o}function i(e,t){t=a(t);var n,o=u(e,t.ec_level,t.parse_url),i=[];switch(t.type){case"svg":case"pdf":case"eps":l[t.type](o,i,t.margin,t.size),n=i.filter(Boolean).join("");break;case"png":default:var s=f.bitmap(o,t.size,t.margin);t.customize&&t.customize(s),f.png(s,i),n=r.concat(i.filter(Boolean))}return n}function s(e,t){t=a(t,"svg");var n=u(e,t.ec_level);return l.svg_object(n,t.margin)}var c=n(535).Readable,u=n(1684).QR,f=n(1688),l=n(1697),d=function(){},h={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},p={parse_url:!1,ec_level:"M",margin:1,size:0};e.exports={matrix:u,image:o,imageSync:i,svgObject:s}}).call(t,n(154),n(116).Buffer)},1124:function(e,t,n){"use strict";(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function i(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(g.isFunction(e)){if(I)return e.name;var t=e.toString(),n=t.match(N);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(I||!g.isFunction(e))return g.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function f(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function l(e,t,n,r,a){throw new T.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function d(e,t){e||l(e,!0,t,"==",T.ok)}function h(e,t,n,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(g.isDate(e)&&g.isDate(t))return e.getTime()===t.getTime();if(g.isRegExp(e)&&g.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(i(e)&&i(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),_(e,t,n,s))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(g.isPrimitive(e)||g.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=p(e),o=p(t);if(a&&!o||!a&&o)return!1;if(a)return e=w.call(e),t=w.call(t),h(e,t,n);var i,s,c=b(e),u=b(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(i=c[s],!h(e[i],t[i],n,r))return!1;return!0}function C(e,t,n){h(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",C)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function m(e){var t;try{e()}catch(e){t=e}return t}function S(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=m(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&l(a,n,"Missing expected exception"+r);var o="string"==typeof r,i=!e&&g.isError(a),s=!e&&a&&!n;if((i&&o&&v(a,n)||s)&&l(a,n,"Got unwanted exception"+r),e&&a&&n&&!v(a,n)||!e&&a)throw a}var g=n(864),E=Object.prototype.hasOwnProperty,w=Array.prototype.slice,I=function(){return"foo"===function(){}.name}(),T=e.exports=d,N=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=s(t),o=r.indexOf("\n"+a);if(o>=0){var i=r.indexOf("\n",o+1);r=r.substring(i+1)}this.stack=r}}},g.inherits(T.AssertionError,Error),T.fail=l,T.ok=d,T.equal=function(e,t,n){e!=t&&l(e,t,n,"==",T.equal)},T.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",T.notEqual)},T.deepEqual=function(e,t,n){h(e,t,!1)||l(e,t,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(e,t,n){h(e,t,!0)||l(e,t,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(e,t,n){h(e,t,!1)&&l(e,t,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=C,T.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",T.strictEqual)},T.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",T.notStrictEqual)},T.throws=function(e,t,n){S(!0,e,t,n)},T.doesNotThrow=function(e,t,n){S(!1,e,t,n)},T.ifError=function(e){if(e)throw e};var b=Object.keys||function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t}}).call(t,n(16))},1125:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConferenceId=t.getExperienceConferenceInfo=t.joinExperienceMeeting=void 0;var a=n(1126),o=r(a),i=n(962),s=r(i);t.joinExperienceMeeting=o.joinExperienceMeeting,t.getExperienceConferenceInfo=s.getExperienceConferenceInfo,t.checkConferenceId=s.checkConferenceId},1126:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.joinExperienceMeeting=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(863),f=(r(u),n(962)),l=r(f),d=n(158),h=window.Logger("logic")("conference/audio/joinConference");t.joinExperienceMeeting=function(){var e=(0,c.default)(i.default.mark(function e(){var t,n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.experienceConfId,!l.checkConferenceId(t)){e.next=4;break}return h.info("joinExperienceMeeting confId is null, so return"),e.abrupt("return");case 4:return h.info("joinExperienceMeeting start"),e.next=7,coreSecurity.PasswordManager.getPassword("experienceConfPwd");case 7:return n=e.sent,h.info("joinExperienceMeeting get confPas suc"),r={confId:$getState().conf.experienceConfId,confPas:n,confSubject:language.EXPERIENCE_CONFERENCE},e.next=12,(0,d.enterConfByIdOnlyWithConfPas)(r);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1127:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairStartEndMeeting=t.pairInviteAttendeeNotify=t.pairInviteJoinConf=t.pairCreatHandleAndGetToken=t.pairLinkageConfNotify=t.startPairMeeting=t.handleEndConf=t.pairLinkageConfStateNotify=t.pairCallStateNotify=t.pairSubscribeNotify=t.pairCtrSubscribe=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(158),u=n(965),f=n(413),l=window.Logger("logic")("synergism/conference"),d=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: start request conf ctrl [token], handle="+t+", number="+n),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return i=e.sent,e.next=6,i.requestConfCtrlRight(t,n,r,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: creat pair conf handle, confId="+t),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.creatConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: destroy pair conf handle, handle="+t),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:return n=e.sent,e.next=6,n.destroyConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_=(t.pairCtrSubscribe=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request subscribe call state, switch=",t),n=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairSubscribe(n,t);case 4:r=e.sent,0!==r.result?l.info("BLE: request subscribe call state failed, rsp=",r):l.info("BLE: request subscribe call state success");case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairSubscribeNotify=function(e){l.info("BLE: notify, get subscribe result"),0!==e.result&&l.info("BLE: notify, subscribe call state failed")},t.pairCallStateNotify=function(e){var t=e.callstate;l.info("BLE: notify, paired peripherals call state changed, callState=",t);var n=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==n)return void l.info("BLE: no paired peripherals, pair state=",n);var r=$getState().synergismInfo.pairedDeviceConf.callstate;if((0,u.setPairDeviceConfInfo)(e),$getState().synergismInfo.inPairConf)if(constant.PAIR_CALL_STATE.IN_CONFERENCE===t||constant.PAIR_CALL_STATE.ESTABLISHED===t){l.info("BLE: get conf established notify by paired peripherals, call state=",t);var a=$getState().synergismInfo.pairConfInfo.media_type;(0,c.handlePairJoinConf)(a)}else constant.PAIR_CALL_STATE.IDLE===t&&t!==r&&(l.info("BLE: get conf end notify by paired peripherals, old state=",r),m())},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request open or close conf linkage, confId="+t+", switch="+n),r=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairLinkage(r,n,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),C=(t.pairLinkageConfStateNotify=function(e){l.info("BLE: notify, linkage conf state changed");var t=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==t)return void l.info("BLE: no paired peripherals, pair state=",t);$dispatch(coreUi.changePairConfRole(e.ischairman))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={number:n,role:0,is_mute:0,is_auto_invite:1},a={num_of_attendee:1,attendee_info:[r]},e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return i=e.sent,e.next=7,i.inviteAttendee(t,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(l.info("BLE: try to join conf failed"),""!==$getState().conf.confHandle&&(p($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle("")),e){var t=$getState().synergismInfo.pairConfInfo,n=_(t.conf_id,0);l.info("BLE: close linkage, ret=",n)}(0,u.setIsInPairConf)(!1),$dispatch(coreUi.changeCallStatus("")),(0,c.handleIsShowJoinButton)(!0),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),coreCommon.showAlert(""+language.PAIR_JOIN_CONF_FAILED)},m=t.handleEndConf=function(){l.info("BLE: start to close conf page"),(0,u.setIsInPairConf)(!1),p($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle(""),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),(0,c.handleClosePairConfPage)()},S=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, confId="+t+", isEnd="+n),r=$getState().synergismInfo.tokenIndex,a=void 0,!n){e.next=9;break}return e.next=6,coreCall.pairLinkageEnd(r,t);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,coreCall.pairLinkageLeave(r,t);case 11:a=e.sent;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),g=(t.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start pair meeting"),(0,u.setPairConfInfo)(t),n=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE===n.callstate||t.conf_id===n.confid){e.next=7;break}return l.info("BLE: paired peripherals is busy, remote conf id =",n.confid),v(!1),e.abrupt("return");case 7:return e.next=9,_(t.conf_id,1);case 9:if(r=e.sent,0===r.result){e.next=14;break}return l.info("BLE: send open linkage request failed, res=",r),v(!1),e.abrupt("return");case 14:l.info("BLE: send open linkage request success");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairLinkageConfNotify=function(e){if(l.info("BLE: notify, get open or close linkage result"),0===e.result)l.info("BLE: open or close linkage with peripherals success"),e.ison&&g($getState().synergismInfo.pairConfInfo);else if(l.info("BLE: open or close linkage with peripherals failed"),e.ison)return void v(!1)},t.pairCreatHandleAndGetToken=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: prepare to invite paired peripherals join meeting, conf id=",t.conf_id),e.next=3,h(t.conf_id);case 3:if(n=e.sent,0===n.result){e.next=8;break}return l.info("BLE: creat conf handle failed, res=",n),v(!0),e.abrupt("return");case 8:return r=n.param.conf_handle,$dispatch(coreUi.changeConfHandle(r)),f.ToolbarManager.setConfHandle(r),l.info("BLE: creat conf handle success, confHandle=",r),a=$getState().myInfo.bind_no,e.next=15,d(r,a,t.general_pwd,t.token);case 15:i=e.sent,0===i.result?((0,u.setIsInPairConf)(!0),l.info("BLE: send get conf ctrl [token] request success")):(l.info("BLE: send get conf ctrl [token] request failed, res=",i),v(!0));case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: notify, get request conf [token] result, res=",t),n=t.param,0!==n.result){e.next=21;break}if(r=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIR_SUCCESS===r){e.next=7;break}return l.info("BLE: no paired peripherals, pair state=",r),e.abrupt("return");case 7:if(a=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE!==a.callstate){e.next=17;break}return l.info("BLE: paired peripherals is idle, start invite now, handle=",n.handle),i=$getState().synergismInfo.pairedDeviceInfo.sip_number,e.next=13,C(n.handle,i);case 13:s=e.sent,0===s.result?l.info("BLE: send invite request success"):(l.info("BLE: send invite request failed, ret=",s),v(!0)),e.next=19;break;case 17:l.info("BLE: paired peripherals is busy, not invite"),v(!0);case 19:e.next=23;break;case 21:l.info("BLE: get conf [token] failed"),v(!0);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairInviteAttendeeNotify=function(e){0===e.ret?(l.info("BLE: notify, invite attendee success, handle=",e.handle),coreCall.handlePairCallResult()):(l.info("BLE: notify, invite attendee failed, param=",e),v(!0))},t.pairStartEndMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, isEnd=",t),$getState().synergismInfo.inPairConf){e.next=4;break}return l.info("BLE: not in pair conf, can not end or leave meeting"),e.abrupt("return");case 4:return n=$getState().synergismInfo.pairConfInfo.conf_id,e.next=7,S(n,t);case 7:r=e.sent,0!==r.result?l.info("BLE: end or leave pair meeting failed, res=",r):(l.info("BLE: end or leave pair meeting success"),m());case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},1128:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closePair=t.getPairConfPasResult=t.joinPairConfNoPas=t.joinPairConf=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(1129),l=n(158),d=n(966),h=window.Logger("logic")("synergism/client/conf"),p=null,_=function(e){(0,f.clearCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF),(0,d.endPairWithPeripherals)(e)},C=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.default(function(){var e=(0,u.default)(o.default.mark(function e(n,r){var a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){h.info("joinPairConfResult: param=",e),p&&clearTimeout(p),constant.PAIR_CONF_RESULT.SUCCESS===e.result?n():r(constant.PAIR_CONF_RESULT.BUSY===e.result?language.PAIR_JOIN_CONF_BUSY:constant.PAIR_CONF_RESULT.INVALID===e.result?language.MAXHUB_INVALID_CONF:language.PAIR_JOIN_CONF_FAILED)},(0,f.setCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,a),i=void 0,i=""===t.chairman_pwd||isNaN(t.chairman_pwd)?t.general_pwd?t.general_pwd:"":t.chairman_pwd,s={command_seq:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{confId:isNullOrEmpty(t.vmr_id)?t.conf_id:t.vmr_id,confAcs:t.access_number,confPas:i}},h.info("sendJoinPairConf: confId = "+s.param.confId+", confAcs = "+s.param.confAcs),e.next=8,coreCall.sendUniversalInfo($getState().synergismInfo.tokenIndex,s);case 8:c=e.sent,0!==c.result?(h.info("sendJoinPairConf: send command failed, ret=",c),r(language.PAIR_JOIN_CONF_FAILED)):(p&&clearTimeout(p),p=setTimeout(function(){h.info("sendJoinPairConf: wait callback timeout, clear callback function"),r(language.PAIR_JOIN_CONF_FAILED)},1e4));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),v=!1,m=t.joinPairConf=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return h.info("joinPairConf: joining conf now, don't multiple click"),window.Toast(language.PAIR_JOIN_CONF_MULT,2,null,!1),e.abrupt("return");case 4:v=!0,$dispatch(coreUi.changePairConfInfo(t)),C(t).then(function(){v=!1,window.CLIENTCONFIG.ISMOBILE&&(window.goRoute("joinPairConfSuccess"),(0,d.endPairWithPeripherals)())},function(e){v=!1,_(e)});case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=!1;t.joinPairConfNoPas=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("joinPairConfNoPas: start join pair conf no [password]"),e.next=3,(0,l.getConfInfo)(t.conf_id,t.cycle_conf_id);case 3:S=!0;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getPairConfPasResult=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S&&(h.info("getPairConfPasResult: get pair conf info success, start enter conf"),n=t.get_conf_info_result.conf_list_info,n.start_time=coreConf.getConfTimedec(n.start_time),m(n),S=!1);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closePair=function(){if(v||S)return void h.info("closePair: joining conf now, return");(0,d.endPairWithPeripherals)(language.PAIR_CLOSED)}},1129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.Logger("logic")("synergism/client/info"),a=new Array;t.setCallbackFuncs=function(e,t){r.info("set callback func, command = "+e),a[e]=t},t.clearCallbackFuncs=function(e){r.info("clear callback func, command = "+e),"function"==typeof a[e]&&(a[e]=null)},t.handleClientUniversalInfoNotify=function(e){r.info("handleClientUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.event_seq,o=t.command_rsp;n?r.info("unknow event, event_seq = ",n):o&&("function"==typeof a[o]?(a[o](t.param),a[o]=null):r.info("invalid command, command_rsp = ",o))}},1130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleAutomaticPairMenu=t.closeAutoPair=t.startAutoPair=void 0;var r=n(966),a=window.Logger("logic")("synergism/ble"),o=function(e,t,n){ble.startScan(e,t,n)},i=function(e,t){ble.stopScan(e,t)},s=function(e,t){ble.isEnabled(e,t)},c=[],u=null,f=function(e){for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)if(e[t].rssi<e[n].rssi){var r=e[t];e[t]=e[n],e[n]=r}a.info("BLE: sort ble device by rssi, deviceList: ",e)},l=function(e){var t="",n="";if(!(e=e.kCBAdvDataManufacturerData)||0===e.length)return a.info("BLE: advertising data is null"),t;a.info("enter getAdvertisingData, advertising length=",e.length),e.forEach(function(e){isNaN(e)||(e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||35===e)&&(n+=String.fromCharCode(e))}),a.info("BLE: analyze advertising data success, advertising str=",n);for(var r=n.split("#"),o=r.length,i=0;i<o;i++)"HW"===r[i]&&o>i+1&&(t=r[i+1],a.info("BLE: analyze pair code success, pair code=",t));return t},d=function(){if(constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState){var e=$getState().synergismInfo.pairDevice.outCount+1;a.info("BLE: add paired peripheral out count, count=",e),$dispatch(coreUi.changePairDeviceInfo({outCount:e}))}},h=function(e){var t=$getState(),n=t.synergismInfo,r=n.pairState,o=n.pairDevice;constant.PAIR_STATE.PAIR_SUCCESS===r&&e===o.id&&(a.info("BLE: clear paired peripheral out count"),$dispatch(coreUi.changePairDeviceInfo({outCount:0})))},p=function(e){var t=$getState(),n=t.synergismInfo,r=n.pairState,a=n.pairDevice;return constant.PAIR_STATE.PAIR_SUCCESS===r&&a.outCount>1},_=function(){a.info("BLE: start to scan peripheral");var e=function(e){$getState().synergismInfo.autoPairSwitch&&e.advertising&&(a.info("BLE: scan ble peripheral success, device id=",e.id),e.advertising=l(e.advertising),""!==e.advertising&&(c.push(e),h(e.id)))},t=function(e){a.info("BLE: scan ble peripheral failed, result=",e)};d(),o([],e,t)},C=function(){a.info("BLE: stop to scan peripheral"),i(function(){if(a.info("BLE: stop ble peripheral scan success"),$getState().synergismInfo.autoPairSwitch){var e=p();0!==c.length?(f(c),(0,r.startAutoBlePair)(c[0],e)):e&&(a.info("BLE: paired peripheral is out of range, try to end pair"),(0,r.endPairWithPeripherals)(language.PAIR_DEVICE_OUT_RANGE)),$dispatch(coreUi.changeBleDeviceList(c))}else a.info("BLE: auto pair has closed")},function(e){a.info("BLE: stop ble peripheral scan failed, result=",e)})},v=function(e){_(),setTimeout(function(){C()},e)},m=function(){s(function(){a.info("BLE: bluetooth state is open")},function(){a.info("BLE: bluetooth state is close"),coreCommon.showAlert(""+language.BLE_OPEN_BLUETOOTH_TIP)})},S=function(e){s(function(){v(e)},function(){a.info("BLE: bluetooth state is close"),constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState&&constant.PAIR_TYPE.AUTO===$getState().synergismInfo.pairType&&(0,r.endPairWithPeripherals)(language.PAIR_CLOSED)})},g=t.startAutoPair=function(){$dispatch(coreUi.changeAutoPairSwitch(!0)),a.info("BLE: start auto pair, change switch to open"),m(),v(1e4),u&&clearInterval(u),u=setInterval(function(){a.info("BLE: It is time to scan over 20 seconds"),c=[],S(1e4)},2e4)},E=t.closeAutoPair=function(){a.info("BLE: close auto pair, change switch to close"),u&&clearInterval(u),u=null,(0,r.endPairWithPeripherals)(language.PAIR_CLOSED),$dispatch(coreUi.changeAutoPairSwitch(!1))};t.toggleAutomaticPairMenu=function(){var e=$getState().synergismInfo.autoPairSwitch;a.info("BLE: user click auto pair button, origin switch = ",e),e?E():constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState?window.confirm(language.MULTIPLE_CONNECT_CONFIRM).then(function(e){e.ret&&(a.info("BLE: user click to break old pair and start auto pair button"),(0,r.endOldPairAndRepair)(constant.PAIR_TYPE.AUTO,""))}):g()}},1131:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.delConfInfoFromDb=t.getConfInfoFromDb=t.saveConfInfoToDb=t.changeConfInfoCardState=t.changeConfImmediately=t.toggleVideoConf=t.changeMeetingSubject=void 0;var a=n(1),o=r(a),i=n(100),s=r(i),c=n(2),u=r(c),f=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeConfInfoCardState=function(e){return $dispatch(coreUi.toggleConfInfoCard(e))},t.saveConfInfoToDb=function(){var e=(0,u.default)(o.default.mark(function e(t,n){var r,a,i,c,u,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:return r=e.sent,a=[],isNullOrEmpty(r)||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)?a=[{confName:n,confId:t}]:(i=JSON.parse(r.value),c=f(i,t),c instanceof Array?(a=c,c.length<5?a.unshift({confName:n,confId:t}):(a.pop(),a.unshift({confName:n,confId:t}))):a=[{confName:n,confId:t}]),u=(0,s.default)(a),l={key:"confInfoList",value:u},e.next=9,coreDb.saveLoginSetting(l);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:t=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)||(n=JSON.parse(t.value))instanceof Array&&$dispatch(coreUi.updateLatestConfInfo(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.delConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={key:"confInfoList",value:""},e.next=3,coreDb.saveLoginSetting(t);case 3:$dispatch(coreUi.updateLatestConfInfo([]));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e,t){return e.filter(function(n,r){n.confId===t&&e.splice(r,1)}),e})},1132:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serverCloseAllPair=t.pairedOrCanceledResultNotify=t.receivePairReqNotify=t.creatQrCodeSvg=t.initTupPairServer=t.initAsPairServer=t.uninitAsPairServer=t.requestPairCode=void 0;var a=n(100),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(543),l=window.Logger("logic")("synergism/server"),d=null,h=3e5,p=[],_=null,C=null,v=null;"win"===window.CLIENTCONFIG.PLATFORM&&(v=n(1123));var m=function(){d&&clearInterval(d),d=null,h=3e5,p=[],_=null,C&&clearTimeout(C),C=null},S=t.requestPairCode=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,d,h,p,_;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"!==window.CLIENTCONFIG.PLATFORM){e.next=14;break}return t=$getState().login,n=t.account,r=t.authToken,a=t.sipAccount,o=t.euaServer,i=(0,f.dealWithSipNumber)(a),c=o?o.split(":"):"",u=c[1]?c[1]:8544,d=window.localIp,h=window.path.join(window.EXEC_PATH,"/BfcpTLS/server.pem"),e.next=9,new coreTup.HWUportal;case 9:return p=e.sent,e.next=12,p.getProjectionCode(c[0],u,n,r,i,d,h);case 12:_=e.sent,l.info("request pair code from eua server ret=",_);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),g=(t.uninitAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("start uninitAsPairServer"),m(),e.next=4,new coreTup.HWUportal;case 4:t=e.sent,t.setNotifyFunc(360470,null);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"===window.CLIENTCONFIG.PLATFORM){e.next=3;break}return l.info("cancel initPairServer, not windows platform"),e.abrupt("return");case 3:if(l.info("start request and refresh pair code"),m(),(t=$getState().login.euaServer)&&""!==t){e.next=9;break}return l.info("the eua server is null"),e.abrupt("return");case 9:return l.info("the eua server is:",t),e.next=12,new coreTup.HWUportal;case 12:return n=e.sent,n.setNotifyFunc(360470,E),e.next=16,S();case 16:d=setInterval(function(){l.info("It is time to refresh pair code, cycle=",h),S()},h);case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initTupPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("start init tup call module as pair server"),e.next=3,coreCall.pairEnable(0,1);case 3:if(t=e.sent,0===t.result){e.next=7;break}return l.info("enable tup pair failed, ret=",t),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(window.bfcpp);case 9:return n=e.sent,r=n&&n.param&&n.param.PlainText||"",l.info("bfcpTLSP decrytp: "+(""===r?"failed":"success")),a={call:{pair_private_key:{private_key_file:window.path.join(window.EXEC_PATH,"/BfcpTLS/server_key.pem"),private_key_file_psw:r,private_key_file_psw_len:r.length}}},e.next=15,coreCall.setTUPCallCfg(a);case 15:t=e.sent,0!==t.result?l.info("config tup private [key] failed, ret=",t):l.info("init tup call module as pair server success");case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.creatQrCodeSvg=function(e){if(null!==v){var t=window.path.join(window.APP_DATA_PATH,"pairCode.svg").replace(/\\/g,"/"),n="cloudlink://welinksoftclient/h5page?page=synergism&pairCode="+e.pairCode;if(1===$getState().synergismInfo.QRMode){var r="ui://welink.im/qr?page=synergism&pairCode="+e.pairCode;n="cloudlinkproworkplace://cloudlinkpro.huawei.com/qr?uri="+encodeURIComponent(r),l.info("workplace mode qr code")}else if(2===$getState().synergismInfo.QRMode){var a="page=synergism&pairCode="+e.pairCode;n=$getState().synergismInfo.QRScheme+encodeURIComponent(a),l.info("other mode qr code")}var o=v.image(n,{type:"svg"}),i=window.fs.createWriteStream(t),s=o.pipe(i);s.on("error",function(e){l.error("refresh qr code svg failed, error=",e)}),s.on("finish",function(){l.info("refresh qr code svg success"),$dispatch(coreUi.changePairCodeInfo(e))})}}),E=function(e){if(0===e.param.result&&1===e.param.is_pair){var t=e.param.projection_code_result.project_code,n=e.param.projection_code_result.valid_time,r=e.param.projection_code_result.tmpKey;if(""!==t&&0!==n&&""!==r){var a={pairCode:t,validTime:n,tmpKey:r};l.info("Notify get pair code info=",a),_=$getState().synergismInfo.pairCodeInfo,C&&clearTimeout(C),C=setTimeout(function(){l.info("It is time to clean old pair code info"),_=null},3e4),g(a),n=5*n/8*1e3,h!==n&&(l.info("pair code valid time changed, set cycle="+n+", old cycle="+h),h=n,d&&clearInterval(d),d=setInterval(function(){l.info("It is time to refresh pair code, cycle=",h),S()},h))}}else l.info("Notify return failed, get pair code result=",e)},w=function(e){return e===$getState().synergismInfo.pairCodeInfo.tmpKey||!(!_||!_.tmpKey||_.tmpKey!==e)},I=function(e){for(var t=p.length,n=0;n<t;n++)if(p[n].id===e)return l.info("find client in paired list, index=",n+", id=",e),n;return-1},T=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.cancelPair(1,p[t].id);case 2:n=e.sent,l.info("break old pair rsp=",n),r=p.length,t<r&&(p.splice(t,1),l.info("delete client form paired list, index=",t+", old list length=",r+", new list length=",p.length));case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={isPermit:0,reason:0},!w(t.pair_key)){e.next=28;break}if(-1===I(t.id)){e.next=7;break}n.isPermit=1,n.reason=0,e.next=26;break;case 7:if(!(p.length>=1)){e.next=23;break}if(l.info("the paired device count is over limit"),1!==t.is_force){e.next=18;break}return l.info("deal force pair request"),r=0,e.next=14,T(r);case 14:n.isPermit=1,n.reason=0,e.next=21;break;case 18:l.info("paired client number over limit"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED;case 21:e.next=26;break;case 23:l.info("check pair request valid success"),n.isPermit=1,n.reason=0;case 26:e.next=31;break;case 28:l.info("check pair request valid failed"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.AUTH_FAIL;case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.receivePairReqNotify=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u,d,h;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("Notify, receive pair request, id=",t.id),n=$getState().login.sipAccount,r=(0,f.dealWithSipNumber)(n),a=getContactName($getState().myInfo),i=window.localIp,e.next=7,N(t);case 7:return c=e.sent,e.next=10,coreCall.pairPermit(t.id,c.isPermit,c.reason,i,r,a,300,1);case 10:u=e.sent,0===u.result&&1===c.isPermit?(d={id:t.id,name:t.display_name,ip:t.remote_ip,sip:t.sip_number},h=I(t.id),-1===h?(p.push(d),l.info("send peimit pair success, save client info, id=",d.id+", ip=",d.ip+"list length=",p.length)):(p.splice(h,1,d),l.info("send peimit pair success, refresh client info, index=",h+"id=",d.id+", ip=",d.ip+"list length=",p.length))):l.info("pair response=",(0,o.default)(c)+", ret=",u);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairedOrCanceledResultNotify=function(e){if(l.info("Notify get pair or cancel result, id=",e.id+", isPair=",e.is_paired+", reason=",e.reason),!e.is_paired){var t=I(e.id);-1!==t&&(l.info("delete client form paired list, index=",t),p.splice(t,1))}},t.serverCloseAllPair=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=9;break}l.info("start close all paired client"),t=0;case 3:if(!(t<p.length)){e.next=9;break}return e.next=6,T(t);case 6:t++,e.next=3;break;case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},114:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},116:function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?f(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function u(e,t){if(s(t),e=a(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|C(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function l(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||z(t.length)?a(e,0):l(e,t);if("Buffer"===t.type&&Z(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),o.alloc(+e)}function C(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return y(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}var u;if(a){var f=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*i}else-1!==f&&(u-=u-f),f=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var l=!0,d=0;d<c;d++)if(o(e,u+d)!==o(t,d)){l=!1;break}if(l)return u}return-1}function E(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function w(e,t,n,r){return J(G(t,e.length-n),e,n,r)}function I(e,t,n,r){return J(Y(t),e,n,r)}function T(e,t,n,r){return I(e,t,n,r)}function N(e,t,n,r){return J(q(t),e,n,r)}function b(e,t,n,r){return J(j(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=n){var c,u,f,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[a+1],128==(192&c)&&(l=(31&o)<<6|63&c)>127&&(i=l);break;case 3:c=e[a+1],u=e[a+2],128==(192&c)&&128==(192&u)&&(l=(15&o)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:c=e[a+1],u=e[a+2],f=e[a+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(l=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=s}return R(r)}function R(e){var t=e.length;if(t<=Q)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Q));return n}function y(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=$(e[o]);return a}function D(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function U(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,a){return a||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function H(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function j(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function q(e){return K.toByteArray(H(e))}function J(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function z(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var K=n(215),X=n(216),Z=n(197);t.Buffer=o,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return i(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},o.byteLength=C,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,s=n-t,c=Math.min(i,s),u=this.slice(r,a),f=e.slice(t,n),l=0;l<c;++l)if(u[l]!==f[l]){i=u[l],s=f[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var a=t-e;r=new o(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},o.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||x(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),X.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),X.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),X.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),X.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);k(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);k(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=o.isBuffer(e)?e:G(new o(e,r).toString()),c=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(16))},117:function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}var o=n(116),i=o.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=a),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},120:function(e,t,n){var r=n(10),a=n(8),o=n(121);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},121:function(e,t,n){e.exports=n(0)(53)},122:function(e,t,n){e.exports=n(0)(114)},126:function(e,t,n){var r=n(8),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},127:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(193),o=r(a),i=n(112),s=r(i);t.default=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=(0,s.default)(e);!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},133:function(e,t,n){e.exports={default:n(149),__esModule:!0}},134:function(e,t,n){var r=n(15);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},136:function(e,t,n){e.exports=n(0)(397)},143:function(e,t,n){n(144),e.exports=n(8).Object.getPrototypeOf},144:function(e,t,n){var r=n(111),a=n(145);n(120)("getPrototypeOf",function(){return function(e){return a(r(e))}})},145:function(e,t,n){e.exports=n(0)(389)},149:function(e,t,n){n(23),n(150),e.exports=n(8).Array.from},150:function(e,t,n){"use strict";var r=n(11),a=n(10),o=n(111),i=n(33),s=n(34),c=n(28),u=n(151),f=n(27);a(a.S+a.F*!n(35)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,l,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,_=p>1?arguments[1]:void 0,C=void 0!==_,v=0,m=f(d);if(C&&(_=r(_,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(t=c(d.length),n=new h(t);t>v;v++)u(n,v,C?_(d[v],v):d[v]);else for(l=m.call(d),n=new h;!(a=l.next()).done;v++)u(n,v,C?i(l,_,[a.value,v],!0):a.value);return n.length=v,n}})},151:function(e,t,n){"use strict";var r=n(26),a=n(152);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},152:function(e,t,n){e.exports=n(0)(63)},153:function(e,t,n){e.exports=n(0)(64)},154:function(e,t,n){e.exports=n(0)(178)},158:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelConfEvent=t.handleCancelConf=t.cancelConf=t.createConfByTeamList=t.cloudRecordRequestFuc=t.requestChairmanFuc=t.releaseChairmanFuc=t.compressRemoveAttendee=t.compressreleasePreservate=t.unlockConfFuc=t.lockConfFuc=t.enterConfInConfList=t.endCallInConf=t.oneKeyEnterConf=t.showConfInfo=t.RecordIsIntoInterval=t.recordFlagIsFirstTimeRun=t.recordConferenceOldId=t.recordConferencePasswordDetail=t.changeFlagClickJoinConfBtn=t.recoredOldPwd=t.changeStatusOfConference=t.createMaxHubMeeting=t.handleMobileBfcpStatus=t.AsErrorDeal=t.handleShowErrorMsgBox=t.setRecordStatusForNative=t.handleRecordVideoStatusChairmanIndResult=t.handleConfStateDirectBroadCastIndresult=t.handleSetRecordVideoResult=t.actionCloudRecordRequest=t.clearRecordInfoHandle=t.getRecordStatus=t.isHasRecordPermission=t.setRecordScheduserName=t.actionActiveDirectionForMobile=t.actionActiveDirection=t.dealChangeDirectionResult=t.dealAudientResult=t.grabBfcpConfirm=t.initMobileFirstAcceptShare=t.resetFirstAcceptShareFlag=t.initMobileFirstInfoConf=t.resetFirstInfoConferenceFlag=t.dealInviteAttendeeResult=t.handlePlatformMessageBox=t.handleVideoWatchResMessageBox=t.handleVideoWatchRes=t.handleSvcConfWatchRet=t.clearPhoneContacts=t.showOrDisabledBtn=t.showJoinMeetingBtn=t.returnToConfWelPage=t.toggleShouldAutoEnterTempConf=t.toggleClearEnterTempConfInfo=t.toggleopenCamerState=t.toggleChangeCamerState=t.toggleChangeMicState=t.toggleChangeConfTempAcsAccount=t.toggleChangeConfTempAcsNick=t.toggleChangeConfAcsState=t.toggleChangeConfAcsPas=t.toggleChangeConfAcsId=t.toggleChangeConfAcsNum=t.changeConfPage=t.isAccountAutoLogin=t.gettempuserinfo=t.handleJoinTempConfNoNameWithConfId=t.enterTempConf=t.enterConfById=t.enterConfByIdOnly=t.enterConfByIdOnlyWithConfPas=t.postponeConf=t.oneKeyEnterPairConf=t.enterConfInConfInfo=t.changeBookConfSubject=t.changeHistoryAttendeeInfo=t.changeHistoryConfInfo=t.changeConfAttendeeInfo=t.changeCurrentConfInfo=t.oneJoinVMR=t.getVmrInfoToDbAtomic=t.getVRMList=t.saveTempMediaxInfo=t.handleConfInfo=t.handleConfMTnumber=t.handleConfInfostate=t.searchContactByInfo=t.getInitHistoryConfList=t.delConfRecord=t.getConfTimedec=t.handleConfList=t.saveMettingTypeValue=t.judgeCreateNewConf=t.initCreateMettingContent=t.saveConThemeName=t.createConfFromHistory=t.createTempTypeMeeting=void 0,t.createAMeetingFromHis=t.createAMeeting=t.deleteClickParticipants=t.filterDuplicateData=t.createTempMeetingOfAddMember=t.createTempMeeting=t.handleIsShowJoinButton=t.handleIsConfPwdInputShow=t.handleNotShowChairPas=t.handleNotShowGeneralPas=t.handleVMRConfResult=t.getConfList=t.changeconfListInfo=t.actionExportConfmember=t.transferChairman=t.getConfInfo=t.p2pTransToConf=t.upgradeAudioConf2Data=t.upgrade2DataConfOrStartShare=t.handleShowEndConf=t.toggleConfOtherNumber=t.searchMemberList=t.unregisterConfEvent=t.handleSpeakerReport=t.endCallAndLogout=t.setUportalTokenRefreshTimer=t.UportalTokenErrAndLogout=t.UportalTokenErr=t.handleGetDataPostponeConf=t.handleSmcEnterDataConf=t.handleUportalTokenErr=t.handleNonChairCtrlcaps=t.checkUsersMobile=t.setMsg=t.handlepPrticipantsList=t.AutocallMobile=t.registerConfEvent=t.handleBroadcaseResult=t.updateconfMsglList=t.updateconfRecallList=t.updateMemberStateInfo=t.toggleShowConfInfoCard=t.handleShowMemberList=t.cancleConfMemberlistMessage=t.toggleShowMemberList=t.diableSpeakerIcon=t.confEnded=t.actionWatchAttendee=t.actionBroadcastAttendee=t.actionLeaveConf=t.handleClosePairConfPage=t.setSmcFirstRequest=t.doClearSipForSipLoginOnly=t.acceptConf=t.rejectConf=t.confIncoming=t.actionRemoveAttendee=t.actionCallAttendee=t.actionHangupAttendee=t.actionAddAttendee=t.actionCallOtherNum=t.popupRequestChairmanInputBox=t.confEnterPwdToChairmanResultResult=t.handleReqChairmanResultRest=t.confReqChairmanResult=t.actionRequestChairman=t.confReleaseChairmanResult=t.actionReleaseChairman=t.actionReInviteAttendee=t.confMuteResult=t.confBroadcastLocal=t.actionMuteAllAttendee=t.handup=t.lockConf=t.actionMuteConf=t.lockState=t.lockResult=t.handupResult=t.attendeeMuteResult=t.actionMuteAttendee=t.handlePairJoinConf=t.confInfoNotify=t.actionEndConf=t.handleUportalTokenError=t.actionCreateConf=t.actionShareClickByDetail=t.actionShareClickByRecent=t.actionCreateConfByDetail=t.actionCreateConfByRecent=t.handleBookConfResult=t.formatDateString=t.bookMeeting=t.changeGroupId=t.changeConfSearchTxt=t.toggleMemberListSearch=t.getExperienceConferenceInfo=t.joinExperienceMeeting=t.changeExperienceConfId=t.updatePastponeTimeLogic=t.updateIsShowExtendConf=void 0;var o=n(112),i=a(o),s=n(103),c=a(s),u=n(110),f=a(u),l=n(100),d=a(l),h=n(106),p=a(h),_=n(98),C=a(_),v=n(1),m=a(v),S=n(2),g=a(S),E=n(209),w=n(234),I=n(209),T=n(543),N=n(1119),b=n(502),O=n(863),A=r(O),R=n(186),y=n(400),L=r(y),M=n(1121),D=(n(1683),n(1125)),x=r(D),k=(n(963),n(224),n(850),n(862)),P=n(964),F=n(413),U=n(1127),B=n(1128),W=n(967),H=n(861),V=r(H),$=n(1698),G=r($),Y=n(1712),j=r(Y),q=n(1713),J=r(q),z=window.Logger("conf")("logic"),K=null,X=new RegExp("^1[3|4|5|7|8|9][0-9]{9}$"),Z="",Q=(t.updateIsShowExtendConf=A.updateIsShowExtendConf,t.updatePastponeTimeLogic=A.updatePastponeTimeLogic,t.changeExperienceConfId=A.changeExperienceConfId,t.joinExperienceMeeting=x.joinExperienceMeeting,t.getExperienceConferenceInfo=x.getExperienceConferenceInfo,t.toggleMemberListSearch=function(e){$dispatch(coreUi.changeMemberListSearch(e))},t.changeConfSearchTxt=function(e){$dispatch(coreUi.changeSearchText(e))},t.changeGroupId=function(e){$dispatch(coreUi.changeGroupId(e))}),ee=(t.bookMeeting=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("make an appointment for a meeting"),n=$getState(),r=void 0,a=t.start_time,r=bt(n.selectBox.selectBox_saveSelectedList),o=n.common.groupName,i=n.myInfo,r.push(i),s=In(r),ee(i,s,{group_id:""},t.mediaType,t.confSubject,a,t.conf_len,t.time_zone,t.recordType),e.next=12,coreUi.hideModal();case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.formatDateString=function(e){var t=new Date(e);return t.getHours()+language.HOUR+t.getMinutes()+language.MINUTE},function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a){for(var o=arguments.length,i=Array(o>4?o-4:0),s=4;s<o;s++)i[s-4]=arguments[s];var c,u,f,l,d,h,p,_,C,v,S,g,E,w,I,T,N;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.saveCalleeInfo({})),c=$getState().conf.isCreateMeetingPassword||$getState().conf.showvmrornot?0:1,u={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:c,others:i},e.next=5,coreUi.checkMobileMultiDevice(u);case 5:if(!0!==(f=e.sent)){e.next=9;break}return z.info("multi device logined, return"),e.abrupt("return");case 9:if(!window.isOffline){e.next=13;break}return z.error("offline, can not book conf"),window.ToastNew(language.CALL_FAILED_OFFLINE),e.abrupt("return");case 13:if(!(n.length>400)){e.next=18;break}return z.error("member number: "+n.length+"exceeds 100, can not book conf"),l=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400"),alert(l),e.abrupt("return");case 18:if(!(n.length>=1)&&isNullOrEmpty(t.account)){e.next=54;break}if(z.info("book conf, member list count is "+n.length),d="",h="",p=0,_=0,C=0,isNullOrEmpty(i)){e.next=45;break}if(d=i[0],h=i[1],p=i[2],_=i[3],C=i[4],v=constant.TIME_ZONE_FLAG[parseInt(_,10)-1],S=constant.TIME_ZONE_FLAG[getDefaultTimeZone(constant.TIME_ZONE_FLAG)-1],g=ne(getNowFormatDate(new Date),S),E=new Date(g.replace(/-/g,"/")).getTime()+36e5*v,w=new Date(h.replace(/-/g,"/")).getTime(),!(E-w>0)){e.next=39;break}return window.CLIENTCONFIG.ISMOBILE?window.alert(language.CONFERENCE_START_TIME_ERROR):alert(language.CONFERENCE_START_TIME_ERROR),e.abrupt("return");case 39:if(0!==p){e.next=42;break}return alert(language.CONFERENCE_DURATION_ERROR),e.abrupt("return");case 42:h=ne(h,v),e.next=46;break;case 45:z.error("start time is null, can not book conf");case 46:return I=0!=(a&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(a&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),T=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,N={memberList:n,confSubject:d,groupUri:r?r.group_id:"",isMultiStream:I?T:0,mediaType:a,userType:2,compereNumber:t.bind_no,selfNumber:t.bind_no,start_time:h,conf_len:p,time_zone:_,noPassword:c,recordType:C},z.info("actionBookConf isMultiStreamValue: "+T),e.next=52,coreConf.bookConf(N);case 52:e.next=55;break;case 54:z.error("member list is null");case 55:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}()),te=t.handleBookConfResult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("UportalBookConfResult code=",t.param.ret),0!==t.param.ret){e.next=6;break}return e.next=4,oe();case 4:e.next=7;break;case 6:constant.MEDIA_X_ERROR_CODE.start_time_error===t.param.ret?window.alert(language.CONFERENCE_START_TIME_ERROR):11085===t.param.ret||11136===t.param.ret||11071005===t.param.ret?window.alert(language.CONF_TIME_CONFLICT):7===t.param.ret?(z.info("book conf failed,error code=",t.param.ret),fe(t.param.ret)):(z.info("book conf failed,error code=",t.param.ret),window.ToastNew(language.CONFERENCE_BOOK_FAILED,2));case 7:n=0===t.param.ret,r=[],n?(r.push(1),a=t.param.conf_list_info.conf_id,isNullOrEmpty(a)?z.warn("bookconfid is empty!"):r.push(a)):r=[0,t.param.ret],coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_BOOK,null,r);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ne=function(e,t){var n=e.substring(0,4),r=e.substring(5,7),a=e.substring(8,10),o=e.substring(11,13),i=e.substring(14,16),s=new Date(n,r-1,a,o,i),c=s.getTime()-60*t*60*1e3;return s.setTime(c),z.info(re(s)),re(s)},re=function(e){var t=new Date(e);return t.getFullYear()+"-"+ae(t.getMonth()+1)+"-"+ae(t.getDate())+" "+ae(t.getHours())+":"+ae(t.getMinutes())},ae=function(e){return e>9?e:"0"+e},oe=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("dealBookConfSuc"),kt(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("main/conference"):coreConf.changeConfPage("MyConf"),window.ToastNew(language.CONFERENCE_BOOK_SUCCESS,2),coreConf.resetDefaultValue(),$dispatch(coreUi.changeBuriedMeetingName(""));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),ie=(t.actionCreateConfByRecent=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.myInfo,a=n.recent.currentRecentInfo,!coreIm.isGroup(a.chat_type)){e.next=9;break}return e.next=4,coreGroup.getMemberListByGroupIdFromDb(a.owner,a.group.owner);case 4:o=e.sent,i=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,se(r,o,a.group,t,i),e.next=10;break;case 9:z.info("actionCreateConfByRecent ");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionCreateConfByDetail=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,h;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("actionCreateConfByDetail, bFromSlider=",n),r=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,n?(a=$getState(),o=a.myInfo,i=a.contactGroups,s=i.sliderGroupMemerInfo,c=i.sliderGroupInfo,se(o,s,c,t,r)):(u=$getState(),f=u.myInfo,l=u.contactGroups,d=l.groupMemberInfo,h=l.groupInfoNew,se(f,d,h,t,r));case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionShareClickByRecent=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("actionShareClick"),t=$getState(),n=t.myInfo,r=t.recent,a=r.currentGroupMemberList,o=r.currentRecentInfo,coreIm.isGroup(o.chat_type)){e.next=7;break}if(z.info(""),""!==o.contact.bind_no||""!==o.contact.short_phone){e.next=7;break}return alert(language.THE_CONTACT_HAS_NO_NUMBER),e.abrupt("return");case 7:if(i=a||[],s=void 0,!coreIm.isGroup(o.chat_type)){e.next=14;break}z.info("actionShareClickByRecent "),s=o.group,e.next=19;break;case 14:return z.info("actionShareClickByRecent "),i.push(o.contact),e.next=18,coreGroup.createDiscussionGroup(i);case 18:s=e.sent;case 19:c=(0,C.default)({},n,{isAutoStartShare:!0}),u=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,se(c,i,s,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,u);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionShareClickByDetail=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,_;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("actionShareClickByDetail "+t),n=$getState(),r=n.myInfo,a=n.contactGroups,o=a.sliderContactInfo,i=a.sliderGroupInfo,s=a.sliderGroupMemerInfo,c=a.contactInfo,u=a.groupMemberInfo,f=a.groupInfoNew,l=void 0,d=void 0,!t){e.next=15;break}if(l=s||[],d=i,0!==l.length){e.next=13;break}if(l=[].concat((0,p.default)(l)),l.push(o),!window.CLIENTCONFIG.USE_IM){e.next=13;break}return e.next=12,coreGroup.createDiscussionGroup(l);case 12:d=e.sent;case 13:e.next=23;break;case 15:if(l=u||[],d=f,0!==l.length){e.next=23;break}if(l[0]=c,!window.CLIENTCONFIG.USE_IM){e.next=23;break}return e.next=22,coreGroup.createDiscussionGroup(l);case 22:d=e.sent;case 23:h=(0,C.default)({},r,{isAutoStartShare:!0}),_=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,se(h,l,d,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,_);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=7;break}if(isNullOrEmpty($getState().conf.confTempAcsAccount)&&!$getState().login.sipLoginOnly){e.next=4;break}e.next=7;break;case 4:return z.error("checkBeforeEnterConf offline, can not create conf"),window.ToastNew(language.CALL_FAILED_OFFLINE),e.abrupt("return",!1);case 7:if(n=coreAccount.getLoginModel().isSipRegSuc()){e.next=14;break}return z.error("sip register failed, can not create conf"),r=coreAccount.getLoginModel(),(!r.isMobile||r.isMobile&&!$getState().login.isMultiDeviceLogined)&&coreAccount.sipResume(),window.isPluginEnv||alert(language.CALL_SIP_NOT_REG),e.abrupt("return",!1);case 14:if(!coreConf.isInConf()&&!$getState().synergismInfo.inPairConf){e.next=18;break}return z.error("already exist conference, can not create conf"),window.isPluginEnv||alert(language.PREVENT_TWO_CONFERENCE),e.abrupt("return",!1);case 18:if(!(coreCall.getCallCount()>0)){e.next=22;break}return z.error("already exist call, can not create conf"),window.isPluginEnv||alert(language.PREVENT_CONFERENCE_AFTER_CALL),e.abrupt("return",!1);case 22:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=27;break}return e.next=26,window.isSimCardCall();case 26:e.t0=e.sent;case 27:if(!(a=e.t0)){e.next=32;break}return z.info("now is in sim card call cannot create conf"),window.ToastNew(language.PLEASE_HANG_UP_CALL,2),e.abrupt("return",!1);case 32:if(c){e.next=41;break}return e.next=35,coreCall.callPermissionCheck(t);case 35:if(o=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),z.info("isHavePerm: "+o),o){e.next=41;break}return z.info("mobile do not have permission cannnot create conf"),e.abrupt("return",!1);case 41:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=49;break}if(!window.webView){e.next=49;break}return e.next=45,coreCall.callMultiTerminalCheck();case 45:if(i=e.sent,window.requestMultiTerminalPromise=null,!i){e.next=49;break}return e.abrupt("return",!1);case 49:if(e.t1=!c,!e.t1){e.next=54;break}return e.next=53,coreCall.Call2GNet(t);case 53:e.t1=e.sent;case 54:if(!e.t1){e.next=57;break}return z.info("The network type is 2G. not support video conf "),e.abrupt("return",!1);case 57:if(s=!0,!t){e.next=63;break}if((!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.webView)&&window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=63;break}return e.next=62,coreCall.createVideoPreCheck();case 62:s=e.sent;case 63:if(s){e.next=66;break}return z.info("<video>mobile is 3G/4G,user cancel continue video conf"),e.abrupt("return",!1);case 66:return e.abrupt("return",!0);case 67:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),se=t.actionCreateConf=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a,o){for(var i=arguments.length,s=Array(i>5?i-5:0),c=5;c<i;c++)s[c-5]=arguments[c];var u,f,l,d,h,p,_,C,v,S,g,E,w,I,T,N;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=0!=(a&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(a&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),f={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:o,bVideo:u,others:s},!(f.memberList.length>400)){e.next=7;break}return z.error("member number: "+f.memberList.length+"exceeds 100, can not create conf"),l=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400"),alert(l),e.abrupt("return",!1);case 7:if(!(n.length<1&&isNullOrEmpty(t.account))){e.next=10;break}return z.error("member list is null"),e.abrupt("return",!1);case 10:return e.next=12,coreUi.checkMobileMultiDevice(f);case 12:if(!(d=e.sent)){e.next=16;break}return z.info("multi device logined actionCreateConf"),e.abrupt("return",!1);case 16:return e.next=18,ie(u);case 18:if(h=e.sent){e.next=21;break}return e.abrupt("return",!1);case 21:return $dispatch(coreUi.saveCalleeInfo({})),z.info("create conf, member list count is "+n.length),j.createConfToRefreshRecent(r),p="",_=0,C=0,isNullOrEmpty(s)?p=t.name+language.CONFERENCE_SUBJECT_INFO:(p=s[0],_=s[1],C=s[2]),G.showConfOutPage(u,!0,p,""),v=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,S=t.bind_no,g={isCloseCameraDe:!$getState().conf.isOpenCameraDe,isMuteMicDe:!$getState().conf.isOpenMicDe},E={memberList:n,confSubject:p,groupUri:r?r.group_id:"",isMultiStream:u?v:0,mediaType:a,userType:2,compereNumber:S,selfNumber:S,isAutoScreenShare:t.isAutoStartShare,noPassword:o,recordType:C,deviceSet:g},z.info("IS_MULTI_STREAM= "+v+",isVideoConf = "+u),ce()&&(E.mediaType=E.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),z.info("create conf media type: "+E.mediaType),e.next=38,coreConf.createConf(E);case 38:return w=e.sent,I=w.isSuc,T=w.errorCode,I?((0,P.resetDefaultValue)(),kt()):(N=J.getCreateConfFailTitle(T),G.closeConfPage(!1,!1,T,N),G.clearAfterConfEnd(!1,!1),7===T&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():fe(T))),e.abrupt("return",I);case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),ce=function(){return!0},ue=function(e){var t=$getState(),n=t.myInfo,r=t.call.userInfo;if(1===e.length&&(e[0].number===n.bind_no||e[0].number===r.bind_no))return z.info("p2p trans to conf add caller or callee, return"),coreUi.hideModal(),!1;if(coreConf.isInConf()||$getState().synergismInfo.inPairConf)return z.error("already exist conference, can not create conf"),coreUi.hideModal(),alert(language.PREVENT_TWO_CONFERENCE),!1;if(e.length>399){z.error("member number: "+e.length+"exceeds 100, can not create conf");var a=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400");return alert(a),!1}var o=$getState().call.callStatus;return o!==constant.CALL_VIDEO_STATUS.CALL_OUT&&o!==constant.CALL_VIDEO_STATUS.VIDEO_OUT||(z.error("calling out, can not create conf"),!1)},fe=t.handleUportalTokenError=function(e){z.info("the erro of ute reason",e);var t={param:{result:parseInt(e)}};vt(t)},le=(t.actionEndConf=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().synergismInfo.inPairConf){e.next=4;break}return z.info("BLE: actionEndConf, start end pair meeting"),(0,U.pairStartEndMeeting)(!0),e.abrupt("return");case 4:return G.closeConfPage(!0,!0,0,language.END_CONFERENCE),e.next=7,coreConf.endConf();case 7:G.clearAfterConfEnd(!0,!0,0);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState(),t=e.login.tempConfInfo;coreConf.getIsFirstEnterConf()&&3===parseInt(t.user_role)&&cr(),coreConf.setIsFirstEnterConf(!1)}),de=t.confInfoNotify=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G.confInfoNotify();case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),he=function(){G.svcSeessionModify()},pe=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("handleConfConnected, isCallToConf = "+t),t?(G.p2pToJoinConf(),j.confTransToConfRefreshRecent()):G.handleJoinConf();case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_e=(t.handlePairJoinConf=function(e){z.info("BLE: start handlePairJoinConf, mediaType=",e);var t=$getState().call.callStatus;if("VIDEO_CONNECTED"===t||"CALL_CONNECTED"===t)return void z.info("BLE: handlePairJoinConf has entered");It(),window.webView&&window.webView.setKeepScreenOn();var n=0!=(e&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);z.info("BLE: handlePairJoinConf, isVideoConf=",n),n?($dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),$dispatch(coreUi.changeMeetingType(!0)),$dispatch(coreUi.changeCallToolBarShowStatus(!1))):($dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),$dispatch(coreUi.changeMeetingType(!1)),$dispatch(coreUi.changeCallToolBarShowStatus(!0))),$dispatch(coreUi.clearEnterConfInfo())},t.actionMuteAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r){var a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={isMute:t,attendee:n},e.next=3,coreConf.muteAttendeeService(a);case 3:o=e.sent,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&r&&(0,k.meetingHWmicrophoneOnOrOff)(t),o&&0===o.result?(z.info("mute attendee success: "+handlePhoneNumber(n)),(0,T.setMemberToMuteState)(n,t),r&&(t?$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)))):z.error("mute attendee failed: "+handlePhoneNumber(n));case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),Ce=t.attendeeMuteResult=function(e){if(0!==e.param.ret){var t=e.param.to_mute;if(void 0===t){var n=$getState(),r=n.conf.isConfMicMute;r===constant.MUTE_STATE.MUTE_STATE_TOMUTE?t=1:r===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE&&(t=0)}(0,T.revertMemberToMuteState)(t),t?(z.info("mute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_UNMUTE))):(z.info("unmute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_MUTE)),10002===e.param.ret&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.CALL_UNMUTE_FAIL_NORIGHT,2):($dispatch(coreUi.changeNotifyInfo(coreCall.setNotifyInfo(language.CALL_UNMUTE_FAIL_NORIGHT))),coreCall.showConfirmNotify(!0,3e3))))}},ve=t.handupResult=function(e){var t=$getState().conf.isHandup;1===e.param.ret?(z.info("handup success"),ge(1),window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("HAND_UP_SUCCESSFULLY",1):window.ToastNew(language.HAND_UP_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):2===e.param.ret?(z.info("unhand up success"),Ee(1),window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("HAND_DOWN_SUCCESSFULLY",1):window.ToastNew(language.HAND_DOWN_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):t?(z.info("unhandup failed!!!"),Ee(0),window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("HAND_DOWN_FAILURE",1):window.ToastNew(language.HAND_DOWN_FAILURE,2)):(z.info("handup failed!!!"),ge(0),window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("HAND_UP_FAILURE",1):window.ToastNew(language.HAND_UP_FAILURE,2))},me=t.lockResult=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void z.info("no need to parse lockResult: "+n);var t=e.param.lock_info.OperateType?1:0,n=null;t?e.param.ret||e.param.lock_info.Result?(n=language.LOCK_CONF_FAILURE,we(0)):(n=language.LOCK_CONF_SUCCESSFULLY,we(1),$dispatch(coreUi.changeConfIsLock(t))):e.param.ret||e.param.lock_info.Result?(n=language.UNLOCK_CONF_FAILURE,Ie(0)):(n=language.UNLOCK_CONF_SUCCESSFULLY,Ie(1),$dispatch(coreUi.changeConfIsLock(t))),z.info("lockResult: "+n),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?R.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3)},Se=t.lockState=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void z.info("no need to parse lockState: "+n);var t=e.param.is_lock,n=t?language.THE_MEETING_HAS_BEEN_LOCKED_DOWN:language.THE_MEETING_IS_NOT_LOCKED;t!==$getState().conf.isLock&&(z.info("lockState: "+n),Te(t),$dispatch(coreUi.changeConfIsLock(t)),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?R.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3))},ge=function(e){var t=$getState().conf.videoFrameHwnd;z.info("putUpToNative",e);var n={state:e},r=(0,C.default)({frameHwnd:t},{put_up_hand_result:n});(0,E.notifyPutHandup)(r)},Ee=function(e){var t=$getState().conf.videoFrameHwnd;z.info("putDownToNative",e);var n={state:e},r=(0,C.default)({frameHwnd:t},{put_down_hand_result:n});(0,E.notifyPutHandup)(r)},we=function(e){var t=$getState().conf.videoFrameHwnd;z.info("lockResultToNative",e);var n={state:e},r=(0,C.default)({frameHwnd:t},{lock_result:n});(0,E.notifyLockConfResult)(r)},Ie=function(e){var t=$getState().conf.videoFrameHwnd;z.info("unlockResultToNative",e);var n={state:e},r=(0,C.default)({frameHwnd:t},{unlock_result:n});(0,E.notifyLockConfResult)(r)},Te=function(e){var t=$getState().conf.videoFrameHwnd;z.info("lockStateToNative",e);var n={state:e},r=(0,C.default)({frameHwnd:t},{lock_state:n});(0,E.notifyLockConfState)(r)},Ne=t.actionMuteConf=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.CLIENTCONFIG.ISMOBILE&&(1===t?$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE))),e.next=3,coreConf.muteConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),be=t.lockConf=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.lockConfService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Oe=(t.handup=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={isHandup:t,attendee:n},e.next=3,coreConf.handupService(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionMuteAllAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=$getState(),r=n.conf&&n.conf.isConfAllMute,a=n.conf&&n.conf.memberListInfo,!isNullOrEmpty(a)){e.next=8;break}return z.info("actionMuteAllAttendee memberList empty"),Ne(t),e.abrupt("return");case 8:if(t!==constant.MUTE_STATE.MUTE_STATE_MUTE){e.next=16;break}if(z.info("userClick  actionMuteAllAttendee mute"),!window.isSupportiDo){e.next=13;break}return Ne(constant.MUTE_STATE.MUTE_STATE_MUTE),e.abrupt("return");case 13:r?a.forEach(function(e){1!==e.is_self&&e.is_mute===constant.MUTE_STATE.MUTE_STATE_UNMUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&_e(!0,e.number,!1)}):Ne(constant.MUTE_STATE.MUTE_STATE_MUTE),e.next=28;break;case 16:if(t!==constant.MUTE_STATE.MUTE_STATE_UNMUTE){e.next=28;break}if(z.info("userClick  actionMuteAllAttendee unmute"),!window.isSupportiDo){e.next=21;break}return Ne(constant.MUTE_STATE.MUTE_STATE_UNMUTE),e.abrupt("return");case 21:if(!r){e.next=26;break}return e.next=24,Ne(constant.MUTE_STATE.MUTE_STATE_UNMUTE);case 24:e.next=28;break;case 26:return e.next=28,a.forEach(function(e){e.is_mute===constant.MUTE_STATE.MUTE_STATE_MUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&_e(!1,e.number,e.is_self)});case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),z.info("actionMuteAllAttendee error",{error:e.t0.toJSON()});case 33:case"end":return e.stop()}},e,void 0,[[0,30]])}));return function(t){return e.apply(this,arguments)}}(),t.confBroadcastLocal=function(e){var t=$getState().conf.isSvcConf;if($getState().conf.isVideoConf&&!t)return window.CLIENTCONFIG.ISWIN?Ae(!!e.param.is_broadcast):($dispatch(coreUi.changeIsBroadcastLocal(!!e.param.is_broadcast)),void(window.CLIENTCONFIG.ISMOBILE&&window.JSToNativeToast(2e3,e.param.is_broadcast?language.LOCAL_BROADCASTING:language.CANCEL_BROADCASE)))}),Ae=function(e){if(e){z.info("confBroadcastLocal: show");var t=$getState().conf.videoFrameHwnd,n=L.getAvcFrameHandles();if(window.CLIENTCONFIG.ISWIN){var r={frameHwnd:0!==t?t:n,dialog_type:1,content_id:"LOCAL_BROADCASTING"};(0,I.showMessageBox)(r)}}},Re=t.confMuteResult=function(e){if(0===e.param.ret)coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_MUTE,null,[1]),$dispatch(coreUi.changeConfAllMute(e.param.to_mute));else{coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_MUTE,null,[0,e.param.ret]),z.error("mute conf failed ",e.param.to_mute);var t=e.param.to_mute?0:1;if($dispatch(coreUi.changeConfAllMute(t)),10===e.param.ret)return void alert(language.VIDEO_MUTE_CONF_FAIL_WHEN_CONFPAGE_OPEN);e.param.to_mute?window.ToastNew(language.CONFERENCE_MUTE_ALL_FAILED,2):window.ToastNew(language.CONFERENCE_UNMUTE_ALL_FAILED,2)}},ye=(t.actionReInviteAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],n.push(t),!Tt(n)){e.next=6;break}return z.error("member number exceeds 400, can not create conf"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 6:return e.next=8,coreConf.reInviteAttendee(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionReleaseChairman=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return z.error("chairmanNumber is null or undefined, can not releasechairman"),e.abrupt("return");case 3:return e.next=5,coreConf.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Le=t.confReleaseChairmanResult=function(e){if(0===e.param.ret){if(window.CLIENTCONFIG.ISMAC){var t=$getState().conf,n=t.isBigConf,r=t.svcShowPage;return n&&window.Toast(language.ENTER_ACTIVE_CONF,2,null,!0),void(n&&0!==r&&b.SvcAttendanceManager.dealSvcPageSwitch(0))}$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.THE_CHAIRMAN_HAS_BEEN_RELEASED,2),window.isSupportiDo||Ye()}else{if(window.CLIENTCONFIG.ISMAC)return;z.error("failed to release the chairman ",e.param.ret),window.ToastNew(language.FAILED_RELEASE_THE_CHAIR,2)}},Me=t.actionRequestChairman=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(n)){e.next=3;break}return z.error("reqNumber is null or undefined, can not requestchairman"),e.abrupt("return");case 3:return r={chairmanPwd:t,reqNumber:n},e.next=6,coreConf.requestChairman(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),De=t.confReqChairmanResult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("req chairman Result",t),window.isSupportiDo){e.next=4;break}return xe(t),e.abrupt("return");case 4:if(n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS,a=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=16;break}i&&$dispatch(coreUi.showqusetchairman()),o&&(z.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 16:if(z.error("failed to request the chairman ",t.param.ret),!i){e.next=20;break}return o||(z.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Fe();case 22:s=e.sent,(t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS||r)&&s?window.CLIENTCONFIG.ISMAC?window.confirm(language.CURRENT_CHAIRMAN_ALREADY):window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("NATIVE_CURRENT_CHAIRMAN_ALREADY",1):window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):t.param.ret!==constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR&&!a||s?window.CLIENTCONFIG.ISMAC?window.confirm(language.APPLICATION_FAILED):window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("NATIVE_FAILED_APPLY_THE_CHAIR",1):window.ToastNew(language.APPLICATION_FAILED,2):Pe();case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),xe=t.handleReqChairmanResultRest=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("enter handleReqChairmanResultRest "),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=$getState().conf.showRepChairmanError,o=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=12;break}o&&$dispatch(coreUi.showqusetchairman()),a&&(z.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 12:if(!r||!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=16;break}ur(),e.next=24;break;case 16:if(z.error("failed to request the chairman ",t.param.ret),!o){e.next=20;break}return a||(z.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Fe();case 22:i=e.sent,(10002===t.param.ret||r)&&i?window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):10002!==t.param.ret&&!r||i?window.ToastNew(language.APPLICATION_FAILED,2):window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&Be()}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Ue);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ke=t.confEnterPwdToChairmanResultResult=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.error("smc failed to request the chairman first ",t.param),ur();case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Pe=t.popupRequestChairmanInputBox=function(){window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if(e.ret)Be();else{var t=$getState().common.showResetfuc;t&&t()}}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Ue)},Fe=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),z.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.ret)){e.next=5;break}return e.next=5,cr();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),z.error("againRequestPreservate:",e.t0);case 10:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cr();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),z.error("againCompressRequest:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();t.actionCallOtherNum=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Tt(t)){e.next=4;break}return z.error("member number exceeds 400, can not create conf"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 4:return e.next=6,coreConf.addAttendee(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionAddAttendee=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=void 0,n=window.CLIENTCONFIG.ISMOBILE?a:t.selectBox.selectBox_tempSelectedList,!Tt(n)){e.next=7;break}return z.error("member number exceeds 400, can not create conf"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 7:return r=bt(n),e.next=10,coreConf.addAttendee(r);case 10:coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.addAttendeeFromWelinkIT=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t,r=""!==$getState().conf.confHandle,a=$getState(),o=a.myInfo,i=[],s=[],c="ConCreateMeeting"===window.getRoute()||"ConMembers"===window.getRoute()||"bookMeeting"===window.getRoute(),z.info("addAttendeeFromWelinkIT isAddContact : "+c),u=0;u<n.length;u++)f=n[u],f.contactsId||f.contactId||(f.contactId=f.calleeNumber),l=f.contactId,d="",f.mobilePhones&&(d=f.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),h={account:l,name:f.name,mobile:d,number:f.calleeNumber,bind_no:f.calleeNumber,email:f.email,home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:f.name},o.account===l&&(o.bind_no=f.calleeNumber),i.push(h),c&&(z.info("addAttendeeFromWelinkIT add single contact"),p={account:l,avatarContent:f.name,avatarImg:"",avatarPosition:"",isExpanded:!0,isSelected:!0,itemName:f.calleeNumber===d?"mobile":"bind_no",itemType:"contact",name:f.name,email:f.email,number:f.calleeNumber,pushCount:1,qPinyin:"",status:1,numberInfo:{bind_no:{number:f.calleeNumber},mobile:{number:d},home_phone:{number:""},office_phone:{number:""},short_phone:{number:""},other_phone:{number:""},other_phone2:{number:""},voip:{number:f.mobileVoips},ip_phone:{number:""}}},s.push(p));if(!r){e.next=15;break}return z.info("addAttendeeFromWelinkIT is in conf"),e.next=12,coreConf.addAttendee(i);case 12:$dispatch(coreUi.hideModal()),e.next=16;break;case 15:"CALL_CONNECTED"===$getState().call.callStatus&&"VIDEO_CONNECTED"===$getState().call.callStatus?(Lt(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,!0,i),z.info("addAttendeeFromWelinkIT p2pTransToConf")):c?(z.info("addAttendeeFromWelinkIT pure add person"),$dispatch(coreUi.setContactSelectedList(s)),$dispatch(coreUi.changeTempSelectedListData(s)),Ut()):(z.info("addAttendeeFromWelinkIT action create conf"),_=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,se(o,i,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,_));case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var We=t.actionHangupAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.hangupAttendeeService(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),He=(t.actionCallAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.callAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionRemoveAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.removeAttendeeService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ve=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(coreCall.getCallCount()>0)){e.next=3;break}return z.warn("already exist call, reject conf"),e.abrupt("return",!1);case 3:if(!V.isInReCall()){e.next=6;break}return z.warn("isInReCall, reject conf"),e.abrupt("return",!1);case 6:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=11;break}return e.next=10,window.isSimCardCall();case 10:e.t0=e.sent;case 11:if(!(n=e.t0)){e.next=15;break}return z.warn("isInSimCardCall, reject conf"),e.abrupt("return",!1);case 15:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.isHubEnv&&(window.isPluginEnv,1)){e.next=18;break}return z.warn("ISBIGWIN or isHubEnv, reject conf"),e.abrupt("return",!1);case 18:return z.info("checkCanIncomingConf yes"),e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$e=t.confIncoming=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t.isVideo);case 2:if(n=e.sent){e.next=6;break}return Ge(t.confHandle),e.abrupt("return");case 6:return z.info("confIncoming, confHandle = "+t.confHandle),e.next=9,G.confIncoming(t);case 9:if(j.confInComingRefreshRecent(),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}if(!t.isVideo){e.next=21;break}return e.next=14,coreCall.createVideoPreCheck();case 14:if(r=e.sent){e.next=21;break}if(z.info("<video>mobile user 3/4G,user click to reject confincoming"),!t.confHandle){e.next=21;break}return z.info("confhangup,confhanled = "+t.confHandle),e.next=21,Ge(t.confHandle);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ge=t.rejectConf=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.rejectConfService(t),G.rejectConf(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ye=(t.acceptConf=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=5;break}return z.info("conf has ended, return"),window.ToastNew(language.END_CONFERENCE,2),G.rejectConf(t),e.abrupt("return");case 5:return e.next=7,coreCall.Call2GNet(!0);case 7:if(!e.sent){e.next=10;break}z.info("The network is 2G not support video conf"),n=0;case 10:return G.acceptConfStart(n),r={confHandle:t,isVideoType:n},e.next=14,coreConf.acceptConfService(r);case 14:a=e.sent,a&&0===a.result?(z.info("accept conf success"),G.accpetConfSuc()):(z.error("accept conf failed"),G.rejectConf(t)),j.acceptConfRefreshRecent();case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.doClearSipForSipLoginOnly=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.sipserverDeregister();case 2:return e.next=4,coreAccount.clearnsipinfo();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSmcFirstRequest=function(){$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||coreConf.setIsSmcFirstRequestCharimanRest(!0)}),je=(t.handleClosePairConfPage=function(){if(z.info("BLE: start handleClosePairConfPage"),coreCall.resumeScreenStateWhenCallOrConfEnd(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.clearConfInfo()),coreCommon.SpkControl.getInstance().setHandsFree(!1),V.terminateReCall(),Ft(!0),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeCallId("")),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.clearPhoneAddrInfo()),G.confEnded(),window.CLIENTCONFIG.ISMOBILE){window.callOrConfEnded(),jn();"callMain"===window.getRoute()&&(z.info("BLE: mobile return origin page"),history.back()),coreConf.changeIsEnterConfMobileNow("true")}coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade()},t.actionLeaveConf=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().synergismInfo.inPairConf){e.next=4;break}return z.info("BLE: actionLeaveConf, start leave pair meeting"),(0,U.pairStartEndMeeting)(!1),e.abrupt("return");case 4:return G.closeConfPage(!0,!1,0,language.EXIT_CONFERENCE),e.next=7,coreConf.leaveConf();case 7:G.clearAfterConfEnd(!0,!1,0);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),qe=(t.actionBroadcastAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("actionBroadcastAttendeeisBroadcast= "+t+",NNN="+n.substr(0,3)+"****"+n.substr(-3)),r=JSON.parse((0,d.default)($getState().conf.broadCastInfo)),void 0!==r.broadCastList&&(a="",o="",r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})),z.info("actionBroadcastAttendee",r),i={isBroadcast:t,number:n},e.next=7,coreConf.broadcastAttendeeService(i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionWatchAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.confctrlWatchAttendee(t);case 2:n=e.sent,n&&0===n.result?(Z=t,z.info("actionWatch attendee success: "+handlePhoneNumber(t))):z.error("actionWatch attendee failed: "+handlePhoneNumber(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confEnded=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("confEnded, reason is ",t.param.reason),G.closeConfPage(!1,!0,0,language.END_CONFERENCE),G.clearAfterConfEnd(!1,!0,t.param.reason);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Je=function(e){var t="";switch(e){case 0:t="[In Conf]";break;case 1:t="[Inviting]";break;case 2:t="[Entering conf]";break;default:t="[Hang Up]"}return t},ze=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="";if(n&&(r=",CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND"),t&&!isNaN(t.length)&&t.length>0)for(var a=0;a<t.length;a++)r=n?r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+handlePhoneNumber(t[a].number)+",hand_state = "+t[a].hand_state+",is_broadcast = "+t[a].is_broadcast+",is_mute = "+t[a].is_mute+",media_type = "+t[a].media_type+",role = "+t[a].role+",state = "+t[a].state+Je(t[a].state)+",is_self = "+t[a].is_self+",is_same_grade_mcu = "+t[a].is_same_grade_mcu:r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+t[a].number.substr(0,3)+"****"+t[a].number.substr(-3);z.info(e,r)},Ke=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.svcOnLineAttendances,r=2===t,$dispatch(coreUi.changeIsBigConf(r)),window.CLIENTCONFIG.ISMOBILE?(z.info("notifyIsBigConfToNative isBigConf = "+t),r&&!coreConf.isConfChairMan()&&window.Toast(language.ENTER_ACTIVE_CONF,2,!1,"big-conf-toast"),window.notifyIsBigConfToNative(t)):(R.SvcAtdManager.handleAtdlist(n),window.CLIENTCONFIG.ISWIN?R.SvcAtdManager.alertBox("NATIVE_ENTER_ACTIVE_CONF",1):window.CLIENTCONFIG.ISMAC&&window.Toast(language.ENTER_ACTIVE_CONF,2,null,!0));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=$getState().conf.videoWatchNum,""!==o&&(i=!1,t.forEach(function(e){if(e.number===o)return i=!0,void(0!==e.state&&$dispatch(coreUi.changeVideoWatchNum("")))}),i||$dispatch(coreUi.changeVideoWatchNum(""))),!window.isSupportiDo){e.next=7;break}return e.next=5,Qe(t,n,r,a);case 5:e.next=8;break;case 7:Ze(t,n,r,a);case 8:s=$getState().conf.selfNum,c=$getState().myInfo.bind_no,u=$getState().call.isMuteMic,f=$getState().conf.isConfMicMute,l=isNullOrEmpty(s)?c:s,u&&!f&&(z.info("handleAttendeeListUpdate mute Attendee isMuteMic "+u+" isConfMicMute: "+f),_e(!0,l,!0),coreCommon.MicControl.getInstance().muteMic(!1));case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d,h;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r&&ze("Rest handle AttendeeList Update logic",t),z.info("isAllMute = "+a),o=$getState().conf,i=o.isSvcConf,s=o.isAudience,!(!t||!s&&t.length<=0)){e.next=6;break}return z.error("memberlist is null"),e.abrupt("return");case 6:if(n&&(i&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&R.SvcAtdManager.setSubject(n),$dispatch(coreUi.changeConfSubject(n)),L.setSubject(n)),(0,T.dealItShortNumber)(t),!r){e.next=16;break}t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),$dispatch(coreUi.changeFlagStatus()),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)||Rt($getState().conf.searchText,t),e.next=38;break;case 16:return $dispatch(coreUi.changeConfAllMute(a)),e.next=19,(0,T.dealWithMemberListDataRest)(t);case 19:if(c=e.sent,u=c.currentMemberList,f=$getState().conf.isSvcConf,!u||!(u.length>1||f&&u.length>0)){e.next=33;break}if(!f){e.next=32;break}if(l=tt(u),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=30;break}return e.next=28,R.SvcAtdManager.handleSvcAtdList(l);case 28:e.next=32;break;case 30:return e.next=32,b.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(l);case 32:u.sort(T.attendeeSortFunc);case 33:coreConf.updateConfMemberList(u),$dispatch(coreUi.changeMemberListInfo(u)),$dispatch(coreUi.changeFlagStatus()),(0,T.calcMemberCount)(u),isNullOrEmpty($getState().conf.searchText)||Rt($getState().conf.searchText,u);case 38:d=$getState(),h=d.conf.searchText,h&&(z.info("update search result: "),Rt(h)),F.ToolbarManager.setChairmanState(t),F.ToolbarManager.setMuteStateInAvc(t),le();case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d,h,p;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length<21&&!r&&ze("iDo handle AttendeeList Update logic",t),z.info("isAllMute = "+a),o=$getState().conf,i=o.isAudience,s=o.isSvcConf,!(!t||!i&&t.length<=0)){e.next=6;break}return z.error("memberlist is null"),e.abrupt("return");case 6:if(n&&(s&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&R.SvcAtdManager.setSubject(n),z.info("ido attendee list confSubject = "+n.substr(0,1)+"***"),$dispatch(coreUi.changeConfSubject(n)),L.setSubject(n)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,T.dealItShortNumber)(t),!r){e.next=18;break}if(t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),$dispatch(coreUi.changeFlagStatus()),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)){e.next=16;break}return e.next=16,Rt($getState().conf.searchText,t);case 16:e.next=44;break;case 18:return $dispatch(coreUi.changeConfAllMute(a)),e.next=21,(0,T.dealWithMemberListDataiDo)(t);case 21:if(c=e.sent,window.CLIENTCONFIG.ISWIN&&Gn(),!c||!(c.length>1||s&&c.length>0)){e.next=37;break}if(!s){e.next=35;break}if(z.info("00000 run into SvcConf"),u=tt(c),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=32;break}return e.next=30,R.SvcAtdManager.handleSvcAtdList(u);case 30:e.next=35;break;case 32:return e.next=34,b.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(u);case 34:z.info("handleSvcAttendancesUpdateEvent end");case 35:c.sort(T.attendeeSortFunc),z.info("currentMemberList sort end");case 37:if(coreConf.updateConfMemberList(c),$dispatch(coreUi.changeMemberListInfo(c)),(0,T.calcMemberCount)(c),$dispatch(coreUi.changeFlagStatus()),isNullOrEmpty($getState().conf.searchText)){e.next=44;break}return e.next=44,Rt($getState().conf.searchText,c);case 44:if(!window.CLIENTCONFIG.ISWIN&&!window.CLIENTCONFIG.ISBIGWIN){e.next=51;break}return e.next=47,F.ToolbarManager.setChairmanState(t);case 47:return f=$getState().conf,l=f.isBigConf,d=f.svcViewMode,h=f.svcOnLineAttendances,l&&(p=h.length,R.SvcAtdManager.setPageNum(d,p,!0)),e.next=51,F.ToolbarManager.setMuteStateInAvc(t);case 51:le();case 52:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),et=function(e,t){if(e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1},tt=function(e){var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||et(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r},nt=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,T.dealWithConfSpeakerList)(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("add contact to group from conf: "+n),n){e.next=4;break}return z.warn("group uri is not exit"),e.abrupt("return");case 4:return e.next=6,coreDb.queryGroup({group_id:n});case 6:if(!(r=e.sent)||r.group_type!==constant.GROUP_TYPE.DISCUSS_GROUP){e.next=20;break}z.info("discuss group, deal add"),a=0;case 10:if(!(a<t.length)){e.next=18;break}return o=t[a].account,i={groupType:constant.GROUP_TYPE.DISCUSS_GROUP,groupId:n,account:o,groupName:r.name,displayName:r.name},e.next=15,coreGroup.addGroupMemberService(i);case 15:a++,e.next=10;break;case 18:e.next=21;break;case 20:z.error("not discuss group");case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),at=(t.diableSpeakerIcon=function(e){for(var t=$getState(),n=t.conf.confSpeaker,r=0;r<n.speaker.length;r++)if(e===n.speaker[r].number){n.speaker[r].isToMuted=!0;break}$dispatch(coreUi.updateConfSpeaker(n))},t.toggleShowMemberList=function(e){if($getState().conf.isShowMemberList&&e)return void z.info("now is showMemberList status,return");$dispatch(coreUi.changeIsShowMemberList(e))},t.cancleConfMemberlistMessage=function(){$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(z.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}),ot=(t.handleShowMemberList=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=$getState(),r=n.conf.isShowMemberListNew;if(e){var a=e.x,o=e.y,i=e.w,s=e.h,c=e.isMove;$dispatch(coreUi.changeMemberListPosition(a,o,i,s)),$dispatch(coreUi.changeMemberListIsMove(c))}if($dispatch(coreUi.changeIsShowMemberListNew()),r){at();var u={conf_member_list_off:1};w.NativeInterface.setParam(u)}if(t){var f={conf_member_list_off:0};w.NativeInterface.setParam(f)}},t.toggleShowConfInfoCard=function(e){$dispatch(coreUi.changeIsShowConfInfo(e))},t.updateMemberStateInfo=function(e){z.info("AttendeeList updateMemberStateInfo"),$dispatch(coreUi.changeMemberStateInfo(e))}),it=t.updateconfRecallList=function(e){$dispatch(coreUi.changeconfRecallList(e))},st=t.updateconfMsglList=function(e){$dispatch(coreUi.changeconfMsglList(e))},ct=t.handleBroadcaseResult=function(e){0===e.param.operation_rsp_reason?coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_BROADCAST,null,[1]):coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_BROADCAST,null,[0,e.param.operation_rsp_reason]),z.info("handleBroadcaseResult ----\x3e "+e.param.operation_rsp_reason);var t=[language.BROADCAST_SUCCEED,language.BROADCAST_FAILED_1,language.BROADCAST_FAILED_2,language.BROADCAST_FAILED_3,language.BROADCAST_FAILED_4,language.BROADCAST_FAILED_5,language.BROADCAST_FAILED_6,language.BROADCAST_FAILED_7,language.BROADCAST_FAILED_8,language.BROADCAST_FAILED_9,language.BROADCAST_FAILED_10,language.BROADCAST_FAILED_11,language.BROADCAST_FAILED_12,language.BROADCAST_FAILED_FF],n=t[e.param.operation_rsp_reason]||t[t.length-1];if(window.CLIENTCONFIG.ISMOBILE)window.Toast(n,3,!1,"request-chairman-toast-reset");else if(window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf){var r=$getState().conf.videoFrameHwnd,a=L.getAvcFrameHandles(),o={frameHwnd:0!==r?r:a,dialog_type:2,content:n};(0,I.showMessageBox)(o)}else setTimeout(function(){window.Toast(n,2,!1,"pcToast","")},3e3)},ut=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("onMultiViewBroadcast"),R.SvcAtdManager.handleMultiViewBroadcast(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ft=t.registerConfEvent=function(){z.info("registerConfEvent, Observer subscribe topics"),window.addEventListener("sipRegisterSuc",gn),window.addEventListener("CloudLinkoffline",En);var e=new coreCommon.ObserverOpts("MODULE_CONFERENCE_START_END");coreCommon.Observer.subscribe("ConfConnected",pe,e),coreCommon.Observer.subscribe("ConfEnded",qe,e),coreCommon.Observer.subscribe("ConfInfoNotify",de),coreCommon.Observer.subscribe("MuteConfResult",Re),coreCommon.Observer.subscribe("IsBroadcastLocal",Oe),coreCommon.Observer.subscribe("MuteAttendeeResult",Ce),coreCommon.Observer.subscribe("lockResult",me),coreCommon.Observer.subscribe("lockState",Se),coreCommon.Observer.subscribe("handupResult",ve),coreCommon.Observer.subscribe("ConfIncoming",$e),coreCommon.Observer.subscribe("HandleSvcConfWatchRet",Tn),coreCommon.Observer.subscribe("handleVideoWatchRes",Nn),coreCommon.Observer.subscribe("BroadcaseResult",ct),coreCommon.Observer.subscribe("onMultiViewBroadcast",ut);var t=new coreCommon.ObserverOpts("MODULE_CONFERENCE");t.setQueueParams({delay:10,timeoutMs:5e3}),coreCommon.Observer.subscribe("AttendeeListUpdate",Xe,t),coreCommon.Observer.subscribe("BigConfInfoNotify",Ke),coreCommon.Observer.subscribe("AutocallMobile",lt),coreCommon.Observer.subscribe("ConfSpeakerNotify",nt),coreCommon.Observer.subscribe("AddToGroupFromConf",rt),coreCommon.Observer.subscribe("ExceedGroupMemNum",At),coreCommon.Observer.subscribe("TransToConfResult",Mt),coreCommon.Observer.subscribe("ConfList",Vt),coreCommon.Observer.subscribe("VMRConfResult",Pt),coreCommon.Observer.subscribe("ConfInfo",en),coreCommon.Observer.subscribe("ConfMTnumber",Qt),coreCommon.Observer.subscribe("SpeakerReport",wt),coreCommon.Observer.subscribe("UportalTokenErr",vt),coreCommon.Observer.subscribe("NonChairCtrlcaps",Ct),coreCommon.Observer.subscribe("smcEnterDataConf",mt),coreCommon.Observer.subscribe("ReleaseChairmanResult",Le),coreCommon.Observer.subscribe("ReqChairmanResult",De),coreCommon.Observer.subscribe("GetDataPostponeConf",gt),coreCommon.Observer.subscribe("UportalBookConfResult",te),coreCommon.Observer.subscribe("EnterPwdToChairmanResult",ke),coreCommon.Observer.subscribe("inviteAttendeeResult",On),coreCommon.Observer.subscribe("transferChairman",rn),coreCommon.Observer.subscribe("callAttendeeResult",an),coreCommon.Observer.subscribe("OnMeetingHWreCallTimeOut",wn),coreCommon.Observer.subscribe("AudientResult",xn),coreCommon.Observer.subscribe("ChangeDirectionResult",kn),coreCommon.Observer.subscribe("setRecordVideoResult",Hn),coreCommon.Observer.subscribe("confStateDirectBroadCastIndresult",Vn),coreCommon.Observer.subscribe("recordVideoStatusChairmanIndResult",$n),coreCommon.Observer.subscribe("changeConfHanlde",Jn),coreCommon.Observer.subscribe("changeConfSubject",zn),coreCommon.Observer.subscribe("changeCallId",Kn),coreCommon.Observer.subscribe("changeConfRole",Xn),coreCommon.Observer.subscribe("changeConfServerId",Zn),coreCommon.Observer.subscribe("changeVmrId",Qn),coreCommon.Observer.subscribe("changeIsSvcConf",er),coreCommon.Observer.subscribe("changeSsrcRange",tr),coreCommon.Observer.subscribe("changeGroupUri",Q),coreCommon.Observer.subscribe("confInfoNotifyIsNotVideoConf",nr),coreCommon.Observer.subscribe("CallEndedInConf",ar),coreCommon.Observer.subscribe("SvcSessionModify",he),coreCommon.Observer.subscribe("cancelConf",dr)},lt=t.AutocallMobile=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().call,r=n.callStatus,a=n.showCallToolBar,a&&""!==r){e.next=3;break}return e.abrupt("return");case 3:o=[],t.participants=dt(t.participants),i=0;case 6:if(!(i<t.participants.length)){e.next=25;break}if(s=t.participants[i],c=X.test(s.number),u=!1,s.state===s.oldState||c||!0===s.hasCallMobile||1===s.state){e.next=21;break}if(f=$getState().conf.confMsglList,s.hasCallMobile){e.next=19;break}return z.info("AttendeeList state="+s.state+",oldState="+s.oldState+",hasCallMobile="+s.hasCallMobile+",callnum="+handlePhoneNumber(s.number)+",hasTipMsg="+s.hasTipMsg),e.next=16,(0,T.searchContact)(s.number,s.name);case 16:if(l=e.sent,s.hasCallMobile=!0,l.length>0&&(d=l[0],h=_t(d),h.length>0))for(p=0;p<h.length;p++)_=$getState().conf.confRecallList,"mobile"===h[p].name&&_.indexOf(h[p].num)<0&&(d.number=h[p].num,u=!0,o.push(d),_=_+","+d.number,z.info("AttendeeList number=",handlePhoneNumber(d.number)),it(_),ht(s.name,s.state,c,u),f=f+","+s.number);case 19:f.indexOf(s.number)<0&&(ht(s.name,s.state,c,u),f=f+","+s.number),st(f);case 21:s.oldState=s.state;case 22:i++,e.next=6;break;case 25:return e.next=27,ot(t.participants);case 27:return e.next=29,coreConf.addAttendee(o);case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),dt=t.handlepPrticipantsList=function(e){for(var t=$getState().conf.memberStateInfo,n=0;n<e.length;n++)if(t.length>0)for(var r=0;r<t.length;r++){t[r];e[n].participant_id===t[r].participant_id&&(isNullOrEmpty(t[r].oldState)?e[n].oldState=-1:(e[n].oldState=t[r].oldState,e[n].hasCallMobile=t[r].hasCallMobile))}for(var a=0;a<e.length;a++)(X.test(e[a].number)||0===e[a].state||2===e[a].state||3===e[a].state||4===e[a].state||7===e[a].state)&&(e[a].hasCallMobile=!0);return ot(e),e},ht=function(e,t,n,r){t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER?!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!0):n?n&&pt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):pt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED?!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!0):n?n&&pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY&&(!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!0):n?n&&pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1):pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1))},pt=t.setMsg=function(e,t,n){var r="";if(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST===t?r=language.CONF_PART_STATUS_NO_EXIST:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY===t?r=language.CONF_PART_STATUS_BUSY:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER===t?r=language.CONF_PART_STATUS_NO_ANSWER:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT===t?r=language.CONF_PART_STATUS_REJECT:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED===t&&(r=language.CONF_PART_STATUS_CALL_FAILED.format(e)),n&&(r=r+", "+language.CALL_Mobile),""!==r){var a=$getState().call,o=a.callStatus;(a.showCallToolBar||"VIDEO_OUT"===o||"CALL_OUT"===o||"VIDEO_CONNECTED"===o||"CALL_CONNECTED"===o||"VIDEO_TRANSTO_CONF"===o||"CALL_TRANSTO_CONF"===o)&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(r,2):coreUi.showConfTips(e,constant.CONF_MSG_TYPE.TYPE_OTHER_STATE,r))}},_t=t.checkUsersMobile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.CALL_CONST.CALL_NUM_LIST,n=[];return t.forEach(function(t){if(e[t]&&X.test(e[t])){var r={name:t,num:e[t]};n.push(r)}}),n},Ct=t.handleNonChairCtrlcaps=function(e){z.info("handle Non Chair Ctrlcaps");var t=!e.param.nonchair_cap.event_type[5];z.info("showMuteStatus: "+t),$getState().conf.showMuteStatus!==t&&$dispatch(coreUi.changeShowMuteStatus(t))},vt=t.handleUportalTokenErr=function(e){z.info("handleUportal[Token]Err = "+(0,d.default)(e)),$getState().login.sipLoginOnly||!e||!e.param||e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||coreAccount.actionRefreshToken()},mt=t.handleSmcEnterDataConf=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("handleSmcEnterDataConf,conf[key] length = "+t.confKey.length),n={},n.conf_uri="https://"+$getState().login.smcUri,n.passcode=t.confKey,n.getParamType=1,n.media_type=t.mediaType,t.confToken&&""!==t.confToken&&"0"!==t.confToken?n.sip_num=t.confToken:n.sip_num=$getState().login.sipImpi,e.next=9,coreConf.joinDataConf(n,t.confCallId);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),St=function(e){return(Math.floor(e/60)?Math.floor(e/60)+language.HOUR:"")+(e%60?e%60+language.MINUTE:"")},gt=t.handleGetDataPostponeConf=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{z.info("handleGetDataPostponeConf"),t&&t.param?(n=t.param,r=n.ret,a=$getState().conf,o=a.pastponeTime,i=a.isVideoConf,r===constant.MEDIA_X_ERROR_CODE.success?(z.info("userClick  handleGetDataPostponeConf "+language.MEETING_WILL_ENTENT.format(St(o))),window.CLIENTCONFIG.ISWIN&&i?R.SvcAtdManager.alertBox(language.MEETING_WILL_ENTENT.format(St(o)),3):window.ToastNew(language.MEETING_WILL_ENTENT.format(St(o)),2),kt()):(r===constant.MEDIA_X_ERROR_CODE.conference_time_out_max_time?window.CLIENTCONFIG.ISWIN&&i?R.SvcAtdManager.alertBox(language.MEETING_TIME_OUT_OF_MAX,3):window.ToastNew(language.MEETING_TIME_OUT_OF_MAX,2):window.CLIENTCONFIG.ISWIN&&i?R.SvcAtdManager.alertBox(language.PROLONGING_THE_FAILURE_OF_MEETING,3):window.ToastNew(language.PROLONGING_THE_FAILURE_OF_MEETING,2),z.error("handleGetDataPostponeConf "+t.param.ret,constant.MEDIA_X_ERROR_INFO[t.param.ret],o))):z.error("handleGetDataPostponeConf ")}catch(e){z.error("handleGetDataPostponeConf",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Et=(t.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=coreAccount.getLoginModel(),n=$getState().call,r=n.callStatus;if(!e&&(n.showCallToolBar||"VIDEO_OUT"===r||"CALL_OUT"===r||"VIDEO_CONNECTED"===r||"CALL_CONNECTED"===r||"VIDEO_TRANSTO_CONF"===r||"CALL_TRANSTO_CONF"===r))return z.info("UportalTokenErr,delay"),void(t.appstate===constant.APP_STATE.ONLINE&&$dispatch(coreUi.changeuportalTokenErr(!0)));z.info("UportalTokenErr"),Et()},t.UportalTokenErrAndLogout=function(){z.info("UportalTokenErrAndLogout");var e=coreAccount.getLoginModel();e.appstate===constant.APP_STATE.ONLINE&&(e.isResume&&(coreAccount.clearResumeService(),coreAccount.stopResume()),coreAccount.checkAndEndCall().then(function(){coreAccount.setOffline(),window.endCallPromise&&(window.endCallPromise=null)}).then(function(){window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"loginCtn"!==window.getRoute()&&alert(language.RENEW_EXPIRED_REMINDER).then(function(){coreAccount.logout().then(function(){K&&clearTimeout(K),K=null,window.isRepeateCall=!1,z.info("logout success",window.isRepeateCall)})})}))},t.setUportalTokenRefreshTimer=function(e){K&&clearTimeout(K),K=setTimeout(function(){z.info("timeout not respond allows refresh again",e),window.isRepeateCall=!1},e)},t.endCallAndLogout=function(){coreAccount.checkAndEndCall().then(function(){coreAccount.resume()})}),wt=t.handleSpeakerReport=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("handleSpeakerReport",t.param.result);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),It=(t.unregisterConfEvent=function(){z.info(" execute unregisterConfEvent "),window.removeEventListener("sipRegisterSuc",gn),window.removeEventListener("CloudLinkoffline",En)},function(){var e=(new Date).getTime();return e=parseInt(e/1e3),z.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}),Tt=function(e){var t=$getState(),n=t.conf.memberListInfo,r=Nt(n),a=r+e.length;if(a>400)for(var o=0;o<e.length;o++)!function(t){n.findIndex(function(n){return n.number===e[t].number&&n.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT})>=0&&a--}(o);return a>400},Nt=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&e[n].state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING||t++;return t},bt=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a={};a=r.item&&r.itemType&&"charItem"===r.itemType?{account:"",name:r.item.displayName,mobile:Ot(r.item.number),number:Ot(r.item.number),email:r.item.email,bind_no:"",home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:r.item.pinyin,type:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE}:r.numberInfo?{account:r.account,name:r.name,bind_no:r.numberInfo.bind_no.number,mobile:r.numberInfo.mobile.number,home_phone:r.numberInfo.home_phone.number,office_phone:r.numberInfo.office_phone.number,office_phone2:r.officephone2,short_phone:r.numberInfo.short_phone.number,other_phone:r.numberInfo.other_phone.number,other_phone2:r.numberInfo.other_phone2.number,voip:r.numberInfo.voip.number,ip_phone:r.numberInfo.ip_phone.number,number:r.number,email:r.email,q_pin_yin:r.qPinyin,type:isNullOrEmpty(r.officephone2)?constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL}:{name:r.name,number:r.number},t.push(a)}return t},Ot=function(e){var t="";return t=0===e.indexOf("+86")?e.substring(3,e.length):e,t.replace(/[^0-9]/gi,"")},At=function(){z.warn("member number exceeds 100, can not add to group"),alert(language.CONFERENCE_ADDMEM_EXCEED_GROUP.format("100"))},Rt=t.searchMemberList=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,a=(0,C.default)([],r),""!==f&&(a=(0,C.default)([],f)),""!==t.replace(/\s+/g,"")){e.next=7;break}return z.info("the first input can not enter a space"),$dispatch(coreUi.changeSearchText("")),e.abrupt("return");case 7:for(o=["name","q_pin_yin","number"],i=[],s=[],c=0;c<a.length;c++)u="",u=""===a[c].userInfo.q_pin_yin||null===a[c].userInfo.q_pin_yin||void 0===a[c].userInfo.q_pin_yin?window.pinyinUtil.getPinyin(a[c].userInfo.name.trim()):a[c].userInfo.q_pin_yin,i.push((0,C.default)({},a[c],{name:a[c].userInfo.name,q_pin_yin:u}));coreSearch.filterMatch(i,t,o).map(function(e){s.push(e.object)}),z.info("search conf member, result=",s.length),$dispatch(coreUi.changeSearchText(t)),$dispatch(coreUi.changeSearchMemberList(s));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),yt=(t.toggleConfOtherNumber=function(e){$dispatch(coreUi.changeConfOtherNumber(e))},t.handleShowEndConf=function(e){$dispatch(coreUi.changeShowEndConf(e)),z.info("handleShowEndConf",e)},t.upgrade2DataConfOrStartShare=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==coreConf.isNeedUpdate2DataConf()){e.next=5;break}return e.next=3,yt();case 3:e.next=7;break;case 5:return e.next=7,(0,N.startShareScreen)();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.upgradeAudioConf2Data=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(t=coreConf.isInConf())){e.next=9;break}return z.info("upgradeAudioConf2Data, isInfConf = true"),$dispatch(coreUi.hideDataShareButton(!0)),!1===coreConf.isConfChairMan()&&(z.error("not chairmancan not upgrade conf"),n=$getState().conf.videoFrameHwnd,r=L.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(a={frameHwnd:0!==n?n:r,dialog_type:1,content_id:"ATTENDEE_UPGRADE_DATA_NOTIFY"},(0,I.showMessageBox)(a))),e.next=7,coreConf.upgradeConf();case 7:e.next=11;break;case 9:return e.next=11,Lt(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,!1,[],!0);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Lt=t.p2pTransToConf=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,h,p,_,v,S,g,E,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,I=arguments[1],T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],N=arguments[3];return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("deal p2p trans to conf, add size: "),t=$getState(),n=t.myInfo,r=t.call,a=r.callId,o=r.callNum,i=r.userInfo,s=$getState(),c=void 0,c=s.selectBox.selectBox_tempSelectedList,ue(c)){e.next=6;break}return e.abrupt("return");case 6:if(z.info("deal p2p trans to conf, callStatus: "+$getState().call.callStatus),"VIDEO_CONNECTED"===$getState().call.callStatus&&(z.info("video call trans to conf"),w|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),ce()&&(w|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),z.info("p2pTransToConf CreateDataConferenceFlag:"+ce()+",mediatype:"+w),coreUi.hideModal(),u=bt(c),!1===I&&(u.length=0),f=void 0,f=window.CLIENTCONFIG.ENABLE_IT_MEETING?Dt(T,n,i,o):Dt(u,n,i,o),f.length>=1){e.next=18;break}return z.error("add member list is null"),e.abrupt("return");case 18:return z.info("p2p trans to conf, member list count is "+f.length),e.next=21,j.p2pTransToConfCreateGroup(u,n,i,o);case 21:return l=e.sent,d=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,h=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,p={callId:a,memberList:f,confSubject:n.name+language.CONFERENCE_SUBJECT_INFO,groupUri:l,isMultiStream:"VIDEO_CONNECTED"===$getState().call.callStatus?d:0,mediaType:w,userType:2,compereNumber:n.bind_no,selfNumber:n.bind_no,selfInfo:(0,C.default)({},n),userInfo:(0,C.default)({},i,{number:o}),noPassword:h,isAutoScreenShare:void 0!==N&&N},_=(w&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)===constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,G.callToConfStart(_),z.info("p2pTransToConf isMultiStreamValue: "+d),e.next=30,coreConf.p2pTransferConf(p);case 30:v=e.sent,S=v.isSuc,g=v.errorCode,S?kt():(z.error("create conf failed"),E=J.getCreateConfFailTitle(g),G.callToConfFail(E),7===g&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():fe(g)));case 34:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Mt=function(e){0!==e.param.ret?z.error("failed to trans to conf"):(coreCall.changeCallHoldStatusLogic(!1),coreCall.setTransferFlagHandle(!1,"handleTransToConfResult"),z.info("successed to trans to conf, handle: ",e.param.handle))},Dt=function(e,t,n,r){for(var a=[],o=0;o<e.length;o++)e[o].number!==t.bind_no&&e[o].number!==r&&a.push((0,C.default)({},e[o]));return a.push((0,C.default)({},t,{number:t.bind_no})),n.name?a.push((0,C.default)({},n,{number:r})):a.push((0,C.default)({},n,{number:r,name:r})),a},xt=t.getConfInfo=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={page_index:1,page_size:100},r.sub_conf_id=n,r.conf_id=t,e.next=5,coreConf.getConfInfoService(r);case 5:z.info("getConfInfo . confId =",t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),kt=(t.transferChairman=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.confHandle,r={confHandle:n,attendeeInfo:t},e.next=4,coreConf.transferChairmanService(r);case 4:z.info("transferChairman . attendeeInfo =",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionExportConfmember=function(){z.info("userClick export member list btn");var e=void 0,t=void 0;e=coreConf.getConfMemberListContent(),t=window.LOG_PATH+"/tempFile.txt",appService.writeFile(window.LOG_PATH,"tempFile.txt",e).then(function(e){},function(e){z.info("write failed:"+e)}),appService.openFileOrFolder(t)},t.changeconfListInfo=function(e){$dispatch(coreUi.changeconfList(e))},t.getConfList=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline&&coreAccount.getLoginModel().isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:if(!$getState().conf.isSupportAS){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,coreConf.getConfListService();case 6:z.info("get_conf_list");case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Pt=t.handleVMRConfResult=function(e){var t=$getState().conf;if(z.info("subscribe VMR Conf Result",e.result),0===e.result){var n=e.vmr_info.conference_right,r={key:"vmrInfo",value:(0,d.default)(e.vmr_info)};if(coreDb.saveUserConfig(r),0===n?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),z.info("conf right",n),$dispatch(coreUi.changeVMRResultcount(0)),""===e.vmr_info.conf_id)return $dispatch(coreUi.changehasVMRConfResult("NONE")),void $dispatch(coreUi.changeShowVMRorNot(!1));$dispatch(coreUi.changeVMRConfResult(e.vmr_info)),$dispatch(coreUi.changeShowVMRorNot(!0))}else t.vmrResultcount<5&&t.showvmrornot?$dispatch(coreUi.changeVMRResultcount(t.vmrResultcount+1)):$dispatch(coreUi.changeVMRResultcount(0)),$dispatch(coreUi.changehasVMRConfResult("FAILED"))},Ft=(t.handleNotShowGeneralPas=function(e){$dispatch(coreUi.changeNotShowGeneralPas(e)),z.info("changeNotShowGeneralPas = ",e)},t.handleNotShowChairPas=function(e){$dispatch(coreUi.changeNotShowChairPas(e)),z.info("changeNotShowChairPas = ",e)},t.handleIsConfPwdInputShow=function(e){$dispatch(coreUi.changeIsConfPwdInputShow(e)),z.info("changeIsConf[Pwd]InputShow = ",e)},t.handleIsShowJoinButton=function(e){z.info("changeIsShowJoinButton = "+e),$dispatch(coreUi.changeIsShowJoinButton(e))}),Ut=(t.createTempMeeting=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState(),n=bt(t.common.selectContactModal_selectedList),r=t.common.groupName,a=t.myInfo,n.push(a),o=In(n),i=$getState().conf.isCreateMeetingPassword||$getState().conf.showvmrornot?0:1,se(a,o,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,i),coreUi.hideModal();case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createTempMeetingOfAddMember=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("createTempMeeting add participants"),t=$getState(),n=t.selectBox.selectBox_saveSelectedList,r=t.selectBox.selectBox_tempSelectedList,a=t.selectBox.selectBox_savePhoneSelectedList,0!==a.length&&(a=Bt(a,n),r=r.concat(a)),$dispatch(coreUi.setSaveSelectedList(n.concat(r)));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Bt=t.filterDuplicateData=function(e,t){return e.filter(function(e){return-1===t.findIndex(function(t){return t.itemType&&"charItem"===t.itemType&&t.item.displayName===e.item.displayName&&t.item.id===e.item.id&&t.item.numberName===e.item.numberName&&t.item.number===e.item.number})})},Wt=(t.deleteClickParticipants=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("userClick  createTempMeeting delete participants"),n=$getState(),r=void 0,r=n.selectBox.selectBox_saveSelectedList,a=t.item&&t.itemType&&"charItem"===t.itemType,o=[],o=a?r.filter(function(e){return!e.item||e.item.id!==t.item.id&&e.item.displayName!==t.item.displayName}):r.filter(function(e){return!!e.item||(isNullOrEmpty(t.account)&&isNullOrEmpty(e.account)?e.number!==t.number:e.account!==t.account)}),i=n.common.groupName,s=n.myInfo,$dispatch(coreUi.setSaveSelectedList(o)),coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createAMeeting=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},(0,C.default)(n,t.selfInfo),window.CLIENTCONFIG.ENABLE_IT_MEETING&&t.selfInfo&&t.selfInfo.short_phone,r=bt(t.memberList),r.push(n),a=In(r),o=$getState().conf.isCreateMeetingPassword||$getState().conf.showvmrornot?0:1,se(t.selfInfo,a,{group_id:""},t.mediaType,o,t.confSubject,t.type,t.recordType),coreUi.hideModal();case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createAMeetingFromHis=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},(0,C.default)(n,t),r=$getState().myInfo,window.CLIENTCONFIG.ENABLE_IT_MEETING&&r&&r.short_phone&&(z.info("debug info replace bind_no with short_phone"),r.bind_no=r.short_phone),a=n.memberList,a.push(r),o=In(a),i=isNullOrEmpty(n.general_pwd)?1:0,se(n.selfInfo,o,{group_id:""},n.mediaType,i,n.confSubject,n.type,n.recordType),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createTempTypeMeeting=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("create  instant conference"),n=$getState(),r=void 0,r=bt(n.selectBox.selectBox_saveSelectedList),a=n.common.groupName,o=n.myInfo,r.push(o),i=In(r),s=$getState().conf.isCreateMeetingPassword?0:1,se(o,i,{group_id:""},t.mediaType,s,t.confSubject,t.type,t.recordType),coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createConfFromHistory=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n,a=$getState().myInfo,r.push(a),o=In(r),i=isNullOrEmpty(t.general_pwd)?1:0,s=7,se(a,o,{group_id:""},t.media_type,i,t.conf_subject,s,0),coreUi.hideModal();case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.saveConThemeName=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e){var a=$getState(),o=a.myInfo;$dispatch(coreUi.setConThemeName(""+o.name+language.CONFERENCE_SUBJECT_INFO))}else isNullOrEmpty(n)?$dispatch(coreUi.setConThemeName("")):$dispatch(coreUi.setConThemeName(n[0]))}),Ht=t.initCreateMettingContent=function(){$dispatch(coreUi.meetingTypeValue(0))},Vt=(t.judgeCreateNewConf=function(){if(coreCall.getCallCount()>0)return z.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);Wt(!0),Ht(),$dispatch(coreUi.changeCreatNewConfName("")),window.goRoute("ConCreateMeeting")},t.saveMettingTypeValue=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.meetingTypeValue(t));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfList=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,h,_,C,v,S,g;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.update_type,z.info("push conference list ,updateType",n),0!==n&&void 0!==n){e.next=29;break}if(z.info("get_conf_list result ="+t.result+"length="+t.conf_count),0===t.result){e.next=7;break}return z.info("subscribe conference list failed.result != 0"),e.abrupt("return");case 7:if(r=$getState().conf.conflist,!(t.conf_count>0)){e.next=20;break}if((0,d.default)(r)!==(0,d.default)(t.conf_list_info)){e.next=11;break}return e.abrupt("return");case 11:for(a=[],o=$getState().conf.currentConfInfo,i=0;i<t.conf_list_info.length;i++)s=t.conf_list_info[i].start_time,t.conf_list_info[i].start_time=$t(s),c=t.conf_list_info[i].end_time,t.conf_list_info[i].end_time=$t(c),a.push(t.conf_list_info[i].conf_id);u=$getState().conf.curConfPage,-1===a.indexOf(o.conf_id)&&(z.info("Conf:ID"+o.conf_id+" is over"),window.CLIENTCONFIG.ISMOBILE||"Detail"!==u||_n("New"),window.CLIENTCONFIG.ISMOBILE&&"mConferenceInfo"===u&&window.goRoute("main/conference")),t.conf_list_info.sort(qt),$dispatch(coreUi.changeconfList(t.conf_list_info)),e.next=27;break;case 20:if(0!==t.conf_count){e.next=27;break}if(!isNullOrEmpty(r)){e.next=23;break}return e.abrupt("return");case 23:"Detail"===$getState().conf.curConfPage&&_n("Main"),$dispatch(coreUi.changeconfList([])),$dispatch(coreUi.changecurrentConfInfo([])),z.info("subscribe conference list result.result = 0");case 27:e.next=40;break;case 29:f=$getState(),l=f.conf.conflist,h=[].concat((0,p.default)(l)),_=t.conf_list_info[0],C=$t(_.start_time),v=$t(_.end_time),_.start_time=C,_.end_time=v,S=_.conf_id,g=h.findIndex(function(e){return e.conf_id===S}),1===n?(-1===g?h.push(_):(h.splice(g,1),h.push(_)),h.sort(qt)):2===n&&h.splice(g,1),$dispatch(coreUi.changeconfList(h));case 40:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),$t=t.getConfTimedec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e.replace(/-/g,"/")),n=t.getTime(),r=6e4*t.getTimezoneOffset(),a=new Date(n-r).format("yyyy-MM-dd hh:mm");return z.info("timeResult",a),a},Gt=(function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.conflist;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<a.length)){e.next=11;break}return n={account:a[t].scheduser_name},e.next=5,Xt(n);case 5:r=e.sent,z.info("searchContactByInfo success"),!1!==r&&(a[t].name=r[0].name,a[t].native_name=r[0].native_name);case 8:t++,e.next=1;break;case 11:$dispatch(coreUi.changeconfList(a));case 12:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,l,d,h,p,_,v,S,g,E,w;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.queryConfReady,r=$getState().conf.isEnableHistoryConfList,z.info("enableHistory in update history conf list",r),n||(z.info("querying db conf record"),$dispatch(coreUi.changeTempConfList(t))),a=$getState().conf.allConfList,o=[],(0,C.default)(o,a),i=(0,C.default)({},t),s=0,c=0,u=25,z.info("update all conf list"),l=0;case 13:if(!(l<o.length)){e.next=35;break}o[l].isInPast=!0,e.t0=m.default.keys(i);case 16:if((e.t1=e.t0()).done){e.next=28;break}if(d=e.t1.value,!i[d]||i[d].conf_id!==o[l].conf_id){e.next=26;break}if(o[l].isInPast=!1,!Gt({oldconf:o[l],newconf:i[d]})){e.next=24;break}return Yt({oldconf:o[l],newconf:i[d]}),e.next=24,Jt(o[l]);case 24:return i[d]=null,e.abrupt("break",28);case 26:e.next=16;break;case 28:if(!(!0===o[l].isInPast&&new Date(o[l].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=32;break}return e.next=31,Jt(o[l]);case 31:z.info("save conf record when conference end");case 32:l++,e.next=13;break;case 35:h=[],p=0;case 37:if(!(p<o.length)){e.next=49;break}if(!(!1===o[p].isInPast||new Date(o[p].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=42;break}h.push(o[p]),e.next=46;break;case 42:return _={},_.confid=o[p].conf_id,e.next=46,coreDb.delcallrecord(_);case 46:p++,e.next=37;break;case 49:o=h;for(v in i)i[v]&&(i[v].isInPast=!1,S=new Date(i[v].start_time.replace(/-/g,"/")).valueOf(),g=new Date(i[v].end_time.replace(/-/g,"/")).valueOf(),i[v].starttime=S,i[v].duration=g-S,o.push(i[v]),xt(i[v].conf_id,i[v].cycle_conf_id));if(!((s=o.length-(0,f.default)(i).length-u)>0)){e.next=65;break}z.info("too many records, delete records count ",s),E=0;case 55:if(!(E<s)){e.next=64;break}return w={},w.confid=o[E].conf_id,z.info("db test del conf record"),e.next=61,coreDb.delcallrecord(w);case 61:E++,e.next=55;break;case 64:o.splice(0,s);case 65:o=jt(o),$dispatch(coreUi.changeAllConfList(o));case 67:case"end":return e.stop()}},e,void 0)}))}(),function(e){var t=e.oldconf,n=e.newconf;return t.start_time!==n.start_time||t.end_time!==n.end_time||t.conf_subject!==n.conf_subject||t.media_type!==n.media_type}),Yt=function(e){var t=e.oldconf,n=e.newconf;t.conf_subject=n.conf_subject,t.start_time=n.start_time,t.end_time=n.end_time,t.starttime=new Date(n.start_time.replace(/-/g,"/")).valueOf(),t.endtime=new Date(n.end_time.replace(/-/g,"/")).valueOf(),t.duration=t.endtime-t.starttime,t.media_type=n.media_type},jt=function(e){z.info("sort all conf list by start time");var t=[];e.sort(qt),z.info("sort all conf list by status");for(var n in e)!0===e[n].isInPast&&t.push(e[n]);for(var r in e)!1===e[r].isInPast&&t.push(e[r]);return t},qt=function(e,t){return new Date(e.start_time.replace(/-/g,"/")).valueOf()-new Date(t.start_time.replace(/-/g,"/")).valueOf()},Jt=(t.delConfRecord=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.allConfList,r=[],(0,C.default)(r,n),isNullOrEmpty(r)){e.next=15;break}a=0;case 5:if(!(a<r.length)){e.next=15;break}if(t.conf_id!==r[a].conf_id){e.next=12;break}return z.info("del conf record, current conf count",r.length),r.splice(a,1),z.info("del conf record, new conf count",r.length),$dispatch(coreUi.changeAllConfList(r)),e.abrupt("break",15);case 12:a++,e.next=5;break;case 15:return o={confid:t.conf_id},e.next=18,coreDb.delcallrecord(o);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("save conference record after delete those with same conf id"),e.next=3,coreDb.delcallrecord({confid:t.conf_id});case 3:return n={},(0,C.default)(n,t),e.next=7,coreDb.saveConfRecord(n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),zt=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r={},a=0;a<t.length;a++)r.number=t[a].number,r.name=t[a].name,n.push(r),r={};return e.abrupt("return",(0,d.default)(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Kt=(t.getInitHistoryConfList=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.changeQueryConfReady(!1)),t={starttime:9999999999999,limitcount:50},e.next=4,coreDb.queryAllConfRecord(t);case 4:n=e.sent,n.reverse(),z.info("db query all conf records count ",n.length),r=[],isNullOrEmpty(n)?z.info("db test no conf record"):(r=Kt(n),$dispatch(coreUi.changeAllConfList(r))),$dispatch(coreUi.changeQueryConfReady(!0)),z.info("change query ready true"),a=[],(0,C.default)(a,$getState().conf.tempConfList),a.length;case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=isNullOrEmpty(a.exparams)?{}:JSON.parse(a.exparams),i=new Date(a.starttime).format("yyyy-MM-dd hh:mm"),s=new Date(a.starttime+a.duration).format("yyyy-MM-dd hh:mm");n.conf_id=a.confid,n.general_pwd=a.confpasscode,n.confmembers=a.confmembers,n.groupid=a.groupid,n.starttime=a.starttime,n.end_time=s,n.start_time=i,n.duration=a.duration,n.media_type=isNullOrEmpty(o.mtype)?0:parseInt(o.mtype),n.record_type=o.rtype?o.rtype:0,n.scheduser_name=o.sname,n.scheduser_number=o.snum,n.isInPast=o.past,n.conf_subject=o.subj,n.cycle_conf_id=o.ccid?o.ccid:"0",t.push(n),n={}}return t}),Xt=t.searchContactByInfo=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryContact(t);case 2:if(n=e.sent,r=!1,n&&n.length>0?(z.info("query from local success"),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1?n=[]:n.length<1&&(r=!0)):r=!0,!r){e.next=12;break}return z.info("can not find in local, query contact from server"),e.next=9,coreContact.searchServerContact(t.account);case 9:a=e.sent,a.serverContactResult=a.userInformationList,void 0===a?n=!1:a.serverContactResult&&(z.info("query contact from server success"),(0,C.default)(n,a.serverContactResult),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1&&(n=[]));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Zt=t.handleConfInfostate=function(e){$dispatch(coreUi.changeConfInfoState(e)),z.info("isConfInfostate =",e)},Qt=t.handleConfMTnumber=function(e){z.info("handleConfMTnumber = "+(0,d.default)(e));var t="M"+e.attendee_vc.mcu_num+"T0";$dispatch(coreUi.changevideoMultipicNum(t))},en=t.handleConfInfo=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_,C;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("handleConfInfo,data.result = ",t.result),n=void 0,0===t.result?(n&&clearInterval(n),R.SvcAtdManager.reportConfInfo(t.get_conf_info_result),r=isNullOrEmpty(t.get_conf_info_result.conf_list_info)?{}:t.get_conf_info_result.conf_list_info,qn(r),a=t.get_conf_info_result.conf_list_info,o=a.chairman_pwd,i=a.conf_id,s=a.vmr_id,(""===o||isNaN(o))&&(o=a.general_pwd),c=isNullOrEmpty(s)?i:s,u={pstconfparam:{confid:c,access_code:a.access_number,conf_paswd:o},call_type:1},f=a.media_type,l=0!=(f&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(f&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),d=$getState(),h=d.conf,p=h.confServerId,_=h.vmrId,z.info("handleConfInfocurrent confServerId is "+p+"getconfinfo return confid is "+i),p===i&&(C=a.general_pwd,C?window.CLIENTCONFIG.ISWIN&&w.NativeInterface.setParam({general_pwd:a.general_pwd,chairman_pwd:a.chairman_pwd,conf_pwd:o}):window.CLIENTCONFIG.ISWIN&&w.NativeInterface.setParam({general_pwd:"",chairman_pwd:a.chairman_pwd,conf_pwd:o})),un(0===t.get_conf_info_result.num_of_addendee?[]:t.get_conf_info_result.attendee),a.start_time=$t(a.start_time),a.end_time=$t(a.end_time),$getState().conf.isSupportAS&&a.join_advance_time&&(a.join_advance_time=$t(a.join_advance_time)),cn(a),Zt("success"),$dispatch(coreUi.changehasConfInfo("yes")),Fn(a.scheduser_name),window.lastSelectedId={confId:i,cycleId:a.cycle_conf_id},tn(t)):(nn(t),t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||vt());case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),tn=(function(){var e=(0,g.default)(m.default.mark(function e(t,n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.access_number,t.start_time=$t(t.start_time),(0,B.joinPairConf)(t);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.confServerId,r=3,t=setInterval((0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(n,"0");case 2:r--,0===r&&clearInterval(t);case 4:case"end":return e.stop()}},e,void 0)})),15e3);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get_conf_info_result.attendee,r=t.get_conf_info_result.conf_list_info.conf_id,isNullOrEmpty(n)){e.next=27;break}return z.info("the length of attendeeList is",n.length),a=[],(0,C.default)(a,$getState().conf.allConfList),e.next=8,zt(n);case 8:o=e.sent,i=0;case 10:if(!(i<a.length)){e.next=27;break}if(a[i].conf_id!==r||isNullOrEmpty(o)||!isNullOrEmpty(a[i].confmembers)&&a[i].confmembers.length===o.length){e.next=24;break}if(!(s=$getState().conf.queryConfReady)){e.next=24;break}if(a[i].confmembers=o,$dispatch(coreUi.changeAllConfList(a)),z.info("change conf list when conf member updated, conf count ",a.length),!(new Date(a[i].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=23;break}return e.next=20,Jt(a[i]);case 20:z.info("save conf record when update conf info"),e.next=24;break;case 23:z.info("reject save conf record because of start time");case 24:i++,e.next=10;break;case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),nn=function(e){"success"!==$getState().conf.isConfInfostate&&Zt("fail");var t=$getState().conf.confSubject;z.info("subscribe conference info fail.data = ",e),cn({access_number:"",chair_join_uri:"",chairman_UUID:"",chairman_pwd:"",conf_id:"",conf_state:2,conf_subject:t||"",cycle_conf_id:"",enable_conf_sign_in:0,end_time:"",general_pwd:"",guest_UUID:"",guest_join_uri:"",join_advance_time:"",media_type:2,record_aux_stream:0,record_type:0,scheduser_name:"",scheduser_number:"",sign_in_time_before_conf:0,size:0,start_time:"",token:"",vmr_id:""})},rn=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info(" dealTransferChairmanResult,data.param.ret = ",t.param.ret),n=0===t.param.ret?language.TRANSFER_CHAIRMAN_SUCCESS:language.TRANSFER_CHAIRMAN_FAILED,r=0===t.param.ret?"Right2":"",window.CLIENTCONFIG.ISMOBILE?window.ToastNew(n,2):window.Toast(n,2,!1,"pcToast",r);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),an=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.SvcAtdManager.callAttendeeResult(t.param);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),on=t.saveTempMediaxInfo=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.tempMediaxAddress,r=t.tempMediaxPort,z.info("saveTempMediaxInfo: "+n+": "+r),a=[{key:"tempMediaxAddress",value:n},{key:"tempMediaxPort",value:r}],e.next=5,coreDb.saveLoginSetting(a);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),sn=(t.getVRMList=function(){var e=(0,g.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreAccount.getLoginModel().isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreConf.getVMRListService();case 4:t=e.sent,z.info("get getvmrlist = ",t);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return z.info("getVmrInfoToDb is bigwin, return"),e.abrupt("return");case 3:return z.info("getVmrInfoToDb"),e.next=6,coreDb.queryUserConfig({key:"vmrInfo"});case 6:if(t=e.sent,t.value){e.next=9;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 9:return n=JSON.parse(t.value),r=n.conference_right,0===r?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),""===n.conf_id?($dispatch(coreUi.changehasVMRConfResult("NONE")),$dispatch(coreUi.changeShowVMRorNot(!1))):($dispatch(coreUi.changeVMRConfResult(n)),$dispatch(coreUi.changeShowVMRorNot(!0))),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),cn=(t.getVmrInfoToDbAtomic=new coreCommon.AtomicAction("getVmrInfoToDb",sn),t.oneJoinVMR=function(e){z.info("enter conf one Key Enter vmr Conf");var t=e.access_number;if(coreCall.getCallCount()>0)return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),z.error("oneJoinVMR already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);rr(t,e.conf_id,e.chairman_pwd,!0)},t.changeCurrentConfInfo=function(e){z.info("change Current Conference Info ."),$dispatch(coreUi.changecurrentConfInfo(e))}),un=t.changeConfAttendeeInfo=function(e){z.info("change Current Conference Attendee Info."),$dispatch(coreUi.changecurrentConfAttendeeInfo(e))};t.changeHistoryConfInfo=function(e){z.info("change Current History Conference Info."),$dispatch(coreUi.changecurrentHistoryConfInfo(e))},t.changeHistoryAttendeeInfo=function(e){z.info("change history conf attendee info"),$dispatch(coreUi.changeHistoryAttendeeList(e))},t.changeBookConfSubject=function(e){z.info("change create conf subject"),$dispatch(coreUi.changeCreateConfSubject(e))},t.enterConfInConfInfo=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("enterConfInConfInfo"),""===s&&(z.warn("enterConfInConfInfo input is null, so get from ducks"),s=$getState().conf.currentConfInfo),t=s.conf_subject,$dispatch(coreUi.changeConfSubject(t)),L.setSubject(t),n=s.media_type,r=0!=(n&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(n&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),a=s.chairman_pwd,(""===s.chairman_pwd||isNaN(s.chairman_pwd))&&(z.info("enterConfInConfInfo chair pwd is null"),a=s.general_pwd),o=isNullOrEmpty(s.vmr_id)?s.conf_id:s.vmr_id,i=s.access_number,rr(i,o,a,r);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.oneKeyEnterPairConf=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("oneKeyEnterPairConf"),""===o&&(o=$getState().conf.currentConfInfo),t=o.conf_subject,$dispatch(coreUi.changeConfSubject(t)),L.setSubject(t),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=10;break}return e.next=9,window.isSimCardCall();case 9:e.t0=e.sent;case 10:if(!(n=e.t0)){e.next=16;break}return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),z.error("oneKeyEnterPairConf already in sim card call, can not create conf"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 16:if(!coreConf.isInConf()){e.next=20;break}return z.error("oneKeyEnterPairConf already exist conference, can not create conf"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return");case 20:return e.next=22,coreUi.checkMobileMultiDevice();case 22:if(!0!==(r=e.sent)){e.next=27;break}return z.info("multi device logined, return"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return");case 27:if(!(coreCall.getCallCount()>0)){e.next=31;break}return z.error("oneKeyEnterPairConf already exist call, can not create conf"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return");case 31:z.info("oneKeyEnterPairConf,enter conf oneKeyEnterConf"),a=o.access_number,coreCall.pairCallOut(o,{number:a});case 34:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.postponeConf=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupConfCtrlSdk;case 2:return r=e.sent,e.next=5,r.postponeConfTup(t,n);case 5:a=e.sent,0===a.result?(o=coreConf.getCurrentConfId(),coreUt.utEventStart(constant.EVENT_ID.UT_CONF_EXTEND,null,[o,n])):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_EXTEND,[n,0,a.result]);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyWithConfPas=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("enterConfByIdWithConfPas"),e.next=3,ie(!0);case 3:if(n=e.sent){e.next=10;break}return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),z.error("enterConfByIdWithConfPas,resOfCheck is false"),e.abrupt("return",!1);case 10:z.info("enterConfByIdWithConfPas,resOfCheck is true");case 11:return r=t.confSubject?t.confSubject:"",G.showConfOutPage(!0,!1,r,""),a=t.confId?t.confId:"",o=t.confPas?t.confPas:"",i={confId:a,confPas:o},e.next=18,coreConf.enterConfByIdOnlyService(i);case 18:if(s=e.sent,c=s.isSuc,u=s.errorCode,c){e.next=32;break}return z.info("enterConfByIdWithConfPas fail, errorCode = "+u),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),f=J.getEnterConfByIdOnlyTip(u),G.closeConfPage(!1,!1,u,f),G.clearAfterConfEnd(!1,!1),Sn(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),7===u&&fe(u),e.abrupt("return",!1);case 32:return z.error("enterConfByIdWithConfPas suc"),e.abrupt("return",!0);case 34:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnly=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.conf.confAcsId,z.info("enterConfByIdOnly"),e.next=5,ie(!0);case 5:if(r=e.sent){e.next=10;break}return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),z.error("enterConfByIdOnly,resOfCheck is false"),e.abrupt("return",!1);case 10:return G.showLoadingPage(),a=n,o=!$getState().conf.isOpenCameraDe,i=!$getState().conf.isOpenMicDe,s={confId:a,confPas:"",deviceSet:{isCloseCameraDe:o,isMuteMicDe:i}},e.next=17,coreConf.enterConfByIdOnlyService(s);case 17:c=e.sent,u=c.isSuc,f=c.errorCode,l=c.isNeedPwd,d=c.accessNum,u?(G.closeLoadingPage(),G.showConfOutPage(!0,!1,"",d)):(G.closeLoadingPage(),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),l?(Sn(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NEED),Cn(d)):(Sn(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),11017===f?(vn(""),alert(language.CONF_NOT_EXIST)):7===f?fe(f):0===f?window.ToastNew(language.ENTER_CONF_FAIL,2):window.ToastNew(language.CONF_GET_AUTH_INFO_FAILED,2)));case 23:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfById=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.confAcsId,r=t.confAcsNum,a=n,$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}if(""!==$getState().conf.confAcsNum){e.next=8;break}return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),window.ToastNew(language.ENTER_CONF_ACS_NUM_NULL,2),z.info("enterConfById confAcs is null"),e.abrupt("return");case 8:return z.info("enterConfById get conf pwd"),e.next=11,coreSecurity.PasswordManager.getPassword("cnfAcsPassword");case 11:o=e.sent,i=isNullOrEmpty(o)?"":o,z.info("enterConfById pre ok,then call out,change enter conf state true"),rr(r,a,i,!0);case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterTempConf=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("enterTempConf"),""!==$getState().conf.confTempAcsId){e.next=4;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 4:if(""!==$getState().conf.confTempAcsNum){e.next=7;break}return alert(language.ENTER_CONF_ACS_NUM_NULL),e.abrupt("return");case 7:if(""!==$getState().conf.confTempAcsPas){e.next=10;break}return alert(language.ENTER_CONF_ACS_PAS_NULL),e.abrupt("return");case 10:if(""!==$getState().conf.confTempAcsAccount){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ACCOUNT_NULL),e.abrupt("return");case 13:return e.next=15,coreSecurity.PasswordManager.getPassword("password");case 15:if(""!==(t=e.sent)){e.next=19;break}return alert(language.ENTER_CONF_TEMP_ACS_PWD_NULL),e.abrupt("return");case 19:return n={confAcsId:$getState().conf.confTempAcsId,confAcsNum:$getState().conf.confTempAcsNum,confAcsPas:$getState().conf.confTempAcsPas},z.info("confAcsId :"+$getState().conf.confAcsId+",  confAcsNum:"+$getState().conf.confAcsNum+", confAcsPas: "+$getState().conf.confAcsPas+", tempConfdata :"+(0,d.default)(n)),$dispatch(coreUi.saveTempConfInfo(n)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=26,coreAccount.login(!1,!0);case 26:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleJoinTempConfNoNameWithConfId=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,h,p,_,C,v,S,g,E,w,I;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.login,r=n.tempMediaxAddress,a=n.tempMediaxPort,o=n.tempSipAccount,i=n.tempsipPassword,s=n.tempSipNick,z.info("handleJoinTempConfNoNameWithConfId tempMediaxAddress : "+r+", tempMediaxPort"+a),!isNullOrEmpty(s)){e.next=5;break}return alert(language.NICKNAME_IS_REQUIRED),e.abrupt("return");case 5:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=10;break}return e.next=9,window.isSimCardCall();case 9:e.t0=e.sent;case 10:if(!(c=e.t0)){e.next=15;break}return z.info("handleJoinTempConfNoNameWithConfId now is in sim card call"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 15:return e.next=17,coreCall.callPermissionCheck(!0);case 17:if(u=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),u){e.next=22;break}return z.info("handleJoinTempConfNoNameWithConfId do not have permission for call"),e.abrupt("return");case 22:return e.next=24,coreCall.createVideoPreCheck();case 24:if(f=e.sent){e.next=27;break}return e.abrupt("return");case 27:if($dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(window.socketCloseResumePromise)){e.next=32;break}return e.next=31,window.socketCloseResumePromise;case 31:window.socketCloseResumePromise=null;case 32:return e.next=34,new coreTup.HWUportal;case 34:return l=e.sent,e.next=37,l.loginLogStart(window.LOG_PATH,3,3,10240);case 37:return e.next=39,l.loginInit("",0);case 39:return e.next=41,coreAccount.setLoginProxy(l);case 41:if(d=$getState().login.isSupportCACertCheck,h=window.EXEC_PATH,!d){e.next=48;break}return e.next=46,l.loginSetTlsParams(h,1);case 46:e.next=50;break;case 48:return e.next=50,l.loginSetTlsParams(h,0);case 50:return p=r,_=parseInt(a),C=0,v=o,6!==v.length&&(C=1),e.next=57,coreAccount.queryMediaXaddrFromServer(l,C);case 57:if(S=e.sent,S&&0===S.result?(p=S.mediaxAddr,_=S.mediaxPort,C=S.isCmsAddr,z.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer success mediaxAddr:",p,"mediaxPort:",_,"isCmsAddr:",C)):z.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer failed"),!isNullOrEmpty(p)){e.next=62;break}return alert(language.ADDRESS_EMPTY),e.abrupt("return");case 62:if(!isNullOrEmpty(_)){e.next=65;break}return alert(language.PORT_EMPTY),e.abrupt("return");case 65:return g=i,E=window.CLIENTCONFIG.ISMOBILE?1:0,w=1,coreCommon.Observer.unsubsribleAll(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),ft(),coreCall.registerVideoEvent(),(0,N.initializeDataConf)(),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,M.registerNativeWndEvent)(),on(),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.next=79,coreAccount.getLocalDNSIp(p);case 79:return I=e.sent,isNullOrEmpty(I)||(p=I),coreAccount.getLoginModel().urlOfGetSipInfo=p,e.abrupt("return",l.getTempUserInfoFromConfinfo(p,_,v,g,E,w,C));case 83:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleItConfRecord=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.conflist,n=null,r=!1,a=0;case 4:if(!(a<t.length)){e.next=13;break}if(t[a].conf_id!==i){e.next=10;break}return n=t[a],z.info("handle it conf record find conf."),r=!0,e.abrupt("break",13);case 10:a++,e.next=4;break;case 13:r?window.pcLoginState()?window.kickPCNotify().then(function(e){z.info("kick off pc result : "+e),e&&or(n)}):(z.info("handle it conf record one key enter conf"),or(n)):(z.info("handle it conf record create a new conf"),window.handleItJoinMeeting(o,"2"));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.handleItJoinMeeting=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n="1",t=h,n=p,window.isOffline=!1,!t){e.next=34;break}r=[],a=0,o="",i=$getState(),s=i.myInfo,c=0;case 10:if(!(c<t.length)){e.next=32;break}if(u=t[c],f=u.contactsId,!(o.indexOf(f)>=0)){e.next=15;break}return e.abrupt("continue",29);case 15:l="",u.mobilePhones&&(l=u.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),u.calleeNumber=u.calleeNumber.replace(/-/g,"").replace(/\s*/g,""),r[a]={},o+=f,u.contactsId&&(r[a].account=u.contactsId),u.contactId&&(r[a].account=u.contactId),s.account!==u.contactsId&&s.account!==u.contactId||u.name&&(s.name=u.name),r[a].mobile=l,r[a].number=u.calleeNumber,r[a].bind_no=u.calleeNumber,r[a].name=u.name,r[a].email=u.email,a++;case 29:c++,e.next=10;break;case 32:d=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,"2"===n?se(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,d):se(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,d);case 34:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.updateItMeeting=function(e){coreAccount.getLoginModel().set(e)},window.handleJoinTempConfNoNamePreProcess=function(e){window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),coreAccount.getResumeEnable()?(z.info("[handleJoinTempConfNoNamePreProcess] now is login"+e),window.enterNoNameConfUrl=e):(z.info("[handleJoinTempConfNoNamePreProcess] now is is logout or kickout "+e),window.handleJoinTempConfNoName(e))},window.handleJoinTempConfNoName=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreUt.utEventStart(constant.EVENT_ID.UT_CONF_JOIN,null,[constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_LINK]),window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer),window.hasLoadConfig){e.next=7;break}return window.handleJoinTempConfNoNameURL=t,z.info("[handleJoinTempConfNoName] has not loadconfig , do later :"+window.handleJoinTempConfNoNameURL),e.abrupt("return");case 7:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}return e.next=10,new coreTup.HWUportal;case 10:return n=e.sent,e.next=13,n.loginLogStart(window.LOG_PATH,3,3,10240);case 13:return e.next=15,n.loginInit("",0);case 15:return e.next=17,coreAccount.setLoginProxy(n);case 17:return e.next=19,coreAccount.getNickName();case 19:e.next=22;break;case 21:t="cloudlinkpro://welinksoftclient/page/link?site_url="+t;case 22:z.info("handleJoinTempConfNoName",t),r=coreCommon.getUrlVars(t),z.info("uriValues",r),isNullOrEmpty(r.user_name)||coreAccount.updateTempSipNick(decodeURI(r.user_name)),a={sipOnlyurlInfo:{site_url:isNullOrEmpty(r.site_url)?"":decodeURIComponent(r.site_url.trim()),random:isNullOrEmpty(r.random)?"":decodeURIComponent(r.random.trim()),chairman:isNullOrEmpty(r.chairman)?"":decodeURIComponent(r.chairman.trim()),topology:isNullOrEmpty(r.topology)?"":decodeURIComponent(r.topology.trim())}},o=/https:\/\/([^\/]+)\//g,i=null,(i=o.exec(a.sipOnlyurlInfo.site_url))&&!isNullOrEmpty(i)&&i.length>1&&(s=i[1].split(":"),s.length>1?(coreAccount.getLoginModel().tempNoNameMediaxAddress=s[0],coreAccount.getLoginModel().tempNoNameMediaxPort=s[1]):(coreAccount.getLoginModel().tempNoNameMediaxAddress=s[0],coreAccount.getLoginModel().tempNoNameMediaxPort="443")),z.info("urlInfo",a),coreAccount.getLoginModel().set(a),window.CLIENTCONFIG.ENABLE_IT_MEETING||(coreCommon.Observer.unsubsribleAll(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),ft(),coreCall.registerVideoEvent(),(0,N.initializeDataConf)(),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,M.registerNativeWndEvent)()),window.checkJoinTempConfNoName(t),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 36:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var fn=t.gettempuserinfo=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=5;break}return e.next=4,window.isSimCardCall();case 4:e.t0=e.sent;case 5:if(!(t=e.t0)){e.next=10;break}return alert(language.PLEASE_HANG_UP_CALL),z.info("gettempuserinfo now is in sim card call"),e.abrupt("return");case 10:return e.next=12,coreCall.callPermissionCheck(!0);case 12:if(n=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),n){e.next=17;break}return z.info("gettempuserinfo have no permission. "),e.abrupt("return");case 17:if($dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),r=window.CLIENTCONFIG.ISMOBILE?1:0,a=$getState().login,o=""===a.sipAccount?1:0,i=$getState().login,s=i.sipOnlyurlInfo.site_url,c=i.sipOnlyurlInfo.random,z.info("gettempuserinfo",s,c,r,o),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=30;break}e.next=30;break;case 30:return e.next=32,new coreTup.HWUportal;case 32:return u=e.sent,e.abrupt("return",u.gettempuserinfo(s,c,r,o));case 34:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),ln=t.isAccountAutoLogin=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t[0].isAutoLogin,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.checkJoinTempConfNoName=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_,C;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=3,coreSecurity.PasswordManager.getPassword("password");case 3:return f=e.sent,z.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),e.next=7,coreDb.queryLoginSetting({key:"isFirstInstall"});case 7:if(l=e.sent,void 0!==l.value&&window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===l.value){e.next=12;break}return z.info("[checkJoinTempConfNoName] local has First install before license, enter conf after access license"),window.enterNoNameConfUrl=t,e.abrupt("return");case 12:return d=coreCommon.getUrlVars(t),h={sipOnlyurlInfo:{site_url:isNullOrEmpty(d.site_url)?"":decodeURIComponent(d.site_url.trim()),random:isNullOrEmpty(d.random)?"":decodeURIComponent(d.random.trim()),chairman:isNullOrEmpty(d.chairman)?"":decodeURIComponent(d.chairman.trim())}},e.next=16,ln();case 16:if(p=e.sent,_=!1,window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=22;break}return e.next=21,window.stroage.isFastLogin();case 21:_=e.sent;case 22:if(!(coreConf.isInConf()||coreCall.getCallCount()>0)){e.next=26;break}return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,null,"WhiteWarning"),window.enterNoNameConfUrl=null,e.abrupt("return");case 26:if(appService.showMainWindow(!0),(isNullOrEmpty(a)||isNullOrEmpty(f)||isNullOrEmpty(o)||isNullOrEmpty(i))&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=66;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=49;break}if(C=window.SERVERCONFIG,z.info("[checkJoinTempConfNoName] Start , mode: [ HWUC "+C.HWUC+" ]"),C.HWUC!==constant.LOGIN_TYPE.BASE){e.next=48;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=38;break}return z.info("[checkJoinTempConfNoName]local has uportal, state: registering, enter conf later"),window.enterNoNameConfUrl=t,e.abrupt("return");case 38:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=42;break}z.info("[checkJoinTempConfNoName]local has uportal, state: registered"),e.next=46;break;case 42:return z.info("[checkJoinTempConfNoName]local has uportal, state: register failed"),z.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(d),e.abrupt("return");case 46:e.next=49;break;case 48:C.HWUC,constant.LOGIN_TYPE.HWUC;case 49:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=57;break}return coreAccount.getLoginModel().sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,z.info("[checkJoinTempConfNoName]local has sip, state: registered"),window.enterNoNameConfUrl=null,fn(),e.abrupt("return");case 57:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=62;break}return z.info("[checkJoinTempConfNoName]local has sip , state: registering"),e.abrupt("return");case 62:z.info("[checkJoinTempConfNoName]local has sip, state register failed"),window.enterNoNameConfUrl=t;case 64:e.next=80;break;case 66:if(!_){e.next=72;break}return z.info("[checkJoinTempConfNoName] mobile auto login, enter conf after sip registered"),window.enterNoNameConfUrl=t,e.abrupt("return");case 72:if(!p){e.next=78;break}return z.info("[checkJoinTempConfNoName] pc auto login, enter conf after sip registered"),window.enterNoNameConfUrl=t,e.abrupt("return");case 78:z.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(d);case 80:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var dn=function(e){$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),coreAccount.getLoginModel().sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_NO_UPORTAL_NO_SIP,navigator.splashscreen&&navigator.splashscreen.hide(),isNullOrEmpty(e.user_name)||fn(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("mJoinConfSIPOnly"):window.goRoute("login/joinConfSIPOnly")};window.handleJoinTempConf=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn();case 2:if(n=e.sent,z.info("window.handleJoinTempConf should get temp usr :"+n),!n){e.next=10;break}if(r=$getState(),a=r.login.account,isNullOrEmpty(a)){e.next=10;break}return z.info("window.handleJoinTempConf, logout old im account"),e.next=10,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0);case 10:o=coreCommon.getUrlVars(t),i=o.site_address,s=o.confid,$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),n&&window.goRoute("mTempEnterConfPage"),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),c=!n,z.info(" getTempConfInfo: confId : "+s+", eccmAddress:"+i+", hasAccount: "+c),u="https://"+i+"/v1/jointmpconf/gettmpaccount",f='{"conferenceid":"'+s+'","hasaccount": '+(c?1:0)+"}",appService.doHttpsPost(u,f);case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var hn=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=4,coreSecurity.PasswordManager.getPassword("password");case 4:if(f=e.sent,z.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),isNullOrEmpty(a)||isNullOrEmpty(o)||isNullOrEmpty(i)){e.next=42;break}if(l=window.SERVERCONFIG,z.info("checkShouldUseTempUsrForTempConf Start , mode: [ HWUC "+l.HWUC+" ]"),l.HWUC!==constant.LOGIN_TYPE.BASE){e.next=24;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=16;break}return z.info("local has uportal, state: registering"),t=!0,e.abrupt("return",t);case 16:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=20;break}z.info("local has uportal, state: registered"),e.next=22;break;case 20:return t=!0,e.abrupt("return",t);case 22:e.next=25;break;case 24:l.HWUC,constant.LOGIN_TYPE.HWUC;case 25:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=31;break}return z.info("local has sip, state: registered"),t=!1,e.abrupt("return",t);case 31:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=37;break}return z.info("local has sip , state: registering"),t=!1,e.abrupt("return",t);case 37:return z.info("local has sip, state register failed"),t=!0,e.abrupt("return",t);case 40:e.next=45;break;case 42:return z.info("local has not uportal, no sip"),t=!0,e.abrupt("return",t);case 45:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleDoHttpsPostResult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===t&&(t=""),t=decodeURIComponent(t),n="";try{n=JSON.parse(t)}catch(e){n=""}return e.next=6,hn();case 6:if(r=e.sent,isNullOrEmpty(n)){e.next=24;break}if(a=n.result,o=n.jointmpconfinfo,!isNullOrEmpty(a)){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return");case 13:if(0!==a.retCode&&isNullOrEmpty(o)){e.next=21;break}return e.next=16,pn(o,r);case 16:if(!1!==(i=e.sent)){e.next=19;break}return e.abrupt("return");case 19:e.next=22;break;case 21:14e3===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14000),r&&window.goRoute("loginCtn")):14001===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14001),r&&window.goRoute("loginCtn")):14002===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14002),r&&window.goRoute("loginCtn")):14003===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14003),r&&window.goRoute("loginCtn")):(alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),r&&window.goRoute("loginCtn"));case 22:e.next=28;break;case 24:alert(language.ENTER_CONF_TEMP_ACS_ERROR_NET_ERROR),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),r&&window.goRoute("loginCtn");case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var pn=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return",!1);case 3:if(r=$getState(),a=r.login,o=a.account,i=a.serverAddress,s=a.serverPort,n){e.next=13;break}return $dispatch(coreUi.changeConfAcsNum(t.accessCode)),$dispatch(coreUi.changeConfAcsId(t.conferenceID)),e.next=9,mn(t.conferencePWD);case 9:Sn(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.goRoute("mEnterConfPage"),e.next=28;break;case 13:if($dispatch(coreUi.changeConfTempAcsNum(t.accessCode)),$dispatch(coreUi.changeConfTempAcsId(t.conferenceID)),$dispatch(coreUi.changeConfTempAcsPas(t.conferencePWD)),$dispatch(coreUi.changeConfTempAcsMemberTotal(isNullOrEmpty(t.total)?0:t.total)),$dispatch(coreUi.changeConfTempAcsEndTime(isNullOrEmpty(t.endTime)?0:t.endTime)),isNullOrEmpty(t.tmpUsrAccount)?$dispatch(coreUi.changeConfTempAcsAccount(o)):$dispatch(coreUi.changeConfTempAcsAccount(t.tmpUsrAccount)),!isNullOrEmpty(t.tmpUsrPWD)){e.next=22;break}e.next=24;break;case 22:return e.next=24,coreSecurity.PasswordManager.setPassword("password",t.tmpUsrPWD);case 24:isNullOrEmpty(t.uportalAddress)?$dispatch(coreUi.changeTempAcsUportalAddress(i)):$dispatch(coreUi.changeTempAcsUportalAddress(t.uportalAddress)),isNullOrEmpty(t.uportalPort)?$dispatch(coreUi.changetempAcsUportalPort(s)):$dispatch(coreUi.changetempAcsUportalPort(t.uportalPort)),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 28:return e.abrupt("return",!0);case 29:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),_n=t.changeConfPage=function(e){if(z.info("userClick  create conf or join conf",e),window.CLIENTCONFIG.ENABLE_IT_MEETING&&"New"===e&&coreCall.getCallCount()>0)return z.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);"Detail"!==e&&(window.lastSelectedId={confId:"",cycleId:""}),$dispatch(coreUi.changeCurConfPage(e))},Cn=t.toggleChangeConfAcsNum=function(e){$dispatch(coreUi.changeConfAcsNum(e))},vn=t.toggleChangeConfAcsId=function(e){$dispatch(coreUi.changeConfAcsId(e))},mn=t.toggleChangeConfAcsPas=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.PasswordManager.setPassword("cnfAcsPassword",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Sn=t.toggleChangeConfAcsState=function(e){$dispatch(coreUi.changeConfAcsState(e))},gn=(t.toggleChangeConfTempAcsNick=function(e){$dispatch(coreUi.changeConfTempAcsNick(e))},t.toggleChangeConfTempAcsAccount=function(e){$dispatch(coreUi.changeConfTempAcsAccount(e))},t.toggleChangeMicState=function(){$dispatch(coreUi.changeMicState())},t.toggleChangeCamerState=function(){$dispatch(coreUi.changeCamerState())},t.toggleopenCamerState=function(){$dispatch(coreUi.openCamerState())},t.toggleClearEnterTempConfInfo=function(){$dispatch(coreUi.clearEnterTempConfInfo())},t.toggleShouldAutoEnterTempConf=function(){$dispatch(coreUi.changeShouldAutoEnterTempConf())},t.returnToConfWelPage=function(){$dispatch(coreUi.changeCurConfPage("Main")),coreCall.setNoMoveTrue()},function(){var e=$getState(),t=e.call,n=t.savedCalleeInfo,r=t.tempConfInfo;isNullOrEmpty(n)?isNullOrEmpty(r)||(z.info(" handleSipRegSuc, CalloutForTempConf"),$dispatch(coreUi.saveTempConfInfo({})),coreCall.CalloutForTempConf(r.confAcsId,r.confAcsNum,r.confAcsPas),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(""))):n.bConf&&(z.info(" handleSipRegSuc, actionCreateConf"),se.apply(void 0,[n.selfInfo,n.memberList,n.groupInfo,n.mediaType,n.noPassword].concat((0,p.default)(n.others))))});window.unRegister=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.webView){e.next=12;break}if(z.info("it welink logout 1"),!window.webView.isItLogout()){e.next=8;break}return z.info("it welink logout."),e.next=6,coreAccount.endCurrentCall();case 6:e.next=12;break;case 8:if(!window.webView.isSimCardCall()||""===$getState().call.callId){e.next=12;break}return window.dontUnregister=!0,z.info("is sim card call no need unregister"),e.abrupt("return");case 12:window.dontUnregister=!1,coreAccount.sipserverDeregister(),window.isOffline=!0,En();case 16:case"end":return e.stop()}},e,void 0)}));var En=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=27;break}if(t=!coreConf.isInConf(),n=coreCall.getCallCount()<=0,z.info("handleOfflineReLogin bNoConf: "+t+" bNoCall: "+n),!t||!n){e.next=7;break}return z.debug("handleOfflineReLogin, no conf or call exit, do nothing"),e.abrupt("return");case 7:if(r=$getState(),a=r.conf.confHandle,o=r.call.callId,t||""===a){e.next=17;break}if(z.info("handleOfflineReLogin, confHandle: "+a),i=coreConf.getSavedRecallInfo(),isNullOrEmpty(i)){e.next=15;break}return z.info("handleOfflineReLogin,recallOrHangup"),coreCall.recallOrHangup(i,!0,""),e.abrupt("return");case 15:return e.next=17,je();case 17:if(n=coreCall.getCallCount()<=0){e.next=27;break}if(s=coreConf.getSavedRecallInfo(),isNullOrEmpty(s)){e.next=23;break}return z.info("handleOfflineReLogin, recall not hangup call"),e.abrupt("return");case 23:z.info("handleOfflineReLogin, callId: "+o),o&&coreCall.endCallService(o),coreCall.endCall(o),coreCall.deleteCallObject(o);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),wn=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,k.meetingHWreCallTimeOut)(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),In=(t.showJoinMeetingBtn=function(){var e=$getState().call,t=e.showCallToolBar,n=e.callStatus;return!$getState().conf.showJoinButton||!(!t&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n||!coreConf.isInConf())&&(z.info("already exist conference, need to join the meeting button gray"),!0)},t.showOrDisabledBtn=function(){return!!$getState().conf.showJoinButton},function(e){if(0!==e.length){for(var t=[],n=0;n<e.length;n++)!function(n){var r=t.findIndex(function(t){return e[n].number?t.number===e[n].number:t.number===e[n].bind_no});-1===r?t.push(e[n]):!t[r].account&&e[n].account&&t.splice(r,1,e[n])}(n);return t}}),Tn=(t.clearPhoneContacts=function(){$dispatch(coreUi.clearPhoneAddrInfo())},t.handleSvcConfWatchRet=function(e){z.info("handleSvcConfWatchRet =",e);window.CLIENTCONFIG.ISMOBILE;e.param.ret}),Nn=t.handleVideoWatchRes=function(e){0===e?(coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,handlePhoneNumber(Z),[1],!0),z.info("video watch suc,watchNum = "+handlePhoneNumber(Z)),$dispatch(coreUi.changeVideoWatchNum(Z))):(coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,handlePhoneNumber(Z),[0,e]),10===e?(z.error("video watch reason_code = 10,watchNum = "+handlePhoneNumber(Z)),bn(""===Z?"NATIVE_VIDEO_CANCEL_WATCH_FAIL_WHEN_CONFPAGE_OPEN":"NATIVE_VIDEO_WATCH_FAIL_WHEN_CONFPAGE_OPEN")):(z.error("video watch reason_code = "+e+"watchNum = "+Z),bn(""===Z?!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_CANCEL_WATCH_MULTIVIEWBROADCAST":"NATIVE_VIDEO_CANCEL_WATCH_FAIL":!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_WATCH_MULTIVIEWBROADCAST":"NATIVE_FAILURE_ERR_TUP")))},bn=t.handleVideoWatchResMessageBox=function(e){if(z.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)?R.SvcAtdManager.alertBox(e):alert(language[e])}},On=(t.handlePlatformMessageBox=function(e){z.info("reacrd handleShowErrorMsgBox errorTile:",e),isNullOrEmpty(e)||(R.SvcAtdManager.isNativeUIExsit()?(z.info("handlePlatformMessageBox1 isVideo"),R.SvcAtdManager.alertBox(e)):(z.info("handlePlatformMessageBox2 "),alert(language[e])))},t.dealInviteAttendeeResult=function(e){$getState().synergismInfo.inPairConf&&(z.info("BLE: in pair conf, deal invite attendee result, data=",e),(0,U.pairInviteAttendeeNotify)(e.param));var t=void 0;t=0===e.param.ret?[1]:[0,e.param.ret],coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_INVITE,null,t)});t.resetFirstInfoConferenceFlag=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstInfoConf",value:t.toString()},z.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)),z.info("The isFirstInfoConf flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstInfoConf=function(){var e=(0,g.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstInfoConf"});case 4:t=e.sent,void 0===t.value||""===t.value?(z.info("isFirstInfoConf",t.value,!0),$dispatch(coreUi.toggleFirstInfoConfModalShow(!0))):(z.info("isFirstInfoConf",t.true,!1),$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetFirstAcceptShareFlag=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstAcceptShare",value:t.toString()},z.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstsharingModalShow(!1)),z.info("The isFirstAcceptShare flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstAcceptShare=function(){var e=(0,g.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstAcceptShare"});case 4:t=e.sent,void 0===t.value||""===t.value?(z.info("isFirstAcceptShare",t.value,!0),$dispatch(coreUi.toggleFirstsharingModalShow(!0))):(z.info("isFirstAcceptShare",t.true,!1),$dispatch(coreUi.toggleFirstsharingModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.mobileSendBfcp=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HWTupCall;case 2:t=e.sent,n=t.startData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?z.info("[bfcp] use tup send bfcp success"):(z.info("[bfcp] use tup send bfcp failed"),window.iosSendBfcpResult(r,a))}).catch(function(e){z.info("[bfcp] startResult error",e)});case 6:case"end":return e.stop()}},e,void 0)})),window.mobileStopBfcp=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HWTupCall;case 2:t=e.sent,n=t.stopData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?z.info("[bfcp] use tup stop bfcp success"):(z.info("[bfcp] use tup stop bfcp failed"),window.iosStopBfcpFlag(r,a))}).catch(function(e){z.info("[bfcp] stopResult error",e)});case 6:case"end":return e.stop()}},e,void 0)}));var An={uiFramesize:9,uiDecodeFrameSize:12},Rn={uiFrameRate:3,uiMinFrameRate:1},yn={ulDataRate:150,ulMinDataRate:150,ulMaxDataRate:150,ulMaxBw:300},Ln={bArs:1,bArsCtrlBitRate:1,bArsCtrlFec:0,bArsCtrlFrameRate:1,bArsCtrlFrameSize:0},Mn={ulHdEncoder:0,ulHdDecoder:0},Dn={uiParamSetNumber:0,pstVideoH264QualityLevelParamSet:4};window.sendToTupConfig=(0,g.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("set mobile bfcp config start"),e.next=3,new coreTup.HWTupCall;case 3:t=e.sent,t.configToTupBfcp(285476352,An),t.configToTupBfcp(285477120,Rn),t.configToTupBfcp(285476608,yn),t.configToTupBfcp(285344768,"106"),t.configToTupBfcp(285737472,0),t.configToTupBfcp(285738240,1),t.configToTupBfcp(285477632,Ln),t.configToTupBfcp(285281792,100),t.configToTupBfcp(285280768,5),t.configToTupBfcp(285476864,Mn),t.configToTupBfcp(285478656,Dn),z.info("set mobile bfcp config success");case 16:case"end":return e.stop()}},e,void 0)}));var xn=(t.grabBfcpConfirm=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.isConfChairMan()?(n=(0,c.default)({},t),window.confirm(language.OTHER_IS_SHARING_ISNOT_INSTEAD).then(function(e){if(e.ret){var t=$getState(),r=t.call;r.callStatus,r.isSwitchShareBfcp,t.conf.isEnterDataConf;coreUi.showPopoverMenu(n,coreUi.popoverTypeMap.TYPE_VIDEO_SHARE,coreUi.videoShareClick),$dispatch(coreUi.changeShowBfcp(!0))}else $dispatch(coreUi.changeShowBfcp(!1))})):(z.info("grabBfcpConfirm but not chairman"),alert(language.DATA_CONF_SOMEONE_SHARE_RIGHTNOW));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealAudientResult=function(e){if(z.info("change Current Audient Status."),window.CLIENTCONFIG.ISMOBILE){var t=$getState().conf.isAudience;return z.info("audience, meeting is audience, "+t),void(!1===t&&($dispatch(coreUi.changeAudientStatus(!0)),coreCall.changeDirectionForMobile(!1)))}$getState().conf.isAudience||($dispatch(coreUi.changeBidirectionStatus(!1)),$dispatch(coreUi.toggleSmallSvcVisible(!1)),coreCommon.MicControl.getInstance().muteMic(!0),coreCommon.SpkControl.getInstance().muteSpk(!1),coreCommon.CameraControl.getInstance().switchCameraStateAction(!1)),$dispatch(coreUi.changeAudientStatus(!0)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeAudientStatus)(e)}),kn=t.dealChangeDirectionResult=function(e){if(z.info("change Current direction result."),window.CLIENTCONFIG.ISMOBILE){var t=e.param.result;e.param.opration_type;if(z.info("audience, change direction result = ",t),0!==t){var n=$getState().call.isBidirection,r=$getState().call.isDirecResult;if(n===r||!r)return void z.info("audience jsNotify return, direction is isBidirection = ",n);var a=language.TALK_REQUEST_TOAST;window.confirm(a,{leftButton:language.RIGHT_CLOSE,rightButton:language.TALK_REQUEST_AGAIN}).then(function(e){e.ret?(z.info("audience request change direction again "),Pn()):z.info("audience close change direction")})}}else{var o=0;e&&e.param&&(o=e.param.result),o?z.info("user change direction failed: "+o):z.info("user change direction succeed."),$dispatch(coreUi.ChangeDirectionResult(o)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeActiveBidirectionStatus)(e)}},Pn=(t.actionActiveDirection=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("change Current Direction Status Active."),$dispatch(coreUi.ChangeDirectionResult(0)),e.next=4,coreConf.changeActiveDirection(t);case 4:if(!(n=e.sent)||0!==n.result){e.next=9;break}return e.abrupt("return",!0);case 9:return z.error("change Current Direction Status failed: "+n.result),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionActiveDirectionForMobile=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().call.isBidirection,z.info("audience , you want to change your direction,  isBidirection = "+t),e.next=4,coreConf.changeActiveDirection(!t);case 4:n=e.sent,0===n.result&&$dispatch(coreUi.changeAudienceDirecResult(!t)),z.error("audience , you want to change your direction,  result = "+n.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Fn=t.setRecordScheduserName=function(e){var t=$getState().call.callStatus,n=t===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&e||"";z.info("reacrd set conf setRecordScheduserName"),(0,P.setRecordSchednameLogic)(n)},Un=t.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";z.info("reacrd isHasRecordPermission [recordType:"+e+"]");var t=$getState().conf,n=t.confHandle,r=t.isShowRecordType,a=t.selfRole;""!==e&&(r=e);var o=$getState().call.callStatus,i=$getState().login.deployMode;return z.info("reacrd set determine if the meeting has permission to record [deployMode:"+i+"] [callStatus:"+o+"] [confHandle:"+n+"] [isShowRecordType:"+r+"] [selfRole:"+a+"]"),!isNullOrEmpty(n)&&1===a&&o===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&1===r},Bn=t.getRecordStatus=function(){var e=$getState().conf.isReacrd;return z.info("reacrd getRecordStatus [isReacrd:"+e+"]"),e},Wn=(t.clearRecordInfoHandle=function(){(0,P.clearRecordInfoLogic)()},t.actionCloudRecordRequest=function(){var e=(0,g.default)(m.default.mark(function e(t,n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("reacrd actionCloudRecordRequest[2] messageId:",t,"switchType:",n),!isNullOrEmpty(n)){e.next=4;break}return z.error("switchType is null or undefined"),e.abrupt("return");case 4:return e.next=6,coreConf.cloudRecordRequest({messageId:t,switchType:n});case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),Hn=t.handleSetRecordVideoResult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("reacrd handleSetRecordVideoResult[2] data:",(0,d.default)(t)),n=t.param.result,r=n.switch_type,a=n.reson,o=n.record_type,i=n.result,z.info("handleSetRecordVideoResult switch_type",r,"reson",a,"record_type",o,"result",i),0!==i){e.next=8;break}0===o&&1===r?(z.info("start reacrd success"),(0,P.isReacrdLogic)(r),coreConf.haveRecordedLogic(1)):0===o&&0===r&&(z.info("stop reacrd success"),(0,P.isReacrdLogic)(r)),e.next=18;break;case 8:return z.error("start/stop reacrd failed ",a),s={isReacrd:r},z.info("setParam, switch_type = ",r),e.next=13,w.NativeInterface.setParam(s);case 13:c=e.sent,z.info("setParam, res = ",c),u=null,u=0===a?"NO_RECORDING_PERMISSION":1===a?"CONFERENCE_RECORDING_IS_NOT_SUPPORTED":2===a?"CONFERENCE_LIVE_BROADCAST_IS_NOT_SUPPORTED":"START_PAUSE_RECORDING_FAILED",Yn(u);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Vn=t.handleConfStateDirectBroadCastIndresult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("reacrd handleConfStateDirectBroadCastIndresult[2] data:",(0,d.default)(t)),(0,P.isReacrdLogic)(t.param.is_record),n={isReacrd:t.param.is_record},z.info("setParam, data.param.isReacrd = ",t.param.is_record),e.next=6,w.NativeInterface.setParam(n);case 6:r=e.sent,z.info("setParam, res = ",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$n=t.handleRecordVideoStatusChairmanIndResult=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z.info("reacrd handleRecordVideoStatusChairmanIndResult[2] data:",(0,d.default)(t)),!t||!t.param){e.next=12;break}return n=t.param.result,r=n.bro_rec_status,a=n.sup_bro_record,o=a||0,i=r||0,(0,P.isShowReacrdTypeLogic)(o),(0,P.isReacrdLogic)(i),s={isReacrd:i,isHaveRecordPriviledge:Un(o)},e.next=10,w.NativeInterface.setParam(s);case 10:c=e.sent,z.info("setParam, res = ",c);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Gn=t.setRecordStatusForNative=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("setRecordStatusForNative"),t={isReacrd:Bn(),isHaveRecordPriviledge:Un()},e.next=4,w.NativeInterface.setParam(t);case 4:n=e.sent,z.info("setRecordStatusForNative setParam, res = ",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Yn=t.handleShowErrorMsgBox=function(e){if(z.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;if(window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)){var a=$getState().conf.videoFrameHwnd,o=L.getAvcFrameHandles(),i={frameHwnd:0!==a?a:o,dialog_type:1,content_id:e};(0,I.showMessageBox)(i)}else alert(language[e])}},jn=(t.AsErrorDeal=function(e){var t=language[constant.AS_ERRORCODE_LOG_INFO[e]];z.error(" AsErrorDeal,errorCode "+e+"error msg "+t),alert(t||"unknow error")},t.handleMobileBfcpStatus=function(){z.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}),qn=(t.createMaxHubMeeting=function(){z.info("maxhub create instant conference");var e=$getState(),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.CreateDataConference"]),n=t?constant.CON_CREATE_MEETING_STATUS.DATA_MULTIMEDIA_TYPE:constant.CON_CREATE_MEETING_STATUS.VIDEO_TYPE;z.info("maxhub create data conference flag: ",t+", mediaType:",n);var r=e.myInfo,a=getContactName(e.myInfo),o=a+language.CONFERENCE_SUBJECT_INFO,i=bt(e.common.selectContactModal_selectedList);i.push(r);var s=In(i),c=e.conf.isReacrdSwitch&&2||0,u=constant.CONTACT_SELECT_DIALOG_TYPE.CONTACT_SELECT_DIALOG_TEMPMEETING;se(r,s,{group_id:""},n,1,o,u,c)},t.changeStatusOfConference=function(e){$dispatch(coreUi.changeStatusOfConf(e))},t.recoredOldPwd=function(e){$dispatch(coreUi.recoredOldPassword(e))},t.changeFlagClickJoinConfBtn=function(e){z.info("click join-conf btn to join conference"),$dispatch(coreUi.changeflagClickJoinConfBtn(e))},t.recordConferencePasswordDetail=function(e){z.info("record conference pwd"),e.conf_id===$getState().conf.confServerId&&$dispatch(coreUi.changeRecordConfPwdDetail(e))}),Jn=(t.recordConferenceOldId=function(e){z.info("record conference recordConferenceOldId"),$dispatch(coreUi.changeRecordConferenceOldId(e))},t.recordFlagIsFirstTimeRun=function(e){z.info("record conference recordFlagIsFirstTimeRun"),$dispatch(coreUi.changeFlagIsFirstTimeRun(e))},t.RecordIsIntoInterval=function(e){z.info("record conference RecordIsIntoInterval"),$dispatch(coreUi.changeIsIntoInterval(e))},t.showConfInfo=function(e){var t=e.conf_id;window.lastSelectedId.confId;xt(t,e.cycle_conf_id),coreUi.changeIsShowCopyTip(!1),un([])},function(e){z.info("handleChangeConfHanlde in logic,hanlde = "+e),$dispatch(coreUi.changeConfHandle(e)),F.ToolbarManager.setConfHandle(e)}),zn=function(e){$dispatch(coreUi.changeConfSubject(e)),window.CLIENTCONFIG.ISWIN&&(L.setSubject(e),$getState().conf.isSvcConf&&R.SvcAtdManager.setSubject(e))},Kn=function(e){$dispatch(coreUi.changeCallId(e))},Xn=function(e){$dispatch(coreUi.changeConfRole(e))},Zn=function(e,t){$dispatch(coreUi.changeConfServerId(e)),R.SvcAtdManager.setConfServerId(isNullOrEmpty(t)?e:t),L.setConfServerId(isNullOrEmpty(t)?e:t)},Qn=function(e){z.info("confInfoNotify vmrid is not empty. "),$dispatch(coreUi.changeVmrId(e))},er=function(){z.info("handleChangeIsSvcConf true"),$dispatch(coreUi.changeIsSvcConf(!0)),G.changeIsSvcConf()},tr=function(e){z.info("handlechangeSsrcRange ssrcRange",e),$dispatch(coreUi.changeSSRCRange(e))},nr=function(){window.pairId&&0!==window.pairId&&(z.info("send maxhub pair join conf failed"),(0,W.sendJoinPairResult)(window.pairId,constant.PAIR_CONF_RESULT.INVALID)),z.info("maxhubCheckConfType, not video conf, end the conf in maxhub"),je(),alert(language.MAXHUB_INVALID_CONF)},rr=t.oneKeyEnterConf=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d,h,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,_=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={bConf:!0,bVideo:a,number:t,contactInfo:{number:t},enterConfParam:{pstconfparam:{confid:n,access_code:t,conf_paswd:r},call_type:1},isConsultTransfer:!1},e.next=3,coreUi.checkMobileMultiDevice(o);case 3:if(!(i=e.sent)){e.next=8;break}return z.info("multi device logined oneKeyEnterConf"),coreUt.utProcessFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 8:return e.next=10,ie(a);case 10:if(s=e.sent){e.next=14;break}return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 14:return G.showConfOutPage(!0,!1,"",t),$dispatch(coreUi.saveCalleeInfo({})),c=!1,u=!1,f=!1,l="",isNullOrEmpty(p)?(c=!$getState().conf.isOpenCameraDe,u=!$getState().conf.isOpenMicDe):(c=p.isCloseCameraRecall,u=1===p.isMuteMicRecall,f=p.isMuteSpkRecall,l=p.isSpeaker?1:0),d={confAcs:t,confId:n,confPwd:r,isVideo:a,deviceSet:{isCloseCameraDe:c,isMuteMicDe:u,isMuteSpkDe:f,speakerMode:l},isVMR:_},e.next=24,coreConf.oneKeyEnterConfService(d);case 24:if(!(h=e.sent)){e.next=30;break}return z.info("onekeyenterconf send to TUP suc"),e.abrupt("return",!0);case 30:return z.info("onekeyenterconf send to TUP fails"),G.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),G.clearAfterConfEnd(!1,!1),e.abrupt("return",!1);case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),ar=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("callEnded, callId: "+r+"reason_code is "+t),a=J.getCallEndedErrorTip(t,n),G.closeConfPage(!1,!0,t,a),G.clearAfterConfEnd(!1,!0,t,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),or=(t.endCallInConf=function(){var e=(0,g.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return G.closeConfPage(!0,!1,0,language.EXIT_CONFERENCE),e.next=3,coreConf.endCallInConfService();case 3:G.clearAfterConfEnd(!0,!1,0);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfInConfList=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_,C=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.info("enterConfInConfList: isPairConf:"+C),""===t&&(t=$getState().conf.currentConfInfo),n=t.access_number,r=t.conf_id,a={number:n,conf_id:r,cycle_conf_id:t.cycle_conf_id},o=t.media_type,i=0!=(o&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(o&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),s={pstconfparam:{confid:t.conf_id,access_code:t.access_number,conf_paswd:""},call_type:1},c={bConf:!0,bVideo:i,number:n,contactInfo:a,enterConfParam:s,isConsultTransfer:!1},e.next=11,coreUi.checkMobileMultiDevice(c);case 11:if(!(u=e.sent)){e.next=16;break}return z.error("checkMultiDevice is false,cannot enterConfInConfList"),coreUt.utProcessFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 16:return e.next=18,ie(i,C);case 18:if(f=e.sent){e.next=23;break}return z.error("resOfCheck is false,cannot enterConfInConfList"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 23:return G.showConfOutPage(!0,!1,"",n),$dispatch(coreUi.saveCalleeInfo({})),i?$dispatch(coreUi.changeCallStatus("VIDEO_OUT")):$dispatch(coreUi.changeCallStatus("CALL_OUT")),l=t.conf_subject,$dispatch(coreUi.changeConfSubject(l)),L.setSubject(l),z.info("enterConfInConfList,enter conf oneKeyEnterConf"),d=window.getRoute(),window.CLIENTCONFIG.ISMOBILE&&"callMain"!==d&&!C&&(z.info("enterConfInConfList go callmain"),window.goRoute("callMain"),h=language.METTING,$dispatch(coreUi.createConfTipMsg([h]))),p={confId:a.conf_id,cycle_conf_id:a.cycle_conf_id},e.next=35,coreConf.enterConfInConfListService(p);case 35:if(_=e.sent){e.next=42;break}return z.error("enterConfInConfList fail"),G.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),G.clearAfterConfEnd(!1,!1),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 42:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),ir=(t.lockConfFuc=function(){window.confirm(language.LOCK_CONFERENCE_PROMPT).then(function(e){e.ret&&(z.info("userClick lockConfFuc confirm"),be(1))})},t.unlockConfFuc=function(){z.error("userClick unlockConfFuc"),be(0)},function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,s=(0,i.default)(e);!(n=(o=s.next()).done);n=!0){var c=o.value;if(c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return t}),sr=t.compressreleasePreservate=function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=ir(t),e.next=4,ye(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z.error("compressreleasePreservate:",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),cr=(t.compressRemoveAttendee=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=-1,r=$getState().conf.memberListInfo,r.forEach(function(e){e.number===t&&(n=e.state)}),!(5===n||6===n&&window.isSupportiDo)){e.next=8;break}return e.next=6,He(t);case 6:e.next=10;break;case 8:return e.next=10,We(t);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairmanFuc=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm(language.MEETING_WILL_HAVE_NO_CHAIRMAN).then(function(e){e.ret&&(z.info("userClick  releaseChairmanFuc confirm"),sr(t))});case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairmanFuc=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=$getState().conf.memberListInfo,n=ir(t),(r=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}ur(),e.next=23;break;case 8:if(a=$getState().login.tempConfInfo,o=decodeURIComponent(escape(window.atob(a.chairman_pwd))),window.isSupportiDo){e.next=20;break}if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=17;break}return z.info("SMC first Rest"),e.next=15,Me(o,n);case 15:e.next=18;break;case 17:ur();case 18:e.next=23;break;case 20:return z.info("SMC first iDo"),e.next=23,Me(o,n);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),z.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[0,25]])}));return function(){return e.apply(this,arguments)}}()),ur=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=$getState().conf.memberListInfo,n=$getState().login.deployMode,r=ir(t),window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISWIN?(a=$getState().conf.isShowMemberListNew,a?(o=$getState().conf.showqusetchairman)||$dispatch(coreUi.showqusetchairman()):window.CLIENTCONFIG.ISWIN?(coreUi.changeRightBtnDisabled(!0),window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if(e.ret)lr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);else{var t=$getState().common.showResetfuc;t&&t(!1)}})):(coreUi.setMInputValueLogic(""),window.notifyPrompt(language.CHAIMAN_PASSWORD,{placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&(z.info("userClick  confirmRequestPreservate"),fr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1))}))):window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(){var e=(0,g.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=5;break}return n=$getState().login.deployMode,e.next=4,Me(t.param.input_type_password,r);case 4:window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())}catch(e){z.error("reRequestChairman",e)}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),fr=function(){var e=(0,g.default)(m.default.mark(function e(t,n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),z.error("compressRequestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),lr=function(){var e=(0,g.default)(m.default.mark(function e(t,n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),z.error("requestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}();t.cloudRecordRequestFuc=function(){var e=(0,g.default)(m.default.mark(function e(t,n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z.info("reacrd cloudRecordRequestFuc[1] messageId:",t,"switchType:",n),e.next=4,Wn(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z.error("cloudRecordRequestFuc",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}();window.stopRecallTimer=function(){V.terminateReCall()};var dr=(t.createConfByTeamList=function(){var e=(0,g.default)(m.default.mark(function e(t,n,r){var a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$getState(),o=a.myInfo,se(o,n,r,t,!1);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.cancelConf=function(e){window.confirm(language.CONFIRM_TO_CANCEL_THE_CONF).then(function(t){t.ret?(z.info("userClick confirmBtn to cancel the meeting"),coreConf.cancelConfService(e)):z.info("userClick cancelBtn to cancel the meeting")})},t.handleCancelConf=function(){var e=(0,g.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z.info("handle cancel conf result:",t.param.error_code),hr(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),hr=t.createCancelConfEvent=function(e){var t=new Event("cancelInfoResult");t.data={ret:e},window.dispatchEvent(t)}},160:function(e,t,n){n(25),n(23),e.exports=n(161)},161:function(e,t,n){var r=n(9),a=n(27);e.exports=n(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},162:function(e,t,n){n(163),e.exports=n(8).Object.keys},163:function(e,t,n){var r=n(111),a=n(153);n(120)("keys",function(){return function(e){return a(r(e))}})},164:function(e,t,n){"use strict";var r=n(26).f,a=n(176),o=n(30),i=n(11),s=n(29),c=n(24),u=n(177),f=n(178),l=n(38),d=n(31),h=n(136).fastKey,p=n(134),_=d?"_s":"size",C=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e(function(e,r){s(e,f,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=r&&c(r,n,e[u],e)});return o(f.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n=p(this,t),r=C(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[_]--}return!!r},forEach:function(e){p(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!C(p(this,t),e)}}),d&&r(f.prototype,"size",{get:function(){return p(this,t)[_]}}),f},def:function(e,t,n){var r,a,o=C(e,t);return o?o.v=n:(e._l=o={i:a=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[_]++,"F"!==a&&(e._i[a]=o)),e},getEntry:C,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),l(t)}}},165:function(e,t,n){"use strict";var r=n(7),a=n(10),o=n(136),i=n(121),s=n(36),c=n(30),u=n(24),f=n(29),l=n(15),d=n(37),h=n(26).f,p=n(179)(0),_=n(31);e.exports=function(e,t,n,C,v,m){var S=r[e],g=S,E=v?"set":"add",w=g&&g.prototype,I={};return _&&"function"==typeof g&&(m||w.forEach&&!i(function(){(new g).entries().next()}))?(g=t(function(t,n){f(t,g,e,"_c"),t._c=new S,void 0!=n&&u(n,v,t[E],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!m||"clear"!=e)&&s(g.prototype,e,function(n,r){if(f(this,g,e),!t&&m&&!l(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),m||h(g.prototype,"size",{get:function(){return this._c.size}})):(g=C.getConstructor(t,e,v,E),c(g.prototype,n),o.NEED=!0),d(g,e),I[e]=g,a(a.G+a.W+a.F,I),m||C.setStrong(g,e,v),g}},1657:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeMuteState=t.firstOptionout=t.secondOptionClick=t.firstOptionClick=t.handleContextMenu=t.handleIpcRightMenuContent=t.actionConfMuteAttendee=t.memberItemHandleClick=t.avatarClickShowInfo=void 0;var a=n(98),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(502),l=n(158),d=n(543),h=n(186),p=n(413),_=n(158),C=n(158),v=window.Logger("conf")("logic/conference/audio/confMemberNew/index.js"),m=(t.avatarClickShowInfo=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.handleShowMemberList)(),coreCall.setNoMoveTrue(),coreContact.loadSliderDetailInfo(n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.memberItemHandleClick=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){var i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=1===n||r)){e.next=16;break}if(constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF!==t){e.next=15;break}if(a!==constant.MUTE_STATE.MUTE_STATE_TOMUTE&&a!==constant.MUTE_STATE.MUTE_STATE_TOUNMUTE){e.next=6;break}return v.info("is muting or unmuting, do nothing..."),e.abrupt("return");case 6:if(!r){e.next=12;break}return h.SvcAtdManager.setMuteState(!0,!a),e.next=10,p.ToolbarManager.setValueZeroFunc();case 10:e.next=13;break;case 12:a?(v.info("userClick  click to cancel mute"),m(0,o,r)):(v.info("userClick  click to mute"),m(1,o,r));case 13:e.next=16;break;case 15:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT===t?(v.info("click to reInvite: "+handlePhoneNumber(o)),(0,l.actionReInviteAttendee)(o)):v.info("not in conf state, no click func");case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.actionConfMuteAttendee=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("userClick mute : "+handlePhoneNumber(n)+"attendee: "+n+"isSelf"+r+"isMute"+t),a={isMute:t,attendee:n},e.next=4,coreConf.muteAttendeeService(a);case 4:if(!(o=e.sent)||0!==o.result){e.next=22;break}if(v.info("mute attendee success: "+handlePhoneNumber(n)),(0,d.setMemberToMuteState)(n,t),!r){e.next=20;break}if(!t){e.next=16;break}return e.next=12,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE));case 12:return e.next=14,$dispatch(coreUi.changeFlagStatus());case 14:e.next=20;break;case 16:return e.next=18,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE));case 18:return e.next=20,$dispatch(coreUi.changeFlagStatus());case 20:e.next=23;break;case 22:v.error("mute attendee failed: "+handlePhoneNumber(n));case 23:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}());t.handleIpcRightMenuContent=function(e,t,n,r){var a=0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),i={attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo},s={};if(t.is_self)s=n?{type:"isSvcConf_isSelf",selfRole:r,actionMuteAttendee:m,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch,pcHandup:coreCall.pcHandup}:{type:"isSelf",mediaType:t.media_type,selfRole:r,actionMuteAttendee:m,actionCallOtherNum:l.actionCallOtherNum,actionWatchAttendee:C.actionWatchAttendee};else{var c=$getState().conf.videoMultipicNum;t.userInfo===c?i={type:"multiPic"}:n&&r?s={type:"isSvcConf_compereToAttendee",participantId:t.participant_id,actionMuteAttendee:m,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch}:n&&!r?s={type:"isSvcConf_AttendeeToOthers",handleSvcLockWatch:f.handleSvcLockWatch}:n||!r&&!a||(s={type:"compereToAttendee",mediaType:t.media_type,participantId:t.participant_id,actionMuteAttendee:m,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionWatchAttendee:C.actionWatchAttendee,selfRole:r})}return i=(0,o.default)({},i,s),{type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:i}},t.handleContextMenu=function(e,t,n,r){var a=0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(t.is_self){v.info("handleContextMenu","ConfMemberListRightMenu to self");var o={};o=n?{type:"isSvcConf_isSelf",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,selfRole:r,actionMuteAttendee:m,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch,pcHandup:coreCall.pcHandup}:{type:"isSelf",attendeeState:t.state,isMuted:t.is_mute,mediaType:t.media_type,attendeeNumber:t.number,userInfo:t.userInfo,selfRole:r,actionMuteAttendee:m,actionCallOtherNum:l.actionCallOtherNum,actionWatchAttendee:C.actionWatchAttendee,isVideoConf:a};var i={type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:o};coreUi.showMemberListRightMenuLogic(i)}else{var s={};t.userInfo===$getState().conf.videoMultipicNum?s={type:"multiPic"}:n&&r?(v.info("handleContextMenu","ConfMemberListRightMenu compere to attendee"),s={type:"isSvcConf_compereToAttendee",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,participantId:t.participant_id,actionMuteAttendee:m,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch}):n&&!r?(v.info("handleContextMenu","ConfMemberListRightMenu Attendee to others"),s={type:"isSvcConf_AttendeeToOthers",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,handleSvcLockWatch:f.handleSvcLockWatch}):n||!r&&!a||(s={type:"compereToAttendee",attendeeState:t.state,isMuted:t.is_mute,mediaType:t.media_type,attendeeNumber:t.number,userInfo:t.userInfo,participantId:t.participant_id,actionMuteAttendee:m,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionWatchAttendee:C.actionWatchAttendee,selfRole:r,isVideoConf:a});var c={type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:s};coreUi.showMemberListRightMenuLogic(c)}},t.firstOptionClick=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback;void 0!=e.secondIndex&&(t=$getState().menu.rightMenuList[e.firstIndex].children[e.secondIndex].callback);var n=e.unClick,r=e.hasChildren;n||!r&&t&&t()},t.secondOptionClick=function(e){var t=+e.firstOption.charAt(11),n=$getState().menu.rightMenuList[t].children[e.secondIndex].callback,r=e.unClick,a=e.hasChildren;r||!a&&n&&n()},t.firstOptionout=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback,n=e.unClick,r=e.hasChildren;n||$dispatch(coreUi.settogglechildrenoption()),!r&&t&&t()},t.changeMuteState=function(e,t,n,r){var a=e.filter(function(e){return e.number===n}),o=a[0].is_mute;if(r||1===t){if(o===constant.MUTE_STATE.MUTE_STATE_TOMUTE||o===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)return void v.info("is muting or unmuting, do nothing...");o?(v.info("userClick  click to cancel mute"),(0,_.actionMuteAttendee)(0,n,r)):(v.info("userClick  click to mute"),(0,_.actionMuteAttendee)(1,n,r))}}},1658:function(e,t,n){n(1659);var r=n(8).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},1659:function(e,t,n){n(120)("getOwnPropertyNames",function(){return n(1660).f})},166:function(e,t,n){var r=n(17),a=n(184);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},1660:function(e,t,n){e.exports=n(0)(400)},1661:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),h=r(d),p=n(5),_=r(p),C=n(209),v=n(600),m=n(401),S=n(1666),g=r(S),E=n(602),w=n(1667),I=r(w),T=n(1669),N=r(T),b=window.Logger("dataconf")("model"),O=function(){function e(){var t=this;(0,h.default)(this,e),this.setConfCtrlNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupConfCtrlSdk;case 2:n=e.sent,n.setNotifyFunc(491593,t.handleGetDataConfResource);case 4:case"end":return e.stop()}},e,t)})),this.setDataConfNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("set data confctrl service callback func"),!m.DFConfig.isPc){e.next=21;break}return e.next=4,new coreTup.HwTupDataConfSdk;case 4:n=e.sent,n.setNotifyFunc(40001001,t.handleJoinDataConfResult),n.setNotifyFunc(40001002,t.handleEndDataConfResult),n.setNotifyFunc(40001003,t.handleLeaveDataConfResult),n.setNotifyFunc(40001020,t.handlePingCompleteResult),n.setNotifyFunc(40001021,t.handlePingProgressResult),n.setNotifyFunc(40001109,t.handleUserEnterResult),n.setNotifyFunc(40001110,t.handleUserLeaveResult),n.setNotifyFunc(40000130,t.handleStarJoinConf),n.setNotifyFunc(40001010,t.handleFlowControlResult),n.setNotifyFunc(40001051,t.handleNetReportReportResult),n.setNotifyFunc(40001105,t.handleUserPresentChangeResult),n.setNotifyFunc(40001203,t.handleUserPhoneStatusResult),n.setNotifyFunc(40001229,t.handleOnConfMsgPhoneConfInfo),n.setNotifyFunc(40001062,t.handlePingCallback),n.setNotifyFunc(40001063,t.handleNewConfHandle),n.setNotifyFunc(40001233,t.handleNegoCapResult);case 21:case"end":return e.stop()}},e,t)})),this.joinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return",s.default.reject("joinData params is null"));case 2:return coreUt.utEventStart(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[coreConf.getCurrentConfId()]),r=coreAccount.getMyInfo().bind_no||"",b.info("joinDataConf  start, bind_no is "+handlePhoneNumber(r)+",  sip_num is "+handlePhoneNumber(n.sip_num)),t.dataConfStatus=E.DCONF_STATUS.JOINING,t.confInfo=n,r=m.DFConfig.userSipNumberRequestBigParams?t.getSipNumber():isNullOrEmpty(n.sip_num)?r:n.sip_num,t.myBindNo=r,e.next=11,t.requestBigParams(n);case 11:if(null!==(a=e.sent)){e.next=15;break}return t.handleJoinDataFail(),e.abrupt("return");case 15:return t.trackerGetServerIp(a.param.conf_param.server_ip),e.next=18,t.buildJoinParams(a.param,n);case 18:return o=e.sent,t.bigParam=o,m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWsaveIpParam",{sbcIP:o.conf_param.sbc_server_address,msIP:o.conf_param.server_ip}),t.selfUserUri=o.conf_param.user_uri,e.next=24,t.startJoinDataConf(o);case 24:b.info("start join data conf over");case 25:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.retryJoin=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataConfStatus===E.DCONF_STATUS.JOIN_FAIL){e.next=3;break}return b.info("retry join, status is not fail"),e.abrupt("return");case 3:if(!t.confInfo){e.next=8;break}return t.bigParamRequestCount=0,e.abrupt("return",t.joinDataConf(t.confInfo));case 8:b.info("retry join,confInfo is null");case 9:case"end":return e.stop()}},e,t)})),this.retryJoinOnStg=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("retry join on stg"),null!==t.bigParam&&null!==t.bigParam.conf_param){e.next=5;break}return b.info("retry join on stg fail,bigparam is null"),t.handleJoinDataFail(),e.abrupt("return");case 5:m.DFConfig.isMobile?t.bigParam.conf_param.firewallmode=m.DFConfig.firewallType:t.bigParam.firewallmode=m.DFConfig.firewallType,t.startJoinDataConf(t.bigParam);case 7:case"end":return e.stop()}},e,t)})),this.buildStgTunnelJoinData=(0,l.default)(u.default.mark(function e(){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("build stg tunnel for join data"),m.DFConfig.firewallType=E.DATA_FIREWALL_MODE.STG,n=coreAccount.getLoginModel().stgAccount,void 0===(r=coreAccount.getLoginModel().stgUri)||""===r||";"===r||";;"===r){e.next=20;break}return e.next=7,coreSecurity.PasswordManager.getPassword("stgPassword");case 7:return a=e.sent,b.info("building stg tunnel"),e.next=11,coreAccount.buildStgTunnel({stgUri:r,stgAccount:n,stgPassword:a});case 11:if(o=e.sent,o.result){e.next=17;break}return e.next=15,t.handleJoinDataFail();case 15:e.next=18;break;case 17:t.retryJoinOnStg();case 18:e.next=21;break;case 20:t.handleJoinDataFail();case 21:case"end":return e.stop()}},e,t)})),this.trackerGetServerIp=function(e){m.DFConfig.supportBuried&&coreCommon.Observer.publish("OnGetServerIp",e)},this.buildJoinParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r){var a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.DFConfig.isPc?(n.firewallmode=m.DFConfig.firewallType,n.servertype=m.DFConfig.serverType(),n.confparam_url=r.conf_uri,n.language="zh-CN",n.stgaddress=m.DFConfig.stgAddresslist,n.conf_param.option=8388608,m.DFConfig.useSBC||(n.conf_param.sbc_server_address="")):(n.conf_param.firewallmode=m.DFConfig.firewallType,n.conf_param.bigParamServerAddress=r.conf_uri),a=g.default.cutstr(n.conf_param.conf_name,30),o=g.default.cutstr(n.conf_param.user_name,30),n.conf_param.conf_name=a,n.conf_param.user_name=o,isNullOrEmpty(n.conf_param.user_uri)&&(b.info("user_uri is empty,set myBindNo = "+t.myBindNo),n.conf_param.user_uri=t.myBindNo),n.conf_param.bind_number=n.conf_param.user_uri,t.userBindNum=n.conf_param.bind_number,i=n.conf_param.data_codec_ver,!t.shouldSetCodeccVersion(i)){e.next=15;break}return e.next=12,t.buildCodeccParams();case 12:s=e.sent,m.DFConfig.isPc?n.codec_param=s:n.conf_param.codec_param=s,b.info("set codec param: ",s);case 15:return b.info(" confinfonotify conf_param :  ",{sbc_server_address:n.conf_param.sbc_server_address,server_ip:n.conf_param.server_ip,firemode:m.DFConfig.firewallType,M:n.conf_param.M,T:n.conf_param.T}),e.abrupt("return",n);case 17:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.buildCodeccParams=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.assignBandwidthForData(t.call_id);case 2:return n=e.sent,e.abrupt("return",{encodeVerType:30,maxBitRate:n,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:m.DFConfig.decFr(),maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:m.DFConfig.encFr()});case 4:case"end":return e.stop()}},e,t)})),this.shouldSetCodeccVersion=function(e){var n=!0;return m.DFConfig.isPc&&(isNullOrEmpty(e)?(b.info("data_codec_ver is null"),m.DFConfig.isWin||m.DFConfig.isMac?t.setDataCodeccVersion(5):(t.setDataCodeccVersion(0),n=!1)):(b.info("dataCodecVersion = "+e),"1.0"===e.toLowerCase()?t.setDataCodeccVersion(0):("3.0"===e.toLowerCase()||e.toLowerCase(),t.setDataCodeccVersion(5)))),n},this.requestBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestBigParamFromTup(n);case 2:if(r=e.sent,!(r.param&&r.param.conf_param&&r.param.conf_param.conf_id&&""!==r.param.conf_param.conf_id)){e.next=7;break}return e.abrupt("return",r);case 7:if(!(t.bigParamRequestCount>=5)){e.next=12;break}return b.info(" retryGetDataConfBigParams 5 times , stop retry"),e.abrupt("return",null);case 12:return e.next=14,t.requestBigParams(n);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestBigParamFromTup=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.bigParamRequestCount++,b.info("getDataConfBigParams start times = "+t.bigParamRequestCount),r={conf_id:n.conf_id,conf_url:n.conf_uri,mcu_addr:{server_addr:"",server_port:0},random:n.data_random,passcode:n.passcode,password:n.password,sip_num:t.myBindNo,type:n.getParamType||3},e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return a=e.sent,e.next=8,a.getDataConfBigParam(r);case 8:return o=e.sent,b.info("getDataConfBigParams end times = "+t.bigParamRequestCount),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getSipNumber=function(){var e=coreAccount.getLoginModel().sipImpi;b.info("sipImpi = ",e);var t=e;if(!isNullOrEmpty(t)){var n=t.indexOf("@");-1!==n&&(t=t.slice(0,n))}return t},this.requestWBToken=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.requestWBToken(n):b.info("requestWBToken shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setCallId=function(e){b.info("setCallId = ",e),t.call_id=e},this.getSelfAudioNumber=function(){if(""===t.selfAudioNumber)for(var e=(0,v.getUpdatedParticipants)(),n=0;n<e.length;++n){var r=e[n];1===r.is_self&&(t.selfAudioNumber=r.number,b.info("getSelfAudioNumber : "+handlePhoneNumber(t.selfAudioNumber)))}return t.selfAudioNumber},this.getNegoBandwidth=function(){return t.negoBandwidth},this.setDataCodeccVersion=function(e){m.DFConfig.dataCodeccVersion=e,b.info("dataCodeccVersion = "+e)},this.getDataCodeccVersion=function(){return m.DFConfig.dataCodeccVersion},this.startJoinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info(" startJoinDataConf"),!m.DFConfig.isMobile){e.next=5;break}window.showMobileDataConfSharing((0,o.default)(n.conf_param)),e.next=15;break;case 5:return e.next=7,new coreTup.HwTupDataConfSdk;case 7:return r=e.sent,a="<UserInfo><UserType>2</UserType></UserInfo>",n.conf_param.user_info=a,n.conf_param.user_info_len=a.length,e.next=13,r.startjoinconf(n);case 13:i=e.sent,0===i.param.result?b.info("start conf success"):(coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[0]),b.error("start conf failed"));case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setLeftConfCallback=function(e){t.leftDataConfCallback=e},this.getApplist=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.getApplist():b.error("get applist error:shareservice is null");case 1:case"end":return e.stop()}},e,t)})),this.setDataCodecVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return b.info("setDataCodecVersion, m_confhandle : "+t.m_confHandle),e.next=7,r.setDataCodecVersion(t.m_confHandle,n);case 7:a=e.sent,0!==a.param.result?b.info("setDataCodecVersion failed, result = ",a.result):b.info("setDataCodecVersion success, result = ",a.result),e.next=12;break;case 11:b.error("setDataCodecVersion failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getUserAltId=function(e){return t.memberService?t.memberService.getUserAltId(e):""},this.getMemberNameByUserId=function(e){return t.memberService?t.memberService.getMemberNameByUserId(e):""},this.getBindnoByUserid=function(e){return t.memberService?t.memberService.getBindnoByUserid(e):""},this.getDataShareOwnerBindno=function(){return t.shareService&&""!==t.shareService.shareOwnerUserId?t.getBindnoByUserid(t.shareService.shareOwnerUserId):""},this.changeRemoteControl2Other=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle||""===n||null===t.shareService){e.next=4;break}if(0===(r=Number(t.getUserAltId(n)))){e.next=4;break}return e.abrupt("return",t.shareService.changeRemoteControl2Other(r));case 4:return b.error("dataconf setRemoteControl2Other fail ,confhandle : "+t.m_confHandle),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService?(b.error("dataconf delRemoteControlPrivilege success ,confhandle : "+t.m_confHandle),r=void 0,r=void 0===n||""===n?Number(t.m_user_id):Number(t.getUserAltId(n)),t.shareService.delRemoteControlPrivilege(r)):b.error("dataconf delRemoteControlPrivilege fail ");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&""!==n&&t.shareService&&(r=Number(t.getUserAltId(n)),t.shareService.rejectRemoteControlPrivilege(r));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService&&t.shareService.requestRemoteControlPrivilege();case 1:case"end":return e.stop()}},e,t)})),this.inputWndMsg=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i){var s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle){e.next=7;break}return e.next=3,new coreTup.HwTupDataConfSdk;case 3:return s=e.sent,e.next=6,s.asInputwndmsg(t.m_confHandle,n,r,a,o,i);case 6:c=e.sent;case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),this.leaveconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("dataconf leaveconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=10;break}return b.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),t.shareService.isDataShareStarted=!1,e.next=7,new coreTup.HwTupDataConfSdk;case 7:return n=e.sent,e.next=10,n.leaveconf(t.m_confHandle);case 10:case"end":return e.stop()}},e,t)})),this.terminateconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("dataconf terminateconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=13;break}return b.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),e.next=6,new coreTup.HwTupDataConfSdk;case 6:return n=e.sent,e.next=9,n.terminateconf(t.m_confHandle);case 9:return e.next=11,t.releaseConfHandle();case 11:b.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 13:case"end":return e.stop()}},e,t)})),this.setDataShareCanvasSize=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.error("setDataShareCanvasSize ,confhandle = "+t.m_confHandle),0===t.m_confHandle){e.next=6;break}return e.next=4,new coreTup.HwTupDataConfSdk;case 4:r=e.sent,r.setDataShareScreenParam(t.m_confHandle,{width:n.width,height:n.height});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopStgTunnel=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,new coreTup.HWTupCall;case 3:n=e.sent,n.setStgTunnel(t.call_id,3);case 5:case"end":return e.stop()}},e,t)})),this.handleFlowControlResult=function(e){b.error("handleFlowControlResult start")},this.handleNetReportReportResult=function(e){b.info("handleNetReportReportResult start")},this.handleUserPresentChangeResult=function(e){b.info("handleUserPresentChangeResult start")},this.handleUserPhoneStatusResult=function(e){b.info("handleUserPhoneStatusResult start")},this.handleOnConfMsgPhoneConfInfo=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=2;break}return e.abrupt("return");case 2:if(b.info("handleOnConfMsgPhoneConfInfo data = ",n),!n||!n.param||void 0===n.param.auxtokenresult){e.next=9;break}if(1!==n.param.auxtokenresult){e.next=9;break}return e.next=7,new coreTup.HwTupDataConfSdk;case 7:r=e.sent,r.sendNotifyAllUsersCloseSharingTab(t.m_confHandle,t.m_user_id,23);case 9:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleNewConfHandle=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.value1||0!==n.param.value2){e.next=9;break}return b.error("new confhandle success, confhandle : ",n.param.value1),t.m_confHandle=n.param.value1,t.shareService=new I.default(t.m_confHandle,t.call_id),t.shareService.memberService=t.memberService,e.next=7,t.shareService.initShareService();case 7:e.next=10;break;case 9:b.error("new confhandle fail, errcode : ",n.param.value2);case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handleJoinDataConfResult start"),!n.param.confHandle||0!==n.param.value1){e.next=11;break}return t.m_confHandle=n.param.confHandle,e.next=5,new coreTup.HWTupCall;case 5:return r=e.sent,r.setStgTunnel(t.call_id,0),e.next=9,t.shareService.loadShareComponent();case 9:e.next=14;break;case 11:b.error("handleJoinDataConfResult  joindataconf fail, errcode : "+n.param.value1+"confHandle : "+n.param.confHandle),t.m_confHandle=n.param.confHandle,t.handleJoinDataFail();case 14:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleEndDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handleEndDataConfResult start"),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=4;break}return b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 4:t.isCascade?(b.info("PC cascade conf end data conf"),coreConf.actionLeaveConf()):t.beLeaveDataConf();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleLeaveDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=3;break}return b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 3:t.isCascade?(b.info("PC cascade conf leave data conf"),coreConf.actionLeaveConf()):(b.info("handleLeaveDataConfResult start"),t.beLeaveDataConf());case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.releaseConfHandle=(0,l.default)(u.default.mark(function e(){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.m_confHandle>0)){e.next=19;break}return b.info("releaseConfHandle start"),n=t.m_confHandle,t.m_confHandle=0,e.next=6,t.showNativeDataControl(!1);case 6:return e.next=8,t.closeNativeDataSharingWnd();case 8:return e.next=10,new coreTup.HwTupDataConfSdk;case 10:r=e.sent,r.releaseDataConfHandle(n),coreCommon.Observer.publish("OnReleaseHandle",{}),coreCommon.Observer.publish("onDataSharingStateChanged",!1),t.shareService=null,t.m_user_id=0,b.info("releaseConfHandle end"),e.next=20;break;case 19:b.info("releaseConfHandle: confHandle is null");case 20:case"end":return e.stop()}},e,t)})),this.getMyNumberfromContact=function(){for(var e=$getState(),t=e.conf.memberListInfo,n=0;n<t.length;n++)if(t[n].is_self)return t[n].number},this.getMyUserId=function(){return t.m_user_id},this.handlePingProgressResult=function(e){b.info("handlePingProgressResult start")},this.handleUserEnterResult=function(e){var n=coreAccount.getLoginModel().sipAccount,r=coreAccount.getMyInfo().bind_no;if(b.info("handleUserEnterResult start, sipAccount : "+n+", useruri:"+e.param.user_alt_uri+",userid:"+e.param.user_alt_id+",myBindNo:"+r),e.param.confHandle&&e.param.confHandle!==t.m_confHandle)return void b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+e.param.confHandle);var a=!1;""===e.param.user_alt_uri||r!==e.param.user_alt_uri&&t.getSelfAudioNumber()!==e.param.user_alt_uri&&t.dataResourceUserNumber!==e.param.user_alt_uri&&t.selfUserUri!==e.param.user_alt_uri&&n!==e.param.user_alt_uri||(b.info("self enter"),0===t.m_user_id&&coreCommon.Observer.publish("handleSelfEnterResult",{}),t.m_user_id=e.param.user_alt_id,t.shareService.m_user_id=t.m_user_id,t.dataConfStatus=E.DCONF_STATUS.IN_CONF,a=!0,b.info("handleUserEnterResult setmyuserid : "+e.param.user_alt_id+",user_alt_uri : "+handlePhoneNumber(e.param.user_alt_uri))),t.memberService.addMember(e,a)},this.handleUserLeaveResult=function(e){if(b.info("handleUserLeaveResult start"),e.param.confHandle&&e.param.confHandle!==t.m_confHandle)return void b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+e.param.confHandle);t.memberService.deleteMember(e),e.param.isSelf=e.param.user_alt_id===t.m_user_id,coreCommon.Observer.publish("dataUserleave",e)},this.handleNegoCapResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("onNegoCapResult data"+(0,o.default)(n)),t.negoBandwidth=n.param.capability.maxbitrate,window.CLIENTCONFIG.ISBIGWIN&&(r=n.param.capability.encodevertype,30===r?3===m.DFConfig.dataCodeccVersion?t.setDataCodeccVersion(3):t.setDataCodeccVersion(5):t.setDataCodeccVersion(0),b.info("use data codecc version ",m.DFConfig.dataCodeccVersion)),b.info("use bandwidth ",t.negoBandwidth);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,h,p){var _,C,v;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _={conf_url:n,conf_id:r,nick_name:a,password:o,number:i,user_id:s,server_ip:c,pin_code:f,participant_id:l,server_type:d,language:h,data_site_bandwidth:p},b.info("getDataConfResource start, params : "),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return C=e.sent,e.next=7,C.getDataConfResource(_);case 7:return v=e.sent,b.info("getDataConfResource end"),e.abrupt("return",v);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l,d){return e.apply(this,arguments)}}(),this.getDataConfBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){var f,l,d,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f={conf_id:n,conf_url:r,mcu_addr:a,random:o,passcode:s,password:i,sip_num:c,type:h},b.info("getDataConfBigParams start"),e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return l=e.sent,e.next=7,l.getDataConfBigParam(f);case 7:return d=e.sent,b.info("getDataConfBigParams end"),e.abrupt("return",d);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.handleGetDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleGetDataConfResource start, new confparams  "),r=n.param.conf_params,a=null,r.ms_address&&(o=r.ms_address.split(":"),a=o.length>0?r.ms_address.split(":")[0]:r.ms_address),b.info("ms_address_without_port",a),b.info("handleGetDataConfResource sip number is :"+handlePhoneNumber(r.number)+", bind_no is :"+handlePhoneNumber(r.bind_number)),1===r.has_data_resource?(r.conf_id&&""!==r.conf_id&&"0"!==r.conf_id&&(t.bigParam.conf_param.conf_id=r.conf_id),t.bigParam.conf_param.M=r.M,t.bigParam.conf_param.T=r.T,r.user_id&&""!==r.user_id&&"0"!==r.user_id&&(t.bigParam.conf_param.user_id=r.user_id),isNullOrEmpty(r.number)||(t.bigParam.conf_param.user_uri=r.number),isNullOrEmpty(r.bind_number)||(t.bigParam.conf_param.bind_number=t.userBindNum),t.dataResourceUserNumber=r.number,t.bigParam.conf_param.server_ip=a,t.startJoinDataConf(t.bigParam),b.info("handleGetDataConfResource end , bigparam : ")):b.info("handleGetDataConfResource fail ");case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleServerTypeForGetResource=function(e,t){var n=m.DFConfig.firewallType===E.DATA_FIREWALL_MODE.STG?1:0;if(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING&&e&&t){var r=e.split(";");if(r.length>0)for(var a=0;a<r.length;a++)""!==r[a]&&t.split(":").length>0&&r[a].split(":").length>0&&t.split(":")[0]===r[a].split(":")[0]&&(n=1);n=m.DFConfig.firewallType===E.DATA_FIREWALL_MODE.STG?2:n}return n},this.handleBandwidthForGetResource=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING||m.DFConfig.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&t.bigParam&&t.bigParam.conf_param&&t.bigParam.conf_param.server_data_cap)){e.next=5;break}return e.next=4,coreCall.assignBandwidthForData(t.call_id);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e,t)})),this.handlePingCallback=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s,c,f,l,d,h,p,_,C,v,S,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handlePingCallback data start"),!(r=n.param.dst_addr)||""===r){e.next=27;break}return b.info("handlePingCallback param "),t.isCascade=!0,a=t.confInfo.conf_uri,o=a.indexOf("/",10),o>0&&(a=a.substr(0,o)),i=t.bigParam.conf_param,s=i.conf_id,c="1"===i.user_role?i.host_key:i.part_secure_conf_num,m.DFConfig.shouldPasscodeBase64()&&(c=coreSecurity.encode64(c)),f=i.user_uri,l=i.user_name,d=r,h=i.user_id,p=i.pin_code,_=i.participant_id,C=i.sbc_server_address,v=0,S=t.handleServerTypeForGetResource(C,d),g=t.handleBandwidthForGetResource(),e.next=24,t.getDataConfResource(a,s,l,c,f,h,d,p,_,S,v,g);case 24:b.info("handlePingCallback  getDataConfResource param =",{confUrl:a,confId:s,number:f,userId:h,serverIp:d,participantId:_,serverType:S,language:v,dataSiteBandwidth:g}),e.next=29;break;case 27:b.info("handlePingCallback data error, dst_addr is null stgaddr"),m.DFConfig.stgAddresslist.length>0?(b.info("handlePingCallback  Need2BuildStgTunnel"),t.buildStgTunnelJoinData()):(b.info("handlePingCallback stgaddrlist empty, joindata fail"),t.handleJoinDataFail());case 29:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataFail=function(){coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[0]),t.releaseConfHandle(),m.DFConfig.isPc?coreCommon.Observer.publish("OnJoinDataConfFail"):coreCommon.Observer.publish("onMobileJoinDataFail"),t.dataConfStatus=E.DCONF_STATUS.JOIN_FAIL},this.setDataShareScreenGDIEXType=function(){null!==t.shareService&&t.shareService.setDataShareScreenGDIEXType()},this.setCloseShareDataOperate=function(e){if(null!==t.shareService)return t.shareService.setCloseShareDataOperate(e)},this.getCloseShareDataOperate=function(){if(null!==t.shareService)return t.shareService.getCloseShareDataOperate()},this.getStreamInfo=function(){if(null!==t.shareService)return t.shareService.getStreamInfo()},this.isInScreenSharing=function(){return null!==t.shareService&&t.shareService.isInScreenSharing()},this.resetConfSharingType=function(){if(null!==t.shareService)return t.shareService.resetConfSharingType()},this.setConfSharingType=function(e,n){if(null!==t.shareService)return t.shareService.setConfSharingType(e,n)},this.getDisplayInfo=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.getDisplayInfo());case 4:b.info("get display info share service is null");case 5:case"end":return e.stop()}},e,t)})),this.setDataConfShareRealRect=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService&&(t.shareService.bigwinRealRectLeft=n,t.shareService.bigwinRealRectTop=r,t.shareService.bigwinRealRectRight=a,t.shareService.bigwinRealRectBottom=o);case 1:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.cancelSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.cancelSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setStart=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setStart());case 2:case"end":return e.stop()}},e,t)})),this.setAppShareScreenParam=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setAppShareScreenParam(n,r));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setDataShareScreenPicQuality=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=10;break}if(30!==n){e.next=6;break}return e.next=4,t.shareService.setDataShareScreenGDIEXType();case 4:e.next=8;break;case 6:return e.next=8,t.shareService.setDataShareScreenPicQuality(n);case 8:e.next=11;break;case 10:b.info("setDataShareScreenPicQuality failed,please check whether conf is dataConf!");case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.showNativeRemoteControl(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopWBDoc=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.stopWBDoc();case 1:case"end":return e.stop()}},e,t)})),this.isInWBSharing=function(){return null!==t.shareService&&t.shareService.isInWBSharing()},this.createWBNewDocAndPage=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.createWBNewDocAndPage());case 2:case"end":return e.stop()}},e,t)})),this.closeNativeDataSharingWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.closeNativeDataSharingWnd());case 4:b.error("close data window error:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.createNativeDataSharingWnd=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,h){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.createNativeDataSharingWnd(n,r,a,o,i,s,c,f,l,d,h);case 3:return e.abrupt("return",e.sent);case 6:b.error("createNativeDataSharingWnd:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),this.showNativeDataControl=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.showNativeDataControl(n,r,a,o,i,s,c);case 3:return e.abrupt("return",e.sent);case 6:b.error("showNativeDataControl:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.getIsUsePrimarySize=function(){return null!==t.shareService&&t.shareService.isUsePrimarySize},this.changeIsUsePrimarySize=function(){null!==t.shareService&&(t.shareService.isUsePrimarySize=!t.shareService.isUsePrimarySize)},this.isRemoteControling=function(){return null!==t.shareService&&!0===t.shareService.isInRemoteControlling},this.getRemoteControlUserNum=function(){return t.shareService.remoteControlUserNum||""},this.isDataShareStarted=function(){return!!t.shareService&&t.shareService.isDataShareStarted},this.isReceivingDataShare=function(){return!!t.shareService&&t.shareService.isReceivingDataShare()},this.setDataNegoMaxCap=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f){var l,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupDataConfSdk;case 2:if(l=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return b.info("setDataNegoMaxCap, m_confhandle : "+t.m_confHandle),e.next=7,l.setDataNegoMaxCap(t.m_confHandle,n,r,a,o,i,s,c,f);case 7:d=e.sent,0!==d.result?b.info("setDataNegoMaxCap failed, result = ",d.result):b.info("setDataNegoMaxCap success, result = ",d.result),e.next=12;break;case 11:b.error("setDataNegoMaxCap failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c){return e.apply(this,arguments)}}(),this.docShareCompLoadSucCallback=function(e){if(null===t.shareService||!(t.shareService.loadDocSharePromise instanceof s.default))return void b.info("data conf service init error");t.shareService.loadDocSharePromise.timeout(8e3,-1),t.shareService.loadDocSharePromise.then(function(t){b.info("docShareCompLoadSucCallback loadDocSharePromise success ",t),0===t&&e&&"function"==typeof e&&e()})},this.startShare=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.shareService.startShare(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isInSendDocSharing=function(){return!!t.shareService&&t.shareService.isInSendDocSharing()},this.isInReceiveDocSharing=function(){return null!==t.shareService&&t.shareService.isInReceiveDocSharing()},this.isRecevingSharing=function(){return null!==t.shareService&&t.shareService.isRecevingSharing()},this.stopDocSharing=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=5;break}return b.info("docshare stopDocSharing"),e.next=4,t.shareService.stopDocShare();case 4:t.resetConfSharingType();case 5:case"end":return e.stop()}},e,t)})),this.handleShareEnd=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService?t.shareService.handleShareEnd(n):b.info("handle share end: share service is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setNativeDataControlStatus=function(e){t.shareService&&t.shareService.setNativeDataControlStatus(e)},this.isConfDataShareLoadSuccess=function(){return null!==t.shareService&&!0===t.shareService.hasLoadDataShareComp},this.getSharingType=function(){return null===t.shareService?(b.info("get sharing type shareService error"),-1):t.shareService.sharingType},this.stopShareScreen=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=3;break}return e.next=3,t.shareService.stopShareScreen();case 3:case"end":return e.stop()}},e,t)})),this.isConfDocShareLoadSuccess=function(){return null!==t.shareService&&t.shareService.loadDocSharePromise instanceof s.default&&"resolved"===t.shareService.loadDocSharePromise.status},this.getDocShareFilePath=function(){return t.shareService?t.shareService.docSharingFilePath:""},this.openDocShareFile=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:!window.CLIENTCONFIG.ISMOBILE&&t.shareService&&(b.info("openDocShareFile called"),t.shareService.openDocShareFile(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isJoiningDataConf=function(){return t.dataConfStatus===E.DCONF_STATUS.JOINING},this.isSelfJoinedDataConf=function(){return t.dataConfStatus===E.DCONF_STATUS.IN_CONF},this.isLeavingDataConf=function(){return t.dataConfStatus===E.DCONF_STATUS.LEAVING},this.getDataConfMemberList=function(){return t.memberService.dataUserList},this.leaveMobileDataConf=function(){m.DFConfig.isMobile&&(b.info("leaveMobileDataConf android start"),window.leaveMobileDataConf(),coreCommon.Observer.publish("onMobileLeaveDataConf",{}),t.dataConfStatus=E.DCONF_STATUS.LEFT)},this.stopAllShare=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.DFConfig.whiteBoardShareEnable||!t.isInWBSharing()){e.next=4;break}return b.info("leaveDataConf stopWBDoc"),e.next=4,t.stopWBDoc();case 4:if(!m.DFConfig.isDocShareEnabled()||!t.isInSendDocSharing()){e.next=8;break}return b.info("leaveDataConf stopDocSharing"),e.next=8,t.stopDocSharing();case 8:if(!t.isInScreenSharing()||t.isReceivingDataShare()){e.next=13;break}return b.info("before stopShareScreen"),e.next=12,t.stopShareScreen();case 12:b.info("after stopShareScreen");case 13:case"end":return e.stop()}},e,t)})),this.leaveDataConf=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("leave data conf"),t.leaveMobileDataConf(),e.next=4,t.stopAllShare();case 4:return e.next=6,t.leaveconf();case 6:return e.next=8,t.releaseConfHandle();case 8:b.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 10:case"end":return e.stop()}},e,t)})),this.beLeaveDataConf=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("beLeaveDataConf type "),t.leaveMobileDataConf(),e.next=4,t.releaseConfHandle();case 4:b.info("be leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 6:case"end":return e.stop()}},e,t)})),this.handleNativeNotifyResetRenderRect=function(e){b.info("handleNativeNotifyResetRenderRect start"),t.shareService&&t.shareService.handleNativeNotifyResetRenderRect(e)},this.setDataConfParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("setDataConfParams,data ",n),e.next=3,new C.HwNativeWndSdk;case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,b.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isSelfSharing=function(){return t.shareService&&t.shareService.shareOwnerUserId===t.m_user_id},this.onMobileDataConfCallback=function(e){try{if(b.info("onMobileDataConfCallback receive : ",e.type),"joinDataResult"===e.type)b.info("publish onMobileJoinDataConf"),coreCommon.Observer.publish("onMobileJoinDataConf",{});else if("shareMemberChange"===e.type)b.info("shareMemberChange, userid : "+handlePhoneNumber(e.userid)),coreCommon.Observer.publish("onMobileShareUserIdChange",e.userid,e.username);else if("dataSharingFlag"===e.type)b.info("dataSharingFlag, flag : "+e.status),coreCommon.Observer.publish("onMobileSharingFlagChange",e.status);else if("regetbigparams"===e.type){b.info("regetbigparams, addr : "+e.bestaddr),coreCommon.Observer.publish("onMobileSharingFlagChange",e.bestaddr);var n={param:{dst_addr:""}};n.param={},n.param.dst_addr=e.bestaddr,"stgaddr"===e.bestaddr&&(n.param.dst_addr=t.bigParam.conf_param.stg_server_address),t.handlePingCallback(n)}else"onMobilePingCallback"===e.type?(b.info("onMobilePingCallback"),m.DFConfig.stgAddresslist&&m.DFConfig.stgAddresslist.length>0?(b.info("onMobilePingCallback  Need2BuildStgTunnel"),coreCommon.Observer.publish("OnNeed2BuildStgTunnel",{})):(b.info("onMobilePingCallback stgaddrlist empty, joindata fail"),coreCommon.Observer.publish("onMobileJoinDataFail",{}))):"joinDataFail"===e.type?(b.info("mobile joinDataFail"),coreCommon.Observer.publish("onMobileJoinDataFail",{})):"closecall"===e.type&&(b.info("mobile onDataConfClosed leaveConf"),t.isCascade&&coreConf.actionLeaveConf(),m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWreCallTimeOut","call end by server abnormal hangup"))}catch(e){b.error("onMobileDataConfCallback exception : ",e)}},this.changeShareMonitorType=function(e){t.shareService?t.shareService.shareMonitorType=e:b.error("changeShareMonitorType ,service is null")},this.setShareAppHwnd=function(e){b.info("set share app hwnd:"+e),t.shareService?t.shareService.shareAppHwnd=e:b.error("set share app error.service is null")},this.getShareAppHwnd=function(){return b.info("get share app hwnd"),t.shareService?t.shareService.shareAppHwnd:0},this.setOldShareAppHwnd=function(e){b.info("set old app hwnd:"+e),t.shareService?t.shareService.oldShareAppHwnd=e:b.error("set old app error.service is null")},this.getOldShareAppHwnd=function(){return b.info("get old app hwnd"),t.shareService?t.shareService.oldShareAppHwnd:0},this.setTransparentwindow=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setTransparentwindow(n,r);case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.isRecevingAppshare=function(){return!!t.shareService&&t.shareService.isRecevingAppshare},this.setDataShareVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setDataShareVersion(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinAttach(n));case 4:b.info("attach:share service is null");case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinDetach=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinDetach());case 4:b.info("detach:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.m_confHandle=0,this.m_user_id=0,this.selfAudioNumber="",this.dataResourceUserNumber="",this.call_id=0,this.isCascade=!1,this.negoBandwidth=0,this.confInfo={acTmpToken:"",conf_id:"",conf_uri:"",data_random:"",dateconf_uri:"",group_uri:"",is_svc_conf:1,media_type:0,password:"",subject:"",svc_lable:[],svc_lable_count:0,vmr_id:"",getParamType:3},this.confInfo=null,this.bigParam={conf_param:{M:1,T:1,access_code:"",cm_address:"",conf_id:"",conf_name:"",crypt_key:"",data_codec_bw:0,data_codec_ver:"",host_key:"",part_secure_conf_num:"",participant_id:"",pin_code:"",sbc_server_address:"",server_data_cap:"",server_ip:"",site_id:"",site_url:"",stg_server_address:"",user_id:"",user_name:"",user_role:8,user_uri:"",option:0,bind_number:""},firewallmode:3,servertype:3,confparam_url:"",language:"",stgaddress:"",codec_param:{encodeVerType:30,maxBitRate:2048,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:30,maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:30}},this.bigParam=null,window.onMobileDataConfCallback=this.onMobileDataConfCallback,this.dataConfStatus=E.DCONF_STATUS.NONE,this.bigParamRequestCount=0,this.myBindNo="",this.selfUserUri="",this.userBindNum="",this.shareService=null,this.memberService=new N.default,this.leftDataConfCallback=null}return(0,_.default)(e,[{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareService){e.next=3;break}return e.next=3,this.shareService.closeWBTab();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentStatusUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupDataConfSdk;case 2:return n=e.sent,r="<root><component>"+t+"</component><index>"+this.m_user_id+"</index><sender>"+this.m_user_id+"</sender><status>1</status><src>2</src></root>",b.info("componentStatusUpdate ",r),e.next=7,n.confUpdateParam(this.m_confHandle,"uc_component_status_update",r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateDataShareOwner",value:function(e){this.memberService&&this.memberService.updateDataShareOwner(e)}},{key:"handlePingCompleteResult",value:function(e){b.info("handlePingCompleteResult start")}},{key:"handleStarJoinConf",value:function(e){b.info("handleStarJoinConf")}}]),e}();t.default=O},1662:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(100),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(4),h=r(d),p=n(5),_=r(p),C=n(1116),v=r(C),m=window.Logger("conf")("model/confutil"),S=function(){function e(){(0,h.default)(this,e)}return(0,_.default)(e,null,[{key:"getPromise",value:function(){var e={};return e.promise=new l.default(function(t,n){e.resolve=t,e.reject=n}),e}},{key:"oneKeyEnterConfTup",value:function(){function t(e,t,r,a){return n.apply(this,arguments)}var n=(0,u.default)(o.default.mark(function t(n,r,a,i){var c,u,f,l,d,h,p,_,C,S,g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c={errorCode:-1,callId:""},m.info("one[Key]EnterConfTup isVideo: "+i),t.next=4,new coreTup.HWTupCall;case 4:if(u=t.sent,!v.default.getInterfaceToOneKeyEnterConf()){t.next=16;break}return f={pstconfparam:{confid:r,access_code:n,conf_paswd:a},call_type:!1===i?0:1},t.next=9,u.oneKeyEnterConf(f);case 9:l=t.sent,d=void 0,d=l&&0===l.result?["oneKeyEnterConf",1]:["oneKeyEnterConf",0,l.result],coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_JOIN,d),l&&0===l.result?(c.errorCode=0,l&&l.param&&l.param.callID&&(c.callId=l.param.callID)):(l&&(c.errorCode=l.result),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),m.info("one[Key]EnterConf fail, res = "+(0,s.default)(l))),t.next=53;break;case 16:if(h=n+"*"+a+"#",g&&v.default.getDeployMode()===constant.MEETING_NET_TYPE.SMC_MEETING&&(h=n+r+"*"+a),p=e.getPromise(),u.setNotifyFunc(98308,function(e){p.resolve(e)}),_=e.getPromise(),u.setNotifyFunc(98306,function(e){_.resolve(e)}),C=null,!v.default.getInterfaceToStartVipCall()||!i){t.next=29;break}return t.next=26,u.startVipCall(h,i,this.callInfo.addrVip);case 26:C=t.sent,t.next=32;break;case 29:return t.next=31,u.startCall(h,i);case 31:C=t.sent;case 32:if(m.info("start call result = "+C.result),!C||0!==C.result){t.next=37;break}C.param&&(c.callId=C.param.call_id),t.next=40;break;case 37:return C&&(c.errorCode=C.result),u.setNotifyFunc(98308,null),t.abrupt("return",c);case 40:return t.next=42,_.promise;case 42:if(S=t.sent,m.info("CALL_E_EVT_CALL_STARTCALL_RESULT result = "+S.param.result),!S||!S.param||0!==S.param.result){t.next=51;break}return t.next=47,p.promise;case 47:c.errorCode=0,u.setNotifyFunc(98308,null),t.next=53;break;case 51:S&&S.param?c.errorCode=S.param.result:m.error("startCallResult fail ="+(0,s.default)(S)),u.setNotifyFunc(98308,null);case 53:return t.abrupt("return",c);case 54:case"end":return t.stop()}},t,this)}));return t}()}]),e}();t.default=S},1663:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(1117),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),p=window.Logger("reCallModel")("impl"),_=function(){function e(t,n){(0,u.default)(this,e),this.recallTimer=null,this.savedRecallInfo=t,this.reCallTerminateCallBack=n,this.savedRecallConfStateInfo=null}return(0,l.default)(e,[{key:"saveStateBeforeRecall",value:function(){var e=$getState().call,t=e.isMuteMic,n=e.isSpeaker,r=e.isMuteSpk,a=e.isOpenCamera,o=$getState().conf.isConfMicMute,i={isMuteMicRecall:t||o,isMuteSpkRecall:r,isSpeaker:n,isCloseCameraRecall:!a};this.savedRecallConfStateInfo=i}},{key:"startReCall",value:function(){coreCall.changeNoStreamEndcall(0),this.saveStateBeforeRecall(),$dispatch(coreUi.changeIsRecalling(!0));var e=6e4;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(e=45e3);var t=this;this.recallTimer=setTimeout(function(){window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?p.info("[IT-Meeting] recall more than 30s, stop recall and leave conf"):p.info("recall already keep more than 60s, leave conf"),t.reCallTerminateCallBack()},e),this.startReToConf()}},{key:"startReToConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("startReToConf"),e.next=3,h.leaveConf();case 3:p.info("leave conf suc"),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.changesvcRecallorNot(!0)),$dispatch(coreUi.changeSvcNativeToJS({})),this.reCallEnterConf();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallEnterConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreAccount.getLoginModel().isSipRegSuc()){e.next=4;break}return p.error("reCallEnterConf,is not Registered, can not recall"),e.abrupt("return");case 4:return e.next=6,coreSecurity.decryptKMC(this.savedRecallInfo.conf_paswd);case 6:return n=e.sent,p.info("decryptKMC suc"),r=n&&n.param&&n.param.PlainText||"",a={isCloseCameraDe:this.savedRecallConfStateInfo.isCloseCameraRecall,isMuteMicDe:1===this.savedRecallConfStateInfo.isMuteMicRecall,isMuteSpkDe:this.savedRecallConfStateInfo.isMuteSpkRecall,speakerMode:this.savedRecallConfStateInfo.isSpeaker?1:0},i={confAcs:this.savedRecallInfo.access_code,confId:this.savedRecallInfo.confid,confPwd:r,isVideo:this.savedRecallInfo.isVideo,deviceSet:a,isVMR:this.savedRecallInfo.isVMR},e.next=13,h.oneKeyEnterConfService(i);case 13:s=e.sent,s?p.info("startReToConf suc"):(p.error("startReToConf fail, need to startReToConf again"),this.startReToConf());case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"terminateReCall",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("terminateReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallTerminate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("reCallTerminate"),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.itWeLinkNotifyCallEnded(0,language.THE_CALL_FAILED_CALL_ENDED):alert(language.THE_CALL_FAILED_CALL_ENDED),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t="60s No Stream",coreConf.meetingHWreCallTimeOut(t)),coreConf.actionLeaveConf(),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallSucToStopReCall",value:function(){p.info("reCallSucToStopReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1))}}]),e}();t.default=_},1664:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=window.Logger("conf/svc")("model"),h=function(){function e(){(0,u.default)(this,e),this.ssrcRange={min:0,max:24},this.needChangeSSRC=!1,this.isInited=!1}return(0,l.default)(e,[{key:"getSsrcRange",value:function(){return this.ssrcRange}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInited){e.next=3;break}return d.info("already init,so return"),e.abrupt("return");case 3:return d.info("svc init,callId = "+handlePhoneNumber(t)),this.isInited=!0,this.callId=t,window.hasDealAttendeeUpdateEvent=0,e.next=9,this.changeBandMode();case 9:return e.next=11,this.setResolution();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBandMode",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return d.info("changeBandMode is no need for bigwin"),e.abrupt("return");case 3:return d.info("changeBandMode start"),e.next=6,coreCall.getBasicBandInfo(this.callId);case 6:t=e.sent,d.info("svcModeBand is ",t),t>0&&t<1024?($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.LOW_BAND)),window.CLIENTCONFIG.ISWIN?$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE))):t<2048&&t>=1024&&($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.MIDDLE_BAND)),$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE)));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"setResolution",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("svc setResolution start"),window.CLIENTCONFIG.ISMOBILE?coreConf.SvcAttendanceManager.setMobileMaxEncodeResolution(this.callId):coreConf.SvcAttendanceManager.setDesktopMaxEncodeResolution(),e.next=4,coreConf.SvcAttendanceManager.setMaxWatchResolutionByLevelId(this.callId);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeSsrcRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.needChangeSSRC)return void d.info("already needChangeSSRC, so return");t&&(this.needChangeSSRC=!0);var n={min:0,max:24};if(isNullOrEmpty(e.svc_lable)||(n={min:e.svc_lable[0],max:e.svc_lable[1]}),isNullOrEmpty(e.svc_lables)||(n={min:e.svc_lables[0],max:e.svc_lables[1]}),n.min>=n.max){var r=n.max;n.max=n.min,n.min=r}d.info("ssrcRange min is "+n.min+",max is "+n.max),this.ssrcRange=n,coreCommon.Observer.publish("changeSsrcRange",n)}}]),e}();t.default=h},1665:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),i=n(100),s=r(i),c=n(98),u=r(c),f=n(1),l=r(f),d=n(2),h=r(d),p=n(4),_=r(p),C=n(5),v=r(C),m=n(234),S=n(186),g=n(413),E=n(953),w=window.Logger("conf")("logic/video/AVCNativeManager"),I=function(){function e(){(0,_.default)(this,e),this.needDestroy=!1,this.needDestroyBfcp=!1,this.needCreateRemoteWin=!1,this.needUpdateLocalWinCallId=!1,this.isInCreateBfcp=!1,this.callId=0,this.avcFrameHandles=0,this.localVideoHwnd=0,this.remoteVideoHwnd=0,this.avcBfcpHwnd=0}return(0,v.default)(e,[{key:"getAvcFrameHandles",value:function(){return this.avcFrameHandles}},{key:"getLocalVideoHwnd",value:function(){return this.localVideoHwnd}},{key:"getRemoteVideoHwnd",value:function(){return this.remoteVideoHwnd}},{key:"getAvcBfcpHwnd",value:function(){return this.avcBfcpHwnd}},{key:"initCallInterface",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t,n,r){var a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("initCallInterface callId = "+t+",mode = "+n+",version = "+r),e.next=3,m.NativeInterface.initNativeScreen(n,r,window.langcode);case 3:if(!((a=e.sent)>0)){e.next=32;break}if(!this.needDestroy){e.next=9;break}return w.info("initCallInterface needDestroy is true"),m.NativeInterface.uninitNativeScreen(a),e.abrupt("return",-1);case 9:if($getState().login.sipLoginOnly?delegate.winHide():delegate.winMinimize(),this.avcFrameHandles=a,o=[{type:0}],0===n&&(o[0].remoteUser=$getState().call.userInfo.name),0!==(i=this.localVideoHwnd)){e.next=21;break}return e.next=17,m.NativeInterface.createWindows(a,1,0,o);case 17:s=e.sent,w.info("localWnd 41"+s+",this.needUpdateLocalWinCallId = "+this.needUpdateLocalWinCallId),i=s[0].hwnd,this.needUpdateLocalWinCallId&&this.updateLocalwindowCallId(this.callId);case 21:return this.localVideoHwnd=i,i>0&&(w.info("NativeInterface.setLocalWindow"),m.NativeInterface.setLocalWindow(t,i)),c=$getState().conf.isEnterDataConf,S.SvcAtdManager.reportIsDataConf(c,!0),this.updateCameraList(),this.initAvcParams(),this.needCreateRemoteWin&&this.initRemotWindow(this.callId),S.SvcAtdManager.setIsSupportChatNative(a),e.abrupt("return",0);case 32:return w.info("init AVC video native frame failed,please check!"),e.abrupt("return",-1);case 34:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateCameraList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=-1,n=$getState().call.cameraDevicesList,t=-1===a?$getState().setting.camIndex:a,r={},r=(0,u.default)(r,{camera_devices:{camIndex:t,cameraDevicesList:n}}),this.setAvcParam(r);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"initAvcParams",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,h,p,_,C,v,m,S,I,T,N,b,O,A,R,y,L,M,D,x;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.getCameraDevices();case 2:return t=$getState().conf,n=t.confSubject,r=t.confServerId,a=t.vmrId,o=t.memberListInfo,isNullOrEmpty(a)||(r=a),g.ToolbarManager.setChairmanState(o,!0),isNullOrEmpty(n)&&(n=$getState().call.userInfo.name,isNullOrEmpty(n)&&(n=$getState().call.userInfo.account)),i={set_window_title:{title:n,confID:r}},c=$getState().conf.setPreviewsCount,c>0&&(i=(0,u.default)(i,{set_conf_userinfo:{count:c}})),i=(0,u.default)(i,{vmr_right:!!$getState().conf.showvmrornot}),f=$getState().conf,d=f.isSupportAS,h=f.isConfMicMute,p=f.currentConfInfo,_=$getState().call,C=_.isOpenCamera,v=_.isMuteMic,m=_.isMuteSpk,S=_.cameraNum,I=_.cameraDevicesList,T=_.spkDevicesList,N=_.micDevicesList,b=$getState().setting,O=b.camIndex,A=b.spkIndex,R=b.micIndex,y=v||h?0:100,m=m?1:0,i=(0,u.default)(i,{isSupportAS:d?1:0}),i=(0,u.default)(i,{init_device_state:{isMuteSpk:m,mic_volume:y,camera_on:S>0?C:-1}}),i=(0,u.default)(i,{camera_devices:{camIndex:O,cameraDevicesList:I}}),i=(0,u.default)(i,{mic_devices:{micIndex:R,micDevicesList:N}}),i=(0,u.default)(i,{spk_devices:{spkIndex:A,spkDevicesList:T}}),i=(0,u.default)(i,{set_use_meeting:{use_meeting:window.CLIENTCONFIG.USE_MEETING}}),i=(0,u.default)(i,{general_pwd:p.general_pwd?p.general_pwd:null}),i=(0,u.default)(i,{is_free_user:$getState().login.isFreeUser}),i=(0,u.default)(i,{is_in_conf:""===$getState().conf.confHandle?0:1}),L=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,M=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,L?i=(0,u.default)(i,{has_delete_member:0}):M&&(i=(0,u.default)(i,{has_delete_member:1})),D=JSON.parse((0,s.default)(i)),void 0!==D.set_window_title&&(x=D.set_window_title.title,D.set_window_title.title=x?x.substr(0,1)+"***":""),D.general_pwd=D.general_pwd?"***":"null",w.info("AVC initAvcParams param = "+(0,s.default)(D)),E.EncoderAdpt.clear(),i=(0,u.default)(i,{calc_cpu_rate:{open:1,duration_ms:5e3}}),e.next=35,this.setAvcParam(i);case 35:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateLocalwindowCallId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("updateLocalwindowCallId",t),n=this.localVideoHwnd,n>0?(w.info("NativeInterface.setLocalWindow"),m.NativeInterface.setLocalWindow(t,n)):(this.needUpdateLocalWinCallId=!0,this.callId=t,w.info("updateLocalwindowCallId need wait local avc win create"));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"initRemotWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.info("initRemotWindow",t),!(this.avcFrameHandles>0)){e.next=13;break}if(n=[{type:1}],0!==(r=this.remoteVideoHwnd)){e.next=10;break}return e.next=7,m.NativeInterface.createWindows(this.avcFrameHandles,1,0,n);case 7:a=e.sent,r=a[0].hwnd,w.info("remoteHwnd 69",r,a);case 10:r>0&&(this.remoteVideoHwnd=r,m.NativeInterface.setRemoteWindow(t,r)),e.next=16;break;case 13:this.needCreateRemoteWin=!0,this.callId=t,w.info("initRemotWindow need wait avc win create");case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"initBfcpWindow",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,f,d,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.info("initBfcpWindow"),!(this.avcBfcpHwnd>0)){e.next=4;break}return w.info("AVC bfcp native frame have already created return!"),e.abrupt("return");case 4:if(!this.isInCreateBfcp){e.next=7;break}return w.info("AVC bfcp native frame is in creating return!"),e.abrupt("return");case 7:return this.isInCreateBfcp=!0,r=constant.AVC_VIEW_MODE.BFCP_MODE,e.next=11,m.NativeInterface.initNativeScreen(r,h,window.langcode,!0);case 11:if(!((a=e.sent)>0)){e.next=30;break}if(this.avcBfcpHwnd=a,this.isInCreateBfcp=!1,!$getState().conf.isDataConfSharing){e.next=19;break}return w.info("isDataConfSharing is true  destroy bfcpfHwnd "),this.closeBfcpFrame(),e.abrupt("return");case 19:if(!this.needDestroyBfcp){e.next=23;break}return w.info("initBfcpWindow need destroy bfcpfHwnd"),this.closeBfcpFrame(),e.abrupt("return");case 23:return e.next=25,m.NativeInterface.createWindows(a,1,0,[{type:2}]);case 25:o=e.sent,o&&o.length>0&&(m.NativeInterface.setBFCPWindow(t,o[0].hwnd,n),i=$getState().conf,s=i.confSubject,c=i.confServerId,f=i.vmrId,isNullOrEmpty(f)||(c=f),d=(0,u.default)({},{set_window_title:{title:s,confID:c}}),m.NativeInterface.setParam(d,a),S.SvcAtdManager.setIsSupportChatNative(a)),(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN||window.isHubEnv)&&this.switchVideoToMin(),e.next=31;break;case 30:w.error("init bfcp avc win fail");case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeBfcpFrame",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcBfcpHwnd>0?(w.info("closeBfcpFrame close bfcp avc win"),m.NativeInterface.uninitNativeScreen(this.avcBfcpHwnd,!0),this.avcBfcpHwnd=0,this.needDestroyBfcp=!1,this.isInCreateBfcp=!1):this.isInCreateBfcp&&(w.info("closeBfcpFrame need destory bfcp avc win after create"),this.needDestroyBfcp=!0);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"nativeNotifyUpdateBfcpFrameWnd",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.NativeInterface.setBFCPWindow($getState().call.callId,t,!1);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCallInterface",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.avcFrameHandles>0?(w.info("closeCallInterface close avc win"),appService.showMainWindow(!0),m.NativeInterface.uninitNativeScreen(this.avcFrameHandles),this.avcFrameHandles=0):(this.needDestroy=!0,w.info("closeCallInterface need destory avc win after create")),e.abrupt("return",0);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"setAvcParam",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcFrameHandles>0&&t&&"{}"!==(0,s.default)(t)&&(w.info("NativeInterface.setParam is avcFrameHandles, avcFrameHandles"),m.NativeInterface.setParam(t,this.avcFrameHandles));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"setSubject",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("setSubject confSubject = "),n=$getState().conf,r=n.confServerId,a=n.vmrId,isNullOrEmpty(a)||(r=a),o=(0,u.default)({},{set_window_title:{title:t,confID:r}}),this.setAvcParam(o);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"setConfServerId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("setConfServerId confServerId = "+t),n=(0,u.default)({},{set_window_title:{title:$getState().conf.confSubject,confID:t}}),this.setAvcParam(n);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSwitchToVideo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===$getState().call.callId){e.next=3;break}return w.error("The callid is not find."),e.abrupt("return");case 3:return w.info("handleSwitchToVideo"),w.info("cwp init initCallInterface handleSwitchToVideo "),e.next=7,this.initCallInterface(t,1,1);case 7:return n=e.sent,this.initRemotWindow(t),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMin",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return w.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(w.info("switchVideoToMin in avc"),t=$getState().conf,n=t.isShowMinWin,r=t.svcMiniViewMode,!n){e.next=8;break}return window.isDataSharing&&(this.setViewMode(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),w.info("avc switchVideoToMin share owner is self,reSet layout = "+(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE+256))),e.abrupt("return");case 8:0===r&&(r=constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),this.setViewMode(r),w.info("changeIsShowMinWin true 3"),$dispatch(coreUi.changeIsShowMinWin(!0));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return w.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(w.info("switchVideoToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),w.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"setViewMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.avcFrameHandles,n>0&&(r=n),a=0,window.isDataSharing&&(a=256),r>0?(m.NativeInterface.setViewMode(r,t+a),[constant.AVC_VIEW_MODE.MIN_WIN_MIN,constant.AVC_VIEW_MODE.MIN_WIN_SINGLE,constant.AVC_VIEW_MODE.MIN_FLOAT_BIG_ONE].includes(t)&&$dispatch(coreUi.changeConfMiniViewMode(t))):w.info("video frame hwnd is 0,please check!");case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCPURate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.cpu&&(w.info("handleCPURate:",E.EncoderAdpt),E.EncoderAdpt.feed(t.cpu));case 1:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new o.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=I},1666:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"cutstr",value:function(e,t){var n=0,r=0,a=String();r=e.length;for(var o=0;o<r;o++){var i=e.charAt(o);if(n++,escape(i).length>4&&n++,a=a.concat(i),n>=t)return a=a.concat("...")}if(n<t)return e}}]),e}();t.default=c},1667:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(122),o=r(a),i=n(100),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),h=r(d),p=n(5),_=r(p),C=n(209),v=n(1668),m=r(v),S=n(400),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(S),n(186),n(401)),E=n(602),w=window.Logger("dataconf")("model"),I=function(){function e(t,n){(0,h.default)(this,e),T.call(this),this.m_confHandle=t,this.callId=n,this.m_user_id=0,this.loadDocSharePromise=new PromiseObject,this.hasLoadDataShareComp=!1,this.isInRemoteControlling=!1,this.isUnderRemoteControlling=!1,this.remoteControlUserNum="",this.shareOwnerUserId="",this.m_component=0,this.isDataShareStarted=!1,this.isUsePrimarySize=!1,this.m_dspageid=0,this.m_dsdocid=0,this.m_pagewidth=0,this.m_pageheight=0,this.docSharingDocID=0,this.wbService=null,this.isRecevingAppshare=!1,this.docSharingFilePath="",this.bigwinRealRectLeft=0,this.bigwinRealRectRight=0,this.bigwinRealRectTop=0,this.bigwinRealRectBottom=0,this.sharingType=constant.ConfSharingType.None,this.isStoppingSharing=!1,this.memberService=null,this.hasCloseShareDataOperate=!1,this.shareMonitorType=0,this.oldShareAppHwnd=0,this.shareAppHwnd=0}return(0,_.default)(e,[{key:"isRecevingWBSharing",value:function(){return this.isInWBSharing()&&this.wbService.m_ownerUserid!==this.m_user_id}},{key:"isRecevingDocSharing",value:function(){return this.isInDocSharing()&&this.docSharingDocID!==this.m_dsdocid}},{key:"isRecevingScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId!==this.m_user_id}},{key:"isRecevingSharing",value:function(){return this.isRecevingWBSharing()||this.isRecevingDocSharing()||this.isRecevingScreenSharing()}},{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwTupDataConfSdk;case 2:return t=e.sent,e.next=5,t.sendNotifyAllUsersCloseSharingTab(this.m_confHandle,this.m_user_id,25);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"BeStopedWBDoc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.wbService){e.next=13;break}if(t=this.wbService,!0!==t.m_isChairman){e.next=11;break}return n=t.m_docid,r=t.m_confHandle,this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),e.next=9,m.default.deleteWBDoc(this.confHandle,n);case 9:e.next=13;break;case 11:this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"dealInviteUserWBSharing",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("be invited to start WB share"),coreCommon.Observer.publish("OnDealInviteUserWBSharing");case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),T=function(){var e=this;this.initShareService=(0,l.default)(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.registerTupNotify();case 2:case"end":return t.stop()}},t,e)})),this.registerTupNotify=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("[share] registerTupNotify"),t.next=3,new coreTup.HwTupDataConfSdk;case 3:n=t.sent,n.setNotifyFunc(40001009,e.handleLoadComponentResult),n.setNotifyFunc(40001031,e.loadComponentReturn),n.setNotifyFunc(40002111,e.onAsOnScreenData),n.setNotifyFunc(40002166,e.onAsScreenDataToBfcpData),n.setNotifyFunc(40002112,e.onAsOnScreenSizeChange),n.setNotifyFunc(40002115,e.onAsOnScreenKeyFrameRecv),n.setNotifyFunc(40001215,e.handledevcapable),n.setNotifyFunc(40001008,e.handleUserMessageUpdateResult),n.setNotifyFunc(40002167,e.handleApplistResult),n.setNotifyFunc(40002201,e.handleDocShareDocNew),n.setNotifyFunc(40002206,e.handleDsCurrentPage),n.setNotifyFunc(40002801,e.handleWBOnNewDoc),n.setNotifyFunc(40002802,e.handleWBOnDeleteDoc),n.setNotifyFunc(40002805,e.handleWBOnCurrentPageInd),n.setNotifyFunc(40002806,e.handleWBOnCurrentPage),n.setNotifyFunc(40002205,e.handleDsCurrentPageInd),n.setNotifyFunc(40003e3,e.handleOperateTokenResult),n.setNotifyFunc(40002121,e.onAsOnSharingState),n.setNotifyFunc(40002122,e.onAsOnSharingSession),n.setNotifyFunc(40002162,e.handleDisplayInfoResult),n.setNotifyFunc(40002163,e.handleDecodeBfcpSuccessInDataConf),n.setNotifyFunc(40002151,e.handleSharingUserDefineMsg),n.setNotifyFunc(40002123,e.handlePrivilegeState);case 27:case"end":return t.stop()}},t,e)})),this.onAsOnScreenData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void w.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenData",t):void w.info("data share has stoped")},this.onAsScreenDataToBfcpData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void w.error("onAsScreenDataToBfcpData confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenDataToBfcpData",t):void w.info("onAsScreenDataToBfcpData share has stoped")},this.onAsOnScreenSizeChange=function(t){if(t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void w.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle);coreCommon.Observer.publish("OnSharingScreenSizeChange",t)},this.onAsOnScreenKeyFrameRecv=function(t){e.setDataConfParams({keyframerecv:1}),coreCommon.Observer.publish("onReceivedScreenKeyFrame",t),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,null,[],!0)},this.handledevcapable=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o,i,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse((0,s.default)(n)),void 0!==r.param.m_phone_user_name&&(a=r.param.m_phone_user_name,r.param.m_phone_user_name=handlePhoneNumber(a)),r.param.m_binding_nid&&(o=r.param.m_binding_nid,r.param.m_binding_nid=handlePhoneNumber(o)),r.param.m_nDeviceID&&(i=r.param.m_nDeviceID,r.param.m_nDeviceID=handlePhoneNumber(i)),r.param.m_uri&&(c=r.param.m_uri,r.param.m_uri=handlePhoneNumber(c)),w.info("handledevcapable,data = ",r);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleUserMessageUpdateResult=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o,i,s,c,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.info("handleUserMessageUpdateResult start",n),!n.param||"uc_component_status_update"!==n.param.msg_name){t.next=19;break}if(r=new DOMParser,!(a=n.param.msg)){t.next=19;break}if(o=r.parseFromString(a,"text/xml"),i=parseInt(o.getElementsByTagName("status")[0].childNodes[0].nodeValue),s=parseInt(o.getElementsByTagName("component")[0].childNodes[0].nodeValue),w.info("handleUserMessageUpdateResult status: "+i+" component: "+s),0!==i||0!==s){t.next=12;break}return w.info("webclient send 00,ignore"),t.abrupt("return");case 12:return t.next=14,new C.HwNativeWndSdk;case 14:c=t.sent,c.updateComponentStatus(s,i),e.m_component=s,f={component:s,status:i},coreCommon.Observer.publish("updateComponentStatus",f);case 19:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleApplistResult=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("applistResult",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDocShareDocNew=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w.info("DocShare handleDocShareDocNew ",n),coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:2}),e.docSharingDocID!==n.param.value1&&e.isExistAnySharing()&&coreCommon.Observer.publish("onCloseAllSharing",{});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.isExistAnySharing=function(){return!0===e.isInWBSharing()||e.isInDocSharing()||e.isInScreenSharing()},this.isInWBSharing=function(){return null!==e.wbService&&(e.wbService.m_docid>0&&e.wbService.m_pageid>0&&e.wbService.m_ownerUserid>0)},this.isInDocSharing=function(){return e.m_dsdocid>0&&e.m_dspageid>0},this.isInScreenSharing=function(){return e.shareOwnerUserId>0&&!0===e.isDataShareStarted},this.isInSendDocSharing=function(){return w.info("isInSendDocSharing docSharingDocID = ",e.docSharingDocID),0!==e.docSharingDocID&&e.docSharingDocID===e.m_dsdocid},this.isInReceiveDocSharing=function(){return 0===e.docSharingDocID&&0!==e.m_dsdocid},this.handleDsCurrentPageInd=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g.DFConfig.isDocShareEnabled()){t.next=3;break}return w.info("handleDsCurrentPageInd doc share unenable"),t.abrupt("return");case 3:if(w.info("handleDsCurrentPageInd: ",n),e.m_component===E.IID_COMPONENT.DS){t.next=6;break}return t.abrupt("return");case 6:if(!n.param){t.next=14;break}return t.next=9,new coreTup.HwTupDataConfSdk;case 9:if(r=t.sent,0===n.param.value1||0===n.param.value2){t.next=13;break}return t.next=13,r.dsSetCurrentPage(e.m_confHandle,E.IID_COMPONENT.DS,n.param.value1,n.param.value2,0);case 13:0===n.param.value1&&(e.m_dsdocid=0,e.m_dspageid=0,a={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",a));case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDsCurrentPage=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g.DFConfig.isDocShareEnabled()){t.next=3;break}return w.info("handleDsCurrentPage doc share unenable"),t.abrupt("return");case 3:return w.info("handleDsCurrentPage: ",n),t.next=6,new coreTup.HwNativeWndSdk;case 6:r=t.sent,r.setDsCurrentPage(n.param.confHandle,n.param.value1,n.param.value2),e.m_dsdocid=n.param.value1,e.m_dspageid=n.param.value2,a={docid:n.param.value1,pageid:n.param.value2,issender:e.m_dsdocid===e.docSharingDocID},coreCommon.Observer.publish("onShowNativeDSPage",a);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnNewDoc=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("handleWBOnNewDoc ",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnDeleteDoc=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPageInd=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.info("handleWBOnCurrentPageInd ",n),!(n.param.value1>0&&n.param.value2>0)){t.next=4;break}return t.next=4,e.setWBLocalCurrentPageLocal(n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=6;break}return w.info("setWBLocalCurrentPageLocal wbService not null"),e.wbService.m_docid=n.param.value1,e.wbService.m_pageid=n.param.value2,t.next=6,e.wbService.setWBLocalCurrentPageLocal();case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPage=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w.info("handleWBOnCurrentPage ",n),null!==e.wbService&&(e.wbService.m_isChairman?coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!0}):coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!0}));case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopWBDoc=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=14;break}if(!0!==e.wbService.m_isChairman){t.next=12;break}return n=e.wbService.m_docid,r=e.wbService.m_confHandle,e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),t.next=8,e.requestWBToken(!1);case 8:return t.next=10,m.default.deleteWBDoc(e.m_confHandle,n);case 10:t.next=14;break;case 12:e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 14:case"end":return t.stop()}},t,e)})),this.requestWBToken=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("requestWBTok isAdd ",n),t.next=3,new coreTup.HwTupDataConfSdk;case 3:return r=t.sent,t.next=6,r.asSetOperateToken(e.m_confHandle,e.m_user_id,!0===n?constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD:constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.WHITE_BOARD_SHARE);case 6:a=t.sent,w.info("requestWBTok ret ",a);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.componentStatusUpdate=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return r=t.sent,a="<root><component>"+n+"</component><index>"+e.m_user_id+"</index><sender>"+e.m_user_id+"</sender><status>1</status><src>2</src></root>",w.info("componentStatusUpdate ",a),t.next=7,r.confUpdateParam(e.m_confHandle,"uc_component_status_update",a);case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.resetConfSharingType=function(){e.sharingType=constant.ConfSharingType.None,e.docSharingFilePath=""},this.setConfSharingType=function(t,n){switch(w.info("setConfSharingType share type: "+t+"  file path: "+n),e.docSharingFilePath="",t){case 0:e.sharingType=constant.ConfSharingType.Program;break;case 1:e.sharingType=constant.ConfSharingType.Document,e.docSharingFilePath=n;break;case 2:e.sharingType=constant.ConfSharingType.Desktop;break;default:e.sharingType=constant.ConfSharingType.None}},this.getStreamInfo=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(n=t.sent,r=null,!(e.m_user_id>0)){t.next=10;break}return t.next=7,n.getStreamInfo(e.m_confHandle);case 7:r=t.sent,t.next=11;break;case 10:w.error("getStreamInfo failed, confHandle : "+e.m_confHandle);case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t,e)})),this.asStart=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info(" asStart"),t.next=3,new coreTup.HwTupDataConfSdk;case 3:r=t.sent,r.asSetSharetype(e.m_confHandle,0),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(w.info("setDataShareRealRect start11"),r.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):w.info("setDataShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom),e.setDataShareScreenGDIEXType(),r.setDataCodecVersion(e.m_confHandle,g.DFConfig.dataCodeccVersion),r.asStart(e.m_confHandle),coreCommon.Observer.publish("OnSharingSessionStart",n);case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareScreenGDIEXType=(0,l.default)(u.default.mark(function t(){var n,r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=10;break}return t.next=3,new coreTup.HwTupDataConfSdk;case 3:return n=t.sent,r=g.DFConfig.captureType,w.info("setDataShareScreenGDIEXType,type = "+r),t.next=8,n.setDataShareScreenCaptureType(e.m_confHandle,r);case 8:a=t.sent,w.info("setDataShareScreenGDIType,ret = ",a);case 10:case"end":return t.stop()}},t,e)})),this.setDataShareScreenPicQuality=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=6;break}return w.info("setDataShareScreenPicQuality success, val : "+n),t.next=4,new coreTup.HwTupDataConfSdk;case 4:r=t.sent,r.setDataShareScreenPicQuality(e.m_confHandle,n);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startShare=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=36;break}return t.next=6,e.componentStatusUpdate(constant.ConfSharingType.Desktop);case 6:return t.next=8,new coreTup.HWTupCall;case 8:return a=t.sent,a.setStgTunnel(e.callId,1),e.setCloseShareDataOperate(!1),w.info("startShareScreen start, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id),t.next=14,r.setDataCodecVersion(e.m_confHandle,g.DFConfig.dataCodeccVersion);case 14:return t.next=16,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 16:if(o=t.sent,w.info("asSetOperate done"),!o||!o.param||void 0===o.param.result){t.next=32;break}if(0!==o.param.result){t.next=23;break}w.info("asSetOperate sucess"),t.next=30;break;case 23:if(103!==o.param.result){t.next=29;break}return t.next=26,r.asSetOwner(1,e.m_confHandle,e.m_user_id);case 26:w.info("asSetOwner ret done"),t.next=30;break;case 29:w.info("asSetOperate result"+o.param.result);case 30:t.next=33;break;case 32:w.error("asSetOperate fail "+(0,s.default)(o));case 33:30===n?r.setDataShareScreenPicQuality(e.m_confHandle,n):r.setDataShareScreenCaptureType(e.m_confHandle,g.DFConfig.captureType),t.next=38;break;case 36:coreCommon.Observer.publish("OnStartShareFailed"),w.error("startShareScreen failed, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id);case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopShareScreen=(0,l.default)(u.default.mark(function t(){var n,r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w.info("stopShareScreen isStoppingSharing = "+e.isStoppingSharing),n=0;case 2:if(!(e.isStoppingSharing&&n<10)){t.next=8;break}return t.next=5,sleep(300);case 5:n++,t.next=2;break;case 8:return e.isStoppingSharing=!0,t.next=11,new coreTup.HwTupDataConfSdk;case 11:if(r=t.sent,!(e.m_user_id>0)){t.next=48;break}if(w.info("stopShareScreen start, confHandle : "+e.m_confHandle),!0===window.isByShareState){t.next=21;break}return t.next=17,r.asStop(e.m_confHandle);case 17:return t.next=19,e.stopDocShare();case 19:t.next=23;break;case 21:window.isByShareState=!1,w.info("set by share state false");case 23:return t.next=25,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 25:if(a=t.sent,w.info("release asSetOperateTok done"),!a||!a.param){t.next=41;break}if(0!==a.param.result){t.next=32;break}w.error("asSetOperateTok success "),t.next=39;break;case 32:if(103!==a.param.result){t.next=38;break}return t.next=35,r.asSetOwner(0,e.m_confHandle,e.m_user_id);case 35:w.info("release asSetOwner ret done"),t.next=39;break;case 38:w.error("asSetOperateTok err ",a);case 39:t.next=42;break;case 41:w.error("asSetOperateTok fail ",a);case 42:return t.next=44,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 44:w.info("stopShareScreen operate over"),coreCommon.Observer.publish("onStopShareFinished"),t.next=50;break;case 48:window.isByShareState=!1,w.error("stopShareScreen failed, confHandle : "+e.m_confHandle);case 50:e.isStoppingSharing=!1;case 51:case"end":return t.stop()}},t,e)})),this.setShareType=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return w.info("setShareType start, confHandle : "+e.m_confHandle),t.next=7,r.asSetSharetype(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?w.info("setShareType failed, result = ",a.result):w.info("setShareType success, result = ",a.result),t.next=12;break;case 11:w.error("setShareType failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingDisplay=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return w.info("setSharingDisplay, confHandle, "+e.m_confHandle+", index = "+n),t.next=7,r.asSetSharingDisplay(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?w.info("setSharingDisplay failed, result = ",a.result):w.info("setSharingDisplay success, result = ",a.result),t.next=12;break;case 11:w.error("setSharingDisplay failed, confHandle : "+e.m_confHandle+", index = "+n);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setTransparentwindow=function(){var t=(0,l.default)(u.default.mark(function t(n,r){var a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(a=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return w.info("setTransparentwindow start, m_congetDisplayInfofhandle : "+e.m_confHandle),t.next=7,a.asSetTransparentwindow(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.param.result?w.info("setTransparentwindow failed, res = ",o):w.info("setTransparentwindow success"),t.next=12;break;case 11:w.error("setTransparentwindow failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setAppShareScreenParam=function(){var t=(0,l.default)(u.default.mark(function t(n,r){var a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(a=t.sent,!(e.m_user_id>0)){t.next=11;break}return w.info("setAppShareScreenParam start, confHandle : "+e.m_confHandle),t.next=7,a.setAppShareScreenParam(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.result?w.info("setAppShareScreenParam failed, result = ",o.result):w.info("setAppShareScreenParam success, result = ",o.result),t.next=12;break;case 11:w.error("setAppShareScreenParam failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setDataShareVersion=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return w.info("setDataShareVersion, confHandle : "+e.m_confHandle),t.next=7,r.setDataShareVersion(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?w.info("setDataShareVersion failed, result = ",a.result):w.info("setDataShareVersion success, result = ",a.result),t.next=12;break;case 11:w.error("setDataShareVersion failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.cancelSharingapp=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return r=t.sent,w.info("cancelSharingapp start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,r.asSetSharingapp(e.m_confHandle,n,0);case 6:a=t.sent,0!==a.result?w.info("cancelSharingapp failed, result = ",a.result):w.info("cancelSharingapp success, result = ",a.result);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingapp=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return r=t.sent,w.info("startShareScreen start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,new C.HwNativeWndSdk;case 6:return a=t.sent,t.next=9,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:E.NATIVE_DATA_PARAMTYPE.SET_APP_BG_COLOR});case 9:return t.next=11,r.asSetSharingapp(e.m_confHandle,n,1);case 11:o=t.sent,0!==o.result?w.info("setSharingapp failed, result = ",o.result):w.info("setSharingapp success, result = ",o.result);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setStart=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return n=t.sent,w.info("setStart start, confHandle : "+e.m_confHandle),e.setDataShareScreenGDIEXType(),t.next=7,n.asStart(e.m_confHandle);case 7:r=t.sent,0!==r.result?w.info("setStart failed, result = ",r.result):w.info("setStart success, result = ",r.result);case 9:case"end":return t.stop()}},t,e)})),this.setDataConfShareRealRect=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:n=t.sent,e.m_user_id>0&&(w.info("setDataConfShareRealRect, confHandle : "+e.m_confHandle),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(w.info("setDataConfShareRealRect start11"),n.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):w.info("setDataConfShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom));case 4:case"end":return t.stop()}},t,e)})),this.handleOperateTokenResult=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.info("[debug] data: ",n),1!==n.param.token_type||1!==n.param.msg_type||0===n.param.result){t.next=6;break}coreCommon.Observer.publish("onRequestOperateTokenFail"),w.info("request data tok failed, stop share"),t.next=49;break;case 6:if(0!==n.param.token_type||2!==n.param.msg_type||0!==n.param.user_type){t.next=12;break}w.info("recv bfcp data from dataConf, callid: ",e.callId),coreCommon.Observer.publish("BFCPDecodeSuc",e.callId,!0),e.handleDataToBfcpStart(),t.next=49;break;case 12:if(0!==n.param.token_type||3!==n.param.msg_type||0!==n.param.user_type){t.next=17;break}coreCommon.Observer.publish("BFCPDataStopRec",!0),e.handleDataToBfcpStop(),t.next=49;break;case 17:if(2!==n.param.token_type){t.next=49;break}if(1!==n.param.msg_type){t.next=22;break}0===n.param.result?(w.info("whiteboard tok request success"),e.createWBNewDocAndPage()):w.info("whiteboard tok request failed"),t.next=49;break;case 22:if(2!==n.param.msg_type||0!==n.param.result){t.next=43;break}if(!(n.param.user_id>0)){t.next=40;break}return w.info("whiteboard tok owner flag, userid :",n.param.user_id),t.next=27,e.stopDocShare();case 27:if(!e.isInScreenSharing()){t.next=34;break}return w.info("stop prev share when recv WB token"),r={},r.param={},r.param.value2=0,t.next=34,e.screenDataShareEnded(r);case 34:null===e.wbService&&(coreCommon.Observer.publish("onDataSharingStateChanged",!0),n.param.user_id===e.m_user_id?e.createWBNewDocAndPage():(w.info("whiteboard receive"),coreCommon.Observer.publish("onReceiveWhiteBoardShare"),e.wbService=new m.default,e.wbService.m_confHandle=e.m_confHandle,e.wbService.m_isChairman=!1)),null!==e.wbService&&(e.wbService.m_ownerUserid=n.param.user_id,w.info("wbService m_ownerUserid ",e.wbService.m_ownerUserid)),a=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):"",coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:E.IID_COMPONENT.WB,name:a}),t.next=41;break;case 40:w.info("whiteboard tok owner flag fail,userid==0");case 41:t.next=49;break;case 43:if(3!==n.param.msg_type||0!==n.param.result){t.next=49;break}if(w.info("whiteboard tok release "),null===e.wbService){t.next=49;break}return t.next=48,e.BeStopedWBDoc();case 48:coreCommon.Observer.publish("onDataSharingStateChanged",!1);case 49:w.info("receive operate result = "+n.param.result);case 50:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.createWBNewDocAndPage=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("createWBNewDocAndPage start"),e.prepareWBSharing(),e.componentStatusUpdate(512),e.wbService=new m.default,t.next=6,e.wbService.createWBNewDocAndPage(e.m_confHandle);case 6:return n=t.sent,!1===n&&(e.wbService=null),t.abrupt("return",n);case 9:case"end":return t.stop()}},t,e)})),this.prepareWBSharing=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return n=t.sent,r="<LoadedCom><LoadedCom>512</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.ConfSharingType.Document);case 8:case"end":return t.stop()}},t,e)})),this.prepareDocSharing=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return n=t.sent,r="<LoadedCom><LoadedCom>1</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.ConfSharingType.Document);case 8:case"end":return t.stop()}},t,e)})),this.setDocShareCurrentPage=function(){var t=(0,l.default)(u.default.mark(function t(n,r,a){var o,i,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n<0||r<0)){t.next=3;break}return w.info("DocShare set cur page param error!"),t.abrupt("return");case 3:return t.next=5,new coreTup.HwTupDataConfSdk;case 5:return o=t.sent,t.next=8,o.docShareGetPageIdByPageNo(e.m_confHandle,n,r);case 8:return i=t.sent,t.next=11,o.docShareSetCurPage(e.m_confHandle,n,i.param.pageNo,a?1:0);case 11:s=t.sent,w.info("tup_conf_ds_set_current_page res : ",s);case 13:case"end":return t.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.stopDocShare=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.info("stopDocShare start "),!(e.m_dsdocid>0)){t.next=16;break}if(!e.isInSendDocSharing()){t.next=11;break}return w.info("stopDocShare sender docshare"),t.next=6,new coreTup.HwTupDataConfSdk;case 6:return n=t.sent,t.next=9,n.docShareStop(e.m_confHandle,e.docSharingDocID);case 9:t.next=12;break;case 11:w.info("stopDocShare receiver docshare");case 12:e.docSharingDocID=0,e.m_dsdocid=0,r={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",r);case 16:w.info("stopDocShare end");case 17:case"end":return t.stop()}},t,e)})),this.onAsOnSharingSession=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o,i,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return w.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(w.info("onAsOnSharing[Session] , data : ",desensitive(n)),!n.param.user_id){t.next=36;break}return t.next=7,new C.HwNativeWndSdk;case 7:r=t.sent,r.updateComponentStatus(2,1),a=e.memberService.dataUserList,o="",i=0;case 12:if(!(i<a.length)){t.next=22;break}if(!a[i].user_id||a[i].user_id!==n.param.user_id){t.next=19;break}return o=a[i].user_num,s=n.param.user_id===e.m_user_id,e.shareOwnerUserId=n.param.user_id,coreCommon.Observer.publish("OnShareOwnerChange",{userNum:o,isSelf:s}),t.abrupt("break",22);case 19:i++,t.next=12;break;case 22:if(n.param.user_id!==e.m_user_id){t.next=34;break}if(!(e.shareAppHwnd>0)){t.next=30;break}w.info("onAsOnSharing[Session], setShareType and getApplist"),e.setShareType(1),e.getDisplayInfo(),e.getApplist(),t.next=32;break;case 30:return t.next=32,e.asStart(n);case 32:t.next=36;break;case 34:coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),w.info("onAsOnSharing[Session] asstart fail");case 36:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.onAsOnSharingState=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return w.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(w.info("onAsOnSharingState , data : ",n),1!==n.param.value2){t.next=38;break}if(w.info("isDataSharing false 7"),e.isRecevingAppshare=1===n.param.value1,0===n.param.value1&&(r=coreConf.getCurrentConfId(),coreUt.utEventStart(constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,null,[r])),window.isDataSharing=!1,!g.DFConfig.sendAnnotationEnable||n.param.annostate!==E.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=15;break}return w.info("onAsOnSharingState annostate, receive annotation"),e.setDataConfParams({annostate:1}),t.abrupt("return");case 15:if(!g.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=19;break}return w.info("onAsOnSharingState annostate,annotation stop"),e.setDataConfParams({annostate:0}),t.abrupt("return");case 19:return e.isDataShareStarted=!0,w.info("onAsOnSharingState , receive datashare"),t.next=23,new coreTup.HWTupCall;case 23:if(a=t.sent,a.setStgTunnel(e.callId,2),null===e.wbService){t.next=28;break}return t.next=28,e.stopWBDoc();case 28:if(!e.isInSendDocSharing()&&!e.isInReceiveDocSharing()){t.next=32;break}return t.next=31,e.stopDocShare();case 31:e.resetConfSharingType();case 32:coreCommon.Observer.publish("OnShareingStart",n),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),o=e.memberService.getMemberNameByUserId(e.shareOwnerUserId),coreCommon.Observer.publish("OnRemoteScreenShare",o),t.next=60;break;case 38:if(2!==n.param.value2){t.next=59;break}if(coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_DATA_SHARE,null,[1],!0),w.info("onAsOnSharingState , start datashare"),!g.DFConfig.sendAnnotationEnable||n.param.annostate!==E.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=48;break}return w.info("onAsOnSharingState , self receive annotation"),t.next=45,e.setDataConfParams({annostate:1});case 45:return t.abrupt("return");case 48:if(!g.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=52;break}return w.info("onAsOnSharingState , self stop annotation"),e.setDataConfParams({annostate:0}),t.abrupt("return");case 52:e.isDataShareStarted=!0,w.info("isDataSharing true 4"),window.isDataSharing=!0,coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),coreCommon.Observer.publish("OnSshareScreenOper",0),t.next=60;break;case 59:0===n.param.value2?e.isInScreenSharing()&&e.screenDataShareEnded(n):w.error("sharing state error");case 60:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.screenDataShareEnded=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("onAsOnSharingState , stop datashare"),n.isself=e.m_user_id===e.shareOwnerUserId,e.isDataShareStarted=!1,e.isRecevingAppshare=!1,e.shareOwnerUserId="",window.isByShareState=!0,w.info("set by share state true"),coreCommon.Observer.publish("OnShareingEnd",n),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),t.next=11,new coreTup.HwTupDataConfSdk;case 11:r=t.sent,w.info("start notify all user close sharing tab"),r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id),w.info("notify all user close sharing tab finished");case 15:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDataToBfcpStart=(0,l.default)(u.default.mark(function t(){var n,r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.DFConfig.supportDataToBfcp){t.next=15;break}return w.info("data to bfcp info"),n=!1,r="",coreCommon.Observer.publish("OnShareOwnerChange",{userNum:r,isSelf:n}),coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),t.next=8,new coreTup.HWTupCall;case 8:a=t.sent,a.setStgTunnel(e.callId,2),e.isDataShareStarted=!0,coreCommon.Observer.publish("OnShareingStart","to bfcp"),coreCommon.Observer.publish("OnScreenSharingStateChange",1),o={param:{width:1920,height:1080}},coreCommon.Observer.publish("OnSharingScreenSizeChange",o);case 15:case"end":return t.stop()}},t,e)})),this.handleDataToBfcpStop=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.DFConfig.supportDataToBfcp){t.next=11;break}return w.info("bfcp toke release"),n={isself:!1},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",n),coreCommon.Observer.publish("OnScreenSharingStateChange",0),t.next=9,new coreTup.HwTupDataConfSdk;case 9:r=t.sent,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 11:case"end":return t.stop()}},t,e)})),this.handleShareEnd=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(r=n===e.shareOwnerUserId)){t.next=4;break}return w.info("user not sharing, ignore share end request. user id = "+n),t.abrupt("return");case 4:a={isself:n===e.m_user_id,param:{value2:0}},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",a),coreCommon.Observer.publish("OnScreenSharingStateChange",a.param.value2);case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleLoadComponentResult=function(e){0===e.param.result&&w.info("send load component success")},this.loadComponentReturn=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.info("[share] loadComponentReturn"),n.param.value2!==E.IID_COMPONENT.DS){t.next=10;break}return t.next=4,new coreTup.HwTupDataConfSdk;case 4:r=t.sent,r.dsSetBgcolor(4294967295,n.param.confHandle,1),r.dsSetDispmode(n.param.confHandle,1,0),r.dsSetCanvasSize(n.param.confHandle,1,1,{cx:1682,cy:961}),t.next=29;break;case 10:if(n.param.value2!==E.IID_COMPONENT.WB){t.next=28;break}return t.next=13,new C.HwNativeWndSdk;case 13:return a=t.sent,t.next=16,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:2});case 16:return t.next=18,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:5});case 18:return t.next=20,new coreTup.HwTupDataConfSdk;case 20:return o=t.sent,o.dsSetDispmode(n.param.confHandle,512,0),t.next=24,e.regCustomerType(e.m_confHandle,E.IID_COMPONENT.AS);case 24:return t.next=26,e.initAnnotationResource(e.m_confHandle,E.IID_COMPONENT.AS,window.VIDEO_DEFAULT_IMG);case 26:t.next=29;break;case 28:n.param.value2===E.IID_COMPONENT.AS&&(e.hasLoadDataShareComp=!0,w.info("datashare component load success"),coreCommon.Observer.publish("OnJoinDataConf",n));case 29:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.openDocShareFile=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,i;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return w.info("DocShare openDocShareFile param error , ",void 0===n?"undefined":(0,o.default)(n),",filepath:",n),t.abrupt("return");case 3:return t.next=5,e.prepareDocSharing();case 5:return r=t.sent,w.info("DocShare openDocShareFile ret1 =",r),t.next=9,e.startDocSharing(n);case 9:return a=t.sent,w.info("DocShare openDocShareFile ret2 =",a),t.next=13,e.setDocShareCurrentPage(e.docSharingDocID,0,!0);case 13:i=t.sent,w.info("DocShare openDocShareFile ret3 =",i),e.isInScreenSharing()&&(w.info("sendStopScreenShareUserDefineMsg"),e.sendStopScreenShareUserDefineMsg()),e.isInWBSharing()&&(w.info("sendStopWhiteBoardUserDefineMsg"),e.sendStopWhiteBoardUserDefineMsg());case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startDocSharing=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return w.info("open doc share file param error!"),t.abrupt("return");case 3:return t.next=5,new coreTup.HwTupDataConfSdk;case 5:return r=t.sent,t.next=8,r.docShareOpenFile(e.m_confHandle,n);case 8:a=t.sent,w.info("tup_conf_ds_open res : ",a),coreCommon.Observer.publish("docShareOpenResultNotify",a.param.result),e.docSharingDocID=a.param.docId,w.info(" set docSharingDocID = ",e.docSharingDocID);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handlePrivilegeState=function(t){if(w.info("handlePrivilegeState start ",t),t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void w.error("confhandle is error,old = "+e.m_confHandle+",new = "+t.param.confHandle);if(t.param.user_id&&1===t.param.value1)for(var n=e.memberService.dataUserList,r=0;r<n.length;r++)if(n[r].user_id&&n[r].user_num&&n[r].user_id===t.param.user_id){var a=e.memberService.getBindnoByUserid(e.shareOwnerUserId);if(w.info("shareOwnerUserId = ",e.shareOwnerUserId),w.info("my user id = ",e.m_user_id),w.info("currentDataMem[i].user_id = ",n[r].user_id),e.m_user_id===t.param.user_id)return void(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",w.info("handlePrivilegeState getRemoteControlPrivilege1")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!0,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=n[r].user_num,w.info("handlePrivilegeState getRemoteControlPrivilege2 ")));if(e.shareOwnerUserId!==e.m_user_id){(e.isInRemoteControlling=1===t.param.value2)&&(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="");break}0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",w.info("handlePrivilegeState OnDelRemoteControlPrivilege3")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!0,e.remoteControlUserNum=n[r].user_num,w.info("handlePrivilegeState OnRemoteControlPrivilege4 ")),3===t.param.value2&&(coreCommon.Observer.publish("OnRequestRemoteControlPrivilege",{usernum:n[r].user_num}),w.info("handlePrivilegeState OnRequestRemoteControlPrivilege "));break}},this.handleDisplayInfoResult=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a,o,i,s,c,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(w.info("handleDisplayInfoResult, data = ",n),r=0,a=1,o=0,i=n.param.value1,s=n.param.pdisplay_info,c=0;c<i;c++)0!==s[c].bPrimaryMonitor?r=s[c].dwIndex:a=s[c].dwIndex;return o=1===e.shareMonitorType?r:a,w.info("shareMonitorType = "+e.shareMonitorType+", selectedIndex = "+o),t.next=11,new coreTup.HwTupDataConfSdk;case 11:f=t.sent,f.asSetSharingDisplay(e.m_confHandle,o);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDecodeBfcpSuccessInDataConf=function(){var t=(0,l.default)(u.default.mark(function t(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("handleDecodeBfcpSuccessInDataConf = ",n),g.DFConfig.supportDataToBfcp&&coreCommon.Observer.publish("OnSharingScreenSizeChange",n);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.sendStopScreenShareUserDefineMsg=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("sendStopScreenShareUserDefineMsg start"),t.next=3,new coreTup.HwTupDataConfSdk;case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.sendStopWhiteBoardUserDefineMsg=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("sendStopWhiteBoardUserDefineMsg start"),t.next=3,new coreTup.HwTupDataConfSdk;case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.handleSharingUserDefineMsg=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w.info("handleSharingUserDefineMsg, data = ",n),r=n.param.value1,a=n.param.userId,t.t0=r,t.next=t.t0===constant.UserDefineType.CONF_INVITE_USER_DATA_SHARING?6:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP?8:t.t0===constant.UserDefineType.CONF_END_INVITE_USER_DATA_SHARING?10:t.t0===constant.UserDefineType.AS_NOTICE_INVITE_USER_WB_SHARING?12:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP_ACK?14:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB?15:19;break;case 6:return e.dealInviteUserDataSharing(a),t.abrupt("break",20);case 8:return e.stopShareScreen(),t.abrupt("break",20);case 10:return e.stopShareScreen(!0),t.abrupt("break",20);case 12:return e.dealInviteUserWBSharing(),t.abrupt("break",20);case 14:return t.abrupt("break",20);case 15:return w.info("whiteboard tok release "),e.stopWBDoc(),e.closeWBTab(),t.abrupt("break",20);case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.dealInviteUserDataSharing=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:r=t.sent,r.asSendUserDataUInt(e.m_confHandle,6,n,e.m_user_id);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareRealRect=function(){var t=(0,l.default)(u.default.mark(function t(n,r,a,o){var i;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("setDataShareRealRect  start"),t.next=3,new coreTup.HwTupDataConfSdk;case 3:return i=t.sent,t.next=6,i.setDataShareRealRect(e.m_confHandle,n,r,a,o);case 6:case"end":return t.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),this.createNativeDataSharingWnd=function(){var t=(0,l.default)(u.default.mark(function t(n,r,a,o,i,s,c,f,l,d,h){var p,_,v,m,S,g;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("createNativeDataSharingWnd  start1"),t.next=3,new C.HwNativeWndSdk;case 3:return p=t.sent,_=0,v=0,m=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):s,null!==e.wbService?(_=null!==e.wbService?e.wbService.m_docid:0,v=null!==e.wbService?e.wbService.m_pageid:0):0!==e.m_dsdocid&&(_=e.m_dsdocid,v=e.m_dspageid,h=E.IID_COMPONENT.DS),S=0!==e.m_dsdocid&&e.m_dsdocid===e.docSharingDocID,g="2052"===window.langcode?window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME:window.CLIENTCONFIG.NEW_APP_NAME,t.next=12,p.createDataConfFrameWnd(n,r,a,e.m_confHandle,m,o,i,c,window.langcode,window.CLIENTCONFIG.ISBIGWIN,f,l,e.m_user_id,d,h,_,v,S,e.isRecevingAppshare,g);case 12:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s,c,u,f,l){return t.apply(this,arguments)}}(),this.closeNativeDataSharingWnd=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.DFConfig.isWinBase){e.next=5;break}return e.next=3,new C.HwNativeWndSdk;case 3:n=e.sent,n.DestroyDataConfFrameWnd();case 5:case"end":return e.stop()}},t,e)})),this.setNativeDataControlStatus=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.DFConfig.isWinBase){e.next=5;break}return e.next=3,new C.HwNativeWndSdk;case 3:r=e.sent,r.setDataConfRemoteControlStatus(n);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleNativeNotifyResetRenderRect=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("handleNativeNotifyResetRenderRect,data = ",n),t.next=3,new coreTup.HwTupDataConfSdk;case 3:r=t.sent,r.setDataShareScreenParam(e.m_confHandle,{width:n.param.width,height:n.param.height});case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setNativeBigwinOriginShowRect=function(){var t=(0,l.default)(u.default.mark(function t(n,r){var a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0&&r>0)){e.next=8;break}return e.next=3,new C.HwNativeWndSdk;case 3:return a=e.sent,e.next=6,a.setBigwinOriginShowRect(n,r);case 6:o=e.sent,w.info("setNativeBigwinOriginShowRect,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.showNativeDataControl=function(){var t=(0,l.default)(u.default.mark(function t(n,r,a,o,i,s,c){var f,l,d,h,p;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=null===e.wbService?0:e.wbService.m_docid,l=null===e.wbService?0:e.wbService.m_pageid,d=e.sharingType===constant.ConfSharingType.Program,t.next=5,new C.HwNativeWndSdk;case 5:return h=t.sent,t.next=8,h.showNativeDataControl(e.m_confHandle,n,r,window.langcode,d,a,o,i,e.m_user_id,s,c,f,l);case 8:p=t.sent,w.info("showNativeDataControl,ret = ",p);case 10:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s){return t.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("showNativeRemoteControl,data ",n),e.next=3,new C.HwNativeWndSdk;case 3:return r=e.sent,e.next=6,r.showNativeRemoteControl(n);case 6:a=e.sent,w.info("showNativeRemoteControl,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.regCustomerType=function(){var t=(0,l.default)(u.default.mark(function t(n,r){var a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("regCustomerType start"),e.next=3,new coreTup.HwTupDataConfSdk;case 3:return a=e.sent,e.next=6,a.regCustomerType(n,r);case 6:o=e.sent,w.info("regCustomerType,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.initAnnotationResource=function(){var t=(0,l.default)(u.default.mark(function t(n,r,a){var o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("initAnnotationResource start"),e.next=3,new coreTup.HwTupDataConfSdk;case 3:return o=e.sent,e.next=6,o.initAnnotationResource(n,r,a);case 6:i=e.sent,w.info("initAnnotationResource,ret = ",i);case 8:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return w.info("bfcpWinAttach, confHandle : "+e.m_confHandle),t.next=7,r.bfcpWinAttach(e.m_confHandle,n);case 7:a=t.sent,w.info("bfcpWinAttach result: ",a),t.next=12;break;case 11:w.error("bfcpWinAttach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.bfcpWinDetach=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(n=t.sent,!(e.m_user_id>0)){t.next=11;break}return w.info("bfcpWinDetach, confHandle : "+e.m_confHandle),t.next=7,n.bfcpWinDetach(e.m_confHandle);case 7:r=t.sent,0!==r.result?w.info("bfcpWinDetach failed, result = ",r.result):w.info("bfcpWinDetach success, result = ",r.result),t.next=12;break;case 11:w.error("bfcpWinDetach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.changeRemoteControl2Other=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("dataconf setRemoteControl2Other success ,confhandle : "+e.m_confHandle+",useraltid : "+n),t.next=3,new coreTup.HwTupDataConfSdk;case 3:return r=t.sent,t.next=6,r.asSetPrivilege(e.m_confHandle,n,1,1);case 6:return coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_AWARD_PRIVILEGE]),t.abrupt("return",!0);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,0);case 5:n===e.m_user_id?coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_RELEASE_PRIVILEGE]):coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_FETCH_BACK_PRIVILEGE]);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,4);case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_REQUEST_PRIVILEGE]),t.next=3,new coreTup.HwTupDataConfSdk;case 3:return n=t.sent,t.next=6,n.asRequestPrivilege(e.m_confHandle,1);case 6:case"end":return t.stop()}},t,e)})),this.isReceivingDataShare=function(){return!0===e.isDataShareStarted&&e.m_user_id!==e.shareOwnerUserId},this.setDataConfParams=function(){var t=(0,l.default)(u.default.mark(function t(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("setDataConfParams,data ",n),e.next=3,new C.HwNativeWndSdk;case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,w.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.loadShareComponent=(0,l.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.info("handleJoinDataConfResult loadComponent start"),t.next=3,new coreTup.HwTupDataConfSdk(0);case 3:return n=t.sent,t.next=6,n.loadComponent(e.m_confHandle,E.IID_COMPONENT.DS|E.IID_COMPONENT.AS|E.IID_COMPONENT.WB);case 6:w.info("handleJoinDataConfResult loadComponent end");case 7:case"end":return t.stop()}},t,e)})),this.setCloseShareDataOperate=function(t){e.hasCloseShareDataOperate=t},this.getCloseShareDataOperate=function(){return e.hasCloseShareDataOperate},this.getDisplayInfo=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return w.info("getDisplayInfo, m_confhandle, "+e.m_confHandle),t.next=7,n.asGetDisplayInfo(e.m_confHandle);case 7:r=t.sent,0!==r.result?w.info("getDisplayInfo failed, result = ",r.result):w.info("getDisplayInfo success, result = ",r.result),t.next=12;break;case 11:w.error("getDisplayInfo failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.getApplist=(0,l.default)(u.default.mark(function t(){var n,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new coreTup.HwTupDataConfSdk;case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return w.info("getApplist start, m_confhandle : "+e.m_confHandle),t.next=7,n.asGetApplist(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?w.info("getApplist failed, result = ",r):w.info("getApplist success, result = ",r),t.next=12;break;case 11:w.error("getApplist failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}))};t.default=I},1668:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(209),l=window.Logger("dataconf")("model"),d=function e(){var t=this;(0,u.default)(this,e),this.createWBNewDocAndPage=function(){var e=(0,s.default)(o.default.mark(function e(n){var r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("createWBNewDocAndPage start"),t.m_confHandle=n,e.next=4,new f.HwNativeWndSdk;case 4:return r=e.sent,e.next=7,r.controlWhiteBoard({confhandle:t.m_confHandle,paramtype:0});case 7:if(a=e.sent,l.info("createWBNewDoc docRet",a),!(a.param.docid>0&&a.param.pageid)){e.next=19;break}return t.m_docid=a.param.docid,t.m_pageid=a.param.pageid,e.next=14,r.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!0,paramtype:1});case 14:return i=e.sent,t.m_isChairman=!0,e.abrupt("return",!0);case 19:return l.info("createWBNewDoc fail, ret : ",a.param.result),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=(0,s.default)(o.default.mark(function e(){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setWBLocalCurrentPageLocal start"),e.next=3,new f.HwNativeWndSdk;case 3:return n=e.sent,e.next=6,n.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!1,paramtype:1});case 6:r=e.sent,0!==r.param.result&&l.info("setWBLocalCurrentPageLocal fail, ret : ",r.param.result);case 8:case"end":return e.stop()}},e,t)})),this.m_docid=0,this.m_pageid=0,this.m_confHandle=0,this.m_isChairman=!1,this.m_ownerUserid=0};d.deleteWBDoc=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("deleteWBDoc start"),e.next=3,new f.HwNativeWndSdk;case 3:return r=e.sent,e.next=6,r.controlWhiteBoard({confhandle:t,docid:n,paramtype:4});case 6:a=e.sent,0!==a.param.result&&l.info("deleteWBDoc fail, ret : ",a.param.result);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.default=d},1669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function e(){var t=this;(0,a.default)(this,e),this.addMember=function(e,n){for(var r=t.dataUserList,a=!1,o=0;o<r.length;o++)if(r[o].user_id&&r[o].user_id===e.param.user_alt_id){a=!0;break}if(!a&&"phnagt"!==e.param.user_name&&0!==e.param.user_alt_id){var i={user_num:e.param.user_alt_uri,user_id:e.param.user_alt_id,user_name:e.param.user_name,is_self:n,is_share:!1};t.dataUserList.push(i)}},this.deleteMember=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e.param.user_alt_id){n.splice(r,1);break}},this.updateDataShareOwner=function(e){for(var n=0;n<t.dataUserList.length;n++)t.dataUserList[n].is_share=t.dataUserList[n].user_num===e},this.getBindnoByUserid=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_num.toString();return""},this.getMemberNameByUserId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_name;return""},this.getUserAltId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_num===e)return n[r].user_id.toString();return""},this.dataUserList=[]};t.default=o},167:function(e,t,n){"use strict";var r=n(10);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},1670:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getQrcodeBase64=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=(t.getQrcodeBase64=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e,n){var r=null;document.getElementById("tmpBase64Img")||(r=document.createElement("div"),r.id="tmpBase64Img",document.body.appendChild(r));var a=function(t){e(t),r&&document.body.removeChild(r)};new l.default("tmpBase64Img",{text:t,width:100,height:100,colorDark:"#000000",correctLevel:l.default.CorrectLevel.L,title:language.RIGHT_TO_SAVE,successCallback:a})}).catch(function(e){console.error("getQrcodeBase64",e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n(954)),l=r(f)},1671:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(98),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(401),h=n(1672),p=r(h),_=n(1673),C=r(_),v=n(1679),m=r(v),S=n(1680),g=r(S),E=n(1681),w=r(E),I=n(1682),T=r(I),N=n(1120),b=r(N),O=n(204),A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(O),R=n(186),y=window.Logger("dataconf")("logic"),L=null,M=function e(){var t=this;return(0,l.default)(this,e),this._instancePlatformImpl=function(){switch(y.info("dataconfmanager _instancePlatformImpl"),d.DFConfig.platform){case"win":var e=null;e=window.isHubEnv?new T.default:new b.default;var n=new p.default(e);t.platformCategory=new w.default(n),e.proxy=n,n.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"bigwin":var r=new g.default,a=new p.default(r);t.platformCategory=new w.default(a),r.proxy=a,a.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"mac":var o=new C.default;t.platformCategory=new w.default(o),o.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"ios":case"android":t.platformCategory=new m.default,t.platformCategory.proxy=t}},this.initializeDataConf=function(){t._instancePlatformImpl(),t.platformCategory.registerDataEvent();var e=new coreCommon.ObserverOpts(d.DFConfig.moduleName);e.target=t,coreCommon.Observer.subscribe("McuConfType",t.handleMcuConfType,e),coreCommon.Observer.subscribe("onDataSharingStateChanged",t.onDataSharingStateChanged,e)},this.handleMcuConfType=function(e){y.info("handleMcuConfType",e.param),e.param&&$dispatch(coreUi.changeIsSameGradeMcu(e.param.type))},this.handleJoinDataConfFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[0]),e.next=3,coreCall.configMsDataConf(0);case 3:return e.next=5,coreCall.setCallReinvite();case 5:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.setRemoteControl2Other(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControl=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.rejectRemoteControl(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.startAppSharingWindow=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.platformCategory.startAppSharingWindow(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){t.platformCategory.setIsUsePrimarySize()},this.showDesktopShareSettingContact=function(){var e=(0,u.default)(s.default.mark(function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("user click showDesktopShareSettingContact menu"),coreUi.showModal(n,r);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.hideSetDesktopShareModal=function(){y.info("user click hideSetDesktopShareModal menu"),coreUi.hideModal()},this.saveDesktopShareSettingLogic=function(){var e=(0,u.default)(s.default.mark(function e(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.DESKTOP_SHARE_SETTING.IS_DEFAULT;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("saveDesktopShareSetting","isDesktopShareSet:["+r+"]"),n=[{key:"desktopShareSet",value:r}],e.next=4,window.confirm(language.ARE_YOU_SURE_SAVE_DESKTOP_SHARING_SETTINGS,!0).then(function(e){y.info("userClick  saveDesktopShareSettingLogic"),t.compressSaveDesktopShareSet(e.ret,n);var r=$getState().conf.setShareQuality,a={};r=100===r?1:40===r?0:2,a=(0,o.default)(a,{share_quality:r}),y.info("saveDesktopShare",a),R.SvcAtdManager.setParam(a)});case 4:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.getDesktopShareInDbLogic=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y.info("getDesktopShareInDbLogic start"),e.next=4,coreDb.queryLoginSetting({key:"desktopShareSet"});case 4:return n=e.sent,y.info("queryDesktopShareInDb",n),n.value?$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[n.value.toUpperCase()+"_SIZE"])):(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[r]))),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),y.error("getDesktopShareInDbLogic error",e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])})),this.compressSaveDesktopShareSet=function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=13;break}return y.info("compressSaveDesktopShareSet","nameArgs:["+r+"]"),a=$getState().conf.isShowDataControl,e.next=6,coreDb.saveLoginSetting(r);case 6:if(!(A.isInDataConf()&&A.isDataShareStarted()&&a)){e.next=12;break}return e.t0=A,e.next=10,t.getDesktopShareSize();case 10:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1);case 12:t.hideSetDesktopShareModal();case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(0),y.error("compressSaveDesktopShareSet:",e.t2);case 18:case"end":return e.stop()}},e,t,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}(),this.getDesktopShareSize=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDesktopShareInDbLogic();case 3:return n=e.sent,r=!isNullOrEmpty(n)&&n.value||constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,y.info("getDesktopShareSize start desktopShareSet",r),e.abrupt("return",constant.DESKTOP_SHARE_SET_SIZE[r.toUpperCase()+"_SIZE"]);case 9:e.prev=9,e.t0=e.catch(0),y.error("getDesktopShareSize error",e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])})),this.onDataSharingStateChanged=function(e){$dispatch(coreUi.setDataSharingFlag(e))},this.hidePickSharingWindow=function(){t.platformCategory.hidePickSharingWindow()},this.startShareScreen=function(){t.platformCategory.startShareScreen()},L||(this.platformCategory=null,L=this),L};t.default=M},1672:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(4),d=a(l),h=n(5),p=a(h),_=n(413),C=n(204),v=r(C),m=n(186),S=n(400),g=r(S),E=n(234),w=n(224),I=n(158),T=n(401),N=window.Logger("dataconf")("logic"),b=function(){function e(t){var n=this;(0,d.default)(this,e),this.receiveSvcForOwnerChanged=Noop,this.stopSvcForOwnerChanged=Noop,this.showWinForSizeChange=Noop,this.addEventListenerForCtrlPrivilege=Noop,this.deleteEventListenerForCtrlPrivilege=Noop,this.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=$getState().conf.isFirstActiveAppShare,a=v.getShareAppHwnd(),N.info("handleApplistResult,setSharingapp,setStart,setHightlightShareWnd,shareAppHwnd = "+a+", isFirstActiveAppShare ="+r),n.featureImpl.handleApplistResult(t);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.openShareScreen=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=v,e.next=5,n.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),n.featureImpl.openShareScreen();case 8:case"end":return e.stop()}},e,n)})),this.startDocShare=(0,f.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.getSharingType()!==constant.ConfSharingType.Document){e.next=7;break}return N.info("start openDocShareFile = ",v.getDocShareFilePath()),t=v.getDocShareFilePath(),e.next=5,n.stopCurrentSharing();case 5:v.configSharingParam(constant.ConfSharingType.Document,t),n.proxy.openDocShareFile(t);case 7:case"end":return e.stop()}},e,n)})),this.getUserSelectFileName=function(){var e=window.require("electron").remote.dialog;return N.info("getUserSelectFileName start"),new i.default(function(t,r){e.showOpenDialog({title:"Select a folder",properties:["openFile"],filters:[{name:"Text"}]},function(e){n.g_userSelfFile=e,t(1),N.info("getUserSelectFileName  selFiles =",e)})})},this.stopCurrentSharing=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.stopWBDoc();case 2:if(!v.isInSendDocSharing()&&!v.isInReceiveDocSharing()){e.next=6;break}return N.info("stopCurrentSharing stopDocSharing"),e.next=6,v.stopDocSharing();case 6:v.isInScreenSharing()&&(N.info("stopCurrentSharing stopShareScreen"),n.stopShareScreen());case 7:case"end":return e.stop()}},e,n)})),this.onJoinDataConfFail=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.featureImpl.onJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.stopShareScreen=function(){n.proxy.stopShareScreen()},this.onStartDataShare=function(){N.info("OnStartDataShare receive native click event, show app list ,changeIsShowMinWin false"),$dispatch(coreUi.changeIsShowMinWin(!1)),n.shareFromNative=!0,n.proxy.startShareScreen()},this.onStartShareFailed=function(){v.setShareAppHwnd(0),v.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.handleNativeUserStopDataShare=function(){if(v.isInWBSharing())v.stopWBDoc(),v.closeWBTab();else{var e=0;clearInterval(n.stopDataShareTimer),n.stopDataShareTimer=setInterval(function(){v.isDataShareStarted()?(N.info("handleNativeUserStopDataShare stopShareScreen"),n.stopShareScreen(),clearInterval(n.stopDataShareTimer)):v.isInSendDocSharing()?(N.info("handleNativeUserStopDataShare stopDocSharing"),v.stopDocSharing(),window.isDataSharing=!1,n.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),clearInterval(n.stopDataShareTimer)):(e++,N.info("handleNativeUserStopDataShare wait for isDataShareStarted cnt = "+e),5===e&&clearInterval(n.stopDataShareTimer))},1e3)}},this.handleNativeUserLeaveConf=function(){N.info("  handleNativeUserLeaveConf start"),(0,I.actionLeaveConf)()},this.handleNativeUserEndConf=function(){N.info("  handleNativeUserEndConf start"),(0,I.actionEndConf)()},this.handleNativeNotifyRequestControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.requestRemoteControlPrivilege();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyReleaseControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.delRemoteControlPrivilege("");case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyShowConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,I.handleShowMemberList)();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyAddConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUi.initConfSelectBoxAddMember();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetMic=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$getState().call.isMuteMic?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetSpeaker=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().call.isMuteSpk){e.next=5;break}return e.next=3,coreCommon.SpkControl.getInstance().muteSpk(!1);case 3:e.next=7;break;case 5:return e.next=7,coreCommon.SpkControl.getInstance().muteSpk(!0);case 7:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyDataFirstFrameRecv=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("handleNativeNotifyDataFirstFrameRecv start"),n.featureImpl.handleNativeNotifyDataFirstFrameRecv();case 2:case"end":return e.stop()}},e,n)})),this.onChangeFirstActiveShareApp=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(t));case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyShowClient=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("handleNativeNotifyShowClient start"),win.isMinimized()?appService.showMainWindow(!0):delegate.winMinimize();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyPrepareRemoteControl=(0,f.default)(c.default.mark(function e(){var t,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(N.info("handleNativeNotifyPrepareRemoteControl start"),t=v.getDataConfMemberList(),r=[],a=0;a<t.length;a++)t[a].is_self||(o=t[a].user_num,i=v.getRemoteControlUserNum(),s=i!==o?0:1,r.push({username:t[a].user_name,bindnum:o,status:s}));r.length>0&&v.showNativeRemoteControl(r);case 5:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyChairmanRemoteControl=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("handleNativeNotifyChairmanRemoteControl data ",t),t.param.bindnumber&&(!0===t.param.isgrant?n.proxy.setRemoteControl2Other(t.param.bindnumber):v.delRemoteControlPrivilege(t.param.bindnumber));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyDataShareQuality=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("handleNativeNotifyChairmanRemoteControl data ",t),$dispatch(coreUi.changeShareQuality(t.param.value)),r="",t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DEFAULT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.IMAGEQUALITY_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_IMAGEQUALITY),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DYNAMICEFFECT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DYNAMICEFFECT),a=[{key:"desktopShareSet",value:r}],e.next=9,coreDb.saveLoginSetting(a);case 9:N.info("nameArgs",a),t.param.value&&t.param.value>0&&t.param.value<101&&v.setDataShareScreenPicQuality(t.param.value);case 11:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handledocShareOpenResultNotify=function(e){N.info("handledocShareOpenResultNotify result : "+e),0!==e&&v.clearConfSharingType()},this.handleShowNativeDSPage=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("docshare handleShowNativeDSPage: ",t),0!==t.docid?(n.dataPicSize={width:894,height:562},n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),!0===t.issender&&$dispatch(coreUi.hideDataShareButton(!0))):0===t.docid&&0===t.pageid&&(window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleDocShareOnDocNewNotify=function(e){N.info("handleDocShareOnDocNewNotify receive other doc sharing: "+e),!0===e&&n.stopCurrentSharing()},this.handleShowNativeWBPageChairman=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("handleShowNativeWBPage start ",t),!0===t.isopen?(n.changeDataControlShowImpl(!0,512),$dispatch(coreUi.hideDataShareButton(!0))):(N.info("handleShowNativeWBPageChairman set isDataSharing false"),window.isDataSharing=!1,n.changeDataControlShowImpl(!1,512),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleShowNativeWBPageAttendee=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("handleShowNativeWBPageAttendee start",t),!0===t.isopen?n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL,512):(N.info("handleShowNativeWBPageAttendee set isDataSharing false"),window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE,512));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.hidePickSharingWindow=function(){n.featureImpl.hidePickSharingWindow()},this.handleNativeDataRenderSize=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.handleNativeNotifyResetRenderRect(t);case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.fullScreenReceiveShare=function(){},this.handleReceiveScreenKeyFrame=function(e){n.featureImpl.handleReceiveScreenKeyFrame(e)},this.handleDataShareEnd=function(){n.featureImpl.handleDataShareEnd()},this.onRequestOperateTokenFail=function(){N.info("start share failed."),n.featureImpl.onRequestOperateTokenFail()},this.onReceiveWhiteBoardShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N.info("receive white board share event"),t=$getState().conf,r=t.bfcpFrameHwnd,a=t.isSvcConf,o=0,!a){e.next=7;break}o=r,e.next=10;break;case 7:return e.next=9,g.getAvcFrameHandles();case 9:o=e.sent;case 10:if(!(o>0)){e.next=15;break}return e.next=13,m.SvcAtdManager.closeBfcpFrame();case 13:return e.next=15,g.closeBfcpFrame();case 15:case"end":return e.stop()}},e,n)})),this.featureImpl=t,this.proxy=null,this.dataPicSize={},this.g_userSelfFile=[],this.stopDataShareTimer=0,this.shareFromNative=!1}return(0,p.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){this.featureImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(T.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("applistResult",this.handleApplistResult,e),coreCommon.Observer.subscribe("handleNativeDataRenderSize",this.handleNativeDataRenderSize,e),coreCommon.Observer.subscribe("OnNativeUserStartDataShare",this.onStartDataShare,e),coreCommon.Observer.subscribe("OnNativeUserStopDataShare",this.handleNativeUserStopDataShare,e),coreCommon.Observer.subscribe("OnNativeUserLeaveConf",this.handleNativeUserLeaveConf,e),coreCommon.Observer.subscribe("OnNativeUserEndConf",this.handleNativeUserEndConf,e),coreCommon.Observer.subscribe("onNativeNotifyRequestControl",this.handleNativeNotifyRequestControl,e),coreCommon.Observer.subscribe("onNativeNotifyReleaseControl",this.handleNativeNotifyReleaseControl,e),coreCommon.Observer.subscribe("onNativeNotifyShowConfMember",this.handleNativeNotifyShowConfMember,e),coreCommon.Observer.subscribe("onNativeNotifyAddConfMember",this.handleNativeNotifyAddConfMember,e),coreCommon.Observer.subscribe("onNativeNotifySetMic",this.handleNativeNotifySetMic,e),coreCommon.Observer.subscribe("onNativeNotifySetSpeaker",this.handleNativeNotifySetSpeaker,e),coreCommon.Observer.subscribe("onNativeNotifyDataFirstFrameRecv",this.handleNativeNotifyDataFirstFrameRecv,e),coreCommon.Observer.subscribe("ChangeFirstActiveShareApp",this.onChangeFirstActiveShareApp,e),coreCommon.Observer.subscribe("onNativeNotifyShowClient",this.handleNativeNotifyShowClient,e),coreCommon.Observer.subscribe("onNativeNotifyPrepareRemoteControl",this.handleNativeNotifyPrepareRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyChairmanRemoteControl",this.handleNativeNotifyChairmanRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyDataShareQuality",this.handleNativeNotifyDataShareQuality,e),coreCommon.Observer.subscribe("docShareOpenResultNotify",this.handledocShareOpenResultNotify,e),coreCommon.Observer.subscribe("onShowNativeDSPage",this.handleShowNativeDSPage,e),coreCommon.Observer.subscribe("onShowNativeWBPageChairman",this.handleShowNativeWBPageChairman,e),coreCommon.Observer.subscribe("onShowNativeWBPageAttendee",this.handleShowNativeWBPageAttendee,e),coreCommon.Observer.subscribe("onReceivedScreenKeyFrame",this.handleReceiveScreenKeyFrame,e),coreCommon.Observer.subscribe("OnStartShareFailed",this.onStartShareFailed,e),coreCommon.Observer.subscribe("onReceiveWhiteBoardShare",this.onReceiveWhiteBoardShare,e)}},{key:"changeDataControlShowImpl",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||2,N.info("native changeDataControlShow, isShow : "+t),a=$getState().conf,o=a.memberListInfo,i=a.isSvcConf,!0===t?(_.ToolbarManager.initDeviceStates(),_.ToolbarManager.setChairmanState(o),i?m.SvcAtdManager.switchVideoToMin():g.switchVideoToMin()):i?m.SvcAtdManager.switchVideoToMain():g.switchVideoToMain(),s=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,u=$getState().conf,f=u.confServerId,l=u.vmrId,d=isNullOrEmpty(l)?f:l,e.next=9,v.showNativeDataControl(t,!0,s,$getState().login.account,r,d);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearCanvas",value:function(){}},{key:"closeBfcpFrameForSharingSession",value:function(){this.featureImpl.closeBfcpFrameForSharingSession()}},{key:"closeAppShare",value:function(e){this.featureImpl.closeAppShare(e)}},{key:"doChangeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,h,p,_,C,m,S,g,E,w,I,T,b,O,A,R,y,L;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N.info("changeDataConfShowMode start, showMode = ",t),r=n||2,a=$getState().conf.sharePersonName,t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_FULL&&t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL){e.next=31;break}if(!(2===r&&this.dataPicSize&&this.dataPicSize.width||512===r)){e.next=28;break}return o=this.dataPicSize.width,i=this.dataPicSize.height,N.info("dataConfModel.createNativeDataSharingWnd start"),this.featureImpl.initDeviceStates(),this.featureImpl.clearBfcpTimer(),s=$getState().conf,u=s.confSubject,f=s.confServerId,l=s.vmrId,d=s.currentConfInfo,isNullOrEmpty(l)||(f=l),h=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,p=$getState().call,_=p.cameraDevicesList,C=p.spkDevicesList,m=p.micDevicesList,S=$getState().setting,g=S.camIndex,E=S.spkIndex,w=S.micIndex,I=d.general_pwd?d.general_pwd:null,T={spkIndex:E,spkDevicesList:C},b={micIndex:w,micDevicesList:m},O={camIndex:g,cameraDevicesList:_},A={spk_devices:T,mic_devices:b,camera_devices:O},e.next=22,v.createNativeDataSharingWnd(u,f,h,o,i,a,coreConf.isConfChairMan(),A,I,$getState().login.account,r);case 22:this.featureImpl.switchVideoFloating(),R=coreAccount.getLoginModel().sipLoginOnly,R?delegate.winHide():delegate.winMinimize(),this.featureImpl.handleBfcpForChangeMode(r,a),e.next=29;break;case 28:N.error("dataConfModel.createNativeDataSharingWnd fail");case 29:e.next=39;break;case 31:return setTimeout(function(){$getState().conf.isDataConfSharing||(coreCall.resetBFCStatus($getState().call.callId,1),N.info("changeDataConfShowMode isDataConfSharing is false,resetBFCStatus to 1"))},5e3),this.featureImpl.resumeVideoWhenDataEnd(),e.next=35,v.closeNativeDataSharingWnd();case 35:N.info("isDataSharing when close ",window.isDataSharing),y=$getState(),L=y.conf,L.isVideoConf||appService.showMainWindow(!0),this.featureImpl.handleCloseNativeDataWnd(r,a);case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBfcpWindow",value:function(e){var t=this;E.NativeInterface.setHightlightShareWnd(0,!1),N.info("test111, data.isself = "+e.isself),e.isself&&v.setShareAppHwnd(0),v.updateDataShareOwner(""),clearTimeout(window.clearSetBfcp);var n=$getState().conf.isSvcConf,r=function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N.info("init bfcp frame onDataShareEnd"),!n){e.next=6;break}return e.next=4,m.SvcAtdManager.initBfcpFrame($getState().call.callId,!1);case 4:e.next=7;break;case 6:g.initBfcpWindow($getState().call.callId,!1);case 7:(0,w.NotifyStartSharing)(0,""),N.info("notify to proxy bfcp is start");case 9:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}();window.isHubEnv||(window.clearSetBfcp=setTimeout(function(){$getState().call.iSreceivingBFCP&&!$getState().conf.isDataConfSharing&&r()},1500))}},{key:"onJoinDataConf",value:function(){m.SvcAtdManager.reportIsDataConf(!0),$dispatch(coreUi.hideDataShareButton(!0)),v.isConfDataShareSelfEntered()?(N.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):N.info(" onJoinDataConf self not entered")}},{key:"closeBfcpFrameForOwnerChanged",value:function(){this.featureImpl.closeBfcpFrameForOwnerChanged()}},{key:"resumeVideoWhenDataEnd",value:function(){this.featureImpl.resumeVideoWhenDataEnd()}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareFromNative){e.next=5;break}t(),this.shareFromNative=!1,e.next=11;break;case 5:if(!coreConf.isConfChairMan()){e.next=10;break}return e.next=8,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(N.info("win startShareScreen user click confirm"),t())});case 8:e.next=11;break;case 10:window.Toast(language.DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getApplist",value:function(){v.getApplist()}},{key:"startAppSharingWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",r=constant.ConfSharingType.None,a=coreConf.getCurrentConfId(),0!==t){e.next=8;break}r=constant.ConfSharingType.Desktop,coreUt.utEventStart(constant.EVENT_ID.UT_CONF_DATA_SHARE,null,[a,r]),e.next=34;break;case 8:if(1!==t){e.next=16;break}return coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_DATA_SHARE,[r,1]),v.setShareAppHwnd(0),window.isDataSharing=!0,v.createWBNewDocAndPage(),e.abrupt("return");case 16:if(!T.DFConfig.isDocShareEnabled()||2!==t){e.next=32;break}if(o=$getState().myInfo.bind_no,!(!0===v.isDataShareStarted()&&v.getDataShareOwner()!==o||v.isInSendDocSharing())){e.next=22;break}return e.next=21,window.confirm("","COMMON_ALERT",!1);case 21:return e.abrupt("return");case 22:return r=constant.ConfSharingType.Document,coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_DATA_SHARE,[r,1]),e.next=26,this.getUserSelectFileName();case 26:if(""!==(n=this.g_userSelfFile.length>0&&this.g_userSelfFile[0].length>0?this.g_userSelfFile[0]:"")){e.next=30;break}return N.error("startAppSharingWindow, user not select doc share file"),e.abrupt("return");case 30:e.next=34;break;case 32:r=constant.ConfSharingType.Program,coreUt.utEventStart(constant.EVENT_ID.UT_CONF_DATA_SHARE,null,[a,r]);case 34:if(this.g_userSelfFile=[],N.info("docShareFilePath ",n),v.configSharingParam(r,n),r!==constant.ConfSharingType.Document){e.next=42;break}return N.info("startAppSharingWindow start docshare"),window.isDataSharing=!0,this.startDocShare(),e.abrupt("return");case 42:0!==t?(i=$getState(),s=i.conf.shareAppList,u=s[t],f=u.handler,v.setShareAppHwnd(f)):v.setShareAppHwnd(0),N.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen();case 46:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){this.featureImpl.handleWindowForStopShareScreen()}},{key:"toggleShowDataControlMenu",value:function(e,t){this.proxy.toggleShowDataControlMenu(e,t)}},{key:"changeDataConfShowMode",value:function(e,t){this.proxy.changeDataConfShowMode(e,t)}}]),e}();t.default=b},1673:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(502),h=n(204),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),_=n(401),C=window.Logger("dataconf")("logic"),v=function(){function e(){var t=this;(0,u.default)(this,e),this.onAsOnScreenData=function(e){if(!e.param.width||!e.param.height)return void C.error("screendata width = "+e.param.width+"height = "+e.param.height);window.tupVideo.getShareFrame(t.onFrameData,10004)},this.onAsOnOnScreenDataToBfcpData=function(e){t.onAsOnScreenData(e)},this.onFrameData=function(e,n,r){if(!t.yuvCanvas){var a=document.getElementById("screenCanvas");C.info("dataPicSize.width = "+t.dataPicSize.width+";dataPicSize.height = "+t.dataPicSize.height),t.yuvCanvas=new YUVCanvas({canvas:a,width:t.dataPicSize.width,height:t.dataPicSize.height})}if(t.yuvCanvas&&!t.yuvCanvas.isWebGL())return void window.log("<video>onFrameData, canvas is not support webgl");var o=document.getElementById("parentCanvasContainer");if(null===o)return void C.info("onFrameData parentCanvasContainer is null");var i=o.offsetWidth,s=o.offsetHeight,c=$getState().conf.shareScreenWH.lastheight,u=$getState().conf.shareScreenWH.lastwidth;if(c!==s||u!==i){C.info("onFrameData set style"),o.style.overflow=!0===p.getIsUsePrimarySize()?"auto":"inherit";var f=t.calcScreenSize(t.dataPicSize,{width:i,height:s}),l=document.getElementById("screenCanvas");if(null===l)return C.info("onFrameData screenCanvas is null, refresh data share mode."),void $dispatch(coreUi.showDataShareMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL));var d=document.getElementById("screenCanvasContainer");if(null===d)return void C.info("onFrameData screenCanvasContainer is null");d.style.width=f.width+"px",d.style.height=f.height+"px";var h=Math.max(Math.ceil((i-f.width)/2),0),_=Math.max(Math.ceil((s-f.height)/2),0);d.style.left=h+"px",d.style.top=_+"px";var v=document.createElement("canvas"),m=v.getContext("2d"),S=t.getPixelRatio(m);C.info("onFrameData ratio = ",S),l.width=f.width*S,l.height=f.height*S,$dispatch(coreUi.changeShareScreenWH({lastwidth:i,lastheight:s})),t.yuvCanvas.changeCanvasSize(f.width*S,f.height*S,l)}if(r&&e>0&&n>0&&r.length===e*n*1.5){var g=new Uint8Array(r),E=e*n,w=e/2*(n/2);t.yuvCanvas.drawNextOutputPicture({yData:g.subarray(0,E),uData:g.subarray(E,E+w),vData:g.subarray(E+w,E+w+w),yDataPerRow:e,yRowCnt:n,uDataPerRow:e/2,uRowCnt:n/2})}},this.calcScreenSize=function(e,t){if(!0===p.getIsUsePrimarySize())return e;var n={width:0,height:0};if(e&&t){var r=e.width/e.height,a=t.width,o=t.height,i=a/r,s=o*r,c=(o-i)/2,u=(a-s)/2;n=r>1&&c>0||r<1&&u<0?{width:a,height:Math.floor(i)}:{width:Math.ceil(s),height:o}}return t||C.warn("<video>containerSize is null"),n},this.getPixelRatio=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},this.changeDataControlShowImpl=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.showDataControl(n)),C.info("js changeDataControlShow, isShow : "+n);case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.doChangeDataConfShowMode=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("changeDataConfShowMode start, showMode = ",n),$dispatch(coreUi.showDataShareMode(n));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.closeBfcpFrameForSharingSession=Noop,this.closeAppShare=Noop,this.handleBfcpWindow=function(e){var n=$getState().conf,r=n.isSvcConf,a=n.svcShareData;r&&($dispatch(coreUi.hideDataShareButton(!1)),e.isself&&t.proxy.changeDataControlShow(!1),a.hasOwnProperty("ssrc")&&a.ssrc<0&&d.SvcAttendanceManager.stopSvcShareOrBfcp(),clearTimeout(t.clearSetBfcp),t.clearSetBfcp=setTimeout(function(){if($getState().call.iSreceivingBFCP){d.SvcAttendanceManager.receviceSvcShareOrBfcp(1,"");var e=coreCall.getBigContainerSize(),t=e.height-54-74;2===$getState().conf.svcViewMode&&(t=e.height),e={width:e.width,height:t},coreCall.setSvcBFCPVideoRender(e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},1500))},this.onJoinDataConf=function(){$dispatch(coreUi.hideDataShareButton(!0)),p.isConfDataShareSelfEntered()?(C.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):C.info(" onJoinDataConf self not entered")},this.closeBfcpFrameForOwnerChanged=Noop,this.doMouseDown=function(e){C.info("doMouseDown param  ",e);var n=e.clientX,r=e.clientY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=1:3===e.which&&(i=3),C.info("doMouseDown param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.getPointOnCanvas=function(e,n,r){var a=e.getBoundingClientRect(),o=Math.floor(n-a.left),i=Math.floor(r-a.top);return o=t.dataPicSize.width/a.width*o,i=t.dataPicSize.height/a.height*i,{x:o,y:i}},this.sendWndMouseMsg=function(e,t,n){var r=0;!0===e.ctrlKey&&(r=8),!0===e.shitKey&&(r|=4);var a=n.x+256*n.y*256;a=Math.ceil(a),p.inputWndMsg(t,a,r,n.x,n.y)},this.doMouseMove=function(e){t.fireMouseMove(e)},this.doMouseUp=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=2:3===e.which&&(i=4),C.info("doMouseUp param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.doMouseDBClick=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r);C.info("doMouseDBClick param  msg:101"),t.sendWndMouseMsg(e,101,o)},this.fireMouseMove=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=0,s=0;0===e.button?s=1:1===e.button?s=16:2===e.button&&(s=2),!0===e.ctrlKey&&(s|=8),!0===e.shitKey&&(s|=4),i=n+256*r*256,p.inputWndMsg(5,i,s,o.x,o.y)},this.doKeyDown=function(e){var t=e.keyCode,n=t;C.info("doKeyDown start"),p.inputWndMsg(10,n,t,0,0)},this.doKeyUp=function(e){var t=e.keyCode,n=t;C.info("doKeyUp start"),p.inputWndMsg(11,n,t,0,0)},this.getApplist=Noop,this.openShareScreen=(0,s.default)(o.default.mark(function e(){var r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=p,e.next=5,t.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),r=window.require("electron").screen.getDisplayNearestPoint(window.require("electron").screen.getCursorScreenPoint()).workArea.width,a=new remote.BrowserWindow({frame:!1,show:!1,transparent:!1,width:0,height:0,skipTaskbar:!0,alwaysOnTop:!0}),window.require("electron").remote.getGlobal("remoteVars").contactGroups=$getState().contactGroups,i=n(955).format({protocol:"file",slashes:!0,pathname:n(956).join(window.__dirname,"data.html")}),a.loadURL(i),window.screenShareWin=a,s=r/2-300,c=new remote.BrowserWindow({frame:!1,show:!1,x:s,y:0,width:660,height:100,parent:a,transparent:!1,skipTaskbar:!0,alwaysOnTop:!0,fullscreen:!1,fullscreenable:!1,maximizable:!1}),u=n(955).format({protocol:"file",slashes:!0,pathname:n(956).join(window.__dirname,"shareControl.html")}),window.require("electron").remote.getGlobal("remoteVars").dataWin=c,c.loadURL(u),C.info("testwhite loadurl controlwin"),remote.ipcMain.on("toggle-menu-show-message",t.proxy.toggleShowDataControlMenu),c.once("ready-to-show",function(e){C.info("testwhite ready to show...");var t=$getState().conf.isShowDataControl;C.info("testwhite isShowDataControl = "+t),t&&c.show()}),c.setResizable(!1),t.changeDataControlShowImpl(!0);case 23:case"end":return e.stop()}},e,t)})),this.onJoinDataConfFail=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.proxy.handleJoinDataConfFail();case 2:n=$getState().conf.confHandle,isNullOrEmpty(n)||window.alert(language.SHARING_JOINCONF_FAIL);case 4:case"end":return e.stop()}},e,t)})),this.handleMacRecvWhiteBoardOrDoc=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("handleMacRecvWhiteBoardOrDoc start",n),$dispatch(coreUi.showDataTipsNotify(n,!0)),setTimeout(function(){$dispatch(coreUi.showDataTipsNotify({},!1))},5e3);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=Noop,this.onRequestOperateTokenFail=function(){t.proxy.stopShareScreen()},this.fullScreenReceiveShare=function(){var e=$getState().call,t=e.isFullScreenReceiveShare,n=e.screenState,r=t||"full"===n;C.info(" onShareScreenSizeChange isFullScreenReceiveShare = "+t+" screenState = "+n),r&&(coreCall.changeFullScreenReceiveShare(!0),coreCall.toFullScreen())},this.handleDataShareEnd=function(){t.yuvCanvas=null},this.hidePickSharingWindow=Noop,this.yuvCanvas=null,this.dataPicSize={},this.clearSetBfcp=0,this.lastMoveTime=0,this.arrayMouseMoveEvent=[],this.proxy=null}return(0,l.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(_.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnScreenData",this.onAsOnScreenData,e),coreCommon.Observer.subscribe("OnScreenDataToBfcpData",this.onAsOnOnScreenDataToBfcpData,e),coreCommon.Observer.subscribe("onMacRecvWhiteBoardOrDoc",this.handleMacRecvWhiteBoardOrDoc,e),coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e)}},{key:"receiveSvcForOwnerChanged",value:function(e){d.SvcAttendanceManager.receviceSvcShareOrBfcp(0,e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},{key:"stopSvcForOwnerChanged",value:function(){coreCall.closeSvcDataSocket(),d.SvcAttendanceManager.stopSvcShareOrBfcp()}},{key:"showWinForSizeChange",value:function(){appService.showMainWindow(!0)}},{key:"addEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");if(null===e)return void C.info(" OnGetRemoteControlPrivilege screenCanvas is null");e.addEventListener("mousedown",this.doMouseDown,!1),e.addEventListener("mousemove",this.doMouseMove,!1),e.addEventListener("mouseup",this.doMouseUp,!1),e.addEventListener("dblclick",this.doMouseDBClick,!1),window.addEventListener("keydown",this.doKeyDown,!0),window.addEventListener("keyup",this.doKeyUp,!0)}},{key:"deleteEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");null!==e&&(e.removeEventListener("mousedown",this.doMouseDown,!1),e.removeEventListener("mousemove",this.doMouseMove,!1),e.removeEventListener("mouseup",this.doMouseUp,!1),e.removeEventListener("dblclick",this.doMouseDBClick,!1)),window.removeEventListener("keydown",this.doKeyDown,!0),window.removeEventListener("keyup",this.doKeyUp,!0)}},{key:"resumeVideoWhenDataEnd",value:function(){if($getState().conf.isSvcConf)return void C.info("is svcconf ,resumeVideoWhenDataEnd return");if("VIDEO_CONNECTED"===$getState().call.callStatus){C.info("<video>in data full,resumeVideoForDataEnd");var e=coreCall.getBigContainerSize(),t={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH};this.proxy.isVideoRemtoBig?(this.proxy.isVideoRemtoBig=!1,$dispatch(coreUi.changeBigSmallWin()),$dispatch(coreUi.changeSmallWinStyle(t)),coreCall.setLocalVideoRender(t),e=coreCall.calcRealVideoSize({width:$getState().call.smallWinStyle.width,height:$getState().call.smallWinStyle.height},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setVideoWH(!0,e)):(e=coreCall.calcRealVideoSize({width:16,height:9},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setLocalVideoRender(e))}}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreConf.isConfChairMan()){e.next=5;break}return e.next=3,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(C.info("mac startShareScreen user click confirm"),t())});case 3:e.next=6;break;case 5:window.Toast(language.DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"startAppSharingWindow",value:function(e){var t=constant.ConfSharingType.Desktop;coreUt.utEventStart(constant.EVENT_ID.UT_CONF_DATA_SHARE,null,[coreConf.getCurrentConfId(),t]),p.configSharingParam(t,""),this.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),C.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen()}},{key:"handleWindowForStopShareScreen",value:function(){win.restore(),"CALL_CONNECTED"===$getState().call.callStatus&&appService.showMainWindow(!0),coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}}]),e}();t.default=v},1674:function(e,t,n){(function(e,r){var a;!function(o){function i(e){throw new RangeError(M[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(L,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],a=0,o=e.length;a<o;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<o?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function f(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=k(e>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?x(e/N):e>>1,e+=x(e/t);e>D*I>>1;r+=E)e=x(e/D);return x(r+(D+1)*e/(e+T))}function p(e){var t,n,r,a,o,s,c,u,d,p,_=[],C=e.length,v=0,m=O,S=b;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),_.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<C;){for(o=v,s=1,c=E;a>=C&&i("invalid-input"),u=l(e.charCodeAt(a++)),(u>=E||u>x((g-v)/s))&&i("overflow"),v+=u*s,d=c<=S?w:c>=S+I?I:c-S,!(u<d);c+=E)p=E-d,s>x(g/p)&&i("overflow"),s*=p;t=_.length+1,S=h(v-o,t,0==o),x(v/t)>g-m&&i("overflow"),m+=x(v/t),v%=t,_.splice(v++,0,m)}return f(_)}function _(e){var t,n,r,a,o,s,c,f,l,p,_,C,v,m,S,T=[];for(e=u(e),C=e.length,t=O,n=0,o=b,s=0;s<C;++s)(_=e[s])<128&&T.push(k(_));for(r=a=T.length,a&&T.push(A);r<C;){for(c=g,s=0;s<C;++s)(_=e[s])>=t&&_<c&&(c=_);for(v=r+1,c-t>x((g-n)/v)&&i("overflow"),n+=(c-t)*v,t=c,s=0;s<C;++s)if(_=e[s],_<t&&++n>g&&i("overflow"),_==t){for(f=n,l=E;p=l<=o?w:l>=o+I?I:l-o,!(f<p);l+=E)S=f-p,m=E-p,T.push(k(d(p+S%m,0))),f=x(S/m);T.push(k(d(f,0))),o=h(n,v,r==a),n=0,++r}++n,++t}return T.join("")}function C(e){return c(e,function(e){return R.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return c(e,function(e){return y.test(e)?"xn--"+_(e):e})}var m=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var S,g=2147483647,E=36,w=1,I=26,T=38,N=700,b=72,O=128,A="-",R=/^xn--/,y=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=E-w,x=Math.floor,k=String.fromCharCode;S={version:"1.4.1",ucs2:{decode:u,encode:f},decode:p,encode:_,toASCII:v,toUnicode:C},void 0!==(a=function(){return S}.call(t,n,t,e))&&(e.exports=a)}()}).call(t,n(918)(e),n(16))},1675:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},1676:function(e,t,n){"use strict";t.decode=t.parse=n(1677),t.encode=t.stringify=n(1678)},1677:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var f=0;f<u;++f){var l,d,h,p,_=e[f].replace(s,"%20"),C=_.indexOf(n);C>=0?(l=_.substr(0,C),d=_.substr(C+1)):(l=_,d=""),h=decodeURIComponent(l),p=decodeURIComponent(d),r(i,h)?a(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},1678:function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var s=encodeURIComponent(a(i))+n;return o(e[i])?r(e[i],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[i]))}).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},1679:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(98),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),h=r(d),p=n(543),_=n(862),C=n(158),v=n(401),m=window.Logger("dataconf")("logic"),S=function(){function e(){var t=this;(0,l.default)(this,e),this.mobileWhiteBoardStateChange=function(e){m.info("enter mobileWhiteBoardStateChange state: "+e),$dispatch(coreUi.changeStartWhiteBoard(1===e))},this.mobileScreenShareStateChange=function(e){m.info("enter mobileScreenShareStateChange state: "+e),t.isStartScreenShare=1===e,$dispatch(coreUi.changeStartScreenShare(1===e))},this.onMobileShareUserIdChange=function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("onMobileShareUserIdChange, id=",handlePhoneNumber(n)),isNullOrEmpty(n)||t.isStartScreenShare||(m.info("showToast"),window.JSToNativeToast(2e3,language.DATA_CONFERENCE_READY_TO_SHARE)),$dispatch(coreUi.changeSharePersonNum(n)),!r||""===r){e.next=7;break}window.notifyScreenShareOwner(r),e.next=16;break;case 7:if(!n||""===n){e.next=14;break}return e.next=10,t.getContactFromMemberListByID(n);case 10:a=e.sent,isNullOrEmpty(a.name)?window.notifyScreenShareOwner(""):(m.info("onMobileShareUserIdChange getContact = "+handlePhoneNumber(a.name)),window.notifyScreenShareOwner(a.name)),e.next=16;break;case 14:m.info("onMobileShreUserIdChange id is empty"),window.notifyScreenShareOwner("");case 16:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.getContactFromMemberListByID=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i,c,u,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=$getState(),a=r.conf.memberListInfo,i={},c=!1,u=0;case 4:if(!(u<a.length)){e.next=14;break}if(n!==a[u].number){e.next=11;break}return i=a[u].userInfo,i.bind_no=a[u].number,c=!0,m.info(" getContactFromMemberListByID, isFound = ",c),e.abrupt("return",i);case 11:u++,e.next=4;break;case 14:if(c){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=20;break}m.info(" [IT-Meeting] set userinfo name Empty! "),(0,o.default)(i,{name:""}),e.next=25;break;case 20:return m.info(" getContactFromMemberListByID, searchContact "),e.next=23,(0,p.searchContact)(n);case 23:f=e.sent,f&&f[0]&&(0,o.default)(i,{name:f[0].name});case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onMobileJoinDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!0)),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&((0,_.meetingHWJoinConf)(),setTimeout(function(){(0,_.meetingHWsaveBigParam)("")},5e3)),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[1],!0);case 3:case"end":return e.stop()}},e,t)})),this.onMobileLeaveDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!1));case 1:case"end":return e.stop()}},e,t)})),this.onMobileDataSharingFlagChange=function(e){m.info("onMobileDataSharingFlagChange flag= "+e);var t=$getState().conf,n=t.firstsharingModalShow,r=t.firstInfoConfModalShow;$dispatch(coreUi.setDataSharingFlag(1===e)),$dispatch(coreUi.toggleIsMobileAcceptShareSuccess(1===e)),n&&0===e&&(0,C.resetFirstAcceptShareFlag)("isFirstAcceptShare"),1===e&&r&&(0,C.resetFirstInfoConferenceFlag)("isFirstInfoConf")},this.handleMobileJoinDataFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("handleMobileJoinDataFail"),t.proxy.handleJoinDataConfFail();case 2:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=Noop,this.rejectRemoteControl=Noop,this.setIsUsePrimarySize=Noop,this.proxy=null,this.isStartScreenShare=!1}return(0,h.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(v.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("onMobileShareUserIdChange",this.onMobileShareUserIdChange,e),coreCommon.Observer.subscribe("onMobileJoinDataConf",this.onMobileJoinDataConf,e),coreCommon.Observer.subscribe("onMobileLeaveDataConf",this.onMobileLeaveDataConf,e),coreCommon.Observer.subscribe("onMobileSharingFlagChange",this.onMobileDataSharingFlagChange,e),coreCommon.Observer.subscribe("onMobileJoinDataFail",this.handleMobileJoinDataFail,e),window.mobileWhiteBoardStateChange=this.mobileWhiteBoardStateChange,window.mobileScreenShareStateChange=this.mobileScreenShareStateChange}}]),e}();t.default=S},168:function(e,t,n){"use strict";var r=n(10),a=n(12),o=n(11),i=n(24);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),t=void 0!==c,t&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},1680:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),h=r(d),p=n(186),_=n(224),C=n(599),v=n(158),m=n(204),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),g=n(951),E=n(209),w=n(234),I=n(601),T=r(I),N=n(401),b=window.Logger("dataconf")("logic"),O=null,A=function(){function e(){var t=this;return(0,l.default)(this,e),this.onJoinDataConf=(0,u.default)(s.default.mark(function e(){var n,r,a,o,i,c,f,l,d,h,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().conf.isSvcConf||!window.bigConfIsVideo){e.next=14;break}if((0,_.NotifyJoinConfFailed)(0),$getState().bigwinBuried.buried.postHasSent||((0,C.joinConfFailed)(),$dispatch(coreUi.changeHasSentState(!0))),n=$getState(),r=n.conf.confHandle,a=n.call.callId,""===r){e.next=10;break}return b.error("is not svc conf, leave conf, confHandle=",r),e.next=8,(0,v.actionLeaveConf)();case 8:e.next=13;break;case 10:return b.error("is not svc conf, end call, callId=",a),e.next=13,(0,v.endCallInConf)(a);case 13:return e.abrupt("return");case 14:return o=$getState().call.callId,e.next=17,coreCall.getBasicBandInfo(o);case 17:i=e.sent,b.info("Join Conference Success"),c=$getState().login,f=c.sipImpi,l=f,isNullOrEmpty(l)||-1!==(d=l.indexOf("@"))&&(l=l.slice(0,d)),(0,_.NotifyMyJoinConf)(0,l),S.setDataShareVersion(1),(0,C.startCalcCPUUsage)(),(0,g.startRecordQos)(),(0,C.joinConfSuccess)(i),h=function(){var e=(0,u.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.bfcpFrameHwnd,b.info("delayDispatchRecvBFCP "+window.delayDispatchRecvBFCP),n>0?(b.info("delay dispatch bfcp recv message, notify to proxy bfcp is start"),(0,_.NotifyStartSharing)(0,""),window.delayDispatchRecvBFCP=!1):window.delayDispatchRecvBFCP=!1;case 3:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),p=$getState().conf.bfcpFrameHwnd,window.delayDispatchRecvBFCP&&p>0&&setTimeout(function(){h()},2e3);case 31:case"end":return e.stop()}},e,t)})),this.closeBfcpFrameForOwnerChanged=Noop,this.handleApplistResult=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i,c,u,f,l,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf.isFirstActiveAppShare,a=S.getShareAppHwnd(),i=S.getOldShareAppHwnd(),b.info("handleApplistResult,data = ",n),0!==a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,S.setDataConfShareRealRect();case 8:if(S.setSharingapp(a),b.info("clear bfcp clock"),clearTimeout(window.clearSetBfcp),!(a>0)){e.next=14;break}return e.next=14,w.NativeInterface.setHightlightShareWnd(a,!0);case 14:return S.setTransparentwindow(a,0),e.next=17,w.NativeInterface.getTransparentWindow(a);case 17:if(c=e.sent,b.info("getTransparentWindow retWindows : "+(0,o.default)(c)),0===c.result&&(u=c.param.hwndList)&&"Array"===u.constructor.name&&u.length>0)for(f=0;f<u.length;++f)u[f].hwnd>0&&S.setTransparentwindow(u[f].hwnd,1);S.setAppShareScreenParam(9,{width:3,height:0}),r?(l=$getState().call.callId,coreCall.setDataBandwidth(l,0,S.getDataNegoBandwidth()),d=S.getDataCodeccVersion(),b.info("codeccVersion = "+d),S.setDataCodecVersion(d),S.setStart(),S.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!1))):b.info("already sharing, just set new hwnd"),i>0&&i!==a&&S.cancelSharingapp(i);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenOper=function(e){var t=$getState().conf.sharePersonName;b.info("NotifyLocalStartSharing"),(0,_.NotifyLocalStartSharing)(0,t),(0,C.shareScreenOper)(e)},this.onRemoteScreenShare=function(e){(0,C.remoteScreenShare)(e)},this.onBigWinStartSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("onBigWinStartSharing: ",(0,o.default)(n)),clearTimeout(window.clearSetBfcp),b.info("clear bfcp clock"),r=$getState().conf.confHandle,a=S.getShareAppHwnd(),""===r){e.next=14;break}return e.next=8,(0,E.getWndRect)(n.param.hWnd);case 8:i=e.sent,b.info("get wnd rect, wnd: "+n.param.hWnd+" ",{left:i.param.left,top:i.param.top,right:i.param.right,bottom:i.param.bottom}),i.param.right>0&&i.param.bottom>0&&S.setDataShareRealRect(i.param.left,i.param.top,i.param.right,i.param.bottom),a>0?(w.NativeInterface.setHightlightShareWnd(a,!1),n.param&&n.param.hWnd>0&&(S.setOldShareAppHwnd(a),S.setShareAppHwnd(n.param.hWnd),S.changeShareMonitorType(n.param.shareType),S.getDisplayInfo(),S.getApplist())):n.param&&n.param.hWnd>0&&($dispatch(coreUi.changeFirstActiveShareApp(!0)),S.setShareAppHwnd(n.param.hWnd),S.setOldShareAppHwnd(0),S.changeShareMonitorType(n.param.shareType),S.startShare(40)),e.next=15;break;case 14:b.error("onBigWin is not in conference, you can't share");case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinStopSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("onBigWinStopSharing: ",(0,o.default)(n)),r=$getState(),a=r.conf.confHandle,i=S.getShareAppHwnd(),""!==a?(S.stopShareScreen(),w.NativeInterface.setHightlightShareWnd(i,!1),S.setShareAppHwnd(0),S.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))):b.error("onBigWin is not in conference, you can't stop share");case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={hWnd:851978},a=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}b.info("getBfcpFrameHwnd"),a=w.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return b.info("getDataConfFrameWnd"),e.next=10,w.NativeInterface.getDataConfFrameWnd();case 10:a=e.sent;case 11:return b.info("onBigWinGetSharingHwnd 2data:",a),a&&a.param&&a.param.frameHwnd?r.hWnd=a.param.frameHwnd:b.error("onBigWinGetSharingHwnd value undefined!"),o=null,e.next=16,new T.default;case 16:o=e.sent,o.postRpsParamMessage(n,r,0);case 18:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("OnBigWinSetRecvShareParam =:",(0,o.default)(n)),n.param.width&&n.param.height&&(coreAccount.set("share-wnd-width",n.param.width,!0),coreAccount.set("share-wnd-height",n.param.height,!0),w.NativeInterface.setBigconfDataInitRect(n.param.width,n.param.height));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},this.resumeVideoWhenDataEnd=function(){win.hide()},this.onRequestOperateTokenFail=function(){S.setShareAppHwnd(0),S.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));var e=$getState().conf.bfcpFrameHwnd;b.info("isReceivingBFCP = "+$getState().call.iSreceivingBFCP+", bfcpFrameHwnd = "+e),$getState().call.iSreceivingBFCP&&e>0&&(b.info("onRequestOperateTokenFail init bfcp frame because request aux token failed"),(0,_.NotifyStartSharing)(0,""))},this.handleReceiveScreenKeyFrame=function(){if(S.setShareAppHwnd(0),S.setOldShareAppHwnd(0),!t.hasReceiveShare){var e=$getState().conf.sharePersonName;b.info("onAsOnScreenFrameRecv, recv first frame, notify to proxy other share is start",e),(0,_.NotifyStartSharing)(0,e),t.hasReceiveShare=!0}},this.handleDataShareEnd=function(){t.hasReceiveShare=!1},this.hidePickSharingWindow=function(){},this.switchVideoFloating=function(){},this.resumeVideoWhenDataEnd=function(){},O||(this.hasRegistedBigObserver=!1,O=this),this.proxy=null,this.hasReceiveShare=!1,O}return(0,h.default)(e,[{key:"registerDataEvent",value:function(){b.info("registerBigWinEvent, BigwinObserver subscribe topics");var e=new coreCommon.ObserverOpts(N.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("OnGetServerIp",this.onGetServerIp,e),coreCommon.Observer.subscribe("OnSshareScreenOper",this.onShareScreenOper,e),coreCommon.Observer.subscribe("OnRemoteScreenShare",this.onRemoteScreenShare,e),this.hasRegistedBigObserver?b.info("big win observer has registed, ignore"):(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onBigWinStartSharing),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onBigWinStopSharing),coreCommon.BigwinObserver.subscribe("OnGetSharingUsername",this.onBigWinSharingUsername),coreCommon.BigwinObserver.subscribe("onBigWinDataSharingHwnd",this.onBigWinDataSharingHwnd),coreCommon.BigwinObserver.subscribe("OnSetRecvShareParam",this.onBigWinSetRecvShareParam),this.hasRegistedBigObserver=!0)}},{key:"closeBfcpFrameForSharingSession",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.SvcAtdManager.closeBfcpFrame();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeAppShare",value:function(e){var t=$getState().conf.sharePersonName;t===$getState().myInfo.name||e.isself?((0,_.NotifyLocalStopSharing)(0,t),(0,C.shareScreenOper)(1),b.info("stop own sharing",t),S.getShareAppHwnd()>0&&(S.setShareAppHwnd(0),S.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),coreCall.setDataBandwidth($getState().call.callId,2,S.getDataNegoBandwidth()),b.info("xxxxxxxxxxThis userStopsharing",t)):((0,_.NotifyStopSharing)(0,t),b.info("xxxxxxxxxxThat userStopsharing",t))}},{key:"clearBfcpTimer",value:function(){clearTimeout(window.clearSetBfcp),b.info("clear bfcp clock")}},{key:"initDeviceStates",value:function(){}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(!0)),r=$getState().conf.isFirstActiveAppShare,b.info("isFirstActiveAppShare = ",r),b.info("just recv data signal, create recv window, not notify to proxy"),512===t&&(b.info("compid is 512, recv WBPage"),(0,_.NotifyStartSharing)(0,n));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){512===e&&((0,_.NotifyStopSharing)(0,t),b.info("compid is 512, xxxxxxxxxxThat userStopsharing",t))}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_.NotifyJoinConfFailed)(0),$getState().bigwinBuried.buried.postHasSent||((0,C.joinConfFailed)(),$dispatch(coreUi.changeHasSentState(!0))),t=$getState(),n=t.conf.confHandle,r=t.call.callId,""===n){e.next=9;break}return b.error("OnJoinDataConfFail, leave conf, confHandle=",n),e.next=7,(0,v.actionLeaveConf)();case 7:e.next=12;break;case 9:return b.error("OnJoinDataConfFail, end call, callId=",r),e.next=12,(0,v.endCallInConf)(r);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"onGetServerIp",value:function(e){(0,C.setServerIp)(e)}},{key:"handleWindowForStopShareScreen",value:function(){}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){S.setShareAppHwnd(0),S.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;b.info("recv first frame, notify to proxy other share is start",e),(0,_.NotifyStartSharing)(0,e)}}]),e}();t.default=A},1681:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(204),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),p=n(158),_=n(186),C=n(401),v=n(602),m=window.Logger("dataconf")("logic"),S=function(){function e(t){var n=this;(0,u.default)(this,e),this.registerDataEvent=function(){n.platformImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(C.DFConfig.moduleName);e.target=n,coreCommon.Observer.subscribe("OnShareingStart",n.onDataShareStart,e),coreCommon.Observer.subscribe("OnShareingEnd",n.onDataShareEnd,e),coreCommon.Observer.subscribe("dataUserEnter",n.onDataUserEnter,e),coreCommon.Observer.subscribe("dataUserleave",n.onDataUserLeave,e),coreCommon.Observer.subscribe("OnReleaseHandle",n.onDataConfReleaseHandle,e),coreCommon.Observer.subscribe("OnJoinDataConf",n.onJoinDataConf,e),coreCommon.Observer.subscribe("OnConfInfoNotify",n.onConfInfoNotify,e),coreCommon.Observer.subscribe("OnShareOwnerChange",n.onShareOwnerChange,e),coreCommon.Observer.subscribe("OnSharingScreenSizeChange",n.onShareScreenSizeChange,e),coreCommon.Observer.subscribe("OnSharingSessionStart",n.onSharingSessionStart,e),coreCommon.Observer.subscribe("OnRemoteControlPrivilege",n.onGetRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnDelRemoteControlPrivilege",n.onDeleteRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnRequestRemoteControlPrivilege",n.onRequestRemoteControlPrivilege,e),coreCommon.Observer.subscribe("handleSelfEnterResult",n.handleSelfEnterResult,e),coreCommon.Observer.subscribe("OnScreenSharingStateChange",n.handleScreenSharingStateChange,e),coreCommon.Observer.subscribe("onRequestOperateTokenFail",n.onRequestOperateTokenFail,e),coreCommon.Observer.subscribe("onStopShareFinished",n.onStopShareFinished,e),coreCommon.Observer.subscribe("OnJoinDataConfFail",n.onJoinDataConfFail,e),coreCommon.Observer.subscribe("OnDealInviteUserWBSharing",n.handleInviteUserWBSharing,e),coreCommon.Observer.subscribe("OnStartShareFailed",n.onStartShareFailed,e)},this.onDataShareStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("  logic dataconfnotify other share start",t),n.platformImpl.closeBfcpFrameForSharingSession(),n.changeDataControlShow(!1),$dispatch(coreUi.showConfData(!0));case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataShareEnd=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.platformImpl.handleDataShareEnd(),!t.isself){e.next=7;break}return m.info("data.isself is true, stopShareScreen"),e.next=5,n.stopShareScreen();case 5:e.next=8;break;case 7:window.isByShareState=!1;case 8:n.platformImpl.closeAppShare(t),n.doExitFullScreen(),m.info(" logic dataconfnotify onDataShareEnd start bfcp state: "+$getState().call.iSreceivingBFCP),n.changeShowModeAndStatus(),n.platformImpl.handleBfcpWindow(t),r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r));case 15:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataUserLeave=function(e){m.info(" logic dataconfnotify onDataUserLeave start"),!0===e.param.isSelf&&n.stopMyShare(),h.handleShareEnd(e.param.user_alt_id)},this.onDataConfReleaseHandle=function(){m.info(" logic dataconfnotify OnDataConfReleaseHandle start"),n.hidePickSharingWindow(),n.doExitFullScreen(),n.stopMyShare(),h.handleShareEnd(h.getMyUserId());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.onJoinDataConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_JOIN_DATA,["onJoinDataConf"]),m.info(" logic dataconfnotify onJoinDataConf start"),$dispatch(coreUi.enterDataConf(!0));case 3:case"end":return e.stop()}},e,n)})),this.changeDataControlShow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.platformImpl.changeDataControlShowImpl(t,2);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onConfInfoNotify=function(){m.info(" logic dataconfnotify OnConfInfoNotifytaConf start"),coreConf.isConfChairMan()&&h.getIsAutoStartScreenShare()&&coreUi.showConfTips("",constant.CONF_MSG_TYPE.TYPE_TOP_SHOW,language.ENTER_CONF_JOIN_IN_DATACONF),$dispatch(coreUi.hideDataShareButton(!0))},this.onShareOwnerChange=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,i,s,c,u,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(m.info("onShareOwnerChange,userNum = "+handlePhoneNumber(t.userNum)),n.platformImpl.closeBfcpFrameForOwnerChanged(),r=h.getDataConfMemberList(),a="",i=0;i<r.length;++i)"number"==typeof r[i].number?r[i].number===t.userNum&&(a=r[i].userInfo.name):r[i].user_num?r[i].user_num===t.userNum&&(a=r[i].user_name):(s=/:[\S]+\@/,c=s.exec(r[i].number),u=c[0].split(""),u.pop(),u.shift(),(f=u.join(""))===t.userNum&&(a=r[i].userInfo.name));$dispatch(coreUi.changeSharePersonName(a)),$dispatch(coreUi.changeSharePersonNum(t.userNum)),h.updateDataShareOwner(t.userNum),$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISWIN&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),!1===t.isSelf?(window.Toast(language.DATA_CONFERENCE_READY_TO_SHARE,2,!1,"pcToast_center"),n.changeDataControlShow(!1),n.doSmallVideoWithData(),$getState().conf.isSvcConf&&(m.info("onShareOwnerChange,in svc mode, data.isSelf = "+t.isSelf),n.platformImpl.receiveSvcForOwnerChanged(a))):$getState().conf.isSvcConf&&(m.info("onShareOwnerChange,in svc mode,share is self"),n.platformImpl.stopSvcForOwnerChanged());case 12:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenSizeChange=function(e){n.platformImpl.showWinForSizeChange(),n.updateDataPicSize(e),n.changeDataControlShow(!1),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),n.doSmallVideoWithData(),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.fullScreenReceiveShare()},this.onSharingSessionStart=function(e){m.info(" logic dataconfnotify OnSharing[Session]Start start",desensitive(e)),$dispatch(coreUi.hideDataShareButton(!0)),"full"===$getState().call.screenState&&coreCall.exitFullScreen(),delegate.winMinimize(),n.doSmallVideoWithDataCapture()},this.onGetRemoteControlPrivilege=function(e){var t=e.isself;if(t?(m.info(" OnGetRemoteControlPrivilege start is self"),n.platformImpl.addEventListenerForCtrlPrivilege(),h.setNativeDataControlStatus(1)):m.info(" OnGetRemoteControlPrivilege start not self"),e&&e.usernum){m.info(" OnGetRemoteControlPrivilege start notify");var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"acceptPrivilege":"notifyGetPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"acceptPrivilege"===r.type){var a=language.SHARING_ACCEPT_REMOTECONTROL,o=" "!==r.name?r.name:r.bind_no;a=a.replace("{0}",o),window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}else m.info(" OnGetRemoteControlPrivilege data is invalid")},this.onDeleteRemoteControlPrivilege=function(e){var t=e.isself;if(t?(m.info(" OnDeleteRemoteControlPrivilege start is self"),n.platformImpl.deleteEventListenerForCtrlPrivilege(),h.setNativeDataControlStatus(0)):m.info(" OnDeleteRemoteControlPrivilege start is self"),e&&e.usernum){var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"rejectPrivilege":"notifyDelPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"rejectPrivilege"===r.type){var a=language.SHARING_REJECT_REMOTECONTROL;window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}},this.onRequestRemoteControlPrivilege=function(e){if(m.info(" logic OnRequestRemoteControlPrivilege start",handlePhoneNumber(e.usernum)),e&&e.usernum){var t=n.getContactFromDataConfMemberList(e.usernum);t.type="requestPrivilege",$dispatch(coreUi.showDataConfCmdNotify(t,!0))}},this.handleSelfEnterResult=function(){coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_JOIN_DATA,["handleSelfEnterResult"]),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN_DATA,null,[1],!0),m.info(" logic dataconfnotify handleSelfEnterResult start"),!1===h.getIsAutoStartScreenShare()?h.isConfDataShareLoadSuccess()?(m.info(" handleSelfEnterResult not auto startshare, has load comp success"),$dispatch(coreUi.hideDataShareButton(!1))):m.info(" handleSelfEnterResult not auto startshare, hasnot load comp "):(h.setIsAutoStartScreenShare(!1),m.info("handleSelfEnterResult auto share start"),$dispatch(coreUi.hideDataShareButton(!0)),n.retryCheckCount=0,h.getSharingType()===constant.ConfSharingType.Document?n.checkStartDocumentSharing():n.checkStartShareScreen())},this.handleScreenSharingStateChange=function(e){m.info("debug info handleScreenSharingStateChange param: ",e,$getState().call.iSreceivingBFCP),n.dataSharingFlagTimerID>0&&(m.info("debug info handleScreenSharingStateChange clear timer"),clearTimeout(n.dataSharingFlagTimerID),n.dataSharingFlagTimerID=0),1===e?n.changeDataControlShow(!1):2===e&&n.changeDataControlShow(!window.CLIENTCONFIG.ISBIGWIN),1===e||2===e?($dispatch(coreUi.setDataSharingFlag(!0)),$dispatch(coreUi.changeReceiveBfcp(!0)),_.SvcAtdManager.setNativeSelectState()):n.dataSharingFlagTimerID=setTimeout(function(){m.info("debug info handleScreenSharingStateChange delay set false : "),$dispatch(coreUi.setDataSharingFlag(!1));var e=$getState().conf,t=e.svcViewMode,n=e.maxSizeForPage;t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&window.CLIENTCONFIG.ISWIN&&n!==_.SvcAtdManager.getMaxSizeForPage(t)&&($dispatch(coreUi.changeMaxSizeForPage(_.SvcAtdManager.getMaxSizeForPage(t))),_.SvcAtdManager.RedrawVideoMain()),_.SvcAtdManager.setNativeSelectState()},500)},this.onJoinDataConfFail=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("OnJoinDataConfFail start"),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.onJoinDataConfFail(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleInviteUserWBSharing=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("handleInviteUserWBSharing start"),window.isDataSharing=!0,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),n.startAppSharingWindow(1);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=function(){m.info("start share failed."),n.platformImpl.onStartShareFailed()},this.checkStartDocumentSharing=function(){h.isConfDocShareLoadSuccess()?(m.info("checkStartDocumentSharing start doc share directly"),n.openDocShareFile(h.getDocShareFilePath())):h.docShareCompLoadSucCallback(function(){n.openDocShareFile(h.getDocShareFilePath())})},this.startShareScreen=function(){if(m.info("startShareScreen start"),coreConf.isNeedUpdate2DataConf())m.info("startShareScreen need update2DataConf"),h.setIsAutoStartScreenShare(!0),(0,p.upgradeAudioConf2Data)();else{var e=$getState().call.callId;coreCall.setDataBandwidth(e,0,h.getDataNegoBandwidth());var t=h.dataConfStatus();if(t===v.DCONF_STATUS.IN_CONF){var r=$getState().call;h.isRecevingSharing(),h.isRecevingSharing()||r.iSreceivingBFCP?(m.info("startShareScreen someone sharing"),n.platformImpl.showStartConfirmWithCallback(function(){coreCall.exitFullScreen(),n.resumeVideoWhenDataEnd(),n.startShareScreenOrApp()})):(m.info("startShareScreen contend startshare "),n.startShareScreenOrApp())}else t===v.DCONF_STATUS.JOINING?m.info("startShareScreen fail, joining dataconf "):t===v.DCONF_STATUS.LEAVING||t===v.DCONF_STATUS.LEFT?m.info("startShareScreen fail, status is leaving"):t===v.DCONF_STATUS.JOIN_FAIL&&(m.info("startShareScreen no join data conf "),h.retryJoinDataConf())}},this.openDocShareFile=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("openDocShareFile called"),h.openDocShareFile(t);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.startShareScreenOrApp=function(){m.info("start share screen or app , isAppShareEnabled = ",C.DFConfig.isAppShareEnabled),C.DFConfig.isAppShareEnabled?n.platformImpl.getApplist():n.startAppSharingWindow(0)},this.startAppSharingWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.platformImpl.startAppSharingWindow(t),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataConfFail=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.proxy.handleJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.toggleShowDataControlMenu=function(e,t){$dispatch(coreUi.showDataControlMenu(t))},this.rejectRemoteControl=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,h.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setRemoteControl2Other=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,h.changeRemoteControl2Other(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){h.changeIsUsePrimarySize(),m.info("setIsUsePrimarySize, isUsePrimarySize="+h.getIsUsePrimarySize());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.hidePickSharingWindow=function(){n.platformImpl.hidePickSharingWindow()},this.getDesktopShareSize=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.proxy.getDesktopShareSize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,n)})),this.doSmallVideoWithData=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return win.hide(),e.abrupt("return");case 3:if(!$getState().conf.isSvcConf){e.next=6;break}return m.info("is svcconf,doSmallVideoWithData return"),e.abrupt("return");case 6:t=$getState().call,"VIDEO_CONNECTED"===t.callStatus&&(m.info("<video>in data full,doSmallVideoWithData"),"extra"===t.screenState?delegate.resumeShow(!0):"min"===t.screenState&&coreCall.changeScreenState("middle"),t.isRemoteBig&&(n.isVideoRemtoBig=!0,$dispatch(coreUi.changeBigSmallWin())),coreCall.closeLocalCanvasSocket(),r={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(r)),coreCall.setVideoWH(!0,r));case 8:case"end":return e.stop()}},e,n)})),this.onDataUserEnter=function(){},this.onRequestOperateTokenFail=function(){m.info("start share failed."),n.platformImpl.onRequestOperateTokenFail()},this.onStopShareFinished=function(){h.setShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.proxy=null,this.platformImpl=t,this.isVideoRemtoBig=!1,this.dataPicSize={},this.retryCheckCount=0,this.dataSharingFlagTimerID=0}return(0,l.default)(e,[{key:"stopShareScreen",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.hideDataShareButton(!1)),m.info("isDataSharing false 2"),window.isDataSharing=!1,e.next=5,h.stopShareScreen();case 5:coreCall.setDataBandwidth($getState().call.callId,2,h.getDataNegoBandwidth()),this.changeDataControlShow(!1),this.platformImpl.handleWindowForStopShareScreen();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"doExitFullScreen",value:function(){window.CLIENTCONFIG.ISBIGWIN||coreCall.exitFullScreen()}},{key:"changeShowModeAndStatus",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),this.resumeVideoWhenDataEnd(),$dispatch(coreUi.showConfData(!1)),$dispatch(coreUi.changeSharePersonNum(""));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("changeDataConfShowMode start, showMode = ",t),r=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=this.platformImpl,r.addTask(this.platformImpl.doChangeDataConfShowMode,a,null,t,n);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"resumeVideoWhenDataEnd",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.platformImpl.resumeVideoWhenDataEnd();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopMyShare",value:function(){m.info(" LeaveDataConf stop my share"),$dispatch(coreUi.showConfData(!1)),this.changeDataControlShow(!1),m.info("test16666"),this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);var e=$getState().common.modalContent;isNullOrEmpty(e)||"progressbar"===e.key||coreUi.hideModal(),window.CLIENTCONFIG.ISBIGWIN||appService.showMainWindow(!0),h.stopStgTunnel(),m.info("isDataSharing false 3"),window.isDataSharing=!1,$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"updateDataPicSize",value:function(e){this.dataPicSize={width:e.param.width,height:e.param.height},this.platformImpl.setDataPicSize(this.dataPicSize)}},{key:"doSmallVideoWithDataCapture",value:function(){if($getState().conf.isSvcConf)return void m.info("is svcconf or is mobile,doSmallVideoWithDataCapture return");var e=$getState().call;if("VIDEO_CONNECTED"===e.callStatus&&"min"!==e.screenState&&"extra"!==e.screenState){m.info("<video>in data capture,doSmallVideoWithData");var t={height:288,width:512};e.isRemoteBig?coreCall.setVideoWH(!0,t):coreCall.setVideoWH(!1,t)}}},{key:"getContactFromDataConfMemberList",value:function(e){for(var t=h.getDataConfMemberList(),n=0;n<t.length;n++)if(e===t[n].user_num)return{bind_no:t[n].user_num,name:t[n].user_name};return""}},{key:"checkStartShareScreen",value:function(){var e=this;if(h.isConfDataShareLoadSuccess())m.info(" checkStartShareScreen success"),h.setIsAutoStartScreenShare(!1),this.retryCheckCount=0,this.startShareScreen();else{if(++this.retryCheckCount>8)return void m.info(" checkStartShareScreen fail, no load datasharecomp,max checkcount 8 times");m.info(" checkStartShareScreen fail, no load datasharecomp,retry after 1000ms"),setTimeout(function(){e.checkStartShareScreen()},1e3)}}}]),e}();t.default=S},1682:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(100),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(95),d=a(l),h=n(4),p=a(h),_=n(5),C=a(_),v=n(93),m=a(v),S=n(544),g=a(S),E=n(94),w=a(E),I=n(224),T=n(1120),N=a(T),b=n(204),O=r(b),A=n(234),R=n(401),y=n(186),L=n(400),M=r(L),D=window.Logger("dataconf")("logic"),x=null,k=function(e){function t(){var e,n=this;(0,p.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return r.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.dealMaxhubAppShare();case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.dealMaxhubAppShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.isFirstActiveAppShare,r=O.getOldShareAppHwnd(),a=O.getShareAppHwnd(),D.info("dealMaxhubAppShare, isFirstActiveAppShare=",t+", shareAppHwnd=",a+", oldShareAppHwnd=",r),O.setAppShareScreenParam(9,{width:3,height:0}),!t){e.next=18;break}return D.info("dealMaxhubAppShare start first sharing"),$dispatch(coreUi.changeFirstActiveShareApp(!1)),O.setSharingapp(a),e.next=11,A.NativeInterface.getTransparentWindow(a);case 11:if(o=e.sent,D.info("getTransparentWindow : "+(0,i.default)(o)),0===o.result&&(s=o.param.hwndList)&&"Array"===s.constructor.name&&s.length>0)for(u=0;u<s.length;++u)s[u].hwnd>0&&O.setTransparentwindow(s[u].hwnd,1);O.setDataCodecVersion(5),O.setStart(),e.next=21;break;case 18:O.setSharingapp(a),D.info("maxhub cancel old sharing, oldShareAppHwnd=",r),r>0&&r!==a&&O.cancelSharingapp(r);case 21:case"end":return e.stop()}},e,n)})),r.handleBfcpForChangeMode=function(){},r.onStartSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("onStartSharing: ",(0,i.default)(t)),O.isInDataConf()||coreConf.isConfChairMan()){e.next=6;break}return D.info("onStartSharing, maxhub not in data conference and not chairman, can not shart sharing"),a=1,(0,I.NotifyShareResult)(0,a,t.param.hWnd),e.abrupt("return");case 6:if(null===window.maxhubShareAppParam){e.next=11;break}return D.info("onStartSharing, maxhub last sharing not finish, can not shart new sharing"),o=2,(0,I.NotifyShareResult)(0,o,t.param.hWnd),e.abrupt("return");case 11:window.maxhubShareAppParam=t.param,r.startShareApp();case 13:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.onStopSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("onStopSharing: ",(0,i.default)(t)),r=$getState(),a=r.conf.confHandle,o=O.getShareAppHwnd(),""!==a?(O.stopShareScreen(),A.NativeInterface.setHightlightShareWnd(o,!1),O.setShareAppHwnd(0),O.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0)),D.info("isDataSharing false 5"),window.isDataSharing=!1):D.error("onStopSharing is not in conference");case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.startShareApp=(0,f.default)(c.default.mark(function e(){var t,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,a=O.isConfDataShareSelfEntered(),o=O.isConfDataShareLoadSuccess(),D.info("startShareApp start, isSelfEntered=",a+"isShareLoadSuccess="+o),!a||!o){e.next=10;break}return D.info("startShareApp, start share"),e.next=8,r.startMaxhubAppSharing(window.maxhubShareAppParam);case 8:e.next=12;break;case 10:t=3,O.isInDataConf()?D.info("startShareApp, joining dataconf now, can not start sharing"):(D.info("startShareApp, not data conf, start retry join data conf"),O.retryJoinDataConf());case 12:window.isHubEnv&&((0,I.NotifyShareResult)(0,t,window.maxhubShareAppParam.hWnd),window.maxhubShareAppParam=null);case 13:case"end":return e.stop()}},e,n)})),r.startMaxhubAppSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("startMaxhubAppSharing, param:",t),!((a=O.getShareAppHwnd())===t.hWnd||t.hWnd<=0)){e.next=5;break}return D.info("startMaxhubAppSharing, param is invalid"),e.abrupt("return");case 5:if(!(a>0)){e.next=14;break}D.info("startMaxhubAppSharing, change sharing wnd, old wnd=",a+"new wnd=",t.hWnd),O.setOldShareAppHwnd(a),O.setShareAppHwnd(t.hWnd),O.changeShareMonitorType(t.shareType),O.getDisplayInfo(),O.getApplist(),e.next=27;break;case 14:return D.info("startMaxhubAppSharing, start new sharing, wnd=",t.hWnd),O.setOldShareAppHwnd(0),O.setShareAppHwnd(t.hWnd),coreCall.setDataBandwidth($getState().call.callId,0,O.getDataNegoBandwidth()),O.setDataShareVersion(1),$dispatch(coreUi.changeFirstActiveShareApp(!0)),O.changeShareMonitorType(t.shareType),D.info("startMaxhubAppSharing, isDataSharing true 3"),window.isDataSharing=!0,r.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),e.next=26,r.proxy.changeDataControlShowImpl(!0);case 26:O.startShare(40);case 27:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.switchVideoFloating=function(){$getState().conf.isSvcConf?y.SvcAtdManager.switchVideoToMin():M.switchVideoToMin()},r.resumeVideoWhenDataEnd=function(){var e=$getState().conf.isSvcConf;window.isDataSharing||(e?y.SvcAtdManager.switchVideoToMain():M.switchVideoToMain())},x||(r.hasRegistedBigObserver=!1,x=r),e=x,(0,m.default)(r,e)}return(0,w.default)(t,e),(0,C.default)(t,[{key:"registerDataEvent",value:function(){(0,g.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"registerDataEvent",this).call(this);var e=new coreCommon.ObserverOpts(R.DFConfig.moduleName);e.target=this,this.hasRegistedBigObserver||(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onStartSharing,e),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onStopSharing,e),this.hasRegistedBigObserver=!0)}},{key:"closeAppShare",value:function(e){if((0,g.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"closeAppShare",this).call(this,e),e.isself){O.getShareAppHwnd()>0&&(O.setShareAppHwnd(0),O.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),(0,I.NotifyLocalStopSharing)(0,"")}}},{key:"clearBfcpTimer",value:function(){(0,g.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"clearBfcpTimer",this).call(this),clearTimeout(window.clearSetBfcp),D.info("clear bfcp clock")}},{key:"changeShowMode",value:function(){function e(){return n.apply(this,arguments)}var n=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"changeShowMode",this).call(this);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,n){(0,g.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"handleCloseNativeDataWnd",this).call(this,e,n)}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){}}]),t}(N.default);t.default=k},1683:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getQrcodePath=t.createQrCode=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1123),u=r(c),f=window.Logger("urlShare")("qrcode");t.createQrCode=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new PromiseObject,n){e.next=5;break}return f.error("qrcode url can not be null"),r.reject(),e.abrupt("return");case 5:return a=window.path.join(window.APP_DATA_PATH,t+".svg").replace(/\\/g,"/"),i=u.default.image(n,{type:"svg"}),s=window.fs.createWriteStream(a),c=i.pipe(s),c.on("error",function(e){f.error("refresh qr code svg failed, error=",e),r.reject()}),c.on("finish",function(){f.info("refresh qr code svg success"),r.resolve()}),e.abrupt("return",r);case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getQrcodePath=function(e){return e?window.path.join(window.APP_DATA_PATH,e+".svg").replace(/\\/g,"/"):void f.error("qrcode url can not be null")}},1684:function(e,t,n){"use strict";(function(t){function r(e){return JSON.parse(JSON.stringify(e))}function a(e,t){var n,a=1;for(e.data1?n=Math.ceil(e.data1.length/8):a=10;a<10;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(e.data10?n=Math.ceil(e.data10.length/8):a=27;a<27;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(n=Math.ceil(e.data27.length/8);a<41;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}throw new Error("Too much data")}function o(e,n){var r=new t(n.data_len);r.fill(0),e=n.version<10?e.data1:n.version<27?e.data10:e.data27;for(var a=e.length,o=0;o<a;o+=8){for(var i=0,s=0;s<8;s++)i=i<<1|(e[o+s]?1:0);r[o/8]=i}for(var u=236,o=Math.ceil((a+4)/8);o<r.length;o++)r[o]=u,u=236==u?17:236;var f=0;return n.blocks=n.blocks.map(function(e){var t=r.slice(f,f+e);return f+=e,n.ec.push(c(t,n.ec_len)),t}),n}function i(e,t,n){t=f.indexOf(t)>-1?t:"M";var r=s(e,n),i=o(r,a(r,t));return u.getMatrix(i)}var s=n(1685),c=n(1686),u=n(1687),f=["L","M","Q","H"],l=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];l=l.map(function(e,t){if(!t)return{};for(var n={},r=1;r<8;r+=2){for(var a=e[0]-e[r],o=e[r+1],i=f[r/2|0],s={version:t,ec_level:i,data_len:a,ec_len:e[r]/o,blocks:[],ec:[]},c=o,u=a;c>0;c--){var l=u/c|0;s.blocks.push(l),u-=l}n[i]=s}return n}),e.exports={QR:i,getTemplate:a,fillTemplate:o}}).call(t,n(116).Buffer)},1685:function(e,t,n){"use strict";(function(t){function n(e,t,n){for(var r=1<<t-1;r;r>>>=1)e.push(r&n?1:0)}function r(e){for(var t=e.length,r=[],a=0;a<t;a++)n(r,8,e[a]);var o={},i=[0,1,0,0];if(n(i,16,t),o.data10=o.data27=i.concat(r),t<256){var i=[0,1,0,0];n(i,8,t),o.data1=i.concat(r)}return o}function a(e){for(var t=e.length,r=[],a=0;a<t;a+=2){var o=6,i=c[e[a]];e[a+1]&&(o=11,i=45*i+c[e[a+1]]),n(r,o,i)}var s={},u=[0,0,1,0];if(n(u,13,t),s.data27=u.concat(r),t<2048){var u=[0,0,1,0];n(u,11,t),s.data10=u.concat(r)}if(t<512){var u=[0,0,1,0];n(u,9,t),s.data1=u.concat(r)}return s}function o(e){for(var t=e.length,r=[],a=0;a<t;a+=3){var o=e.substr(a,3);n(r,Math.ceil(10*o.length/3),parseInt(o,10))}var i={},s=[0,0,0,1];if(n(s,14,t),i.data27=s.concat(r),t<4096){var s=[0,0,0,1];n(s,12,t),i.data10=s.concat(r)}if(t<1024){var s=[0,0,0,1];n(s,10,t),i.data1=s.concat(r)}return i}function i(e){var t=e.indexOf("/",8)+1||e.length,n=s(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return n;var r=s(e.slice(t),!1);return n.data27=n.data27.concat(r.data27),n.data10&&r.data10&&(n.data10=n.data10.concat(r.data10)),n.data1&&r.data1&&(n.data1=n.data1.concat(r.data1)),n}function s(e,n){var s,c=typeof e;if("string"==c||"number"==c)s=""+e,e=new t(s);else if(t.isBuffer(e))s=e.toString();else{if(!Array.isArray(e))throw new Error("Bad data");e=new t(e),s=e.toString()}if(/^[0-9]+$/.test(s)){if(e.length>7089)throw new Error("Too much data");return o(s)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(s)){if(e.length>4296)throw new Error("Too much data");return a(s)}if(n&&/^https?:/i.test(s))return i(s);if(e.length>2953)throw new Error("Too much data");return r(e)}var c=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");e.exports=s}).call(t,n(116).Buffer)},1686:function(e,t,n){"use strict";(function(t){function n(e){for(;e<0;)e+=255;for(;e>255;)e-=255;return o[e]}function r(e){if(e<1||e>255)throw Error("Bad log("+e+")");return i[e]}function a(e){if(u[e])return u[e];var t=a(e-1),o=[];o[0]=t[0];for(var i=1;i<=e;i++)o[i]=r(n(t[i])^n(t[i-1]+e-1));return u[e]=o,o}for(var o=[1],i=[],s=1;s<256;s++){var c=o[s-1]<<1;c>255&&(c^=285),o[s]=c}for(var s=0;s<255;s++)i[o[s]]=s;var u=[[0],[0,0],[0,25,1]];e.exports=function(e,o){e=[].slice.call(e);for(var i=a(o),s=0;s<o;s++)e.push(0);for(;e.length>o;)if(e[0]){for(var c=r(e[0]),s=0;s<=o;s++)e[s]=e[s]^n(i[s]+c);e.shift()}else e.shift();return new t(e)}}).call(t,n(116).Buffer)},1687:function(e,t,n){"use strict";(function(t){function n(e){var n=4*e+17,r=[],a=new t(n);a.fill(0),a=[].slice.call(a);for(var o=0;o<n;o++)r[o]=a.slice();return r}function r(e){for(var t=e.length,n=-3;n<=3;n++)for(var r=-3;r<=3;r++){var a=Math.max(n,r),o=Math.min(n,r),i=2==a&&o>=-2||-2==o&&a<=2?128:129;e[3+n][3+r]=i,e[3+n][t-4+r]=i,e[t-4+n][3+r]=i}for(var n=0;n<8;n++)e[7][n]=e[n][7]=e[7][t-n-1]=e[n][t-8]=e[t-8][n]=e[t-1-n][7]=128}function a(e){var t=e.length;if(t>21){var n=t-13,r=Math.round(n/Math.ceil(n/28));r%2&&r++;for(var a=[],o=n+6;o>10;o-=r)a.unshift(o);a.unshift(6);for(var i=0;i<a.length;i++)for(var s=0;s<a.length;s++){var c=a[i],u=a[s];if(!e[c][u])for(var f=-2;f<=2;f++)for(var l=-2;l<=2;l++){var d=Math.max(f,l),h=Math.min(f,l),p=1==d&&h>=-1||-1==h&&d<=1?128:129;e[c+f][u+l]=p}}}for(var i=8;i<t-8;i++)e[6][i]=e[i][6]=i%2?128:129}function o(e){for(var t=e.length,n=0;n<8;n++)6!=n&&(e[8][n]=e[n][8]=128),e[8][t-1-n]=128,e[t-1-n][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(t<45))for(var n=t-11;n<t-8;n++)for(var r=0;r<6;r++)e[n][r]=e[r][n]=128}function i(e){function t(t){return 1&e[o][c+t]}function n(t){return 1&e[o+t][c]}for(var r=e.length,a=0,o=0;o<r;o++){for(var i=1&e[o][0],s=1,c=1;c<r;c++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var c=0;c<r;c++){for(var i=1&e[0][c],s=1,o=1;o<r;o++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var o=0;o<r-1;o++)for(var c=0;c<r-1;c++){var f=e[o][c]+e[o][c+1]+e[o+1][c]+e[o+1][c+1]&7;0!=f&&4!=f||(a+=3)}for(var o=0;o<r;o++)for(var c=0;c<r;c++)c<r-6&&t(0)&&!t(1)&&t(2)&&t(3)&&t(4)&&!t(5)&&t(6)&&(c>=4&&!(t(-4)||t(-3)||t(-2)||t(-1))&&(a+=40),c<r-10&&!(t(7)||t(8)||t(9)||t(10))&&(a+=40)),o<r-6&&n(0)&&!n(1)&&n(2)&&n(3)&&n(4)&&!n(5)&&n(6)&&(o>=4&&!(n(-4)||n(-3)||n(-2)||n(-1))&&(a+=40),o<r-10&&!(n(7)||n(8)||n(9)||n(10))&&(a+=40));for(var l=0,o=0;o<r;o++)for(var c=0;c<r;c++)1&e[o][c]&&l++;return a+=10*Math.floor(Math.abs(10-20*l/(r*r)))}function s(e){var t=n(e.version);r(t),a(t),o(t);for(var s=1/0,f=0,l=0;l<8;l++){u(t,e,l),c(t,e.ec_level,l);var d=i(t);d<s&&(s=d,f=l)}return u(t,e,f),c(t,e.ec_level,f),t.map(function(e){return e.map(function(e){return 1&e})})}var c=function(){for(var e=Array(32),t=Array(40),n=0;n<32;n++){for(var r=n<<10,a=5;a>0;a--)r>>>9+a&&(r^=1335<<a-1);e[n]=21522^(r|n<<10)}for(var o=7;o<=40;o++){for(var r=o<<12,a=6;a>0;a--)r>>>11+a&&(r^=7973<<a-1);t[o]=r|o<<12}var i={L:1,M:0,Q:3,H:2};return function(n,r,a){function o(e){return c>>e&1?129:128}for(var s=n.length,c=e[i[r]<<3|a],u=0;u<8;u++)n[8][s-1-u]=o(u),u<6&&(n[u][8]=o(u));for(var u=8;u<15;u++)n[s-15+u][8]=o(u),u>8&&(n[8][14-u]=o(u));n[7][8]=o(6),n[8][8]=o(7),n[8][7]=o(8);var f=t[(s-17)/4];if(f)for(var u=0;u<6;u++)for(var l=0;l<3;l++)n[s-11+l][u]=n[u][s-11+l]=function(e){return f>>e&1?129:128}(3*u+l)}}(),u=function(){var e=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}];return function(t,n,r){function a(e){for(var n=128;n;n>>=1){var r=!!(n&e);f(i,s)&&(r=!r),t[i][s]=r?1:0,o()}}function o(){do{if(s%2^s<6?u<0&&0==i||u>0&&i==c-1?(s--,u=-u):(s++,i+=u):s--,6==s&&s--,s<0)return!1}while(240&t[i][s]);return!0}var i,s,c=t.length,u=-1;i=s=c-1;for(var f=e[r],l=n.blocks[n.blocks.length-1].length,d=0;d<l;d++)for(var h=0;h<n.blocks.length;h++)n.blocks[h].length<=d||a(n.blocks[h][d]);l=n.ec_len;for(var d=0;d<l;d++)for(var h=0;h<n.ec.length;h++)a(n.ec[h][d]);if(s>-1)do{t[i][s]=f(i,s)?1:0}while(o())}}();e.exports={getMatrix:s,init:n,fillFinders:r,fillAlignAndTiming:a,fillStub:o,fillReserved:c,fillData:u,calculatePenalty:i}}).call(t,n(116).Buffer)},1688:function(e,t,n){"use strict";(function(t){function r(e,n){n.push(s);var r=t.concat([c]);r.writeUInt32BE(e.size,8),r.writeUInt32BE(e.size,12),r.writeUInt32BE(i(r.slice(4,-4)),21),n.push(r);var a=t.concat([u,o.deflateSync(e.data,{level:9}),new t(4)]);a.writeUInt32BE(a.length-12,0),a.writeUInt32BE(i(a.slice(4,-4)),a.length-4),n.push(a),n.push(f),n.push(null)}function a(e,n,r){var a=e.length,o=(a+2*r)*n,i=new t((o+1)*o);i.fill(255);for(var s=0;s<o;s++)i[s*(o+1)]=0;for(var s=0;s<a;s++)for(var c=0;c<a;c++)if(e[s][c]){var u=((r+s)*(o+1)+(r+c))*n+1;i.fill(0,u,u+n);for(var f=1;f<n;f++)i.copy(i,u+f*(o+1),u,u+n)}return{data:i,size:o}}var o=n(1689),i=n(1695),s=new t([137,80,78,71,13,10,26,10]),c=new t([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),u=new t([0,0,0,0,73,68,65,84]),f=new t([0,0,0,0,73,69,78,68,174,66,96,130]);e.exports={bitmap:a,png:r}}).call(t,n(116).Buffer)},1689:function(e,t,n){"use strict";(function(e){function r(e,t,n){function r(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",r)}function a(t){e.removeListener("end",o),e.removeListener("readable",r),n(t)}function o(){var t,r=null;s>=E?r=new RangeError(w):t=C.concat(i,s),i=[],e.close(),n(r,t)}var i=[],s=0;e.on("error",a),e.on("end",o),e.end(t),r()}function a(e,t){if("string"==typeof t&&(t=C.from(t)),!C.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function o(e){if(!(this instanceof o))return new o(e);h.call(this,e,m.DEFLATE)}function i(e){if(!(this instanceof i))return new i(e);h.call(this,e,m.INFLATE)}function s(e){if(!(this instanceof s))return new s(e);h.call(this,e,m.GZIP)}function c(e){if(!(this instanceof c))return new c(e);h.call(this,e,m.GUNZIP)}function u(e){if(!(this instanceof u))return new u(e);h.call(this,e,m.DEFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);h.call(this,e,m.INFLATERAW)}function l(e){if(!(this instanceof l))return new l(e);h.call(this,e,m.UNZIP)}function d(e){return e===m.Z_NO_FLUSH||e===m.Z_PARTIAL_FLUSH||e===m.Z_SYNC_FLUSH||e===m.Z_FULL_FLUSH||e===m.Z_FINISH||e===m.Z_BLOCK}function h(e,n){var r=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,v.call(this,e),e.flush&&!d(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!d(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||m.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:m.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!C.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new m.Zlib(n);var a=this;this._hadError=!1,this._handle.onerror=function(e,n){p(a),a._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],a.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var i=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,o,e.memLevel||t.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=C.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=i,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function p(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function _(e){e.emit("close")}var C=n(116).Buffer,v=n(535).Transform,m=n(1690),S=n(864),g=n(1124).ok,E=n(116).kMaxLength,w="Cannot create final Buffer. It would be larger than 0x"+E.toString(16)+" bytes";m.Z_MIN_WINDOWBITS=8,m.Z_MAX_WINDOWBITS=15,m.Z_DEFAULT_WINDOWBITS=15,m.Z_MIN_CHUNK=64,m.Z_MAX_CHUNK=1/0,m.Z_DEFAULT_CHUNK=16384,m.Z_MIN_MEMLEVEL=1,m.Z_MAX_MEMLEVEL=9,m.Z_DEFAULT_MEMLEVEL=8,m.Z_MIN_LEVEL=-1,m.Z_MAX_LEVEL=9,m.Z_DEFAULT_LEVEL=m.Z_DEFAULT_COMPRESSION;for(var I=Object.keys(m),T=0;T<I.length;T++){var N=I[T];N.match(/^Z/)&&Object.defineProperty(t,N,{enumerable:!0,value:m[N],writable:!1})}for(var b={Z_OK:m.Z_OK,Z_STREAM_END:m.Z_STREAM_END,Z_NEED_DICT:m.Z_NEED_DICT,Z_ERRNO:m.Z_ERRNO,Z_STREAM_ERROR:m.Z_STREAM_ERROR,Z_DATA_ERROR:m.Z_DATA_ERROR,Z_MEM_ERROR:m.Z_MEM_ERROR,Z_BUF_ERROR:m.Z_BUF_ERROR,Z_VERSION_ERROR:m.Z_VERSION_ERROR},O=Object.keys(b),A=0;A<O.length;A++){var R=O[A];b[b[R]]=R}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(b),writable:!1}),t.Deflate=o,t.Inflate=i,t.Gzip=s,t.Gunzip=c,t.DeflateRaw=u,t.InflateRaw=f,t.Unzip=l,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new i(e)},t.createDeflateRaw=function(e){return new u(e)},t.createInflateRaw=function(e){return new f(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new c(e)},t.createUnzip=function(e){return new l(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new o(t),e,n)},t.deflateSync=function(e,t){return a(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new s(t),e,n)},t.gzipSync=function(e,t){return a(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new u(t),e,n)},t.deflateRawSync=function(e,t){return a(new u(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new l(t),e,n)},t.unzipSync=function(e,t){return a(new l(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new i(t),e,n)},t.inflateSync=function(e,t){return a(new i(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new c(t),e,n)},t.gunzipSync=function(e,t){return a(new c(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new f(t),e,n)},t.inflateRawSync=function(e,t){return a(new f(t),e)},S.inherits(h,v),h.prototype.params=function(n,r,a){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(m.Z_SYNC_FLUSH,function(){g(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,a&&a())})}else e.nextTick(a)},h.prototype.reset=function(){return g(this._handle,"zlib binding closed"),this._handle.reset()},h.prototype._flush=function(e){this._transform(C.alloc(0),"",e)},h.prototype.flush=function(t,n){var r=this,a=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=m.Z_FULL_FLUSH),a.ended?n&&e.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(C.alloc(0),"",n))},h.prototype.close=function(t){p(this,t),e.nextTick(_,this)},h.prototype._transform=function(e,t,n){var r,a=this._writableState,o=a.ending||a.ended,i=o&&(!e||a.length===e.length);return null===e||C.isBuffer(e)?this._handle?(i?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||m.Z_NO_FLUSH)),void this._processChunk(e,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},h.prototype._processChunk=function(e,t,n){function r(u,d){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var h=o-d;if(g(h>=0,"have should not go down"),h>0){var p=s._buffer.slice(s._offset,s._offset+h);s._offset+=h,c?s.push(p):(f.push(p),l+=p.length)}if((0===d||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=C.allocUnsafe(s._chunkSize)),0===d){if(i+=a-u,a=u,!c)return!0;var _=s._handle.write(t,e,i,a,s._buffer,s._offset,s._chunkSize);return _.callback=r,void(_.buffer=e)}if(!c)return!1;n()}}var a=e&&e.length,o=this._chunkSize-this._offset,i=0,s=this,c="function"==typeof n;if(!c){var u,f=[],l=0;this.on("error",function(e){u=e}),g(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(t,e,i,a,this._buffer,this._offset,o)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw u;if(l>=E)throw p(this),new RangeError(w);var h=C.concat(f,l);return p(this),h}g(this._handle,"zlib binding closed");var _=this._handle.write(t,e,i,a,this._buffer,this._offset,o);_.buffer=e,_.callback=r},S.inherits(o,h),S.inherits(i,h),S.inherits(s,h),S.inherits(c,h),S.inherits(u,h),S.inherits(f,h),S.inherits(l,h)}).call(t,n(154))},1690:function(e,t,n){"use strict";(function(e,r){function a(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=n(1124),i=n(1691),s=n(1692),c=n(1693),u=n(1694);for(var f in u)t[f]=u[f];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;a.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},a.prototype.write=function(e,t,n,r,a,o,i){return this._write(!0,e,t,n,r,a,o,i)},a.prototype.writeSync=function(e,t,n,r,a,o,i){return this._write(!1,e,t,n,r,a,o,i)},a.prototype._write=function(n,a,i,s,c,u,f,l){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==t.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=e.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=u,this.strm.next_out=f,this.flush=a,n){var d=this;return r.nextTick(function(){d._process(),d._after()}),this}if(this._process(),this._checkError())return this._afterSync()},a.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},a.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},a.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},a.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},a.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},a.prototype.init=function(e,n,r,a,i){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(n>=-1&&n<=9,"invalid compression level"),o(r>=1&&r<=9,"invalid memlevel"),o(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,i),this._setDictionary()},a.prototype.params=function(){throw new Error("deflateParams Not supported")},a.prototype.reset=function(){this._reset(),this._setDictionary()},a.prototype._init=function(e,n,r,a,o){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=a,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},a.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},a.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=a}).call(t,n(116).Buffer,n(154))},1691:function(e,t,n){e.exports=n(0)(148)},1692:function(e,t,n){e.exports=n(0)(267)},1693:function(e,t,n){e.exports=n(0)(270)},1694:function(e,t,n){e.exports=n(0)(149)},1695:function(e,t,n){"use strict";(function(t,r){!function(){function a(e,t){for(var n=t.length,r=0;r<n;r++)e=i[255&(e^t[r])]^e>>>8;return e}function o(){for(var e=arguments.length,t=-1,n=0;n<e;n++)t=a(t,new r(arguments[n]));return t=(-1^t)>>>0}if("arm"===t.arch)return void(e.exports=n(1696));var i=[];!function(){for(var e=0;e<256;e++){for(var t=e,n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t>>>0}}(),e.exports=o}()}).call(t,n(154),n(116).Buffer)},1696:function(e,t,n){"use strict";(function(t){function n(e,t){for(var n=t.length,r=0;r<n;r++){var o=a[e[3]^t[r]];e[3]=o[3]^e[2],e[2]=o[2]^e[1],e[1]=o[1]^e[0],e[0]=o[0]}}function r(){var e=arguments.length,r=new t(4);r.fill(255);for(var a=0;a<e;a++)n(r,new t(arguments[a]));return r[0]=255^r[0],r[1]=255^r[1],r[2]=255^r[2],r[3]=255^r[3],r.readUInt32BE(0)}for(var a=[],o=0;o<256;o++){var i=a[o]=new t(4);i.writeUInt32BE(o,0);for(var s=0;s<8;s++){var c=1&i[0],u=1&i[1],f=1&i[2],l=1&i[3];i[0]=i[0]>>1^(l?237:0),i[1]=i[1]>>1^(l?184:0)^(c?128:0),i[2]=i[2]>>1^(l?131:0)^(u?128:0),i[3]=i[3]>>1^(l?32:0)^(f?128:0)}}e.exports=r}).call(t,n(116).Buffer)},1697:function(e,t,n){"use strict";function r(e){function t(t,n){return!(t<0||n<0||t>=r||n>=r)&&!!e[t][n]}function n(e,n,r){a[e][n]=1;var o=[];o.push(["M",n,e]);var i=e,s=n,c=0;do{switch(r){case"right":a[i][s]=1,t(i,s)?(a[i-1][s]=1,t(i-1,s)?(o.push(["h",c]),c=0,r="up"):(c++,s++)):(o.push(["h",c]),c=0,r="down");break;case"left":a[i-1][s-1]=1,t(i-1,s-1)?(a[i][s-1]=1,t(i,s-1)?(o.push(["h",-c]),c=0,r="down"):(c++,s--)):(o.push(["h",-c]),c=0,r="up");break;case"down":a[i][s-1]=1,t(i,s-1)?(a[i][s]=1,t(i,s)?(o.push(["v",c]),c=0,r="right"):(c++,i++)):(o.push(["v",c]),c=0,r="left");break;case"up":a[i-1][s]=1,t(i-1,s)?(a[i-1][s-1]=1,t(i-1,s-1)?(o.push(["v",-c]),c=0,r="left"):(c++,i--)):(o.push(["v",-c]),c=0,r="right")}}while(i!=e||s!=n);return o}for(var r=e.length,a=[],o=-1;o<=r;o++)a[o]=[];for(var i=[],o=0;o<r;o++)for(var s=0;s<r;s++)a[o][s]||(a[o][s]=1,t(o,s)?t(o-1,s)||i.push(n(o,s,"right")):t(o,s-1)&&i.push(n(o,s,"down")));return i}function a(e,t,n){r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+="M"+(o[1]+n)+" "+(o[2]+n);break;default:r+=o.join("")}}r+="z",t.push(r)})}function o(e,t){var n=[];return a(e,n,t),{size:e.length+2*t,path:n.filter(Boolean).join("")}}function i(e,t,n,r){var o=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),r>0){var i=o*r;t.push('width="'+i+'" height="'+i+'" ')}t.push('viewBox="0 0 '+o+" "+o+'">'),t.push('<path d="'),a(e,t,n),t.push('"/></svg>'),t.push(null)}function s(e,t,n){var a=e.length,o=9*(a+2*n);t.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+o+" "+o,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(a+n)+" add moveto } bind def","/z { closepath } bind def","9 9 scale",""].join("\n")),r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+=o[1]+n+" "+o[2]+" M ";break;default:r+=o[1]+" "+o[0]+" "}}r+="z\n",t.push(r)}),t.push("fill\n%%EOF\n"),t.push(null)}function c(e,t,n){var a=e.length,o=9*(a+2*n),i=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];i.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+o+" "+o+" ] >> endobj\n");var s="9 0 0 9 0 0 cm\n";s+=r(e).map(function(e){for(var t,r,o="",i=0;i<e.length;i++){var s=e[i];switch(s[0]){case"M":t=s[1]+n,r=a-s[2]+n,o+=t+" "+r+" m ";break;case"h":t+=s[1],o+=t+" "+r+" l ";break;case"v":r-=s[1],o+=t+" "+r+" l "}}return o+="h"}).join("\n"),s+="\nf\n",i.push("4 0 obj << /Length "+s.length+" >> stream\n"+s+"endstream\nendobj\n");for(var c="xref\n0 5\n0000000000 65535 f \n",u=1,f=i[0].length;u<5;u++)c+=("0000000000"+f).substr(-10)+" 00000 n \n",f+=i[u].length;i.push(c,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+f+"\n%%EOF\n"),t.push(i.join("")),t.push(null)}e.exports={svg:i,eps:s,pdf:c,svg_object:o}},1698:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.rejectConf=t.confIncoming=t.svcSeessionModify=t.confInfoNotify=t.changeIsSvcConf=t.handleJoinConf=t.callToConfFail=t.p2pToJoinConf=t.callToConfStart=t.accpetConfSuc=t.acceptConfStart=t.clearAfterConfEnd=t.closeConfPage=t.showConfOutPage=t.closeLoadingPage=t.showLoadingPage=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1699),u=r(c),f=window.Logger("UIConf")("index"),l=null;t.showLoadingPage=function(){null===l?(f.info("showLoadingPage new confUICtrl"),l=new u.default,l.showLoadingPage()):f.error("showLoadingPage confUICtrl is exsit")},t.closeLoadingPage=function(){null===l?f.error("closeLoadingPage, confUICtrl is not exsit"):(l.closeLoadingPage(),f.info("closeLoadingPage, set confUICtrl null"),l=null)},t.showConfOutPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";null===l?(f.info("showConfPage new confUICtrl"),l=new u.default,l.showConfOutPage(e,t,n,r)):f.error("showConfPage confUICtrl is exsit")},t.closeConfPage=function(e,t,n,r){l?l.closeConfPage(e,t,n,r):f.error("closeConfPage confUICtrl is no exsit")},t.clearAfterConfEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l?(l.clearAfterConfEnd(e,t,n,r),f.info("clearAfterConfEnd set confUICtrl null"),l=null):f.error("clearAfterConfEnd confUICtrl is no exsit")},t.acceptConfStart=function(){l?l.acceptConfStart():f.error("acceptConfStart, confUICtrl is not exsit")},t.accpetConfSuc=function(){l?l.accpetConfSuc():f.error("accpetConfSuc, confUICtrl is not exsit")},t.callToConfStart=function(e){null===l?(f.info("callToConfStart new confUICtrl"),l=new u.default,l.callToConfStart(e)):f.error("callToConfStart confUICtrl is exsit")},t.p2pToJoinConf=function(){null===l?(f.info("p2pToJoinConf new confUICtrl"),l=new u.default,l.p2pToJoinConf()):(f.info("p2pToJoinConf confUICtrl is exsit, is active call to conf"),l.p2pToJoinConf())},t.callToConfFail=function(e){l?(l.callToConfFail(e),f.info("callToConfFail set confUICtrl null"),l=null):f.error("callToConfFail confUICtrl is no exsit")},t.handleJoinConf=function(){l?l.handleJoinConf():f.error("handleJoinConf confUICtrl is not exist")},t.changeIsSvcConf=function(){l?l.changeIsSvcConf():f.error("changeIsSvcConf confUICtrl is not exist")},t.confInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,l.confInfoNotify();case 3:e.next=6;break;case 5:f.error("confInfoNotify confUICtrl is not exist");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.svcSeessionModify=function(){l?l.svcSeessionModify():f.error("svcSeessionModify confUICtrl is not exist")},t.confIncoming=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=7;break}return f.info("confInComing new confUICtrl"),l=new u.default,e.next=5,l.confIncoming(t);case 5:e.next=8;break;case 7:f.error("confInComing confUICtrl is exsit");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(e){l?(l.rejectConf(e),f.info("reject conf set confUICtrl null"),l=null):f.error("reject conf confUICtrl is no exsit")}},1699:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(1700),h=r(d),p=n(1701),_=r(p),C=n(1702),v=r(C),m=n(1703),S=r(m),g=n(1704),E=r(g),w=n(1705),I=r(w),T=n(1706),N=r(T),b=n(1709),O=r(b),A=n(413),R=n(1131),y=n(964),L=window.Logger("UIConf")("impl"),M=function(){function e(){(0,u.default)(this,e),this.myStatusCtrl=window.CLIENTCONFIG.USE_IM?new h.default:null,this.upgradeCtrl=new v.default,this.userTrack=new _.default,this.sipLoginOnlyCtrl=coreAccount.getLoginModel().sipLoginOnly?new S.default:null,this.confTempCtrl=isNullOrEmpty($getState().conf.confTempAcsAccount)?null:new E.default,this.platformCtrl=window.CLIENTCONFIG.ISMOBILE?new O.default:window.CLIENTCONFIG.ISMAC?new I.default:new N.default,this.filename="tempFile.txt",this.isVideo=!1}return(0,l.default)(e,[{key:"changeIsSvcConf",value:function(){L.info("changeIsSvcConf"),this.platformCtrl.changeIsSvcConf()}},{key:"changeMediaType",value:function(e){L.info("changeMediaType ,old isVideo = "+this.isVideo+",new isVideo = "+e),$dispatch(coreUi.changeMeetingType(e)),this.isVideo&&!e&&(this.isVideo=!1,this.platformCtrl.changeVideoToAudio()),!this.isVideo&&e&&(this.isVideo=!0,this.platformCtrl.changeAudioToVideo())}},{key:"confIncoming",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("confIncoming"),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.changeCallStatus("CALL_INCOMING")),n={isShow:!0,isUpdateToVideo:!1,callerName:t.confSubject,callerDepartment:"",callerNumber:t.compereNumber,callId:t.confHandle,confId:t.confHandle,callAccount:"",isVideo:t.isVideo?1:0,mediaType:t.mediaType,callType:t.isVideo?1:0},""===n.callerName&&(n.callerName=n.callerNumber),this.platformCtrl.confIncoming(t.isVideo),coreUi.showCallNotify(n),coreUi.incommingRing("In",!0),e.next=11,coreCall.callPermissionCheck(1===n.callType,!1);case 11:window.requestPermissionPromise&&(window.requestPermissionPromise=null);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showLoadingPage",value:function(){L.info("showLoadingPage"),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0))}},{key:"closeLoadingPage",value:function(){L.info("closeLoadingPage"),this.setIsInConf(!1),$dispatch(coreUi.changeEnterConfState(!1))}},{key:"showCallOutPage",value:function(){L.info("showCallOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_OUT")),this.changeMediaType(!1),this.platformCtrl.showCallOutPage()}},{key:"showVideoOutPage",value:function(){L.info("showVideoOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_OUT")),this.changeMediaType(!0),this.platformCtrl.showVideoOutPage()}},{key:"showCallConnectedPage",value:function(){L.info("showCallConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),this.changeMediaType(!1),this.platformCtrl.showCallConnectedPage(),this.clearConfOutTip()}},{key:"showVideoConnectedPage",value:function(){L.info("showVideoConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),this.changeMediaType(!0),this.platformCtrl.showVideoConnectedPage(),this.clearConfOutTip()}},{key:"p2pToVideoConnectedPage",value:function(){L.info("p2pToVideoConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),this.changeMediaType(!0),this.platformCtrl.p2pToVideoConnectedPage(),this.clearConfOutTip()}},{key:"clearConfOutTip",value:function(){L.info("clearConfOutTip"),$dispatch(coreUi.createConfTipMsg([]))}},{key:"showConfOutPage",value:function(e,t,n,r){L.info("showConfOutPage, isVideo = "+e+",isCreateConf = "+t+",confSubject isNullOrEmpty = "+isNullOrEmpty(n)+",confAcs isNullOrEmpty = "+isNullOrEmpty(r)),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(n)?($dispatch(coreUi.changeUserInfo({number:r})),$dispatch(coreUi.changeCallNum(r))):$dispatch(coreUi.changeConfSubject(n)),this.userTrack.init(),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),e?this.sipLoginOnlyCtrl?this.sipLoginOnlyCtrl.goMainPage():this.showVideoOutPage():this.showCallOutPage(),this.showConfOutTip(e,t)}},{key:"showConfOutTip",value:function(e,t){L.info("showConfOutTip, isVideo = "+e+",isCreateConf = "+t);var n="";n=t?e?language.CREATE_CONFERENCE:language.CREATE_VIOCE_CONFERENCE:language.METTING,$dispatch(coreUi.createConfTipMsg([n]))}},{key:"callToConfStart",value:function(e){L.info("callToConfStart, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.changeScreenState("middle"),$dispatch(coreUi.changeMeetingType(!1)),e?$dispatch(coreUi.changeCallStatus("VIDEO_TRANSTO_CONF")):$dispatch(coreUi.changeCallStatus("CALL_TRANSTO_CONF"))}},{key:"p2pToJoinConf",value:function(){var e=coreConf.getIsVideoConf();L.info("p2pToJoinConf, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),this.hideDataShareButton(),e?this.p2pToVideoConnectedPage():this.showCallConnectedPage(),this.dealSvcMemberList()}},{key:"callToConfFail",value:function(e){L.info("callToConfFail, errorCode = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConfFail();var t=$getState().call.callStatus,n="CALL_CONNECTED";"VIDEO_TRANSTO_CONF"===t&&(L.info("conf create result: transto video conf"),n="VIDEO_CONNECTED"),L.info("changeCallStatus",n),$dispatch(coreUi.changeCallStatus(n)),this.platformCtrl.callToConfFail(e,n),$dispatch(coreUi.clearConfInfo()),coreCall.resumeScreenStateWhenCallOrConfEnd()}},{key:"acceptConfStart",value:function(e){L.info("acceptConfStart"),coreUi.stopRing(),coreCall.changeScreenState("middle"),this.platformCtrl.acceptConfStart(),$getState().common.isShowModal?coreUi.hideModal():$getState().common.isShowPop?window.hideAlert&&window.hideAlert():$getState().common.isShowNotifyModal&&$dispatch(coreUi.hideNotifyModal());var t=$getState().notify.callNotify;t.isShow=!1,t.isUpdateToVideo=!1,coreUi.showCallNotify(t),this.platformCtrl.acceptConfStart(e)}},{key:"accpetConfSuc",value:function(){L.info("accpetConfSuc"),this.setIsInConf(!0)}},{key:"rejectConf",value:function(e){if(L.info("rejectConf,confhandle = "+e),coreUi.closeCallNotify(e),coreUi.stopRing(),coreCall.getCallCount()<=0&&$dispatch(coreUi.changeCallStatus("")),this.myStatusCtrl&&this.myStatusCtrl.revert(),coreCall.getCallCount()>0)return void L.info("dealAfterReject has been calling");this.platformCtrl.rejectConf(),$dispatch(coreUi.clearConfInfo())}},{key:"confInfoNotify",value:function(){L.info("confInfoNotify"),this.saveConfInfo(),this.platformCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){L.info("svcSeessionModify"),this.platformCtrl.svcSeessionModify()}},{key:"hideDataShareButton",value:function(){L.info("hideDataShareButton isInDataConf = "+coreConf.getIsDataConf()+",deploymode = "+$getState().login.deployMode),coreConf.getIsDataConf()&&$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING&&(L.info("is dataconf hideDataShareButton true"),$dispatch(coreUi.hideDataShareButton(!0)))}},{key:"stopRing",value:function(){L.info("stopRing"),coreUi.stopRing()}},{key:"closeConfNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.confInfoMap.CONF_HANDLE);L.info("closeConfNotify hanlde = "+e),coreUi.closeCallNotify(e)}},{key:"dealSvcMemberList",value:function(){L.info("dealSvcMemberList"),this.platformCtrl.dealMemberList()}},{key:"handleJoinConf",value:function(){var e=$getState().call.callStatus,t=coreConf.getIsVideoConf();L.info("handleJoinConf,isVideoConf = "+t+",callStatus  = "+e),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),coreConf.getIsRecall()||this.startTime(),this.hideDataShareButton(),t?(this.showVideoConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinVideoConf()):(this.showCallConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinAudioConf()),this.stopRing(),this.closeConfNotify(),this.dealSvcMemberList()}},{key:"closeConfPage",value:function(e,t,n,r){L.info("closeConfPage, isUserActive = "+e+",isEndConf = "+t+",reasonCode = "+n+",exitTip = "+r),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.dragSetDisable(),coreAccount.getLoginModel().sipLoginOnly=!1,this.myStatusCtrl&&this.myStatusCtrl.revert(),this.sipLoginOnlyCtrl?this.platformCtrl.closeConfPage(e,t,""):this.platformCtrl.closeConfPage(e,t,"main/conference"),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeEnterConfState(!1)),this.platformCtrl.showExitConfTip(n,r),"extra"===$getState().call.screenState&&(delegate.resumeShow(!1),delegate.winMinimize()),coreCall.resumeScreenStateWhenCallOrConfEnd();var a=$getState().conf.confHandle;coreUi.closeCallNotify(a),coreUi.stopRing()}},{key:"clearAfterConfEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];L.info("clearAfterConfEnd isUserActive = "+e+",isEndConf = "+t+",reason = "+n+",isCallEnded = "+r),this.userTrack.confEnd(e,n,r),this.sipLoginOnlyCtrl&&(this.confTempCtrl?this.confTempCtrl.confEndLogout(e,t):this.sipLoginOnlyCtrl.confEndLogout()),this.platformCtrl.notifyPluginLogout(),e&&t&&this.recordConfErrorTip(),this.clearData(e),!this.sipLoginOnlyCtrl&&e&&t&&setTimeout(function(){coreConf.getConfList()},2e3),this.upgradeCtrl.checkAndStart()}},{key:"clearData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];L.info("clearData, isUserActive = "+e),e&&(window.isUserActiveClose=!0),this.setIsInConf(!1),this.cancleConfMemberlistMessage(),A.ToolbarManager.clearParam(),this.clearRecordInfoHandle(),this.changeStatusOfConference(!0),this.recoredOldPwd(""),$dispatch(coreUi.changCurrentPageInfo({currentPage:0,totalPage:1})),$dispatch(coreUi.changeConfAcsState(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN)),$dispatch(coreUi.setDataSharingFlag(!1)),$dispatch(coreUi.clearPhoneAddrInfo()),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.clearBuriedData()),$dispatch(coreUi.clearCallInfo()),coreCall.resetCallInfo(),$dispatch(coreUi.clearConfInfo()),$dispatch(coreUi.changeConfAcsState(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN)),appService.deleteFile(window.LOG_PATH,this.filename),this.clearTaskQueue()}},{key:"recordConfErrorTip",value:function(){var e=$getState().conf,t=e.isShowRecordType,n=e.scheduserName,r=e.haveRecorded;L.info("recordConfErrorTip,isShowRecordType:",t);var a=$getState().myInfo.name,o=null;""!==n&&1===t&&1===r?(a===n?o="VIEW_MEETING_RECORDINGS":a!==n&&(o="VIEW_THE_CONFERENCE_RECORDING_FILE"),this.showErrorMsgBox(o)):""===n&&1===t&&(o="VIEW_MEETING_RECORDING_FILE_ADMIN",this.showErrorMsgBox(o))}},{key:"showErrorMsgBox",value:function(e){L.info("showErrorMsgBox,errorTitle:",e),this.platformCtrl.showErrorMsgBox(e)}},{key:"clearTaskQueue",value:function(){L.info("clearTaskQueue MODULE_CONFERENCE"),coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE").clear()}},{key:"setIsInConf",value:function(e){e?L.info("setIsInConf isInconf true, need grayed join or createconf button"):L.info("setIsInConf isInConf false, need active join or createconf button"),$dispatch(coreUi.changeIsShowJoinButton(!e))}},{key:"startTime",value:function(){var e=(new Date).getTime();return e=parseInt(e/1e3),L.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}},{key:"saveConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("saveConfInfo"),t=$getState().conf.confSubject,n=$getState().conf.confIdInput,!t||!n){e.next=6;break}return e.next=6,(0,R.saveConfInfoToDb)(n,t);case 6:$dispatch(coreUi.changeConfIdInput(""));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearRecordInfoHandle",value:function(){L.info("clearRecordInfoHandle"),(0,y.clearRecordInfoLogic)()}},{key:"changeStatusOfConference",value:function(e){L.info("changeStatusOfConference, IsleaveConf = "+e),$dispatch(coreUi.changeStatusOfConf(e))}},{key:"recoredOldPwd",value:function(e){L.info("recoredOldPwd"),$dispatch(coreUi.recoredOldPassword(e))}},{key:"cancleConfMemberlistMessage",value:function(){L.info("cancleConfMemberlistMessage"),$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(L.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}}]),e}();t.default=M},1700:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=window.Logger("UIConf")("myStatusCtrl"),u=function(){function e(){(0,o.default)(this,e),this.isChangedInConf=!1,this.isReverted=!1,this.oldStatus=constant.ONLINE_STATUS.ONLINE,this.oldStatusDesc=""}return(0,s.default)(e,[{key:"changeInConf",value:function(){if(window.isOffline)return void c.info("changeInConf is offline, so return");if(this.isChangedInConf)return void c.info("already changedInConf,so return");this.isChangedInConf=!0;var e=$getState(),t=e.contactGroups.contact_status_map,n=e.myInfo,r=n.account,a=n.statusDesc;this.oldStatus=t[r]&&t[r].status,this.oldStatusDesc=a,c.info("enter conf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",changeInConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting")}},{key:"callToConf",value:function(){return window.isOffline?void c.info("callToConf is offline, so return"):this.isChangedInConf?void c.info("already callToConf,so return"):(this.isChangedInConf=!0,this.oldStatus=$getState().call.oldStatus,this.oldStatusDesc=$getState().call.oldStatusDesc,c.info("callToConf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",callToConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),void this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting"))}},{key:"callToConfFail",value:function(){this.changeStatus(constant.ONLINE_STATUS.BUSY,"Calling")}},{key:"revert",value:function(){return window.isOffline?void c.info("revert is offline, so return"):this.isReverted?void c.info("already reverted, so return"):this.isChangedInConf?(this.isReverted=!0,c.info("leave conf restorestatus,status = "+this.oldStatus+",desc = "+this.oldStatusDesc),void this.changeStatus(this.oldStatus,this.oldStatusDesc)):void c.info("is not save status,no need to revert, so return")}},{key:"changeStatus",value:function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),delegate.publishStatus(e,t)}}]),e}();t.default=u},1701:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=n(862),u=n(850),f=window.Logger("UIConf")("UserTrack"),l=function(){function e(){(0,o.default)(this,e),this.inited=!1}return(0,s.default)(e,[{key:"init",value:function(){if(this.inited)return void f.warn("already inited,so return");coreConf.setServerIp(""),coreUi.showSearchPanel(!1),$dispatch(coreUi.changeHasSentState(!1)),this.inited=!0}},{key:"confEnd",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(0,c.meetingHWLeaveConf)();var r=$getState().call.timer;if(window.CLIENTCONFIG.ISBIGWIN)if(n)coreConf.NotifyJoinConfFailedEx(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.joinConfFailed(),$dispatch(coreUi.changeHasSentState(!0)));else if(e){(0,u.normalEnd)(0,!0,r)}else if(0===t){(0,u.normalEnd)(1,!1,r)}else(0,u.unnormalEnd)(t,r)}}]),e}();t.default=l},1702:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=window.Logger("UIConf")("UpgradeCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"checkAndStart",value:function(){c.info("checkAndStart"),coreAccount.getLoginModel().isPortalUpgrade?coreAccount.reStartUpgrade():(coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade())}}]),e}();t.default=u},1703:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=window.Logger("UIConf")("sipLoginOnlyCtrl"),h=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"goMainPage",value:function(){d.info("goMainPage"),window.CLIENTCONFIG.ISMOBILE||window.goRoute("main")}},{key:"joinVideoConf",value:function(){d.info("sip only joinVideoConf"),window.CLIENTCONFIG.ISWIN&&(delegate.winHide(),appService.hideTrayClickShowMain())}},{key:"joinAudioConf",value:function(){d.info("joinAudioConf"),appService.showMainWindow(!0)}},{key:"dragSetDisable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())}},{key:"dragSetEnable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable())}},{key:"confEndLogout",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confEndLogout"),coreAccount.clearResumeService(),coreAccount.stopResume(),e.next=5,coreAccount.sipserverDeregister();case 5:return e.next=7,coreAccount.clearnsipinfo();case 7:if(!window.CLIENTCONFIG.ISMOBILE){e.next=11;break}setTimeout(function(){window.goRoute("loginCtn")},500),e.next=15;break;case 11:return e.next=13,coreAccount.deRegisterService(!1);case 13:t=this,setTimeout(function(){window.goRoute("login"),t.dragSetEnable()},500);case 15:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=h},1704:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=window.Logger("UIConf")("confTempCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confEndLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.info("confEndLogout,isUserActive = "+e+",isEndConf = "+t),e&&t?setTimeout(function(){delegate.logout(!0,!0)},3e3):delegate.logout(!0,!0)}}]),e}();t.default=u},1705:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=r(a),i=n(98),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(95),h=r(d),p=n(4),_=r(p),C=n(5),v=r(C),m=n(93),S=r(m),g=n(94),E=r(g),w=n(968),I=r(w),T=n(502),N=window.Logger("UIConf")("macCtrl"),b=function(e){function t(){(0,_.default)(this,t);var e=(0,S.default)(this,(t.__proto__||(0,h.default)(t)).call(this));return e.isVideoOutPageExisted=!1,e}return(0,E.default)(t,e),(0,v.default)(t,[{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("showVideoOutPage"),this.isVideoOutPageExisted=!0,t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=7,coreCall.setLocalVideoRender(t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"showUnDecodeMask",value:function(){N.info("showUnDecodeMask");var e=this;this.timerNoDecodeSuc=setTimeout(function(){$dispatch(coreUi.setIsDecodeSuc()),clearTimeout(e.timerNoDecodeSuc)},3e3)}},{key:"p2pToVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return N.info("p2pToVideoConnectedPage isSvcConf, so return"),e.abrupt("return");case 3:return N.info("p2pToVideoConnectedPage"),e.next=6,this.showVideoConnectedPage();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return N.info("showVideoConnectedPage isSvcConf, so return"),e.abrupt("return");case 3:if(N.info("showVideoConnectedPage in"),this.showUnDecodeMask(),!this.isVideoOutPageExisted){e.next=17;break}return t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=11,coreCall.setRemoteVideoRender(t);case 11:return n={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(n)),e.next=15,coreCall.setVideoWH(!1,n);case 15:e.next=26;break;case 17:return r=coreCall.getBigContainerSize(),r=coreCall.calcRealVideoSize({width:16,height:9},r),$dispatch(coreUi.changeBigWinStyle(r)),e.next=22,coreCall.setRemoteVideoRender(r);case 22:return a={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(a)),e.next=26,coreCall.setLocalVideoRender(a);case 26:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e){N.info("callToConfFail errorTitle = "+e),alert(language[e])}},{key:"changeIsSvcConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("changeIsSvcConf"),this.isSvc=!0,e.next=4,this.showSvcConfPage();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("showSvcConfPage"),e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:return e.next=5,coreCall.closeSvcDataSocket();case 5:$dispatch(coreUi.changeSvcOnLineAttendances([])),$dispatch(coreUi.changeSvcShowAttendances([])),$getState().conf.svcRecallorNot||T.SvcAttendanceManager.setSvcLocalRender();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("svcSeessionModify"),t=coreConf.getSsrcRange(),e.next=4,coreCall.closeAllSvcRemoteSocket();case 4:n=(0,s.default)([],$getState().conf.svcShowAttendances),r=new Array,a=0;case 7:if(!(a<n.length)){e.next=17;break}if(1!==n[a].is_self){e.next=10;break}return e.abrupt("continue",14);case 10:for(i=t.max;r.indexOf(i)>=0;)i--;n[a].ssrc=i,r.push(i);case 14:a++,e.next=7;break;case 17:if(c=$getState().conf.svcBigPicInfo,c.hasOwnProperty("ssrc")&&(f=(0,s.default)([],c),f.ssrc=t.min,$dispatch(coreUi.changeSvcBigPicInfo(f))),N.info("handleSvcSeessionModify,newSsrcList is "+(0,o.default)(r)),$dispatch(coreUi.changeUsedSvcSSRCList(r)),$dispatch(coreUi.changeSvcShowAttendances(n)),!($getState().conf.svcOnLineAttendances.length>1)){e.next=25;break}return e.next=25,coreConf.SvcAttendanceManager.sendWatchSvcRequest(n);case 25:return e.next=27,coreConf.SvcAttendanceManager.setSvcVideoRender(n);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"showErrorMsgBox",value:function(e){N.info("showErrorMsgBox, errorTitle = "+e),alert(language[e])}},{key:"showExitConfTip",value:function(e,t){N.info("showExitConfTip reasonCode = "+e+",errorTitle = "+t),0!==e&&alert(t,2)}}]),t}(I.default);t.default=b},1706:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(98),s=r(i),c=n(2),u=r(c),f=n(95),l=r(f),d=n(4),h=r(d),p=n(5),_=r(p),C=n(93),v=r(C),m=n(94),S=r(m),g=n(400),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),w=n(413),I=n(186),T=n(1707),N=r(T),b=n(1708),O=r(b),A=n(968),R=r(A),y=n(209),L=window.Logger("UIConf")("winCtrl"),M=function(e){function t(){(0,h.default)(this,t);var e=(0,v.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.bigWinCtrl=window.CLIENTCONFIG.ISBIGWIN?new N.default:null,e.maxHubCtrl=window.isHubEnv?new O.default:null,e}return(0,S.default)(t,e),(0,_.default)(t,[{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bigWinCtrl){e.next=4;break}L.warn("showVideoOutPage no need for bigwin"),e.next=12;break;case 4:return L.info("showVideoOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,s.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),L.info("showVideoOutPage init avc initCallInterface, set_window_title = ",n),r=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),e.next=12,E.initCallInterface(r,1,1);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return L.info("showVideoConnectedPage isSvcConf, so return"),e.abrupt("return");case 3:if(t=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),L.info("showVideoConnectedPage avc callId  = "+handlePhoneNumber(t)),!E.isAvcNativeExsit()){e.next=10;break}E.updateLocalwindowCallId(t),E.initRemotWindow(t),e.next=16;break;case 10:return window.isCreatingAVCFrame=!0,e.next=13,E.initCallInterface(t,constant.AVC_VIEW_MODE.VIDEO_MODE,constant.SVC_VERSION_FLAG.BASE);case 13:return e.next=15,coreConf.initRemotWindow(t);case 15:window.isCreatingAVCFrame=!1;case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"p2pToVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return L.info("p2pToVideoConnectedPage isSvcConf, so return"),e.abrupt("return");case 3:if(t=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),L.info("p2pToVideoConnectedPage,callId = "+handlePhoneNumber(t)),n=coreConf.getCurrentConfId(),r=coreConf.getInfoOfConf(coreConf.confInfoMap.CONF_SUBJECT),!E.isAvcNativeExsit()){e.next=14;break}E.updateLocalwindowCallId(t),E.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),E.setSubject(r),E.setConfServerId(n),e.next=20;break;case 14:return window.isCreatingAVCFrame=!0,e.next=17,E.initCallInterface(t,constant.AVC_VIEW_MODE.VIDEO_MODE,constant.SVC_VERSION_FLAG.BASE);case 17:return e.next=19,coreConf.initRemotWindow(t);case 19:window.isCreatingAVCFrame=!1;case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e,t){w.ToolbarManager.setConfHandle(""),I.SvcAtdManager.isNativeUIExsit()?(L.info("callToConfFail handlePlatformMessageBox1 isVideo"),I.SvcAtdManager.alertBox(e)):(L.info("callToConfFail handlePlatformMessageBox2 "),alert(language[e]))}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreConf.getSsrcRange(),L.info("svcSeessionModify,ssrcRange min is "+t.min+",max is "+t.max),coreConf.SvcAtdManager.handleSvcSsrcModify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){this.isSvc=!0,this.confConnectedSvc();var e=this.getSvcViewMode(),t=this.getSvcVersionFlag(),n=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID);if(L.info("showSvcConfPage svcViewMode = "+e+",svcVersionFlag = "+t+"callId = "+handlePhoneNumber(n)),window.isCreatingAVCFrame)var r=0,a=setInterval(function(){window.isCreatingAVCFrame?++r>50&&(clearInterval(a),L.info("showSvcConfPage initVideoFrame in creatting AVCFrame time = "+100*r+",please check!!!"),I.SvcAtdManager.initVideoFrame(n,e,t)):(clearInterval(a),L.info("showSvcConfPage initVideoFrame after create AVCFrame time = "+100*r),I.SvcAtdManager.initVideoFrame(n,e,t))},100);else L.info("showSvcConfPage window.isCreatingAVCFrame = "+window.isCreatingAVCFrame),I.SvcAtdManager.initVideoFrame(n,e,t)}},{key:"changeIsSvcConf",value:function(){L.info("changeIsSvcConf"),this.isSvc=!0,this.showSvcConfPage()}},{key:"changeVideoToAudio",value:function(){L.info("changeVideoToAudio"),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew()),I.SvcAtdManager.closeVideoFrame(),I.SvcAtdManager.closeBfcpFrame(),E.closeBfcpFrame(),E.closeCallInterface()}},{key:"confConnectedSvc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("confConnectedSvc"),t=coreConf.getSsrcRange(),n={ssrc:t.min},$dispatch(coreUi.changeSvcBigPicInfo(n)),coreConf.getIsRecall()&&I.SvcAtdManager.handleSvcSsrcModify(t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(e,t){L.info("closeConfPage"),e||(0,y.notifyNativeLeaveConf)(),E.closeCallInterface(),I.SvcAtdManager.closeVideoFrame(),I.SvcAtdManager.closeBfcpFrame(),I.SvcAtdManager.clear(),this.bigWinCtrl&&this.bigWinCtrl.NotifyMyLeaveConf(0),this.maxHubCtrl&&this.maxHubCtrl.NotifyMyLeaveConf(0)}},{key:"showExitConfTip",value:function(e,t){L.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),0!==e&&alert(t,2)}},{key:"notifyPluginLogout",value:function(){L.info("notifyPluginLogout"),this.bigWinCtrl&&this.bigWinCtrl.commonLogOut()}},{key:"showErrorMsgBox",value:function(e){I.SvcAtdManager.isNativeUIExsit()?(L.info("showErrorMsgBox isNative"),I.SvcAtdManager.alertBox(e)):(L.info("showErrorMsgBox isJS"),alert(language[e]))}},{key:"dealMemberList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("dealMemberList"),this.bigWinCtrl){e.next=8;break}if(!((t=$getState().conf.memberListInfo)&&t.length>0)||coreConf.isMemberListNull()){e.next=8;break}return L.info("handleSvcAtdList in confConnected, memberNum = "+t.length),n=this.sortByTime(t),e.next=8,I.SvcAtdManager.handleSvcAtdList(n);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSvcViewMode",value:function(){return L.info("getSvcViewMode"),this.bigWinCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:this.maxHubCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:constant.SVC_VIEW_MODE.BIG_SMALL_MODE}},{key:"getSvcVersionFlag",value:function(){return L.info("getSvcVersionFlag"),this.bigWinCtrl?constant.SVC_VERSION_FLAG.BIG:(this.maxHubCtrl,constant.SVC_VERSION_FLAG.BASE)}},{key:"sortByTime",value:function(e){L.info("sortByTime");var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||this.isInArray3(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r}},{key:"isInArray3",value:function(e,t){if(L.info("isInArray3"),e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1}}]),t}(R.default);t.default=M},1707:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=n(224),u=(window.Logger("UIConf")("BigWinCtrl"),function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){(0,c.NotifyMyLeaveConf)(e)}},{key:"commonLogOut",value:function(){window.bigWinCommonLogOut()}}]),e}());t.default=u},1708:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=n(224),u=window.Logger("UIConf")("MaxHubCtrl"),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){u.info("NotifyMyLeaveConf rst = "+e),(0,c.NotifyMyLeaveConf)(e)}}]),e}();t.default=f},1709:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(95),u=r(c),f=n(4),l=r(f),d=n(5),h=r(d),p=n(93),_=r(p),C=n(94),v=r(C),m=n(1710),S=r(m),g=n(968),E=r(g),w=window.Logger("UIConf")("mobileCtrl"),I=function(e){function t(){(0,l.default)(this,t);var e=(0,_.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.showVideoPreview=function(){var t=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),n=coreConf.getIsSvcConf();w.info("showVideoPreview, call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),window.callStatusChangeNotify(t,"VIDEO_OUT",!1,!0,n,e.isPairConf)},e.iTMeetingCtrl=window.CLIENTCONFIG.ENABLE_IT_MEETING?new S.default:null,e.isPairConf=$getState().synergismInfo.inPairConf?1:0,e.isSvc=!1,e.isVideoConnected=!1,e.notifyIndex="",e.registerNotify(),e}return(0,v.default)(t,e),(0,h.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?w.info("unRegisterNotify success index = "+this.notifyIndex):w.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){w.info("showVideoOutPage"),this.goCallMainRoute()}},{key:"showCallOutPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),t=coreConf.getIsSvcConf();w.info("showCallOutPage, call_id = "+handlePhoneNumber(e)),window.callStatusChangeNotify(e,"CALL_OUT",!1,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"goCallMainRoute",value:function(){var e=window.getRoute();w.info("goCallMainRoute currentPage = "+e),"callMain"!==e&&"mConfMemberPage"!==e&&window.goRoute("callMain")}},{key:"callToConfFail",value:function(e,t){var n=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),r=coreConf.getIsSvcConf();w.info("callToConfFail errorTitle = "+e+",newCallStatus = "+t+",call_id = "+handlePhoneNumber(n)+",isSvcConf = "+r),this.iTMeetingCtrl&&window.callOrConfEnded(),window.callStatusChangeNotify(n,t,!0,!0,r,this.isPairConf);var a=window.getRoute();"callMain"!==a&&"mConfMemberPage"!==a||(w.info("callToConfFail produceCallMemberList"),coreCall.produceCallMemberList()),alert(language[e])}},{key:"confIncoming",value:function(e){var t=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),n=coreConf.getIsSvcConf();w.info("confIncoming isVideo = "+e+",call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),this.iTMeetingCtrl&&window.switchToFront(),window.webView&&(e&&window.webView.initCallVideo(),window.webView.setFrontToLock()),this.goCallMainRoute(),window.callStatusChangeNotify(t,"CALL_INCOMING",!0,!0,n,this.isPairConf)}},{key:"changeAudioToVideo",value:function(){w.info("changeAudioToVideo"),window.webView&&window.webView.initCallVideo()}},{key:"changeVideoToAudio",value:function(){w.info("changeVideoToAudio"),window.webView&&window.webView.unInitCallVideo()}},{key:"showCallConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),t=coreConf.getIsSvcConf();w.info("showCallConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+t),window.callStatusChangeNotify(e,"CALL_CONNECTED",!0,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"p2pToVideoConnectedPage",value:function(){w.info("p2pToVideoConnectedPage"),this.showVideoConnectedPage()}},{key:"showVideoConnectedPage",value:function(){w.info("showVideoConnectedPage"),this.recordDeviceOrient(),this.goCallMainRoute()}},{key:"recordDeviceOrient",value:function(){if(coreConf.getIsSvcConf())return void w.info("recordDeviceOrient no need for svcconf, so return");coreConf.getIsRecall()||w.info("recordDeviceOrient no need for not in recall,so return"),w.info("recordDeviceOrient");var e=$getState().call.deviceOrient;$dispatch(coreUi.recordMobileOrientChange(e))}},{key:"changeIsSvcConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreConf.getInfoOfConf(coreConf.confInfoMap.CALL_ID),w.info("changeIsSvcConf isSvcToNative, call_id = "+handlePhoneNumber(t)+",this.isSvc = "+this.isSvc),this.isVideoConnected&&!this.isSvc?window.isSvcToNative(!0,t,!0):(this.isSvc=!0,window.isSvcToNative(!0,t,!1));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"confInfoNotify",value:function(){var e=$getState().conf.isSvcConf?1:0,t=$getState().call.callId;w.info("confInfoNotify,call_id = "+handlePhoneNumber(t)+",isSvcConf = "+e+",isVideoConf = "+coreConf.getIsVideoConf()),coreConf.getIsVideoConf()&&(this.isVideoConnected=!0,window.callStatusChangeNotify(t,"VIDEO_CONNECTED",!1,!0,e,this.isPairConf)),this.iTMeetingCtrl&&this.iTMeetingCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.svcNativeToJS,w.info("svcSeessionModify =",t),isNullOrEmpty(t)?(n=$getState().conf.svcMobileConfHandles,!isNullOrEmpty(n.remoteLargeViewIdx)&&isNullOrEmpty(t)&&(w.info("SvcNativeToJS then handlessrc -1;"),coreConf.handleSSRCURL(-1))):window.multiStreamPageInfoChangeNotify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConfStart",value:function(e){w.info("acceptConfStart isVideoType =",e),window.webView&&1===e&&window.webView.initCallVideo()}},{key:"rejectConf",value:function(){w.info("rejectConf"),window.webView&&window.webView.releaseFrontToLock(),window.callOrConfEnded(),"callMain"===window.getRoute()&&(w.info("mobile end conf"),history.back())}},{key:"closeConfPage",value:function(e,t,n){var r=$getState().conf.isSvcConf?1:0,a=$getState().call.callId;w.info("closeConfPage isUserActive = "+e+",isEndConf = "+t+",isSvcConf = "+r+",call_id = "+handlePhoneNumber(a)+",backPage = "+n),window.callOrConfEnded();var o=$getState().call.callStatus;if("VIDEO_OUT"!==o&&"VIDEO_CONNECTED"!==o||window.callStatusChangeNotify(a,"VIDEO_END",!1,!0,r,this.isPairConf),this.iTMeetingCtrl)this.iTMeetingCtrl.closeConfPage(e,t);else{"loginCtn"!==window.getRoute()&&(isNullOrEmpty(n)||window.goRoute(n))}this.unRegisterNotify()}},{key:"showExitConfTip",value:function(e,t){w.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),this.iTMeetingCtrl?this.iTMeetingCtrl.showExitConfTip(e,t):0===e?window.ToastNew(t,2):alert(t)}},{key:"notifyPluginLogout",value:function(){w.info("notifyPluginLogout"),this.iTMeetingCtrl&&this.iTMeetingCtrl.endConfLogout()}},{key:"showErrorMsgBox",value:function(e){w.info("showErrorMsgBox errorTitle = "+e),alert(language[e])}}]),t}(E.default);t.default=I},1710:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=n(1711),u=r(c),f=window.Logger("UIConf")("ITMeetingCtrl"),l=function(){function e(){(0,o.default)(this,e),this.hWITMeeting=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?new u.default:null,this.callOutTimer=0,this.isSwitchedToBackMode=!1}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.confInfoMap.CONF_SERVER_ID);e&&(window.confConnectInfo?window.confConnectInfo[e]||(window.confConnectInfo[e]=1):(window.confConnectInfo={},window.confConnectInfo[e]=1)),f.info("confConnected is confid :"+e),this.hWITMeeting&&this.hWITMeeting.confInfoNotify()}},{key:"closeConfPage",value:function(e,t){f.info("closeConfPage isUserActive  = "+curId+",isEndConf = "+t),this.hWITMeeting?(window.switchToBackMode(),this.isSwitchedToBackMode=!0):e&&t||!e?(window.switchToBackMode(),this.isSwitchedToBackMode=!0):window.goRoute("main/conference")}},{key:"showExitConfTip",value:function(e,t){f.info("showExitConfTip reasonCode  = "+e+",exitTip = "+t),this.isSwitchedToBackMode?window.itWeLinkNotifyCallEnded(e,t):0===e?window.ToastNew(t,2):alert(t)}},{key:"endConfLogout",value:function(){f.info("endConfLogout"),this.hWITMeeting&&this.hWITMeeting.endConfLogout()}}]),e}();t.default=l},1711:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=window.Logger("UIConf")("HWITMeetingCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){c.info("confInfoNotify");$getState().call.callStatus,coreConf.getIsSvcConf()}},{key:"endConfLogout",value:function(){c.info("[IT-Meeting] leave conf, dologout"),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)}}]),e}();t.default=u},1712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransToConfCreateGroup=t.confTransToConfRefreshRecent=t.acceptConfRefreshRecent=t.confInComingRefreshRecent=t.createConfToRefreshRecent=void 0;var a=n(98),o=r(a),i=n(106),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=window.Logger("conf")("iMctrl"),h=(t.createConfToRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,h(t.group_id,!1,!0);case 3:e.next=7;break;case 5:return e.next=7,h(t.group_id,!1,!0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confInComingRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confInComingRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.confInfoMap.GROUP_URI),e.next=4,h(t,!1,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.acceptConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("acceptConfRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.confInfoMap.GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=5,h(t,!0,!0);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.confTransToConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("be trans to conf, refresh recent"),t=coreConf.getInfoOfConf(coreConf.confInfoMap.GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=5,h(t,!0,!0,!0);case 5:e.next=9;break;case 7:return e.next=9,h(t,!1,!0,!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.p2pTransToConfCreateGroup=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=p(t,n,r,a),i=o.groupMemList,c=o.groupNumList,f=o.totalGroupList,l="",!window.CLIENTCONFIG.USE_IM){e.next=7;break}return e.next=5,_(i,f);case 5:l=e.sent,c&&c>0&&(d.info("add number to group"),coreGroup.addGroupPhoneMemberService({groupId:l,phoneList:[].concat((0,s.default)(c))}));case 7:return e.abrupt("return",l);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("refresh recent by groupid: "+t),window.CLIENTCONFIG.USE_IM){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=15;break}if(!r){e.next=12;break}return e.next=7,coreIm.createGroupConversation({group_id:t},!1,!0);case 7:a=e.sent,o=a.recent,i=a.group,coreIm.refreshRecentList(o),o.unread_num>0&&$dispatch(coreUi.changeHasUnreadMsg(!0));case 12:if(!n){e.next=15;break}return e.next=15,coreIm.openGroupConversationByConf({group_id:t},!1,!s);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),p=function(e,t,n,r){for(var a=[],i=[],s=[],c=0;c<e.length;c++)e[c].number===e[c].bind_no&&e[c].account!==n.account&&e[c].account!==t.account?a.push((0,o.default)({},e[c])):i.push({phone:e[c].number}),e[c].account!==n.account&&e[c].account!==t.account&&s.push((0,o.default)({},e[c]));if(n.bind_no===r){-1===a.findIndex(function(e){return e.account===n.account})&&a.push((0,o.default)({},n))}else i.push({phone:r});return s.push((0,o.default)({},n)),{groupMemList:a,groupNumList:i,totalGroupList:s}},_=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=coreGroup.createDiscussGroupName(n),e.next=3,coreGroup.createDiscussionGroup(t,r);case 3:if(!(a=e.sent)||!a.group_id){e.next=9;break}return d.info("p2p trans to conf create discuss group successed: ",a.group_id),e.abrupt("return",a.group_id);case 9:return d.info("p2p trans to conf create discuss group failed"),e.abrupt("return","");case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()},1713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.Logger("conf")("errorInConf");t.getCallEndedErrorTip=function(e,t){r.info("getCallEndedErrorTitle, reasonCode = "+e+",endcall_reason = "+t);return 404===e?language.ENTER_CONF_NO_FOUND:490===e?language.CONF_TIME_CONFLICT:4041===e?language.IT_CONF_NOT_STARTED:4042===e?language.IT_CONF_ENDED:t.indexOf("ConferenceIsLock")>-1?language.CONF_LOCKED:t.indexOf("ServerError_allocate seat resource")>-1?language.CONF_RESOURCE_NULL:language.ENTER_CONF_FAIL},t.getEnterConfByIdOnlyTip=function(e){return 11017===e?language.CONF_NOT_EXIST:-2===e?language.ENTER_CONF_FAIL:language.CONF_GET_AUTH_INFO_FAILED},t.getCreateConfFailTitle=function(e){r.info("getCreateConfFailTitle errorCode = "+e);return 285212898===e?language.CREATE_CONF_FAILED_REASON1:285212899===e?language.CREATE_CONF_FAILED_REASON2:285212900===e?language.CREATE_CONF_FAILED_REASON3:285212901===e?language.CREATE_CONF_FAILED_REASON4:3===e?language.CONFERENCE_CREATE_FAILED_BEACASE_OF_NETWORK:11047===e||11196===e?language.RECORDING_CONFERENCE_FUNCTION_IS_NOT_ENABLED:11085===e||11136===e||11071005===e?language.CONF_TIME_CONFLICT:795===e?language.INSUFFICIENT_RECORD_RESOURCES:50331819===e?language.RECORDING_VENUE_IS_NOT_INCLUDED:language.CONFERENCE_CREATE_FAILED}},1714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.setExperienceConfPara=function(){$dispatch(coreUi.changeconfJoinState(!0)),r(),o(),a()},function(){var e=$getState().conf.experienceConfId;$dispatch(coreUi.changeConfAcsId(e))}),a=function(){$dispatch(coreUi.setCamerState(!0))},o=function(){$dispatch(coreUi.setMicState(!0))};t.clearConfPageInfo=function(){$dispatch(coreUi.changeConfAcsId("")),$dispatch(coreUi.changeconfJoinState(!1))}},1715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleServerUniversalInfoNotify=void 0;var r=n(967),a=window.Logger("logic")("synergism/server/info");t.handleServerUniversalInfoNotify=function(e){a.info("handleServerUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.command_seq,o=t.event_rsp;if(n)switch(n){case constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF:(0,r.receiveJoinPairConf)(e.id,t.param);break;default:a.info("unknow command, command_seq = ",n)}else o&&a.info("unknow event, event_rsp = ",o)}},1716:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initConf=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return new d.default,new coreSecurity.HWTupSupport,t=new coreTup.HWUportal,n=new coreTup.HWTupCall,coreHttp.initHttpTrans(),new coreTup.HwTupConfCtrlSdk,new coreTup.HwTupToolSdk,new coreTup.HwTupDataConfSdk,new coreTup.HwNativeWndSdk,coreDb.queryLoginSetting({key:"init-query"}),e.next=12,t;case 12:return r=e.sent,r.loginLogStart(window.LOG_PATH,3,3,10240),r.loginInit("",0),e.next=17,n;case 17:a=e.sent,i={log_path:window.LOG_PATH,enable_json_log:window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG||0},a.config(i);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),u=n(963),f=n(1132),l=n(601),d=r(l),h=window.Logger("module")("conf");t.initConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=6;break}c(),(0,u.initWebSocketAPI)(),(0,u.registerBigWinEvent)(),e.next=13;break;case 6:if(!window.isHubEnv){e.next=13;break}return h.info("It's maxhub environment, set isHubEnv=true"),(0,u.registerMaxhubEvent)(),t={pairCode:0,validTime:0,tmpKey:""},(0,f.creatQrCodeSvg)(t),e.next=13,(0,u.initWebSocketAPI)();case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1717:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===t.code&&"total"===t.event&&(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();window.Logger("conf")("moduleMessager");coreCommon.registeModuleListener("login",c),coreCommon.registeModuleListener("logout",u)},1718:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfImpl=t.confInfoMap=t.getConfApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(95),f=a(u),l=n(4),d=a(l),h=n(93),p=a(h),_=n(94),C=a(_),v=n(1117),m=r(v),S=n(600),g=r(S),E=n(1118),w=n(861),I=r(w),T=n(1115),N=n(1719),b=a(N),O=window.Logger("conf")("confImpl"),A=void 0;t.getConfApi=function(){return isNullOrEmpty(A)&&(A=new R),A};t.confInfoMap=T.confInfoMap;var R=t.ConfImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.confctrlInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("confctrlInit"),e.next=3,n.unInit();case 3:return e.next=5,n.init();case 5:return e.next=7,g.confctrlInit();case 7:case"end":return e.stop()}},t,e)})),n.unInitConfCtrl=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("unInitConfCtrl"),n.unInit(),e.next=4,g.unInitConfCtrl();case 4:case"end":return e.stop()}},t,e)})),n.createConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("createConf"),e.next=3,n.init();case 3:return e.next=5,m.createConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.p2pTransferConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("p2pTransferConf"),e.next=3,n.init();case 3:return e.next=5,m.p2pTransferConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.oneKeyEnterConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("oneKeyEnterConfService"),e.next=3,n.init();case 3:return e.next=5,m.oneKeyEnterConfService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfInConfListService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("enterConfInConfListService"),e.next=3,n.init();case 3:return e.next=5,m.enterConfInConfListService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfByIdOnlyService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("enterConfByIdOnlyService"),e.next=3,n.init();case 3:return e.next=5,m.enterConfByIdOnlyService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.rejectConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("rejectConfService"),e.next=3,n.init();case 3:return e.next=5,g.rejectConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.acceptConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("acceptConfService"),e.next=3,n.init();case 3:return e.next=5,g.acceptConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.upgradeConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("upgradeConf"),e.next=3,n.init();case 3:return e.next=5,g.upgradeConf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.endCallInConfService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("endCallInConfService"),e.next=3,n.init();case 3:return e.next=5,m.endCall();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.leaveConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("leaveConf"),I.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,m.leaveConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.endConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("endConf"),I.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,m.endConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.bookConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("bookConf"),e.next=3,n.init();case 3:return e.next=5,g.bookConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cancelConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("cancelConfService"),e.next=3,n.init();case 3:return e.next=5,g.cancelConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getVMRListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("getVMRListService"),e.next=3,n.init();case 3:return e.next=5,g.getVRMList();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.getConfListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("getConfListService"),e.next=3,n.init();case 3:return e.next=5,g.getConfList();case 5:case"end":return e.stop()}},t,e)})),n.getConfInfoService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("getConfInfoService"),e.next=3,n.init();case 3:return e.next=5,g.getConfInfoService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.reInviteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("reInviteAttendee"),e.next=3,n.init();case 3:return e.next=5,g.reInviteAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.addAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("addAttendee"),e.next=3,n.init();case 3:return e.next=5,g.addAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.hangupAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("hangupAttendeeService"),e.next=3,n.init();case 3:return e.next=5,g.hangupAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.callAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("callAttendee"),e.next=3,n.init();case 3:return e.next=5,g.callAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.removeAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("removeAttendeeService"),e.next=3,n.init();case 3:return e.next=5,g.removeAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("muteAttendeeService"),e.next=3,n.init();case 3:return e.next=5,g.muteAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handupService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handupService"),e.next=3,n.init();case 3:return e.next=5,g.handup(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("muteConf"),e.next=3,n.init();case 3:return e.next=5,g.muteConf(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.lockConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("lockConfService"),e.next=3,n.init();case 3:return e.next=5,g.lockConf(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.releaseChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("releaseChairman"),e.next=3,n.init();case 3:return e.next=5,g.releaseChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.requestChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("requestChairman"),e.next=3,n.init();case 3:return e.next=5,g.requestChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.transferChairmanService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("transferChairmanService"),e.next=3,n.init();case 3:return e.next=5,g.transferChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.broadcastAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("broadcastAttendeeService"),e.next=3,n.init();case 3:return e.next=5,g.broadcastAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sendWatchSvcRequestService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("sendWatchSvcRequestService"),e.next=3,n.init();case 3:return e.next=5,g.sendWatchSvcRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.confctrlWatchAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("confctrlWatchAttendee"),e.next=3,n.init();case 3:return e.next=5,g.confctrlWatchAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeActiveDirection=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("changeActiveDirection"),e.next=3,n.init();case 3:return e.next=5,g.changeActiveDirection(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cloudRecordRequest=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("cloudRecordRequest"),e.next=3,n.init();case 3:return e.next=5,g.cloudRecordRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateConfMemberList=function(e){g.updateConfMemberList(e)},n.changeConfSelfRole=function(e){g.changeConfSelfRole(e)},n.isInConf=function(){return g.isInConf()},n.isNeedUpdate2DataConf=function(){return g.isNeedUpdate2DataConf()},n.isConfChairMan=function(){return g.isConfChairMan()},n.getIsSmcFirstRequestCharimanRest=function(){return g.getIsSmcFirstRequestCharimanRest()},n.setIsSmcFirstRequestCharimanRest=function(e){g.setIsSmcFirstRequestCharimanRest(e)},n.getIsFirstEnterConf=function(){return g.getIsFirstEnterConf()},n.setIsFirstEnterConf=function(e){g.getIsFirstEnterConf(e)},n.getIsRecall=function(){return g.getIsRecall()},n.isMemberListNull=function(){return g.isMemberListNull()},n.getConfMemberListContent=function(){return g.getConfMemberListContent()},n.getSavedRecallInfo=function(){return g.getSavedRecallInfo()},n.getCurrentConfId=function(){return g.getCurrentConfId()},n.setIsAvcMultiViewBroadcast=function(e){g.setIsAvcMultiViewBroadcast(e)},n.getIsAvcMultiViewBroadcast=function(){return g.getIsAvcMultiViewBroadcast()},n.getIsVideoConf=function(){return g.isVideoConf()},n.getIsDataConf=function(){return g.isDataConf()},n.getIsSvcConf=function(){return g.isSvcConf()},n.getSsrcRange=function(){return g.getSsrcRange()},n.getInfoOfConf=function(e){return g.getInfoOfConf(e)},n.init=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.confctrlInitAtomic.wait();case 2:return e.next=4,m.setConfNotifyFuncAtomic.wait();case 4:case"end":return e.stop()}},t,e)})),n.unInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.confctrlInitAtomic.reset();case 2:case"end":return e.stop()}},t,e)})),n}return(0,C.default)(t,e),t}(b.default)},1719:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(2),s=r(i),c=n(95),u=r(c),f=n(4),l=r(f),d=n(93),h=r(d),p=n(94),_=r(p),C=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.confctrlInit=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unInitConfCtrl=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.rejectConfService=function(e){},r.acceptConfService=function(e){},r.upgradeConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endCallInConfService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.leaveConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.bookConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.cancelConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getVMRListService=function(){},r.getConfListService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfInfoService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.reInviteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.addAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.hangupAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.callAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.removeAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handupService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteConf=function(e){},r.lockConfService=function(e){},r.releaseChairman=function(e){},r.requestChairman=function(e){},r.transferChairmanService=function(e){},r.broadcastAttendeeService=function(e){},r.sendWatchSvcRequestService=function(e){},r.confctrlWatchAttendee=function(e){},r.changeActiveDirection=function(e){},r.cloudRecordRequest=function(e){},r.updateConfMemberList=function(e){},r.changeConfSelfRole=function(e){},r.isInConf=function(){},r.isNeedUpdate2DataConf=function(){},r.isConfChairMan=function(){},r.getIsSmcFirstRequestCharimanRest=function(){},r.setIsSmcFirstRequestCharimanRest=function(e){},r.getIsFirstEnterConf=function(){},r.setIsFirstEnterConf=function(e){},r.getIsRecall=function(){},r.isMemberListNull=function(){},r.getConfMemberListContent=function(){},r.getSavedRecallInfo=function(){},r.getCurrentConfId=function(){},r.setIsAvcMultiViewBroadcast=function(e){},r.getIsAvcMultiViewBroadcast=function(){},r.getIsVideoConf=function(){},r.getIsDataConf=function(){},r.getIsSvcConf=function(){},r.getSsrcRange=function(){},r.getInfoOfConf=function(){},a=n,(0,h.default)(r,a)}return(0,_.default)(t,e),t}(coreCommon.Interface);t.default=C},176:function(e,t,n){e.exports=n(0)(116)},177:function(e,t,n){e.exports=n(0)(193)},178:function(e,t,n){e.exports=n(0)(393)},179:function(e,t,n){var r=n(11),a=n(180),o=n(111),i=n(28),s=n(181);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,h=t||s;return function(t,s,p){for(var _,C,v=o(t),m=a(v),S=r(s,p,3),g=i(m.length),E=0,w=n?h(t,g):c?h(t,0):void 0;g>E;E++)if((d||E in m)&&(_=m[E],C=S(_,E,v),e))if(n)w[E]=C;else if(C)switch(e){case 3:return!0;case 5:return _;case 6:return E;case 2:w.push(_)}else if(f)return!1;return l?-1:u||f?f:w}}},180:function(e,t,n){e.exports=n(0)(154)},181:function(e,t,n){var r=n(182);e.exports=function(e,t){return new(r(e))(t)}},182:function(e,t,n){var r=n(15),a=n(183),o=n(6)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},183:function(e,t,n){e.exports=n(0)(399)},184:function(e,t,n){var r=n(24);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},186:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAtdManager=t.WatchRequestManager=t.DecoderManager=t.HwndManager=t.SsrcManager=t.Atdlogger=void 0;var o,i,s,c,u,f,l,d,h,p,_=n(133),C=a(_),v=n(127),m=a(v),S=n(112),g=a(S),E=n(203),w=a(E),I=n(1113),T=a(I),N=n(217),b=a(N),O=n(1),A=a(O),R=n(2),y=a(R),L=n(100),M=a(L),D=n(98),x=a(D),k=n(4),P=a(k),F=n(158),U=n(204),B=r(U),W=(n(502),n(234)),H=n(413),V=n(400),$=r(V),G=n(953),Y=n(543),j=n(1670),q=window.Logger("conf")("logic/video/svcManager");window.refreshAtdlistTimer=null,window.haveCreateVideoFrame=!1;window.lockHandleAtdlist=!1,window.reportOnlineAtdNumTimer=null;var J=t.Atdlogger=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";name:"+(t[a]&&t[a].name?t[a].name.length>2?t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):t[a].name.substr(0,1)+"**":"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",is_same_grade_mcu:"+(t[a]&&t[a].is_same_grade_mcu?t[a].is_same_grade_mcu:"")+",wnd_handle:"+(t[a]&&t[a].wnd_handle?t[a].wnd_handle:""):r+";name:"+(t[a]&&t[a].userInfo&&t[a].userInfo.name?t[a].userInfo.name.substr(0,1)+"**"+t[a].userInfo.name.substr(-1):"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"");q.info(e,r)},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",width:"+t[a].width+",height:"+t[a].height:1===n?r+";render:"+t[a].render+",ssrc:"+(t[a]&&t[a].ssrc_id?t[a].ssrc_id:"")+",width:"+t[a].width+",height:"+t[a].height:r+";confName:"+(t[a]&&t[a].confName?t[a].confName.substr(0,1)+"**"+t[a].confName.substr(-1):"")+",hwnd:"+t[a].hwnd;q.info(e,r)},K=function(){var e=$getState().call.iSreceivingBFCP,t=$getState().conf,n=t.bfcpFrameHwnd,r=t.bfcpIsBigHwnd;return q.info("iSreceivingBFCP = "+e+", bfcpFrameHwnd = "+n+", bfcpIsBigHwnd = "+r),!0===e&&n>0&&r},X=t.SsrcManager=(i=o=function e(){(0,P.default)(this,e)},o.addSvcSSRC=function(e){var t=$getState().conf.usedSsrcList,n=(0,x.default)([],t);return n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n)),q.info("used ssrc list is "+(0,M.default)(n)),e},o.removeSvcSSRC=function(e){if(q.info("removeSSRC: "+e,e),-1===e)return!1;var t=$getState().conf.usedSsrcList,n=(0,x.default)([],t),r=n.indexOf(e);return-1===r?(q.info("unexpected removeSSRC",n,e),!1):(n.splice(r,1),$dispatch(coreUi.changeUsedSvcSSRCList(n)),!0)},o.clearAllSvcSSRC=function(){q.info("clearAllSvcSSRC"),$dispatch(coreUi.changeUsedSvcSSRCList([]))},o.assignSsrc=function(e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=constant.SVC_SSRC_FLAG.LOCAL_SSRC;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return q.info("assignSsrc ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null}return X.addSvcSSRC(a),a},o.updateAllSsrcOfAtds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];X.clearAllSvcSSRC();for(var t=0;t<e.length;t++){var n=X.assignSsrc(e[t]);e[t].ssrc=n}return J("updateAllSsrcOfAtds,new svcAtd is",e),e},i),Z=t.HwndManager=(c=s=function e(){(0,P.default)(this,e)},s.createHwndsByType=function(){var e=(0,y.default)(A.default.mark(function e(t,n,r){var a,o;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwndsByType start, count = "+t+", hwnd = "+n),!(t<=0)){e.next=3;break}return e.abrupt("return");case 3:return a=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.createWindows(a,t,n,r);case 6:return o=e.sent,Z.handleChangeSvcWndHandles(o),q.info("createHwndsByType end,hwndList = "+(0,M.default)(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.createHwnds=function(){var e=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwnds start, count = "+o+", hwnd = "+i),!(o<=0)){e.next=3;break}return e.abrupt("return");case 3:for(t=$getState().conf.videoFrameHwnd,n=new Array,r=0;r<o;r++)n.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return e.next=8,W.NativeInterface.createWindows(t,o,i,n);case 8:return a=e.sent,Z.handleChangeSvcWndHandles(a),q.info("createHwnds end,hwndList = "+(0,M.default)(a)),e.abrupt("return",a);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.createBigHwnds=function(){var e=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createBigHwnds start, count = "+i+", hwnd = "+s),t=$getState().conf,n=t.videoFrameHwnd,r=t.svcWndHandles,!window.haveCreateBigWnd){e.next=4;break}return e.abrupt("return");case 4:return window.haveCreateBigWnd=!0,a=[{type:constant.SVC_HWND_TYPE.BIG_VIDEO}],r&&r.length>0&&(s=r[0].hwnd),e.next=9,W.NativeInterface.createWindows(n,i,s,a);case 9:return o=e.sent,Z.handleChangeSvcWndHandles(o),o&&o[0].type===constant.SVC_HWND_TYPE.BIG_VIDEO?($dispatch(coreUi.changeBigHwnd(o[0].hwnd)),window.haveCreateBigWnd=!1):(q.info("big hwnd create failed"),window.haveCreateBigWnd=!1),q.info("createBigHwnds end,hwndList = "+(0,M.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.updateHwnds=function(){var e=(0,y.default)(A.default.mark(function e(t,n){var r,a;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("updateHwnds start, deleteHwnds = "+(0,M.default)(t)+",create = "+(0,M.default)(n)),r=$getState().conf.videoFrameHwnd,e.next=4,W.NativeInterface.updateWindows(r,t,n);case 4:return a=e.sent,Z.handleChangeSvcWndHandles(a),q.info("updateHwnds end,hwndList = "+(0,M.default)(a)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),s.destoryHwnds=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destoryHwnds: "+t),0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return n=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.destoryWindows(n,t);case 6:return r=e.sent,Z.handleChangeSvcWndHandles(r),q.info("destoryHwnds end: hwndList = "+(0,M.default)(r)),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),s.clearAllHwnds=function(){var e=(0,y.default)(A.default.mark(function e(){var t,n,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n=Z.getAllHwnds(a),e.next=4,W.NativeInterface.destoryWindows(t,n);case 4:return r=e.sent,Z.handleChangeSvcWndHandles(r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.getAllHwnds=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$getState().conf,n=t.svcWndHandles,r=t.svcViewMode,a=t.maxSizeForPage;if(!n)return q.info("svcWndHandles is null"),new Array;for(var o=new Array,i=0;i<n.length;i++)if(e)o.push(n[i].hwnd),$dispatch(coreUi.changeBigHwnd(0));else{if(1===n[i].type)continue;o.push(n[i].hwnd)}return r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&te.minModeKeepWndNum>0&&o.splice(a-te.minModeKeepWndNum),q.info("getAllHwnds,wndhandles = ",o),o},s.handleChangeSvcWndHandles=function(e){$dispatch(coreUi.changeSvcWndHandles(e))},c),Q=t.DecoderManager=(f=u=function e(){(0,P.default)(this,e)},u.createAllWndDecoders=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.svcViewMode,r=$getState().call.callId,(a=Q.createDecoderListFactory(n,t))&&0!==a.length){e.next=6;break}return q.info("videoWindowList is nulll or zero!"),e.abrupt("return");case 6:return z("createAllWndDecoders videoWindowList is",a,1),e.next=9,coreCall.setAllSvcVideoWindows(a.length,r,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.createDecoderListFactory=function(e,t){var n=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n=Q.createBigSmallDecoderList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n=Q.createDivideDecoderList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:n=Q.createPicInPicDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:n=Q.createMinSingleDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:n=Q.createMinVerticalDecoderList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:n=Q.createMinSingleDecoderList(e);break;default:q.info("SvcViewMode is error,please check!")}return n},u.createBigSmallDecoderList=function(e,t){if(!t)return void q.info("svcShowAttendances is null");var n=Q.createSmallWndDecoders(t),r=new Array;return K()||(r=Q.createBigWndDecoders(e)),r&&r.length>0&&n.splice(0,0,r[0]),n},u.createDivideDecoderList=function(e){return e?Q.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.createPicInPicDecoderList=function(e){var t=new Array;return K()||(t=Q.createBigWndDecoders(e)),t},u.createMinSingleDecoderList=function(e){return Q.createBigWndDecoders(e)},u.createMinVerticalDecoderList=function(e){return e?Q.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.closeAllWndDecoders=(0,y.default)(A.default.mark(function e(){var t;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("closeAllWndDecoders"),t=[{render:0,ssrc_id:0,width:0,height:0}],e.next=4,coreCall.setAllSvcVideoWindows(t.length,$getState().call.callId,t);case 4:case"end":return e.stop()}},e,void 0)})),u.createBigWndDecoders=function(e){q.info("createBigWndDecoders start");var t=$getState().conf,n=(t.svcBigPicInfo,t.ssrcRange),r=t.bigHwnd,a=t.svcDesktopSpeakerBigMaxLook,o=t.svcMaxWatchResolution,i=t.svcOnLineAttendances,s=(t.isSvcSelectMode,constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(s=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?s=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?s=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(s=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(a)||0===a.width||0===a.height||(s=ee.getRealResolution(s,a),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",s)),s=ee.getRealResolution(s,o),q.info("bigWatchRatio.width:"+s.width+",bigWatchRatio.height:"+s.height+", svcViewMode = "+e);var c=new Array,u=n.min,f=r;i.length<=1&&(f=0);var l=Q.windowTemplate(f,u,s.width,s.height);return c.push(l),q.info("createBigWndDecoders end,bigWndDecoders = "+(0,M.default)(c)),c},u.createSmallWndDecoders=function(e){q.info("createSmallWndDecoders start");for(var t=($getState().conf.svcWndHandles,new Array),n=ee.getSvcWatchRatio(),r=0;r<e.length;r++)if(!(1===e[r].is_self||e[r].ssrc<0)){var a=Q.windowTemplate(e[r].wnd_handle,e[r].ssrc,n.width,n.height);t.push(a)}return q.info("createSmallWndDecoders end,smallWndDecoders = "+(0,M.default)(t)),t},u.windowTemplate=function(e,t,n,r){return{render:e,ssrc_id:t,width:n,height:r}},f),ee=t.WatchRequestManager=(d=l=function e(){(0,P.default)(this,e)},l.getSvcWatchRatio=function(){var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=e.isSvcBroadcastMode,a=e.audioVideoNum,o=window.CLIENTCONFIG.ISBIGWIN?a.video-1:t.length-1;window.CLIENTCONFIG.ISBIGWIN&&r&&(o=1);var i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90);if(n===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL)i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);else if(n===constant.SVC_VIEW_MODE.DIVIDE_MODE){if(1===o)i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720,window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);else if(o>=2&&o<=6){i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var s=$getState().conf.svcDesktopDivideModeMaxLook2_6;i=ee.getRealResolution(i,s)}else if(o>=7&&o<=16){i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var c=$getState().conf.svcDesktopDivideModeMaxLook7_16;i=ee.getRealResolution(i,c)}else if(o>16){i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var u=$getState().conf.svcDesktopDivideModeMaxLook17_24;i=ee.getRealResolution(i,u)}}else if(n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE){i=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var f=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;i=ee.getRealResolution(i,f)}q.info("svcWatchRatio.width:"+i.width+",svcWatchRatio.height:"+i.height+", svcViewMode = "+n);var l=$getState().conf.svcMaxWatchResolution;return i=ee.getRealResolution(i,l)},l.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,q.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},l.sendSvcWatchRequest=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=te.getSelfNumber(),r=$getState().conf.svcViewMode,a=ee.createWatchListFactory(r,t),z("sendSvcWatchRequest watchAttendees is",a,0),o={attendeeList:a,selfNum:n},e.next=7,coreConf.sendWatchSvcRequestService(o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),l.createWatchListFactory=function(e,t){var n=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n=ee.createBigSmallWatchList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n=ee.createDivideWatchList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:n=ee.createPicInPicWatchList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:n=ee.createMinSingleWatchList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:n=ee.createMinVerticalWatchList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:n=ee.createMinSingleWatchList(e);break;default:q.info("SvcViewMode is Error,please check!")}return n},l.createBigSmallWatchList=function(e,t){if(!t)return void q.info("createBigSmallWatchList,svcShowAttendances is null!");var n=ee.createSmallWatchList(t),r=new Array;return K()||(r=ee.createBigWatchList(e)),r&&r.length>0&&n.splice(0,0,r[0]),n},l.createDivideWatchList=function(e){return e?ee.createSmallWatchList(e):void q.info("createDivideWatchList,svcShowAttendances is null!")},l.createPicInPicWatchList=function(e){var t=new Array;if(K()){var n=ee.watchTemplate("",0,0,0);t.push(n)}else t=ee.createBigWatchList(e);return t},l.createMinSingleWatchList=function(e){return ee.createBigWatchList(e)},l.createMinVerticalWatchList=function(e){return e?ee.createSmallWatchList(e):void q.info("createMinVerticalWatchList,svcShowAttendances is null!")},l.createBigWatchList=function(e){q.info("createBigWatchList");var t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcBigPicInfo,a=t.ssrcRange,o=t.isSvcSelectMode,i=t.svcDesktopSpeakerBigMaxLook,s=t.svcMaxWatchResolution,c=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(c=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?c=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?c=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(c=(0,x.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(i)||0===i.width||0===i.height||(c=ee.getRealResolution(c,i),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",c)),c=ee.getRealResolution(c,s),q.info("bigWatchRatio.width:"+c.width+",bigWatchRatio.height:"+c.height+", svcViewMode = "+e);var u=new Array,f="",l=a.min;if(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&2===n.length){for(var d=0;d<n.length;d++)if(1!==n[d].is_self){f=n[d].number;break}}else o&&r&&(f=r.number);var h=ee.watchTemplate(f,l,c.width,c.height);return u.push(h),u},l.createSmallWatchList=function(e){q.info("createSmallWatchList");for(var t=$getState().conf,n=t.isSameGradeMcu,r=t.isBigConf,a=t.svcShowPage,o=t.isSvcMultiViewBroadcast,i=t.broadcastIsMultiview,s=new Array,c=ee.getSvcWatchRatio(),u=0;u<e.length;u++)if(!(1===e[u].is_self||e[u].ssrc<0)){var f=e[u].number;0===n&&0===e[u].is_same_grade_mcu&&0===e[u].is_broadcast&&(f="M255T0");var l=ee.watchTemplate(f,e[u].ssrc,c.width,c.height);s.push(l)}if(o&&window.CLIENTCONFIG.ISBIGWIN&&i)q.info("isSvcMultiViewBroadcast = "+o),$dispatch(coreUi.changeBroadcastIsMultiView(!1));else if(r&&0===a)for(var d=0;d<s.length;d++)s[d].number="";return s},l.watchTemplate=function(e,t,n,r){return{number:e,ssrc:t,width:n,height:r}},d),te=t.SvcAtdManager=(p=h=function e(){(0,P.default)(this,e)},h.addAudioNum=0,h.addVideoNum=0,h.showAtdListChanged=!1,h.aDeleteHwnds=new Array,h.iAddCount=0,h.highlightWnd=0,h.speaker="",h.bcHwnd=!1,h.init=!1,h.memberlistArray=new Array,h.muteInfo=new b.default,h.localMicStates={},h.serialConfFirstIndex=-1,h.minModeKeepWndNum=0,h.oldSingleState=new b.default,h.userCameraStu=!0,h.conf_info={},h.isBfcpFromData=!1,h.rateCalc={preRate:1,curRate:0,cnt:3},h.handleSvcAtdList=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcAtdList start"),n=$getState().conf,r=n.isBigConf,a=n.svcActiveAttendances,te.memberlistArray.push(t),!refreshAtdlistTimer){e.next=6;break}return q.info("refreshAtdlistTimer is not null!"),e.abrupt("return");case 6:refreshAtdlistTimer=setInterval(function(){if(!te.memberlistArray||0===te.memberlistArray.length)return clearInterval(refreshAtdlistTimer),refreshAtdlistTimer=null,void q.info("clear refreshAtdlistTimer!");if(q.info("enter refreshAtdlistTimer lockHandleAtdlist = "+window.lockHandleAtdlist),!($getState().conf.videoFrameHwnd<=0||window.lockHandleAtdlist)){var e=te.memberlistArray[te.memberlistArray.length-1];te.memberlistArray=new Array;var t=te.getOnLineAttendances(e);if(r&&a&&a.length>0){var n=sortPreAndOrigiArray(a,t);$dispatch(coreUi.changeSvcOnLineAttendances(n))}else $dispatch(coreUi.changeSvcOnLineAttendances(t));var o=$getState().conf.isSvcMultiViewBroadcast;if(!window.CLIENTCONFIG.ISBIGWIN||!o){var i=$getState().conf.svcOnLineAttendances;z("onLineAttendances watchAttendees is",i,0),te.handleAtdlist(i)}}},500);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.handleAtdlist=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_,C,v,m,S,g,E,w,I,T,N,b,O,R,y,L,M;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleAtdlist start"),te.showAtdListChanged=!1,te.aDeleteHwnds=new Array,te.iAddCount=0,te.addAudioNum=0,te.addVideoNum=0,te.bcHwnd=null,te.init=!1,te.muteInfo.clear(),n={},r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.svcShowAttendances,s=r.isSvcSelectMode,c=r.svcRecallorNot,u=r.isBigConf,f=r.svcSelectWatchInfo,l=r.svcBandMode,void 0!==t&&0!==t.length){e.next=14;break}return q.info("onLineAttendances length is zero,please check."),e.abrupt("return");case 14:for(d=t.length,window.CLIENTCONFIG.ISBIGWIN||(window.isHubEnv?t.length<2&&(o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("maxhub attendances only one, change viewMode to divide mode!"),te.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE,!0),te.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&(q.info("maxhub low bandwidth, change viewMode to PIP mode"),te.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)):t.length<2&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("change viewMode to big small mode!"),te.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0),te.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&te.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)),h=d;h--;)te.muteInfo.set(t[h].number,{is_mute:t[h].is_mute});if(s&&f.number&&""!==f.number&&((p=te.isSvcOnlineAttendance(f.number))||te.handleCancelWatch()),!(_=te.handleBroadcastInfo(t))||!$getState().conf.isSvcBroadcastMode){e.next=24;break}return e.next=22,te.handleJoinBroadCast();case 22:e.next=25;break;case 24:_&&te.handleCancelBroadCast();case 25:if(o!==constant.SVC_VIEW_MODE.MIN_WIN_MIN&&o!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&o!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&o!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE){e.next=28;break}return 1===t.length&&2===a.length||2===t.length&&1===a.length?te.handleWatchAndDecoder([]):q.info("no need to deal in svcViewMode = "+o),e.abrupt("return");case 28:return o=$getState().conf.svcViewMode,e.next=31,te.createAtdsFactory(t,o);case 31:if(C=e.sent,!te.showAtdListChanged&&!c){e.next=39;break}return e.next=35,te.handleHwndAndAtds(C,te.aDeleteHwnds,te.iAddCount,te.bcHwnd,te.init);case 35:v=e.sent,te.handleWatchAndDecoder(v),te.setWindowName(v),$dispatch(coreUi.changesvcRecallorNot(!1));case 39:for(m=C.length;m--;)te.muteInfo.set(C[m].number,(0,x.default)({},te.muteInfo.get(C[m].number),{wnd_handle:C[m].wnd_handle}));S=$getState().conf,g=S.videoFrameHwnd,E=S.bigHwnd,w=S.isSvcBroadcastMode,I=S.svcShowPage,T=S.isMinWin,_&&w?(N=te.getShowBoradcastParam(1),n=(0,x.default)(n,N),s&&(b=te.getCancelWatchParam(0),n=(0,x.default)(n,b))):_&&(O=te.getShowBoradcastParam(0),n=(0,x.default)(n,O)),T||te.setAvailableMode(!1,t,w),R=-1,y=0,L=t.length;case 45:if(!(y<L)){e.next=52;break}if(1!==t[y].is_self){e.next=49;break}return R=t[y].role,e.abrupt("break",52);case 49:y++,e.next=45;break;case 52:M=!1,1!==R&&u&&(q.info("The Conf is big conf, and selfrole is not chair"),M=!0,0!==I&&(I=0,te.handlePageSwitch(I))),n=(0,x.default)(n,{large_scale_conf:M}),te.setNativeSelectState(),te.setPageNum(o,d),te.setParam(n),window.CLIENTCONFIG.ISBIGWIN?te.setBigMuteState(!1,C):te.setMuteState(),J("handleAtdlist end"),te.serialConfFirstIndex=-1;case 61:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.setNativeSelectState=function(){var e=$getState().conf,t=e.isSvcBroadcastMode,n=e.selfRole,r=e.isDataConfSharing,a=$getState().call.iSreceivingBFCP,o={};!t||a||r||n?(o=(0,x.default)(o,{isBroadCast:!1}),te.setParam(o)):(o=(0,x.default)(o,{isBroadCast:!0}),te.setParam(o))},h.getSelfNumber=function(){for(var e="",t=$getState().conf.svcOnLineAttendances,n=0;n<t.length;n++)if(t[n].is_self){e=t[n].number;break}return e},h.isSvcOnlineAttendance=function(e){if(void 0===e||""===e)return q.error("targetNumber is empty."),!1;var t=$getState().conf,n=t.isSameGradeMcu,r=t.svcOnLineAttendances,a=t.serialMcuMemberList;if(void 0===r||r.length<=0)return q.error("onlineAttendance is empty."),!1;for(var o=0;o<r.length;o++)if(r[o].number===e)return!0;if(!n)return!1;if(void 0===a||a.length<=0)return q.error("serialMcuMemberList is empty."),!1;for(var i=0;i<a.length;i++)if(a[i].number===e)return!0;return!1},h.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=new Array,a=!1,o=!1,i=new Array,s={userInfo:{name:""},number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0},c=0;c<e.length;c++){var u=te.isVideoMember(e[c]);if(5===e[c].state&&u){if(window.CLIENTCONFIG.ISBIGWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self&&te.serialConfFirstIndex<0&&(te.serialConfFirstIndex=c),window.CLIENTCONFIG.ISWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){o=!0,i.push({number:e[c].number,is_self:e[c].is_self,is_broadcast:e[c].is_broadcast});continue}1===e[c].is_self?(a=!0,n.unshift(e[c])):n.push(e[c])}else if(window.CLIENTCONFIG.ISBIGWIN&&5===e[c].state){if(0===t&&0===e[c].is_same_grade_mcu)continue;r.push(e[c])}}return $dispatch(coreUi.changeSerialMemberList(i)),window.CLIENTCONFIG.ISWIN&&o&&n.splice(1,0,s),n.push.apply(n,r),a||(n=new Array),J("getOnLineAttendances end,onLineAttendances:",n,1),q.info("getOnLineAttendances end serialMcuMemberList",i),n},h.isVideoMember=function(e){return 0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)},h.createAtdsFactory=function(){var e=(0,y.default)(A.default.mark(function e(t,n){var r;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Array,e.t0=n,e.next=e.t0===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?4:e.t0===constant.SVC_VIEW_MODE.DIVIDE_MODE?6:e.t0===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?8:e.t0===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?10:12;break;case 4:return r=te.createBigSmallAtdList(t),e.abrupt("break",13);case 6:return r=te.createDivideAtdList(t),e.abrupt("break",13);case 8:return r=te.createPicInPicAtdList(t),e.abrupt("break",13);case 10:return r=te.createMinVerticalAtdList(t),e.abrupt("break",13);case 12:q.info("svcViewMode is "+n+",no need to deal");case 13:return r&&r.length>0&&$dispatch(coreUi.changeSvcShowAttendances(r)),e.abrupt("return",r);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),h.createBigSmallAtdList=function(e){q.info("createBigSmallAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=te.createBigSmallAtd(e,r);return a.length<1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=te.createBigSmallAtd(e,a)),q.info("createBigSmallAtdList end"),a},h.getInsertBeforeHwnd=function(e){for(var t=0,n=e?e.length:0,r=0;r<n;r++)if(3===e[r].type){t=e[r].hwnd;break}return t},h.constructBigConfPropList=function(e,t){var n=(new Array,te.constructVideoPropList(e)),r=te.constructAudioPropList(t);return n.concat(r)},h.constructVideoPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return t},h.constructAudioPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.AUDIO});return t},h.createDivideAtdList=function(e){q.info("createDivideAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=te.createDivideAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=te.createDivideAtd(e,a)),q.info("createDivideAtdList end"),a},h.createPicInPicAtdList=function(e){q.info("createPicInPicAtdList start");var t=$getState().conf.svcShowAttendances;return te.addLocalAtd(e,t),q.info("createPicInPicAtdList end"),t},h.createMinVerticalAtdList=function(e){q.info("createMinVerticalAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=te.createMinVerticalAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=te.createMinVerticalAtd(e,a)),q.info("createMinVerticalAtdList end"),a},h.handleWatchAndDecoder=function(e){var t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=(t.isSvcSelectMode,t.svcBigPicInfo,t.bigHwnd),o=t.isSvcMultiViewBroadcast,i=$getState().call.callId;n.length>1||o?ee.sendSvcWatchRequest(e):r!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&r!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&r!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE||W.NativeInterface.setLocalWindow(i,a),Q.createAllWndDecoders(e);for(var s=0;s<e.length;s++)if(1===e[s].is_self){e[s].wnd_handle>0?W.NativeInterface.setLocalWindow(i,e[s].wnd_handle):q.info("local wnd_handle is ",e[s].wnd_handle);break}},h.handleHwndAndAtds=function(){var e=(0,y.default)(A.default.mark(function e(t,n,r,a){var o,i,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwndAndAtds start"),t&&0!==t.length){e.next=4;break}return q.info("handleHwndAndAtds svcShowAttendances is zero"),e.abrupt("return");case 4:return e.next=6,te.handleHwnds(t,n,r,te.addVideoNum,te.addAudioNum,a,s);case 6:return o=e.sent,i=te.bindAtdsAndWnds(t,o),e.abrupt("return",i&&i.length>0?i:[]);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),h.handleHwnds=function(){var e=(0,y.default)(A.default.mark(function e(t,n,r,a,o,i){var s,c,u,f,l,d,h,p,_,C,v,m,S=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwnds,dHwnds = "+n+",aHwnds = "+r+",videoNum = "+a+",audioNum = "+o+",bHwnd = "+i+",init = "+S),s=$getState().conf,c=s.svcViewMode,u=s.bigHwnd,f=s.svcWndHandles,l=s.svcOnLineAttendances,d=s.isSvcMultiViewBroadcast,h=f,p=null,!S){e.next=15;break}return _=Z.getAllHwnds(),C=!0,1===l.length&&(C=!1),p=window.CLIENTCONFIG.ISBIGWIN&&!d?te.constructBigConfPropList(a,o):te.constructPropList(c,t,C),e.next=11,Z.updateHwnds(_,{propList:p});case 11:h=e.sent,te.setBigHwnd(c,h),e.next=51;break;case 15:if(1===l.length&&u>0&&(n.push(u),$dispatch(coreUi.changeBigHwnd(0))),!(n.length>0)){e.next=20;break}return e.next=19,Z.destoryHwnds(n);case 19:h=e.sent;case 20:if(!(l.length>1)||c!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&c!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||0!==u){e.next=24;break}return e.next=23,Z.createBigHwnds(1,0);case 23:h=e.sent;case 24:if(!i){e.next=36;break}if(q.info("FFFF handleHwnds bHwnd = "+i),!h||1!==h.length){e.next=32;break}return e.next=29,Z.createHwnds(1,0);case 29:h=e.sent,e.next=36;break;case 32:if(!(h&&h.length>=2)){e.next=36;break}return e.next=35,Z.createHwnds(1,h[1].hwnd);case 35:h=e.sent;case 36:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=47;break}if(q.info("handleHwnds,videoNum = "+a+" audioNum = "+o),v=te.constructBigConfPropList(a,o),m=0,a>0&&(m=te.getInsertBeforeHwnd(h)),!(r>0)){e.next=45;break}return e.next=44,Z.createHwndsByType(v.length,m,v);case 44:h=e.sent;case 45:e.next=51;break;case 47:if(!(r>0)){e.next=51;break}return e.next=50,Z.createHwnds(r,0);case 50:h=e.sent;case 51:return e.abrupt("return",h);case 52:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),h.bindAtdsAndWnds=function(e,t){if(q.info("bindAtdsAndWnds"),!t||0===t.length)return void q.info("bindAtdsAndWnds hwndlist length is zero");var n=$getState().conf,r=(n.isSvcShareMode,n.svcShowPage,n.svcViewMode),a=n.svcOnLineAttendances;t=te.checkHwndList(t,r,e);for(var o=0;o<e.length;o++)r===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:1===a.length&&1===t.length?e[o].wnd_handle=t[0].hwnd:q.info("BIG_SMALL_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.DIVIDE_MODE?t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("DIVIDE_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:q.info("PIC_IN_PIC_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("MIN_WIN_VERTICAL : window handle create failed ,please check!"));return J("bindAtdsAndWnds end,svcShowAttendances:",e),$dispatch(coreUi.changeSvcShowAttendances(e)),e},h.checkHwndList=function(e,t,n){var r=$getState().conf,a=r.svcShowPage,o=r.isSvcShareMode,i=(r.videoFrameHwnd,0);if(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?0===a&&o?e.length>n.length+2&&(i=e.length-n.length-2):e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.DIVIDE_MODE?e.length>n.length&&(i=e.length-n.length):t===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&e.length>n.length&&(i=e.length-n.length),i>0){for(var s=e.splice(e.length-i,i),c=[],u=0;u<s.length;u++)c.push(s[u].hwnd);q.info("checkHwndList, delete extra windows = "+(0,M.default)(c)),Z.destoryHwnds(c)}return e},h.initShowAtds=function(e){var t=$getState().conf,n=t.svcShowPage,r=t.svcViewMode,a=t.maxSizeForPage,o=te.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array,c=a;switch(r){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:e.length<2?te.addLocalAtd(e,s):te.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n>0&&te.addLocalAtd(e,s),te.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:te.addLocalAtd(e,s);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:te.initVerticalShowAtds(e,s)}return J("initShowAtds end,newSvcShowAtds:",s),s},h.initVerticalShowAtds=function(e,t){if(0===e.length)return void(t=[]);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o="",i=[];te.minModeKeepWndNum=0;for(var s=0;s<e.length;s++)-1===o.indexOf(e[s].number)&&(o=o+e[s].number+",",i.push(e[s]));var c=$getState().conf.svcPageNum,u=r*a,f=u+a,l=i.length-u;if(l<a){f=u+l;for(var d=u;d<f;d++){var h=te.createAtdInfo(i[d]);t.push(h)}if(i.length<a||1===c)return;var p=a-l;f=u,u-=p,te.minModeKeepWndNum=f-u}for(var _=u;_<f;_++){var C=te.createAtdInfo(i[_]);t.push(C)}},h.createBigSmallAtd=function(e,t){J("createBigSmallAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.isSvcShareMode),o=n.maxSizeForPage,i=te.getCanUseAtdsPos(),s=new Array;s=e.slice(i);var c=new Array;c=te.deleteLeaveAtds(t,s),0===r&&te.addLocalAtd(e,c);var u=a&&0===r?o-1:o;return te.addOnlineAtds(s,c,u),J("createBigSmallAtd end,svcShowAttendances:",c),c},h.createDivideAtd=function(e,t){J("createDivideAtd start,svcShowAttendances:",t);var n=$getState().conf,r=(n.svcShowPage,n.svcViewMode,n.isSvcBroadcastMode),a=n.maxSizeForPage,o=new Array;if(window.CLIENTCONFIG.ISBIGWIN&&r)te.addBroadCastAtd(e,o);else{var i=te.getCanUseAtdsPos(),s=new Array;s=e.slice(i),o=te.deleteLeaveAtds(t,e),te.addLocalAtd(e,o),te.addOnlineAtds(s,o,a),window.CLIENTCONFIG.ISBIGWIN&&te.updataIsMuteStu(te.muteInfo,o)}return o},h.createMinVerticalAtd=function(e,t){J("createMinVerticalAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.maxSizeForPage),o=te.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array;if(s=te.deleteLeaveAtds(t,e),0===r)if(te.addLocalAtd(e,s),0===s.length)te.iAddCount++;else for(var c=0;c<s.length;c++)1===s[c].is_self&&0===te.iAddCount&&te.iAddCount++;return te.addOnlineAtds(i,s,a),J("createMinVerticalAtd end,svcShowAttendances:",s),s},h.deleteLeaveAtds=function(e,t){var n=$getState().conf,r=n.isSameGradeMcu,a=n.audioVideoNum,o=n.serialMcuMemberList,i=(0,x.default)({},a),s=e.filter(function(e){var n=!1;if(window.CLIENTCONFIG.ISBIGWIN&&0===r&&0===e.is_self&&0===e.is_same_grade_mcu)te.serialConfFirstIndex>=0?(n=!0,te.isInShowAtds(e,t)||(te.showAtdListChanged=!0)):(X.removeSvcSSRC(e.ssrc)&&i.video--,$dispatch(coreUi.changeHaveAddSerialConf(!1)),te.showAtdListChanged=!0,X.removeSvcSSRC(e.ssrc),te.aDeleteHwnds.push(e.wnd_handle));else{if(window.CLIENTCONFIG.ISWIN&&0===r&&0===e.is_same_grade_mcu)return o.length>0?(te.checkSerialConf(e.number)||(te.showAtdListChanged=!0),n=!0):(te.showAtdListChanged=!0,X.removeSvcSSRC(e.ssrc),te.aDeleteHwnds.push(e.wnd_handle)),n;te.isInShowAtds(e,t)?n=!0:(te.showAtdListChanged=!0,te.aDeleteHwnds.push(e.wnd_handle),te.isVideoMember(e)?X.removeSvcSSRC(e.ssrc)&&i.video--:i.audio--)}return n});return $dispatch(coreUi.changeAudioVideoNum(i)),q.info("deleteLeaveAtds end SvcAtdManager.aDeleteHwnds = "+(0,M.default)(te.aDeleteHwnds)),J("deleteLeaveAtds end,svcShowAttendances:",s),s},h.addLocalAtd=function(e,t){q.info("addLocalAtd start");for(var n=$getState().conf,r=(n.isSvcShareMode,n.isSvcBroadcastMode),a=n.svcWndHandles,o=n.audioVideoNum,i=(0,x.default)({},o),s=!1,c=0;c<t.length;c++)if(1===t[c].is_self){s=!0;break}if(!s)for(var u=0;u<e.length;u++)if(1===e[u].is_self){var f=te.createAtdInfo(e[u]);if(f){te.showAtdListChanged=!0,i.video++;if(a&&a.length>0)if(te.init&&!r)te.addVideoNum++,te.iAddCount++;else{var l=a.filter(function(e){return 0===e.type&&-1===te.aDeleteHwnds.indexOf(e.hwnd)});l&&l.length>0?(f.wnd_handle=l[0].hwnd,q.info("Local is not in showAtd,need to create as wnd_handle = "+f.wnd_handle)):(te.addVideoNum++,te.iAddCount++,q.info("Local is not in showAtd,need to create a new window"))}else q.info("svcWndHandles length is "+a+",need to create in pos = 0,it is wrong!");t.splice(0,0,f),$dispatch(coreUi.changeAudioVideoNum(i))}break}},h.addBroadCastAtd=function(e,t){q.info("addBroadCastAtd start");for(var n=$getState().conf,r=n.svcBroadcastData,a=n.ssrcRange,o=null,i=0;i<e.length;i++)if(r.number===e[i].number){o=e[i];break}if(o){var s=te.createAtdInfo(e[0]);s&&(window.CLIENTCONFIG.ISBIGWIN&&(s.ssrc=a.min+1),t.push(s),te.bcHwnd=!0,q.info("addBroadCastAtd broadcast is not in showAtd,need to create")),te.showAtdListChanged=!0}else q.info("addBroadCastAtd can not find broadcastAtd, please check")},h.receviceShareOrBfcp=function(){var e=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("receviceShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcOnLineAttendances,a=t.svcShowAttendances,o=t.svcShowPage,i=t.maxSizeForPage,s=0===u?constant.SVC_SSRC_FLAG.SHARE_SSRC:constant.SVC_SSRC_FLAG.BFCP_SSRC,$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcShareData({ssrc:s,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:s,name:f})),n!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=14;break}return window.lockHandleAtdlist=!0,e.next=11,te.reInitAtdAndWindow(n);case 11:window.lockHandleAtdlist=!1,e.next=28;break;case 14:if(n!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=27;break}if(0!==o){e.next=24;break}if(i!==a.length){e.next=23;break}return c=new Array,c.push(a[i-1].wnd_handle),e.next=21,Z.destoryHwnds(c);case 21:X.removeSvcSSRC(a[i-1].ssrc),a.splice(i-1,1);case 23:Z.createShareOrBfcpHwnds(1,0);case 24:te.setBFCPBigWnd(),e.next=28;break;case 27:te.setBFCPBigWnd();case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h.stopShareOrBfcp=function(){var e=(0,y.default)(A.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("stopShareOrBfcp");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h.setBFCPBigWnd=(0,y.default)(A.default.mark(function e(){var t;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.bigHwnd,t>0?W.NativeInterface.setBFCPWindow($getState().call.callId,t,!1):q.info("bigHwnd is 0");case 2:case"end":return e.stop()}},e,void 0)})),h.addOnlineAtds=function(e,t,n){var r=$getState().conf,a=r.isSameGradeMcu,o=r.haveAddSerialConf,i=r.audioVideoNum,s=r.svcViewMode,c=(0,x.default)({},i);c.video<=0&&(q.info("unexpected tmpAudioVideoNum.video",c.video),c.video=1);for(var u=0;u<e.length;u++)if(!window.CLIENTCONFIG.ISBIGWIN||0!==a||!o||0!==e[u].is_same_grade_mcu){var f=te.isInShowAtds(e[u],t);if(t.length>=n){if(te.isVideoMember(t[n-1])||!te.isVideoMember(e[u]))break;if(f)continue;te.aDeleteHwnds.push(t[n-1].wnd_handle),t.pop(),c.audio--}if(!f){var l=te.createAtdInfo(e[u]);l||s!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&s!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(q.info("addOnlineAtds fail, mode = "+s+", svcAtds = "+(0,M.default)(t)),t=X.updateAllSsrcOfAtds(t),l=te.createAtdInfo(e[u]),q.info("addOnlineAtds updateAllSsrcOfAtds svcAtds = "+(0,M.default)(t))),l&&(te.showAtdListChanged=!0,te.isVideoMember(l)?(c.video++,t.splice(c.video-1,0,l),te.addVideoNum++,te.iAddCount++):(c.audio++,t.push(l),te.addAudioNum++,te.iAddCount++)),l&&0===l.is_same_grade_mcu&&(o=!0,$dispatch(coreUi.changeHaveAddSerialConf(!0)))}}$dispatch(coreUi.changeAudioVideoNum(c))},h.isInShowAtds=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=0;r<t.length;r++)if(t[r].number===e.number&&(1===e.is_self||t[r].media_type===e.media_type)){n=!0;break}return n},h.handleBroadcastInfo=function(e){for(var t=$getState().conf,n=t.isSvcBroadcastMode,r=t.svcBroadcastData,a=t.ssrcRange,o=t.isSvcMultiViewBroadcast,i=(t.svcViewMode,!1),s=!1,c=0;c<e.length;c++){if(window.CLIENTCONFIG.ISWIN&&!o&&r.number!==e[c].number&&1===e[c].is_broadcast){var u=language.SVC_BROAD_CAST.format(e[c].userInfo.name);te.alertBox(u,3)}if(1===e[c].is_broadcast&&1!==e[c].is_self){if(!o&&(0,T.default)(r).length>0&&r.number===e[c].number)q.info("The broadcast is same");else{i=!0;var f={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(f)),q.info("Entry broadcast mode,broadcast is "+f.number.substr(0,3)+"****"+f.number.substr(-3))}s=!0;break}}return!s&&n&&(i=!0,$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),q.info("Cancel broadcast mode")),i},h.handleJoinBroadCast=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleJoinBroadCast start"),t=$getState().conf,n=t.isSvcSelectMode,r=t.svcViewMode,a=t.svcBroadcastData,o=t.svcBigPicInfo,r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=8;break}n&&($dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),$dispatch(coreUi.changeSvcBigPicInfo(a)),te.showAtdListChanged=!0,e.next=22;break;case 8:if(r!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=21;break}if(te.init=!0,!window.CLIENTCONFIG.ISBIGWIN){e.next=17;break}$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0})),e.next=19;break;case 17:return e.next=19,te.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 19:e.next=22;break;case 21:r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&te.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 22:q.info("handleJoinBroadCast end");case 23:case"end":return e.stop()}},e,void 0)})),h.handleCancelBroadCast=function(){if(window.CLIENTCONFIG.ISBIGWIN)te.init=!0,$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeHaveAddSerialConf(!1)),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0}));else{var e=$getState().conf,t=e.svcShowAttendances,n=e.isSvcBroadcastMode;if(e.svcViewMode!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n||te.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),0===t.length)return}},h.initVideoFrame=function(){var e=(0,y.default)(A.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,h,p,_,C,v,m,S,g,E,w,I,T,N,b,O,R,y,L,D,k,P,F,U,B,V,G,Y,j,J,z,K,X,Q;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($getState().conf.videoFrameHwnd>0||window.haveCreateVideoFrame)){e.next=3;break}return q.info("video native frame have already created!"),e.abrupt("return");case 3:if(a=0,window.haveCreateVideoFrame=!0,window.lockHandleAtdlist=!0,q.info("begin init video native frame!"),!($.getAvcFrameHandles()>0)){e.next=14;break}a=$.getAvcFrameHandles(),$dispatch(coreUi.changeVideoFrameHwnd(a)),window.isHubEnv?te.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE):te.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),q.info("switchViewMode avc trans to svc but use avc winwhnd"),e.next=18;break;case 14:return te.switchViewMode(n,!1),e.next=17,W.NativeInterface.initNativeScreen(n,r,window.langcode,!1);case 17:a=e.sent;case 18:if(!a){e.next=90;break}if(window.haveCreateVideoFrame=!1,$dispatch(coreUi.changeVideoFrameHwnd(a)),o=$.getRemoteVideoHwnd(),i=$.getLocalVideoHwnd(),$.setAvcNullForSvc(),s=[],o>0&&s.push(o),i>0&&s.push(i),!(s.length>0)){e.next=40;break}return q.info("initVideoFrame destroy AVCVideoHwnd list = "+(0,M.default)(s)),e.next=31,W.NativeInterface.destoryWindows(a,s);case 31:if(!((c=e.sent)&&c.length>0)){e.next=40;break}for(u=[],f=0,l=0;l<c.length;l++)1===c[l].type&&(0===f?$dispatch(coreUi.changeBigHwnd(c[l].hwnd)):u.push(c[l].hwnd),f++);if(!(u.length>0)){e.next=39;break}return e.next=38,W.NativeInterface.destoryWindows(a,u);case 38:c=e.sent;case 39:c&&c.length>0&&Z.handleChangeSvcWndHandles(c);case 40:if(d=$getState().conf,h=d.isSupportAS,p=d.svcWndHandles,_=d.svcRecallorNot,C=d.confSubject,v=d.isEnterDataConf,m=d.currentConfInfo,S=d.confServerId,g=d.vmrId,E=d.isSrtp,w=d.isConfMicMute,I=d.memberListInfo,T=d.setPreviewsCount,N=$getState().call,b=N.isOpenCamera,O=N.isMuteMic,R=N.isMuteSpk,y=N.cameraNum,L=N.cameraDevicesList,D=N.spkDevicesList,k=N.micDevicesList,P=$getState().setting,F=P.camIndex,U=P.spkIndex,B=P.micIndex,!(p&&p.length>0&&_)){e.next=48;break}W.NativeInterface.setLocalWindow(t,p[0].hwnd),q.info("initVideoFrame svcRecallorNot is true, svcWndHandles = "+(0,M.default)(p)),e.next=51;break;case 48:return e.next=50,Z.createHwnds(1,0);case 50:p=e.sent;case 51:window.lockHandleAtdlist=!1,te.userCameraStu||(te.userCameraStu=!0,b=!1,H.ToolbarManager.setCameraStu({state:0})),q.info("initVideoFrame isOpenCamera = "+b),V=O||w?0:100,R=R?1:0,G=E?1:0,te.isDataConf=v,H.ToolbarManager.setChairmanState(I,!0),Y={},isNullOrEmpty(g)||(S=g),S>0?Y=(0,x.default)({},{set_window_title:{title:C,confID:S}}):(j=0,J=setInterval(function(){j++;var e=$getState().conf,t=e.confSubject,n=e.confServerId,r=e.vmrId;isNullOrEmpty(r)||(n=r),n>0?(clearInterval(J),te.setConfServerId(n,t)):j>=10&&clearInterval(J)},500)),Y=(0,x.default)(Y,{isSupportAS:h?1:0}),Y=(0,x.default)(Y,{init_state:{encrypt:G}}),Y=(0,x.default)(Y,{init_device_state:{isMuteSpk:R,mic_volume:V,camera_on:y>0?b:-1}}),Y=(0,x.default)(Y,{camera_devices:{camIndex:F,cameraDevicesList:L}}),Y=(0,x.default)(Y,{mic_devices:{micIndex:B,micDevicesList:k}}),Y=(0,x.default)(Y,{spk_devices:{spkIndex:U,spkDevicesList:D}}),Y=(0,x.default)(Y,{general_pwd:m.general_pwd?m.general_pwd:null}),T>0&&(Y=(0,x.default)(Y,{set_conf_userinfo:{count:T}})),Y=(0,x.default)(Y,{has_data_ability:{is_data_conf:te.isDataConf?1:0}}),Y=(0,x.default)(Y,{is_free_user:$getState().login.isFreeUser}),Y=(0,x.default)(Y,{is_in_conf:""===$getState().conf.confHandle?0:1}),z=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,K=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,z?Y=(0,x.default)(Y,{has_delete_member:0}):K&&(Y=(0,x.default)(Y,{has_delete_member:1})),X=JSON.parse((0,M.default)(Y)),void 0!==X.set_window_title&&(Q=X.set_window_title.title,X.set_window_title.title=Q?Q.substr(0,1)+"***":""),X.general_pwd=X.general_pwd?"***":"null",q.info("SVC initVideoFrame initParam param = "+(0,M.default)(X)),te.setParam(Y),te.switchCPURateCalc(!0),te.rateCalc={preRate:1,curRate:0,cnt:3},coreUi.getConfGuestLink(),te.oldSingleState.clear(),te.conf_info={},te.confMemNum=-1,te.setIsSupportChatNative(a),e.next=93;break;case 90:window.haveCreateVideoFrame=!1,window.lockHandleAtdlist=!1,q.info("init video native frame failed,please check!");case 93:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),h.closeVideoFrame=(0,y.default)(A.default.mark(function e(){var t,n;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:te.isDataConf=-1,te.confMemNum=-1,t=$getState().conf.videoFrameHwnd,n=B.getShareAppHwnd(),n>0&&(q.info("closeVideoFrame shareAppHwnd :",n),W.NativeInterface.setHightlightShareWnd(n,!1)),t>0&&(te.switchCPURateCalc(!1),te.rateCalc={preRate:1,curRate:0,cnt:3},te.conf_info={},W.NativeInterface.uninitNativeScreen(t,!1),$dispatch(coreUi.changeVideoFrameHwnd(0)),te.highlightWnd=0,te.speaker=""),window.CLIENTCONFIG.ISBIGWIN||coreUi.selectBoxCancelDataNWin();case 7:case"end":return e.stop()}},e,void 0)})),h.sendWatchWithBfcp=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithBfcp start"),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}if(q.info("sendWatchWithBfcp bfcpIsBigHwnd:"+$getState().conf.bfcpIsBigHwnd+", isBigwnd:"+t),$getState().conf.bfcpIsBigHwnd==t){e.next=8;break}return e.next=8,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 8:return $dispatch(coreUi.changeBfcpIsBigHwnd(t)),e.next=11,ee.sendSvcWatchRequest(a);case 11:return e.next=13,Q.createAllWndDecoders(a);case 13:q.info("sendWatchWithBfcp end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.initBfcpFrame=function(){var e=(0,y.default)(A.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,h,p;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=$getState().conf.bfcpFrameHwnd)>0)){e.next=4;break}return q.info("bfcp native frame have already created!"),e.abrupt("return");case 4:return q.info("begin init bfcp native frame!"),a=!1,window.CLIENTCONFIG.ISBIGWIN&&(a=!0),te.isBfcpFromData=n,o=te.getModeAndVersion(a,!0),i=o.mode,s=o.version,e.next=11,W.NativeInterface.initNativeScreen(i,s,window.langcode,!0);case 11:if(!(c=e.sent)){e.next=25;break}if($dispatch(coreUi.changeBfcpFrameHwnd(c)),!$getState().conf.isDataConfSharing){e.next=19;break}return q.info("isDataConfSharing is true  destroy bfcpfHwnd "),e.next=18,te.closeBfcpFrame();case 18:return e.abrupt("return");case 19:return e.next=21,W.NativeInterface.createWindows(c,1,0,[{type:2}]);case 21:return u=e.sent,u&&u.length>0&&(W.NativeInterface.setBFCPWindow(t,u[0].hwnd,n),f=$getState().conf,l=f.confSubject,d=f.confServerId,h=f.vmrId,isNullOrEmpty(h)||(d=h),p=(0,x.default)({},{set_window_title:{title:l,confID:d}}),W.NativeInterface.setParam(p,c),te.setIsSupportChatNative(c),window.isHubEnv&&te.switchVideoToMin()),e.next=25,te.sendWatchWithBfcp(!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),h.closeBfcpFrame=(0,y.default)(A.default.mark(function e(){var t;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.bfcpFrameHwnd,t>0&&(W.NativeInterface.uninitNativeScreen(t,!0),$dispatch(coreUi.changeBfcpFrameHwnd(0))),e.next=4,te.sendWatchWithBfcp(!1);case 4:case"end":return e.stop()}},e,void 0)})),h.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,y.default)(A.default.mark(function e(t,n){return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.NativeInterface.setBFCPWindow($getState().call.callId,t,te.isBfcpFromData),$dispatch(coreUi.changeBfcpFrameHwnd(t)),e.next=4,te.sendWatchWithBfcp(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),h.switchVideoToMin=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o,i,s;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMin"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isShowMinWin,a=t.svcMiniViewMode,o=t.svcViewMode,!r){e.next=6;break}return q.info("switchVideoToMin isShowMinWin is true"),window.isDataSharing&&(te.setViewMode(o),q.info("switchVideoToMin share owner is self,reSet layout = "+(o+256))),e.abrupt("return");case 6:return window.lockHandleAtdlist=!0,i=new w.default([constant.SVC_VIEW_MODE.BIG_SMALL_MODE,constant.SVC_VIEW_MODE.DIVIDE_MODE,constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,constant.SVC_VIEW_MODE.MIN_WIM_FLOAT]),i.has(o)?$dispatch(coreUi.changePreConfViewMode(o)):$dispatch(coreUi.changePreConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE)),0===a&&(a=window.isHubEnv?constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),te.setViewMode(a),q.info("changeIsShowMinWin true 5"),$dispatch(coreUi.changeIsShowMinWin(!0)),te.switchViewMode(a,!1),s=new Array,s.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),s.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),s.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),s.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),s.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT),$dispatch(coreUi.changeCurrentLayout(s)),e.next=23,te.reInitAtdAndWindow(a,!0);case 23:te.setPageNum(a,n.length),window.lockHandleAtdlist=!1;case 25:case"end":return e.stop()}},e,void 0)})),h.RedrawVideoMain=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o,i,s,c;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("RedrawVideoMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=a,window.lockHandleAtdlist=!0,s=n.length,c=te.getPageNum(r,s),!(s<o)){e.next=10;break}return q.info("RedrawVideoMain, onLineNum = "+s+", maxSizeForPage = "+o),window.lockHandleAtdlist=!1,e.abrupt("return");case 10:if(!(c<=a)){e.next=18;break}return i=c-1,q.info("RedrawVideoMain,pageNum is less than svcShowPage,pageNum = "+c+",showPage = "+a),te.handlePageSwitch(i),$dispatch(coreUi.changeSvcShowPage(i)),te.setPageNum(a,s),window.lockHandleAtdlist=!1,e.abrupt("return");case 18:window.lockHandleAtdlist=!1,te.handleAtdlist(n);case 20:case"end":return e.stop()}},e,void 0)})),h.switchVideoToMain=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcBroadcastMode,a=t.svcViewMode,o=t.isShowMinWin,i=t.svcPreViewMode,o){e.next=4;break}return e.abrupt("return");case 4:if(window.lockHandleAtdlist=!0,s=i||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!window.isHubEnv){e.next=10;break}s=constant.SVC_VIEW_MODE.DIVIDE_MODE,e.next=14;break;case 10:return c=$getState().conf.isSvcSelectMode,u={isSvcSelectMode:c},e.next=14,te.setParam(u);case 14:return te.setViewMode(s),q.info("changeIsShowMinWin false 5"),$dispatch(coreUi.changeIsShowMinWin(!1)),e.next=19,te.switchViewMode(s,!1);case 19:return te.setAvailableMode(!1,n,r),e.next=22,te.reInitAtdAndWindow(s,!0);case 22:te.setPageNum(s,n.length),window.lockHandleAtdlist=!1;case 24:case"end":return e.stop()}},e,void 0)})),h.handleSpeakerNotify=function(e){var t=$getState().conf,n=t.confSpeaker,r=t.svcShowAttendances,a=(t.videoFrameHwnd,t.svcViewMode),o={};if(e&&te.speaker!==e&&(o=(0,x.default)(o,{set_speaker:{name:e,icon:""}}),te.speaker=e),a!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){var i=0;if(n&&n.speaker.length>0)for(var s=n.speaker[0].number,c=0;c<r.length;c++)if(s===r[c].number){i=r[c].wnd_handle;break}te.highlightWnd!==i&&(o=(0,x.default)(o,{highlight_cell:{hwnd:i,show:1}}),te.highlightWnd=i)}te.setParam(o)},h.setWindowName=function(e){var t=$getState().conf,n=t.svcViewMode,r=(t.svcShowPage,t.svcWndHandles),a=t.svcBigPicInfo,o=t.videoFrameHwnd,i=t.bigHwnd;if(r&&e&&0!==r.length){for(var s=new Array,c=0;c<e.length;c++){var u={hwnd:e[c].wnd_handle,confName:e[c].name};1===e[c].is_self&&(u.confName=e[c].name+"("+language.ME+")"),s.push(u)}if((n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||n===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||n===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||n===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE)&&a&&i>0){var f={hwnd:i,confName:a.name};1===a.is_self&&(f.confName=a.name+"("+language.ME+")"),s.splice(0,0,f)}z("window and name list is",s,2),W.NativeInterface.setWindowsName(o,s)}},h.setPageNum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$getState().conf,a=r.svcShowPage,o=r.videoFrameHwnd,i=r.svcPageNum,s=1;e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(s=te.getPageNum(e,t)),(i!==s||n)&&(W.NativeInterface.setPageNum(o,a+1,s),$dispatch(coreUi.changeSvcPageNum(s)),q.info("setPageNum, onLineCount = "+t+", viewMode = "+e+",svcShowPage = "+a+",pageNum = "+s))},h.setParam=function(e){if(window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN){var t=te.getVideoFramHwnd();e&&"{}"!==(0,M.default)(e)?W.NativeInterface.setParam(e,t):window.CLIENTCONFIG.ISWIN&&B.setDataConfParams(e)}},h.setConfUserInfo=function(e){if($getState().conf.setPreviewsCount!==e){$dispatch(coreUi.reportSetPreviewsCount(e));var t=(0,x.default)({},{set_conf_userinfo:{count:e}});te.setParam(t)}},h.setSignal=function(e){var t=(0,x.default)({},{set_signal:{level:e}});te.setParam(t)},h.setSubject=function(e){var t=$getState().conf,n=t.confServerId,r=t.vmrId;isNullOrEmpty(r)||(n=r);var a=(0,x.default)({},{set_window_title:{title:e,confID:n}});te.setParam(a)},h.setConfServerId=function(e,t){q.info("setConfServerId confServerId = "+e+" confSubject = ");var n=(0,x.default)({},{set_window_title:{title:t,confID:e}});te.setParam(n)},h.reportOnlineAtdNum=function(e){if(te.getVideoFramHwnd()){if(e>0&&e!==te.confMemNum){te.confMemNum=e;var t=(0,x.default)({},{set_conf_userinfo:{count:e}});te.setParam(t)}}else if(reportOnlineAtdNumTimer&&clearInterval(reportOnlineAtdNumTimer),e>0){var n=0;reportOnlineAtdNumTimer=setInterval(function(e){if(te.getVideoFramHwnd()){clearInterval(reportOnlineAtdNumTimer),te.confMemNum=e;var t=(0,x.default)({},{set_conf_userinfo:{count:e}});te.setParam(t)}else++n>15&&clearInterval(reportOnlineAtdNumTimer)},1e3)}},h.reportIsDataConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(te.getVideoFramHwnd()>0&&(e!==te.isDataConf||t)){te.isDataConf=e;var n={has_data_ability:{is_data_conf:e?1:0}};te.setParam(n)}},h.getVideoFramHwnd=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=$.getAvcFrameHandles()),e},h.reportConfInfo=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.conf_list_info){e.next=17;break}if(n=t.conf_list_info,r=n.conf_subject,a=(0,F.getConfTimedec)(n.start_time),o=n.scheduser_name,i=isNullOrEmpty(n.vmr_id)?n.conf_id:n.vmr_id,s=n.guest_join_uri,c=(0,F.getConfTimedec)(n.end_time),u={title:r,start_time:a,end_time:c,creator:o,id:i,link:s},(0,M.default)(te.conf_info)===(0,M.default)(u)){e.next=17;break}if(te.conf_info=u,f="",!coreCommon.isWin()){e.next=16;break}return e.next=15,(0,j.getQrcodeBase64)(s);case 15:f=e.sent;case 16:te.setParam({conf_info:u,qrcodeBase64:f});case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.reportQos=function(e){var t=te.getVideoFramHwnd(),n=(0,x.default)({},{QOS:e});t>0&&n&&W.NativeInterface.reportQos(t,n)},h.reportSingleState=function(e){var t=[],n=te.oldSingleState,r=!0,a=!1,o=void 0;try{for(var i,s=(0,g.default)(e);!(r=(i=s.next()).done);r=!0){var c=(0,m.default)(i.value,2),u=c[0],f=c[1];n.has(u)&&n.get(u)===f||t.push({hwnd:u,state:f})}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}if(q.info("reportSingleState oldSingleState = "+(0,M.default)(te.oldSingleState)+" VideoSingalState = "+(0,M.default)(e)+" newSingleState = "+(0,M.default)(t)+" "),te.oldSingleState=e,0!==t.length){var l=$getState().conf.videoFrameHwnd,d=(0,x.default)({},{VideoSingalState:t});l>0&&d&&W.NativeInterface.setParam(d,l)}},h.getShowBoradcastParam=function(e){var t=$getState().conf.bigHwnd,n={},r={cellHwnd:t,show:e};return n.show_broadcast=r,n},h.getCancelWatchParam=function(e){var t={},n={show:e};return t.cancel_watch_icon=n,t},h.getAvailableModeParam=function(e,t){if(!e||0===e.length)return null;var n=$getState().conf,r=(n.videoFrameHwnd,n.currentLayout),a={},o=new Array;if(1===e.length?o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):2===e.length||t?(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,M.default)(r)!==(0,M.default)(o)){$dispatch(coreUi.changeCurrentLayout(o));var i={layouts:o};return a.set_available_layout=i,a}return null},h.getPageNumParam=function(e,t,n){q.info(" onLineCount = "+t+", viewMode = "+e+", svcShowPage = "+n);var r=$getState().conf.svcPageNum,a=1;if(e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(a=te.getPageNum(e,t)),r!==a){$dispatch(coreUi.changeSvcPageNum(a));var o={pos:n,count:a},i=[];return i.set_page_num=o,q.info("svcPageNum = "+r+",pageNum = "+a),i}return null},h.getWindowTextParam=function(e){if(e&&0!==e.length){for(var t=new Array,n={},r=$getState().conf,a=r.svcViewMode,o=r.svcBigPicInfo,i=r.bigHwnd,s=0;s<e.length;s++){var c={hwnd:e[s].wnd_handle,confName:e[s].name};t.push(c)}if((a===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||a===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)&&o){var u={hwnd:i,confName:o.name};t.splice(0,0,u)}return n.confInfo=t,q.info("window and name list is "+(0,M.default)(t)),n}},h.setAvailableMode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=$getState().conf,r=n.videoFrameHwnd,a=n.svcBandMode,o=n.currentLayout,i=new Array;window.CLIENTCONFIG.ISBIGWIN?i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE):e?(i.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),i.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),i.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),i.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),i.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT)):1===t.length?i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):a===constant.SVC_BAND_MODE.LOW_BAND?i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE):(i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,M.default)(o)!==(0,M.default)(i)&&r&&(W.NativeInterface.setAvailableLayout(r,i.length,i),$dispatch(coreUi.changeCurrentLayout(i)))}},h.setViewMode=function(e,t){var n=$getState().conf.videoFrameHwnd,r=n;t>0&&(r=t);var a=0;window.isDataSharing&&(a=256,q.info("setViewMode is specialMode "+(e+a).toString(16))),n>0?W.NativeInterface.setViewMode(r,e+a):q.info("video frame hwnd is 0,please check!")},h.handlePageSwitch=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lockHandleAtdlist=!0,n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.usedSsrcList,i=a.length,!((s=te.getPageNum(r,i))<t)){e.next=8;break}return window.lockHandleAtdlist=!1,q.info("handlePageSwitch,pageNum is less than showPage,pageNum = "+s+",showPage = "+t),e.abrupt("return");case 8:return $dispatch(coreUi.changeSvcShowPage(t)),c=[],$dispatch(coreUi.changeSvcShowAttendances([])),r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?$dispatch(coreUi.changeUsedSvcSSRCList([])):c=o.concat([]),e.next=14,te.reInitAtdAndWindow(r,!1);case 14:r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(u=$getState().conf.usedSsrcList,f=u.filter(function(e){return-1===c.indexOf(e)}),$dispatch(coreUi.changeUsedSvcSSRCList(f)),q.info("handlePageSwitch svcViewMode = "+(0,M.default)(r)+" oldSSRCList = "+(0,M.default)(c)+" newUsedSsrcList = "+(0,M.default)(f))),window.lockHandleAtdlist=!1;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.handleModeSwitch=function(){var e=(0,y.default)(A.default.mark(function e(t,n){var r,a,o,i;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleModeSwitch,viewMode = "+t),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.videoFrameHwnd,n||(n=i),o!==t&&n===i){e.next=5;break}return e.abrupt("return");case 5:return window.lockHandleAtdlist=!0,e.next=8,te.switchViewMode(t,!0,n);case 8:return e.next=10,te.reInitAtdAndWindow(t);case 10:te.setPageNum(t,a.length),window.lockHandleAtdlist=!1;case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),h.handleWatch=function(){var e=(0,y.default)(A.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,h,p,_,C;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleWatch,viewMode = "+t+"}"),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcShowAttendances,i=r.videoFrameHwnd,s=r.isSvcBroadcastMode,c=r.isSvcSelectMode,u=r.isMinWin,f=r.bigHwnd,l=r.ssrcRange,d={},!c&&s&&(h=te.getShowBoradcastParam(0),d=(0,x.default)(d,h)),n.ssrc||(n.ssrc=l.min),$dispatch(coreUi.changeSvcBigPicInfo(n)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcControlMode(1)),p=(0,x.default)({},n),$dispatch(coreUi.changeSvcSelectWatchInfo(p)),t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=18;break}ee.sendSvcWatchRequest(o),Q.createAllWndDecoders(o),te.setWindowName(o),_=$getState().conf.isSvcSelectMode,d=(0,x.default)(d,{isSvcSelectMode:_}),e.next=41;break;case 18:if(t!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=25;break}ee.sendSvcWatchRequest(o),Q.createAllWndDecoders(o),te.setWindowName(o),C=$getState().conf.isSvcSelectMode,e.next=41;break;case 25:if(t!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=34;break}return window.lockHandleAtdlist=!0,e.next=29,te.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 29:return e.next=31,te.reInitAtdAndWindow(constant.SVC_VIEW_MODE.BIG_SMALL_MODE);case 31:window.lockHandleAtdlist=!1,e.next=41;break;case 34:if(t!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL){e.next=41;break}return window.lockHandleAtdlist=!0,e.next=38,te.switchViewMode(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,!0);case 38:return e.next=40,te.reInitAtdAndWindow(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 40:window.lockHandleAtdlist=!1;case 41:u||te.setAvailableMode(!1,a,s),te.setParam(d);case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),h.handleCancelWatch=function(){q.info("handleCancelWatch");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcOnLineAttendances,r=e.isSvcBroadcastMode,a=e.svcBigPicInfo,o={};if(r){var i=te.getShowBoradcastParam(1);o=(0,x.default)(o,i)}var s={ssrc:a.ssrc,is_self:0};1===a.is_self&&(s.is_self=1),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),ee.sendSvcWatchRequest(t);var c=$getState().conf,u=c.isSvcSelectMode;c.svcViewMode===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&(o=(0,x.default)(o,{isSvcSelectMode:u})),te.setAvailableMode(!1,n,r),te.setParam(o)},h.reInitAtdAndWindow=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reInitAtdAndWindow"),n=$getState().conf,r=n.svcShowPage,a=n.svcOnLineAttendances,o=n.isSvcShareMode,i=n.svcWndHandles,s=new Array,c=new Array,u=null,te.aDeleteHwnds=Z.getAllHwnds(l),s=te.initShowAtds(a),c=te.constructPropList(t,s,l),!(t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&te.minModeKeepWndNum>0)){e.next=19;break}return te.minModeKeepWndNum=0,e.next=12,Z.destoryHwnds(te.aDeleteHwnds);case 12:return u=e.sent,f=u?u[0].hwnd:0,e.next=16,Z.createHwnds(te.aDeleteHwnds.length,f);case 16:u=e.sent,e.next=22;break;case 19:return e.next=21,Z.updateHwnds(te.aDeleteHwnds,{propList:c});case 21:u=e.sent;case 22:if(u&&0!==u.length){e.next=25;break}return q.info("reInitAtdAndWindow, hwndlist is null or zero,please check!"),e.abrupt("return");case 25:te.setBigHwnd(t,u),te.bindAtdsAndWnds(s,u),te.handleWatchAndDecoder(s),te.setWindowName(s),te.setMuteState();case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.setBigHwnd=function(e,t){if(t&&0!==t.length&&(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE))for(var n=0;n<t.length;n++)if(1===t[n].type){$dispatch(coreUi.changeBigHwnd(t[n].hwnd));break}},h.constructPropList=function(e,t,n){var r=new Array,a=null,o=$getState().conf.svcOnLineAttendances;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n&&o.length>1&&(r=te.constructBigPropList()),a=te.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:r=te.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:r=te.constructBigPropList(),a=te.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:r=te.constructBigPropList();break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:r=te.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:r=te.constructBigPropList()}return r},h.constructBigPropList=function(){var e=new Array;return e.push({type:constant.SVC_HWND_TYPE.BIG_VIDEO}),e},h.constructSmallPropList=function(e){for(var t=new Array,n={type:constant.SVC_HWND_TYPE.SMALL_VIDEO},r=0;r<e.length;r++)t.push(n);return t},h.switchViewMode=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=arguments[2];return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.svcBandMode,r===t){e.next=21;break}if(a.length>=2&&o===constant.SVC_BAND_MODE.LOW_BAND&&(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.DIVIDE_MODE)&&(t=constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(t)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeBigHwnd(0)),!u){e.next=11;break}return e.next=11,te.setViewMode(t,f);case 11:if(t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=16;break}return i=$getState().conf.isSvcSelectMode,s={isSvcSelectMode:i},e.next=16,te.setParam(s);case 16:c=new w.default([constant.SVC_VIEW_MODE.MIN_WIN_MIN,constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL,constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE]),c.has(t)?(q.info("changeIsShowMinWin true 6"),$dispatch(coreUi.changeIsShowMinWin(!0)),$dispatch(coreUi.changeConfMiniViewMode(t))):(q.info("changeIsShowMinWin false 7"),$dispatch(coreUi.changeIsShowMinWin(!1))),window.CLIENTCONFIG.ISBIGWIN?$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)):$dispatch(coreUi.changeMaxSizeForPage(te.getMaxSizeForPage(t))),e.next=22;break;case 21:q.info("viewMode is same,no need to change!");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.createAtdInfo=function(e){if(e||e instanceof Object&&!Array.isArray(e)){var t=-1,n=$getState().conf.isSameGradeMcu;if(te.isVideoMember(e)?t=X.assignSsrc(e):window.CLIENTCONFIG.ISWIN&&0===n&&0===e.is_same_grade_mcu&&(t=X.assignSsrc(e)),!t)return null;return{name:e.userInfo.name,number:e.number,is_self:e.is_self,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,media_type:e.media_type,wnd_handle:-1,ssrc:t}}},h.updataIsMuteStu=function(e,t){if(t&&!(t.length<1)&&e)for(var n=0;n<t.length;n++){var r=t[n].number;if(1===t[n].is_self){var a=$getState().call.micValue;te.localMicStates.wndHand=t[n].wnd_handle,te.localMicStates.isMicMute=e.get(r).is_mute,t[n].is_mute=1===e.get(r).is_mute||0===a?1:0}else!e.has(r)||void 0!==t[n].is_mute&&t[n].is_mute===e.get(r).is_mute||(t[n].is_mute=e.get(r).is_mute)}},h.setBigMuteState=function(e,t){var n=$getState().conf.videoFrameHwnd,r=[];if(e){var a=$getState().call.micValue,o=1===te.localMicStates.isMicMute||0===a?1:0,i={hwnd:te.localMicStates.wndHand,is_mute:o};r.push(i)}else if(t)for(var s=0,c=t.length;s<c;s++){var u={hwnd:t[s].wnd_handle,is_mute:t[s].is_mute};r.push(u)}q.info("setBigMuteState muteState is "+(0,M.default)(r)),W.NativeInterface.setParam({muteState:r},n)},h.getCanUseAtdsPos=function(){var e=$getState().conf,t=e.svcViewMode,n=e.svcShowPage,r=(e.isSvcShareMode,e.maxSizeForPage),a=0;return t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?a=n*r:t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&n>0&&(a=n*(r-1)+1),a},h.getMaxSizeForPage=function(e){var t=$getState().conf.svcBandMode,n=0;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=t===constant.SVC_BAND_MODE.MIDDLE_BAND?constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE:constant.SVC_MAX_SIZE_FOR_PAGE.BS_MAX_SIZE:e===constant.SVC_VIEW_MODE.DIVIDE_MODE?(t===constant.SVC_BAND_MODE.MIDDLE_BAND?n=constant.SVC_MAX_SIZE_FOR_PAGE.LOW_DV_MAX_SIZE:(n=constant.SVC_MAX_SIZE_FOR_PAGE.DV_MAX_SIZE,window.CLIENTCONFIG.ISBIGWIN&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)),window.CLIENTCONFIG.ISWIN&&($getState().call.iSreceivingBFCP||coreConf.isReceivingDataShare()||coreConf.isRecevingAppshare()||coreConf.isInReceiveDocSharing())&&(n-=1),q.info("maxSizeForPage maxSize:",n)):e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?n=constant.SVC_MAX_SIZE_FOR_PAGE.PIP_MAX_SIZE:e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.MIN_WIN_VERTICAL_SIZE),n},h.getPageNum=function(e,t){var n=1,r=$getState().conf,a=r.isSvcShareMode,o=r.maxSizeForPage;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=a?Math.ceil((t+1)/o):Math.ceil(t/o):e===constant.SVC_VIEW_MODE.DIVIDE_MODE?n=Math.ceil((t-1)/(o-1)):e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=Math.ceil(t/o)),n},h.getAttendeeByHwnd=function(e){var t=$getState().conf,n=t.svcShowAttendances,r=(t.isSvcShareMode,t.svcShowPage,t.svcShareData,t.svcWndHandles,null);return r=n.find(function(t){return t.wnd_handle===e}),q.info("getAttendeeByHwnd"),r},h.getAtdFullInfoByHwnd=function(e){var t=te.getAttendeeByHwnd(e),n=null;if(t)for(var r=t.number,a=$getState().conf.memberListInfo,o=a.length;o--;)if(r===a[o].number){n=a[o];break}return n},h.getConfNameBySsrc=function(e){for(var t="",n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].name;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.name),t},h.getConfhwndBySsrc=function(e){for(var t=0,n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].wnd_handle;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.wnd_handle),t},h.getModeAndVersion=function(e,t){var n={mode:3,version:0};return e?(n.mode=constant.SVC_VIEW_MODE.DIVIDE_MODE,n.version=constant.SVC_VERSION_FLAG.BIG):t?(n.mode=constant.SVC_VIEW_MODE.BFCP_MODE,n.version=constant.SVC_VERSION_FLAG.BASE):(n.mode=constant.SVC_VIEW_MODE.BIG_SMALL_MODE,n.version=constant.SVC_VERSION_FLAG.BASE),n},h.handleSvcSsrcModify=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcSsrcModify"),n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcShowAttendances,o=n.svcBigPicInfo,i=X.updateAllSsrcOfAtds(a),$dispatch(coreUi.changeSvcShowAttendances(i)),!window.CLIENTCONFIG.ISBIGWIN&&o.hasOwnProperty("ssrc")&&(s=(0,x.default)([],o),s.ssrc=t.min,X.addSvcSSRC(t.min),$dispatch(coreUi.changeSvcBigPicInfo(s))),!(r.length>1)){e.next=10;break}return e.next=8,ee.sendSvcWatchRequest(i);case 8:return e.next=10,Q.createAllWndDecoders(i);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.handleMultiViewBroadcast=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleMultiViewBroadcast start param = "+(0,M.default)(t)),$getState().conf.isSvcConf){e.next=15;break}if(-1!==t){e.next=7;break}$dispatch(coreUi.changevideoBroadcastNum("")),coreConf.setIsAvcMultiViewBroadcast(!1),e.next=14;break;case 7:if(null!==(n=t&&t.attendee_vc?t.attendee_vc:null)){e.next=11;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 11:r="M"+n.mcu_num+"T"+n.terminal_num,$dispatch(coreUi.changevideoBroadcastNum(r)),coreConf.setIsAvcMultiViewBroadcast(!0);case 14:return e.abrupt("return");case 15:if(!window.CLIENTCONFIG.ISWIN){e.next=18;break}return q.info("NO NEED TO handleMultiViewBroadcast"),e.abrupt("return");case 18:if(-1!==t){e.next=23;break}$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),e.next=32;break;case 23:if(null!==(a=t&&t.attendee_vc?t.attendee_vc:null)){e.next=27;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 27:o="M"+a.mcu_num+"T"+a.terminal_num,0===a.terminal_num&&$dispatch(coreUi.changeBroadcastIsMultiView(!0)),i={userInfo:{name:language.MULTI_VIEW_BROADCAST_NAME},name:language.MULTI_VIEW_BROADCAST_NAME,media_type:3,number:o,is_mute:0,role:0,state:5,is_self:0,is_broadcast:1},$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!0)),te.handleAtdlist([i,{}]);case 32:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.reportSRTPStatus=function(){var e=$getState().conf,t=(e.videoFrameHwnd,e.isSrtp),n=t?1:0,r={};r.init_state={encrypt:n},q.info("init_state "+(0,M.default)(r)),te.setParam(r)},h.setMuteState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=$getState().conf,r=n.svcShowAttendances,a=(n.svcOnLineAttendances,n.isSvcConf);if(!a||r&&0!==r.length){var o=te.getVideoFramHwnd(),i=($getState().call.isMuteMic,te.muteInfo),s=[],c={mic_volume:-1},u={};if(a){if(e&&void 0!==t){for(var f=0,l=r.length;f<l;f++)if(1===r[f].is_self){r[f].is_mute=t?1:0;var d={hwnd:r[f].wnd_handle,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(d)}}else for(var h=0,p=r.length;h<p;h++){var _={},C=r[h].number;i.has(C)&&(void 0!==r[h].is_mute&&r[h].is_mute===i.get(C).is_mute&&r[h].wnd_handle===i.get(C).wnd_handle||(r[h].is_mute=i.get(C).is_mute,_={hwnd:r[h].wnd_handle,is_mute:r[h].is_mute},s.push(_),1===r[h].is_self&&(c.mic_volume=1===r[h].is_mute?0:100)))}q.info("setMuteState muteState is "+(0,M.default)(s)),s.length>0&&(u=(0,x.default)({},u,{muteState:s}),$dispatch(coreUi.changeSvcShowAttendances(r))),-1!==c.mic_volume&&(u=(0,x.default)({},u,{init_device_state:c}))}else{var v=$.getLocalVideoHwnd(),m={hwnd:v,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(m),u=(0,x.default)({},{muteState:s},{init_device_state:c})}u&&W.NativeInterface.setParam(u,o)}},h.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},h.getUserInfoByHwnd=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,_,v,m,S,g,E,I;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new w.default,r={},a=null,o=null,i=-1,!(t>0)){e.next=16;break}if(o=te.getAtdFullInfoByHwnd(t),a=o.userInfo,!isNullOrEmpty(a.account)||!isNullOrEmpty(a.contact_id)){e.next=13;break}return s=a.number,c=a.name,e.next=11,(0,Y.searchContact)(s,c);case 11:u=e.sent,u&&1<=u.length&&(q.info("search userInfo when first right click success!"),a=(0,x.default)({},u[0]),(0,Y.updateMemberDetail)(a,s,c));case 13:i=o.number,e.next=17;break;case 16:0===t&&(a=$getState().myInfo,i=a.bind_no);case 17:if(a){for(f=["mobile","home_phone","office_phone","short_phone","ip_phone","other_phone","other_phone2"],l=f.length;l--;)d=f[l],a[d]&&a[d]!==i&&n.add(a[d]);r={hwnd:t,usernum:(0,C.default)(n)},t>0&&o&&(h=o.is_broadcast,p=o.is_self,_=o.is_mute,v=o.role,m=1===h?0:1===p?1:2,S=$getState().conf.transferChairman,r=(0,x.default)({},r,{type:m,isSelf:p,broadcast:h,isMute:_,isChairman:v,transferChairman:S}))}else r={hwnd:t,error:2};g=$getState().conf.videoFrameHwnd,E=r.usernum.map(function(e){return handlePhoneNumber(e)}),I=(0,x.default)({},r,{usernum:E}),q.info("getUserInfoByHwnd query_user_info_result is "+(0,M.default)(I)),W.NativeInterface.reportUserInfo(g,{query_user_info_result:r});case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.callOtherNum=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("callOtherNum start"),""===t.usernum){e.next=15;break}if(n=$getState().conf.memberListInfo,r=null,t.hwnd>0)r=te.getAttendeeByHwnd(t.hwnd);else for(a=0;a<n.length;a++)1===n[a].is_self&&(r=n[a]);if(!r){e.next=14;break}return q.info("callOtherNum name = "+handlePhoneNumber(r.name)),r=(0,x.default)({},r,{number:t.usernum}),o=[],o.push(r),e.next=12,(0,F.actionCallOtherNum)(o);case 12:e.next=15;break;case 14:q.info("callOtherNum faild! number = "+handlePhoneNumber(t.usernum));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.callAttendeeResult=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse((0,M.default)(t)),void 0!==n.number&&(r=n.number,n.number=handlePhoneNumber(r)),q.info("callAttendeeResult",(0,M.default)(n)),t.ret&&(q.info("  "),4===t.reason&&("win"===window.CLIENTCONFIG.PLATFORM&&te.alertBox("LANG_NATIVE_BEING_BUSY_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_BEING_BUSY_INVITE_FAILED,4,!1,"pcToast","")),5===t.reason?("win"===window.CLIENTCONFIG.PLATFORM&&te.alertBox("LANG_NATIVE_CALLED_NOT_CONNECTED_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_CALLED_NOT_CONNECTED_INVITE_FAILED,4,!1,"pcToast","")):("win"===window.CLIENTCONFIG.PLATFORM&&te.alertBox("LANG_NATIVE_CALLED_EXCEPTION_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_CALLED_EXCEPTION_INVITE_FAILED,4,!1,"pcToast","")));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.muteAttendee=function(){var e=(0,y.default)(A.default.mark(function e(t){var n;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.hwnd>0)){e.next=5;break}if(!(n=te.getAttendeeByHwnd(t.hwnd))){e.next=5;break}return e.next=5,(0,F.actionMuteAttendee)(t.isMute,n.number,n.isSelf);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.removeAttendee=function(){var e=(0,y.default)(A.default.mark(function e(t){var n;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("svcmanager remove attendee ",t),!(t.hwnd>0)){e.next=6;break}if(!(n=te.getAttendeeByHwnd(t.hwnd))){e.next=6;break}return e.next=6,(0,F.actionRemoveAttendee)(n.number);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.lockConf=function(){var e=(0,y.default)(A.default.mark(function e(t){return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager lock conf",t),e.next=3,coreCall.mlockConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.handup=function(){var e=(0,y.default)(A.default.mark(function e(t){return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager hand up",t),e.next=3,coreCall.pcHandup();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.hangupAttendee=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a,o,i;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=26;break}if(r=te.getAtdFullInfoByHwnd(n),q.info("hangupAttendee hwnd = "+n+", attendee = "+r),!r){e.next=26;break}if(a=r.number,o=r.state,i=r.participant_id,window.isSupportiDo){e.next=18;break}if(!i||i===a){e.next=13;break}return q.info("REST right menu actionHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),e.next=11,(0,F.actionHangupAttendee)(a);case 11:e.next=16;break;case 13:return q.info("REST right menu actionRemoveAttendee, remove attendee: ",handlePhoneNumber(a)),e.next=16,(0,F.actionRemoveAttendee)(a);case 16:e.next=26;break;case 18:if(q.info("iDo right menu operatorHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),5!==o){e.next=24;break}return e.next=22,(0,F.actionHangupAttendee)(a);case 22:e.next=26;break;case 24:return e.next=26,(0,F.actionRemoveAttendee)(a);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.transferChairman=function(){var e=(0,y.default)(A.default.mark(function e(t){var n;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=$getState().conf.transferChairman)){e.next=4;break}return e.next=4,n(t.usernum);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.broadcastAttendee=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r,a;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=7;break}if(!(r=te.getAtdFullInfoByHwnd(n))){e.next=7;break}return a=1===r.is_broadcast?0:1,e.next=7,(0,F.actionBroadcastAttendee)(a,r.number);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.handleConfCtrl=function(){var e=(0,y.default)(A.default.mark(function e(t){var n,r;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,M.default)(t),r=t.action,e.t0=r,e.next="mute"===e.t0?5:"broadcast"===e.t0?8:"hangup"===e.t0?11:"set_chairman"===e.t0?14:"request_chairman"===e.t0?17:"release_chairman"===e.t0?20:"call"===e.t0?23:"delete"===e.t0?26:"lock"===e.t0?29:"unlock"===e.t0?32:"put_up_hands"===e.t0?35:"put_down_hands"===e.t0?38:"extend_meeting"===e.t0?41:44;break;case 5:return e.next=7,te.muteAttendee(t);case 7:return e.abrupt("break",45);case 8:return e.next=10,te.broadcastAttendee(t);case 10:return e.abrupt("break",45);case 11:return e.next=13,te.hangupAttendee(t);case 13:return e.abrupt("break",45);case 14:return e.next=16,te.transferChairman(t);case 16:return e.abrupt("break",45);case 17:return e.next=19,H.ToolbarManager.applyOrReleasechairman({applyStu:1,pwd:t.pwd});case 19:return e.abrupt("break",45);case 20:return e.next=22,H.ToolbarManager.applyOrReleasechairman({applyStu:0});case 22:return e.abrupt("break",45);case 23:return e.next=25,te.callOtherNum(t);case 25:return e.abrupt("break",45);case 26:return e.next=28,te.removeAttendee(t);case 28:return e.abrupt("break",45);case 29:return e.next=31,te.lockConf(t);case 31:return e.abrupt("break",45);case 32:return e.next=34,te.lockConf(t);case 34:return e.abrupt("break",45);case 35:return e.next=37,te.handup(t);case 37:return e.abrupt("break",45);case 38:return e.next=40,te.handup(t);case 40:return e.abrupt("break",45);case 41:return e.next=43,H.ToolbarManager.postponeConf(t);case 43:return e.abrupt("break",45);case 44:q.info("handleConfCtrl cmd not match! pleace check");case 45:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h.isNativeUIExsit=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=$.getAvcFrameHandles()),0!==e},h.alertBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var n=$getState().conf.videoFrameHwnd;0!==n||$getState().conf.isSvcConf||(n=$.getAvcFrameHandles());var r={dialog_type:1&t};2==(2&t)?r.content=e:r.content_id=e,n>0&&r&&W.NativeInterface.showMessageBox(n,r)}},h.destroyNativeWin=function(){W.NativeInterface.destroyNativeWin()},h.removeShowAttendances=function(e){var t=$getState().conf.svcShowAttendances;if(q.info("removeShowAttendances: "+e,e),!isNullOrEmpty(e)){for(var n=-1,r=0;r<t.length;r++)t[r].name===e.name&&(n=r);q.info("removeShowAttendances pos: "+n);var a=(0,x.default)([],t);-1!==n&&(a.splice(n,1),$dispatch(coreUi.changeSvcShowAttendances(a)))}},h.destroyLastNativeWin=(0,y.default)(A.default.mark(function e(){var t,n,r,a,o;return A.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destroyLastNativeWin"),t=$getState().conf,n=t.svcShowAttendances,r=t.maxSizeForPage,a=t.svcWndHandles,q.info("maxSizeForPage is "+r+", svcShowAttendances.length is "+n.length),!(r<=n.length)){e.next=11;break}return o=new Array,o.push(n[n.length-1].wnd_handle),e.next=8,Z.destoryHwnds(o);case 8:X.removeSvcSSRC(n[n.length-1].ssrc),n.splice(n.length-1,1),$dispatch(coreUi.changeSvcShowAttendances(svcShowAttendancesList));case 11:case"end":return e.stop()}},e,void 0)})),h.switchCPURateCalc=function(e){e=!0===e?1:0;var t=$getState().conf.videoFrameHwnd,n={open:e,duration_ms:5e3};G.EncoderAdpt.clear(),te.setParam({calc_cpu_rate:n,frameHwnd:t})},h.handleCPURate=function(e){e&&e.cpu&&(q.info("SVC handleCPURate",G.EncoderAdpt),G.EncoderAdpt.feed(e.cpu))},h.clear=function(){te.memberlistArray=new Array},h.setIsSupportChatNative=function(e){var t=$getState().call.userInfo,n=$getState().conf.groupId,r=!1;isNullOrEmpty(n)||(r=!0),t&&!isNullOrEmpty(t.account)&&(r=!0);var a=(0,x.default)({},{isSupportChat:r});W.NativeInterface.setParam(a,e)},p)},193:function(e,t,n){e.exports={default:n(194),__esModule:!0}},194:function(e,t,n){n(25),n(23),e.exports=n(195)},195:function(e,t,n){var r=n(17),a=n(6)("iterator"),o=n(18);e.exports=n(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(r(t))}},197:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},200:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||i.nextTick(o,this)}function o(e){e.end()}var i=n(442),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var c=n(396);c.inherits=n(114);var u=n(585),f=n(493);c.inherits(r,u);for(var l=s(f.prototype),d=0;d<l.length;d++){var h=l[d];r.prototype[h]||(r.prototype[h]=f.prototype[h])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},203:function(e,t,n){e.exports={default:n(447),__esModule:!0}},204:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.bfcpWinDetach=t.bfcpWinAttach=t.isRecevingAppshare=t.getOldShareAppHwnd=t.setOldShareAppHwnd=t.getShareAppHwnd=t.setShareAppHwnd=t.changeShareMonitorType=t.dataConfStatus=t.confInfoNotifyParamsExist=t.getCloseShareDataOperate=t.setCloseShareDataOperate=t.getDataStreamInfo=t.isInScreenSharing=t.clearConfSharingType=t.setDataShareVersion=t.beLeaveDataConf=t.leaveDataConf=t.setDataConfParams=t.getDisplayInfo=t.setDataConfShareRealRect=t.setDataShareRealRect=t.inputWndMsg=t.cancelSharingapp=t.setTransparentwindow=t.setStart=t.setAppShareScreenParam=t.setSharingapp=t.handleNativeNotifyResetRenderRect=t.setDataShareScreenPicQuality=t.showNativeRemoteControl=t.stopWBDoc=t.closeWBTab=t.isInWBSharing=t.configSharingParam=t.createWBNewDocAndPage=t.getApplist=t.closeNativeDataSharingWnd=t.createNativeDataSharingWnd=t.showNativeDataControl=t.getIsUsePrimarySize=t.changeIsUsePrimarySize=t.isRemoteControling=t.getRemoteControlUserNum=t.changeRemoteControl2Other=t.delRemoteControlPrivilege=t.rejectRemoteControlPrivilege=t.requestRemoteControlPrivilege=t.openDocShareFile=t.isConfDataShareSelfEntered=t.getDataShareOwner=t.setDataCodecVersion=t.getDataCodeccVersion=t.getDataNegoBandwidth=t.docShareCompLoadSucCallback=t.getDocShareFilePath=t.isConfDocShareLoadSuccess=t.stopStgTunnel=t.stopShareScreen=t.getSharingType=t.isConfDataShareLoadSuccess=t.setNativeDataControlStatus=t.setIsAutoStartScreenShare=t.getIsAutoStartScreenShare=t.getMyUserId=t.handleShareEnd=t.isInReceiveDocSharing=t.stopDocSharing=t.isInSendDocSharing=t.startShare=t.isDataShareStarted=t.updateDataShareOwner=t.getDataShareOwnerBindno=t.isRecevingSharing=t.isReceivingDataShare=t.getDataConfMemberList=t.reSetFireWallModeType=t.setFireWallModeType=t.getFireWallModeType=t.isJoiningDataConf=t.isSelfJoinedDataConf=t.isInDataConf=t.terminateconf=t.retryJoinDataConf=t.joinDataConf=t.initDataConf=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(1661),l=r(f),d=n(600),h=n(401),p=n(602),_=window.Logger("dataConf")("model"),C=null,v=!1,m=(t.initDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.DFConfig.deployMode=t,h.DFConfig.firewallType=n,h.DFConfig.stgAddresslist=r,e.next=5,new coreTup.HwTupDataConfSdk;case 5:a=e.sent,o={log_path:window.LOG_PATH+h.DFConfig.pathSeparator+"dataconf"+h.DFConfig.pathSeparator,temp_path:window.APP_DATA_PATH+h.DFConfig.pathSeparator,dev_type:h.DFConfig.devType},a.init(o);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.joinDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info(" joinDataConf start "),null===C){e.next=6;break}if(_.info("join data conf already exist"),!(S()||g()||m())){e.next=6;break}return _.info("joining data abort,status is "+C.dataConfStatus),e.abrupt("return");case 6:return C=new l.default,C.setCallId(n),C.setLeftConfCallback(E),e.next=11,C.setDataConfNotifyFunc();case 11:return e.next=13,C.setConfCtrlNotifyFunc();case 13:return e.next=15,C.joinDataConf(t);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.retryJoinDataConf=function(){return _.info("retryJoinDataConf"),null===C?void _.info("retry join fail,service not exist"):C.retryJoin()},t.terminateconf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==C){e.next=3;break}return _.info("terninate conf service is null"),e.abrupt("return");case 3:return e.next=5,C.terminateconf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInDataConf=function(){return null!==C},t.isSelfJoinedDataConf=function(){return C&&C.isSelfJoinedDataConf()}),S=t.isJoiningDataConf=function(){return C&&C.isJoiningDataConf()},g=function(){return C&&C.isLeavingDataConf()},E=(t.getFireWallModeType=function(){return h.DFConfig.firewallType},t.setFireWallModeType=function(e){_.info("setFireWallModeType : "+e+", 0:stg,1:svn,2:sbc"),h.DFConfig.firewallType=e},t.reSetFireWallModeType=function(){h.DFConfig.firewallType=p.DATA_FIREWALL_MODE.NULL},t.getDataConfMemberList=function(){return null===C?(_.info("getDataConfMemberList: service is null"),[]):C.getDataConfMemberList()},t.isReceivingDataShare=function(){return null===C?(_.info("isReceivingDataShare: service is null"),!1):C.isReceivingDataShare()},t.isRecevingSharing=function(){return null===C?(_.info("isRecevingSharing: service is null"),!1):C.isRecevingSharing()},t.getDataShareOwnerBindno=function(){return null===C?"":C.getDataShareOwnerBindno()},t.updateDataShareOwner=function(e){if(null!==C)return C.updateDataShareOwner(e);_.info("updateDataShareOwner: service is null")},t.isDataShareStarted=function(){return null===C?(_.info("isDataShareStarted: service is null"),!1):C.isDataShareStarted()},t.startShare=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==C){e.next=3;break}return _.info("startShare: service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.abrupt("return",C.startShare(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isInSendDocSharing=function(){return null!==C&&C.isInSendDocSharing()},t.stopDocSharing=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===C){e.next=2;break}return e.abrupt("return",C.stopDocSharing());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReceiveDocSharing=function(){return null!==C&&C.isInReceiveDocSharing()},t.handleShareEnd=function(e){C?C.handleShareEnd(e):_.info("handleShareEnd: service is null")},t.getMyUserId=function(){return null!==C?C.getMyUserId():""},t.getIsAutoStartScreenShare=function(){return v},t.setIsAutoStartScreenShare=function(e){_.info("setIsAutoStartScreenShare isAutoStart : ",e),v=e},t.setNativeDataControlStatus=function(e){if(C)return C.setNativeDataControlStatus(e)},t.isConfDataShareLoadSuccess=function(){return null!==C&&C.isConfDataShareLoadSuccess()},t.getSharingType=function(){return null===C?(_.info("get sharing type dataConfService error"),-1):C.getSharingType()},t.stopShareScreen=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==C){e.next=3;break}return _.info("stopShareScreen service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.next=5,C.stopShareScreen();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopStgTunnel=function(){null!==C&&C.stopStgTunnel()},function(){null!==C&&(_.info("releaseDataconf dataConfService is null"),C=null,(0,h.resetConfig)())});t.isConfDocShareLoadSuccess=function(){return!!C&&C.isConfDocShareLoadSuccess()},t.getDocShareFilePath=function(){return null===C?(_.info("get doc share file path confService error"),""):C.getDocShareFilePath()},t.docShareCompLoadSucCallback=function(e){C&&C.docShareCompLoadSucCallback(e)},t.getDataNegoBandwidth=function(){return C?C.getNegoBandwidth():0},t.getDataCodeccVersion=function(){return C?C.getDataCodeccVersion():0},t.setDataCodecVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setDataCodecVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataShareOwner=function(){return null!==C?C.getDataShareOwnerBindno():""},t.isConfDataShareSelfEntered=function(){return null!==C&&C.m_user_id>0},t.openDocShareFile=function(e){C&&(_.info("openDocShareFile called"),C.openDocShareFile(e))},t.requestRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.requestRemoteControlPrivilege();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.rejectRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.delRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.delRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C&&C.changeRemoteControl2Other(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getRemoteControlUserNum=function(){return C?C.getRemoteControlUserNum():""},t.isRemoteControling=function(){return null!==C&&C.isRemoteControling()},t.changeIsUsePrimarySize=function(){null!==C&&(C.isUsePrimarySize=!C.isUsePrimarySize)},t.getIsUsePrimarySize=function(){return null!==C&&C.isUsePrimarySize},t.showNativeDataControl=function(e,t,n,r,a,o){C&&C.showNativeDataControl(e,e?o:"0",(0,d.isConfChairMan)(),t,n,r,a)},t.createNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c,u,f,l,d){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=5;break}return e.next=3,C.createNativeDataSharingWnd(t,n,r,a,o,i,c,u,f,l,d);case 3:e.next=6;break;case 5:_.info("create native data win, dataConfService is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),t.closeNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.closeNativeDataSharingWnd();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getApplist=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.getApplist();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===C){e.next=3;break}return e.next=3,C.requestWBToken(!0);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configSharingParam=function(e,t){if(null===C)return void _.info("config sharing param confService error");C.setConfSharingType(e,t)},t.isInWBSharing=function(){return null!==C&&C.isInWBSharing()},t.closeWBTab=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===C){e.next=3;break}return e.next=3,C.closeWBTab();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===C){e.next=3;break}return e.next=3,C.stopWBDoc();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeRemoteControl=function(e){C&&C.showNativeRemoteControl(e)},t.setDataShareScreenPicQuality=function(e){C&&C.setDataShareScreenPicQuality(e)},t.handleNativeNotifyResetRenderRect=function(e){_.info("handleNativeNotifyResetRenderRect start"),C&&C.handleNativeNotifyResetRenderRect(e)},t.setSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setAppShareScreenParam=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setAppShareScreenParam(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setStart=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setStart();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setTransparentwindow=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setTransparentwindow(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.cancelSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.cancelSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.inputWndMsg=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.inputWndMsg(t,n,r,a,o);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.setDataShareRealRect=function(e,t,n,r){C?(_.info(" setDataShareRealRect set rect"),C.setDataConfShareRealRect(e,t,n,r)):_.info(" setDataShareRealRect dataConfService null")},t.setDataConfShareRealRect=function(){C&&C.setDataConfShareRealRect()},t.getDisplayInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.getDisplayInfo();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataConfParams=function(e){C&&C.setDataConfParams(e)},t.leaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=5;break}return e.next=3,C.leaveDataConf();case 3:e.next=6;break;case 5:_.info("leaveDataConf:service is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.beLeaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.info("beLeaveDataConf type "),C&&C.beLeaveDataConf();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataShareVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return e.next=3,C.setDataShareVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.clearConfSharingType=function(){C&&C.resetConfSharingType()},t.isInScreenSharing=function(){return null!==C&&C.isInScreenSharing()},t.getDataStreamInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=4;break}return e.next=3,C.getStreamInfo();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCloseShareDataOperate=function(e){if(C)return C.setCloseShareDataOperate(e)},t.getCloseShareDataOperate=function(){return null!==C&&C.getCloseShareDataOperate()},t.confInfoNotifyParamsExist=function(){return C&&C.confInfo},t.dataConfStatus=function(){return C?C.dataConfStatus:p.DCONF_STATUS.NONE},t.changeShareMonitorType=function(e){C&&C.changeShareMonitorType(e)},t.setShareAppHwnd=function(e){C?C.setShareAppHwnd(e):_.error("set share app error.data service is null")},t.getShareAppHwnd=function(){return _.info("get share app hwnd"),C?C.getShareAppHwnd():0},t.setOldShareAppHwnd=function(e){C?C.setOldShareAppHwnd(e):_.error("set old app error.service is null")},t.getOldShareAppHwnd=function(){return C?C.getOldShareAppHwnd():0},t.isRecevingAppshare=function(){return!!C&&C.isRecevingAppshare()},t.bfcpWinAttach=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=4;break}return e.abrupt("return",C.bfcpWinAttach(t));case 4:_.info("attach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bfcpWinDetach=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=4;break}return e.abrupt("return",C.bfcpWinDetach());case 4:_.info("detach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},209:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeNativeLangCode=t.notifyGetSystemInfo=t.notifyGetWinSystemFonts=t.notifyChangePassiveBidirectionStatus=t.notifyChangeActiveBidirectionStatus=t.notifyChangeAudientStatus=t.destroyNativeWin=t.showMessageBox=t.notifyPutHandup=t.notifyLockConfState=t.notifyLockConfResult=t.reportUserInfo=t.setBigconfDataInitRect=t.setParam=t.getWinIcon=t.notifyNativeLeaveConf=t.getWndRect=t.reportQos=t.reportChairmanStu=t.setAvailableLayout=t.getDataConfFrameWnd=t.getTransparentWindow=t.setHightlightShareWnd=t.getFrameHwnd=t.setPageNum=t.setViewMode=t.setWindowsName=t.setWindowHighlight=t.destoryWindows=t.updateWindows=t.createWindows=t.uninitNativeScreen=t.initNativeScreen=t.HwNativeWndSdk=void 0;var a=n(98),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(234),l=(r(f),n(158),window.Logger("model")("model/nativewndService/index")),d=coreTup.HwNativeWndSdk;t.HwNativeWndSdk=d;t.initNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i){var c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return c=e.sent,e.next=5,c.initNativeScreen(t,n,r,a,o,i);case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),t.uninitNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.uninitNativeScreen(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.createWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a){var o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return o=e.sent,e.next=5,o.createWindows(t,n,r,a);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.updateWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return a=e.sent,e.next=5,a.updateWindows(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.destoryWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.destoryWindows(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowHighlight=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.setWindowHighlight(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowsName=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.setWindowsName(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setViewMode=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.setViewMode(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setPageNum=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return a=e.sent,e.next=5,a.setPageNum(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getFrameHwnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.getFrameHwnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setHightlightShareWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.setHightlightShareWnd(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getTransparentWindow=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.getTransparentWindow(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataConfFrameWnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.getDataConfFrameWnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setAvailableLayout=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return a=e.sent,e.next=5,a.setAvailableLayout(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.reportChairmanStu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.reportChairmanStu(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reportQos=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.reportQos(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getWndRect=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.getWndRect(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyNativeLeaveConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.notifyLeaveConf();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getWinIcon=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.getWindowIcon(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setParam=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.default)({},t),n=(0,o.default)(n,{isSvcConf:$getState().conf.isSvcConf}),e.next=4,new coreTup.HwNativeWndSdk;case 4:return r=e.sent,e.next=7,r.setParam(n);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setBigconfDataInitRect=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return r=e.sent,e.next=5,r.setBigconfDataInitRect(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.reportUserInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.reportUserInfo(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfResult=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.notifyLockConfResult(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfState=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new d;case 2:return n=e.sent,e.next=5,n.notifyLockConfState(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyPutHandup=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.notifyPutHandup(t);case 5:r=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.showMessageBox=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.showMessageBox(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.destroyNativeWin=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.destroyNativeWin();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyChangeAudientStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.notifyChangeAudientStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangeActiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.notifyChangeActiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangePassiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return n=e.sent,e.next=5,n.notifyChangePassiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyGetWinSystemFonts=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.notifyGetWinSystemFonts();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyGetSystemInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.HwNativeWndSdk;case 2:return t=e.sent,e.next=5,t.notifyGetSystemInfo();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.changeNativeLangCode=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("changeNativeLangCode start "),e.next=3,new coreTup.HwNativeWndSdk;case 3:return n=e.sent,e.next=6,n.changeNativeLangCode(t);case 6:return r=e.sent,l.info("changeNativeLangCode end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},215:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){var t=r(e),n=t[0],a=t[1];return 3*(n+a)/4-a}function o(e,t,n){return 3*(t+n)/4-n}function i(e){for(var t,n=r(e),a=n[0],i=n[1],s=new d(o(e,a,i)),c=0,u=i>0?a-4:a,f=0;f<u;f+=4)t=l[e.charCodeAt(f)]<<18|l[e.charCodeAt(f+1)]<<12|l[e.charCodeAt(f+2)]<<6|l[e.charCodeAt(f+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===i&&(t=l[e.charCodeAt(f)]<<2|l[e.charCodeAt(f+1)]>>4,s[c++]=255&t),1===i&&(t=l[e.charCodeAt(f)]<<10|l[e.charCodeAt(f+1)]<<4|l[e.charCodeAt(f+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function c(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(r));return a.join("")}function u(e){for(var t,n=e.length,r=n%3,a=[],o=0,i=n-r;o<i;o+=16383)a.push(c(e,o,o+16383>i?i:o+16383));return 1===r?(t=e[n-1],a.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=u;for(var f=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,_=h.length;p<_;++p)f[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},216:function(e,t){t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?a-1:0,d=n?-1:1,h=e[t+l];for(l+=d,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=d,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=r;f>0;i=256*i+e[t+l],l+=d,f-=8);if(0===o)o=1-u;else{if(o===c)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),o-=u}return(h?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,u=8*o-a-1,f=(1<<u)-1,l=f>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+l>=1?d/c:d*Math.pow(2,1-l),t*c>=2&&(i++,c/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(t*c-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;e[n+h]=255&s,h+=p,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;e[n+h]=255&i,h+=p,i/=256,u-=8);e[n+h-p]|=128*_}},217:function(e,t,n){e.exports={default:n(391),__esModule:!0}},224:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyGetUpdateFiles=t.NotifyShareResult=t.NotifySkipLogin=t.NotifySipRegisterd=t.NotifySharingType=t.NotifyAppStared=t.NotifyLoginFailedEx=t.NotifyJoinConfFailedEx=t.NotifyDeviceListReady=t.NotifyCameraListUpdate=t.NotifySharingAppClouse=t.NotifyLocalCameraStatus=t.NotifyLocalCameraPull=t.NotifyLocalSpkPull=t.NotifyLocalMicPull=t.NotifyLocalSpkVolue=t.NotifyLocalMicVolue=t.NotifyLocalSPKStatus=t.NotifyLocalMICStatus=t.NotifyJoinConfFailed=t.NotifyMyLeaveConf=t.NotifyMyJoinConf=t.NotifyLocalStopSharing=t.NotifyLocalStartSharing=t.NotifyStopSharing=t.NotifyStartSharing=t.NotifyMyKickedOut=t.NotifyConfNoStart=t.NotifyConfTermination=t.NotifyLoginFailed=t.NotifyLoginSuccess=t.initMaxhubAPI=t.initAPI=t.clkAPIWebSocket=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(100),u=r(c),f=n(601),l=r(f),d=window.Logger("api")("clkapi"),h=t.clkAPIWebSocket=null,p=function(e){var t=e.cmd;if(null!==h)switch(t){case 1601:d.info("CloudLink Login message"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),h.postRpsMessage(e,0);break;case 1621:coreCommon.BigwinObserver.publish("OnReloginCloudLink",e),h.postRpsMessage(e,0),d.info("CloudLink Relogin message");break;case 1602:d.info("Stop cloudlink message: ",e),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),h.postRpsMessage(e,0);break;case 1603:d.info("Join conference message"),coreCommon.BigwinObserver.publish("OnJoinConference",e),h.postRpsMessage(e,0);break;case 1604:d.info("Leave conference message: ",e),coreCommon.BigwinObserver.publish("OnLeaveConference",e),h.postRpsMessage(e,0);break;case 1605:d.info("Start sharing message: ",e),coreCommon.BigwinObserver.publish("OnStartSharing",e),h.postRpsMessage(e,0);break;case 1606:d.info("Stop sharing message: ",e),coreCommon.BigwinObserver.publish("OnStopSharing",e),h.postRpsMessage(e,0);break;case 1607:var n={hWnd:851978};h.postRpsParamMessage(e,n,0);break;case 1608:h.postRpsMessage(e,0);break;case 1609:var r={user_name:""};coreCommon.BigwinObserver.publish("OnGetSharingUsername",r),d.info("sharing User name is: ",r.user_name),h.postRpsParamMessage(e,r,0);break;case 1610:d.info("ctrl local camera message: ",e),coreCommon.BigwinObserver.publish("OnCtrlLocalCamera",e),h.postRpsMessage(e,0);break;case 1611:coreCommon.BigwinObserver.publish("onBigWinVideoHwnd",e);break;case 1612:case 1613:h.postRpsMessage(e,0);break;case 1614:coreCommon.BigwinObserver.publish("OnSetMicValue",e),h.postRpsMessage(e,0);break;case 1615:coreCommon.BigwinObserver.publish("OnSetSpkValue",e),h.postRpsMessage(e,0);break;case 1616:var a={device_type:e.param.device_type,device_list:[]};coreCommon.BigwinObserver.publish("ongetDeviceList",e,a),h.postRpsParamMessage(e,a,0);break;case 1617:coreCommon.BigwinObserver.publish("OnSetDevice",e),h.postRpsMessage(e,0);break;case 1618:coreCommon.BigwinObserver.publish("onBigWinDataSharingHwnd",e);break;case 1619:var o={vol:""};coreCommon.BigwinObserver.publish("ongetMicValue",o),d.info("getMicValue ="+(0,u.default)(o)),h.postRpsParamMessage(e,o,0);break;case 1620:var i={vol:""};coreCommon.BigwinObserver.publish("ongetSpkValue",i),d.info("getMicValue ="+(0,u.default)(i)),h.postRpsParamMessage(e,i,0);break;case 1622:d.info("CloudLink SET RECV SHARE PARAM message: ",(0,u.default)(e)),coreCommon.BigwinObserver.publish("OnSetRecvShareParam",e),h.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}},_=(t.initAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=h=e.sent,null!==h?(h.setCmdFunc(1601,p),h.setCmdFunc(1602,p),h.setCmdFunc(1603,p),h.setCmdFunc(1604,p),h.setCmdFunc(1605,p),h.setCmdFunc(1606,p),h.setCmdFunc(1607,p),h.setCmdFunc(1608,p),h.setCmdFunc(1609,p),h.setCmdFunc(1610,p),h.setCmdFunc(1611,p),h.setCmdFunc(1612,p),h.setCmdFunc(1613,p),h.setCmdFunc(1614,p),h.setCmdFunc(1615,p),h.setCmdFunc(1616,p),h.setCmdFunc(1617,p),h.setCmdFunc(1618,p),h.setCmdFunc(1619,p),h.setCmdFunc(1620,p),h.setCmdFunc(1621,p),h.setCmdFunc(1622,p),d.info("initAPI : Create WebSocket success.")):d.info("initAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=e.cmd;if(null!==h)switch(t){case 1601:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_RUN_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),h.postRpsMessage(e,0);break;case 1604:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LEAVE_CONFERENCE"),coreCommon.BigwinObserver.publish("OnLeaveConference",e),h.postRpsMessage(e,0);break;case 1623:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LOGOUT"),coreCommon.BigwinObserver.publish("OnLogout",e),h.postRpsMessage(e,0);break;case 1624:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_CHANGE_LANGUAGE"),coreCommon.BigwinObserver.publish("OnChangeLanguage",e),h.postRpsMessage(e,0);break;case 1625:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_GET_MAIN_WND"),coreCommon.BigwinObserver.publish("OnGetMainWnd",e);break;case 1626:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_SHOW_OR_HIDE_MAIN_WND"),coreCommon.BigwinObserver.publish("OnShowOrHideMainWnd",e),h.postRpsMessage(e,0);break;case 1605:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_START_SHARING"),coreCommon.BigwinObserver.publish("OnStartSharing",e),h.postRpsMessage(e,0);break;case 1606:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_SHARING"),coreCommon.BigwinObserver.publish("OnStopSharing",e),h.postRpsMessage(e,0);break;case 1602:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),h.postRpsMessage(e,0);break;case 1627:coreCommon.BigwinObserver.publish("OnEncryptValue",e);break;case 1628:coreCommon.BigwinObserver.publish("OnDecryptValue",e);break;case 1629:coreCommon.BigwinObserver.publish("OnCleanValue",e);break;default:d.error("can not support cmd ",(0,u.default)(e))}}),C=(t.initMaxhubAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=h=e.sent,null!==h?(h.setCmdFunc(1601,_),h.setCmdFunc(1604,_),h.setCmdFunc(1623,_),h.setCmdFunc(1624,_),h.setCmdFunc(1625,_),h.setCmdFunc(1626,_),h.setCmdFunc(1605,_),h.setCmdFunc(1606,_),h.setCmdFunc(1602,_),h.setCmdFunc(1627,_),h.setCmdFunc(1628,_),h.setCmdFunc(1629,_),d.info("initMaxHubAPI : Create WebSocket success.")):d.info("initMaxHubAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.NotifyLoginSuccess=function(){var e={description:"NotifyLoginSuccess",nty:1701,result:0};null!==h&&(d.info("clk_NotifyLoginSuccess ",(0,u.default)(e)),h.postNotifyMessage(e))},t.NotifyLoginFailed=function(e){var t={description:"NotifyLoginFailed",nty:1702,result:e};null!==h&&(d.info("clk_NotifyLoginFailed ",(0,u.default)(t)),h.postNotifyMessage(t))}),v=(t.NotifyConfTermination=function(e){var t={description:"NotifyConfTermination",nty:1703,result:e};null!==h&&(d.info("clk_NotifyConfTermination ",(0,u.default)(t)),h.postNotifyMessage(t))},t.NotifyConfNoStart=function(e){var t={description:"NotifyConfNoStart",nty:1704,result:e};null!==h&&(d.info("clk_NotifyConfNoStart ",(0,u.default)(t)),h.postNotifyMessage(t))},t.NotifyMyKickedOut=function(e){var t={description:"NotifyMyKickedOut",nty:1705,result:e};null!==h&&(d.info("clk_NotifyMyKickedOut ",(0,u.default)(t)),h.postNotifyMessage(t))},t.NotifyStartSharing=function(e,t){var n={description:"NotifyStartSharing",nty:1706,result:e,param:{user_name:t}};null!==h&&(d.info("clk_NotifyStartSharing ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyStopSharing=function(e,t){var n={description:"NotifyStopSharing",nty:1707,result:e,param:{user_name:t}};null!==h&&(d.info("clk_NotifyStopSharing ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalStartSharing=function(e,t){var n={description:"NotifyLocalStartSharing",nty:1708,result:e,param:{wnd:t}};null!==h&&(d.info("clk_NotifyLocalStartSharing ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalStopSharing=function(e,t){var n={description:"NotifyLocalStopSharing",nty:1709,result:e,param:{wnd:t}};null!==h&&(d.info("clk_NotifyLocalStopSharing ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyMyJoinConf=function(e,t){var n={description:"NotifyMyJoinConf",nty:1710,result:e,param:{sip_number:t}};null!==h&&(d.info("clk_NotifyMyJoinConf ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyMyLeaveConf=function(e){var t={description:"NotifyMyLeaveConf",nty:1711,result:e};null!==h&&(d.info("clk_NotifyMyLeaveConf ",(0,u.default)(t)),h.postNotifyMessage(t))},t.NotifyJoinConfFailed=function(e){var t={description:"NotifyJoinConfFailed",nty:1712,result:e};null!==h&&(d.info("clk_NotifyJoinConfFailed ",(0,u.default)(t)),h.postNotifyMessage(t))});t.NotifyLocalMICStatus=function(e,t){var n={description:"NotifyLocalMICStatus",nty:1713,result:e,param:{status:t}};null!==h&&(d.info("clk_NotifyLocalMICStatus ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalSPKStatus=function(e,t){var n={description:"NotifyLocalSPKStatus",nty:1714,result:e,param:{status:t}};null!==h&&(d.info("clk_NotifyLocalSPKStatus ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalMicVolue=function(e,t){var n={description:"NotifyLocalMicVolue",nty:1715,result:e,param:{vol:t}};null!==h&&(d.info("clk_NotifyLocalMicVolue ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalSpkVolue=function(e,t){var n={description:"NotifyLocalSpkVolue",nty:1716,result:e,param:{vol:t}};null!==h&&(d.info("clk_NotifyLocalSpkVolue ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyLocalMicPull=function(e,t,n){var r={description:"NotifyLocalMicPull",nty:1717,result:e,param:{device_id:t,device_name:n}};null!==h&&(d.info("clk_NotifyLocalMicPull ",(0,u.default)(r)),h.postNotifyMessage(r))},t.NotifyLocalSpkPull=function(e,t,n){var r={description:"NotifyLocalSpkPull",nty:1718,result:e,param:{device_id:t,device_name:n}};null!==h&&(d.info("clk_NotifyLocalSpkPull ",(0,u.default)(r)),h.postNotifyMessage(r))},t.NotifyLocalCameraPull=function(e,t,n){var r={description:"NotifyLocalCameraPull",nty:1719,result:e,param:{device_id:t,device_name:n}};null!==h&&(d.info("clk_NotifyLocalCameraPull ",(0,u.default)(r)),h.postNotifyMessage(r))},t.NotifyLocalCameraStatus=function(e,t){var n={description:"NotifyLocalCameraStatus",nty:1720,result:e,param:{status:t}};null!==h&&(d.info("clk_NotifyLocalCameraStatus ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifySharingAppClouse=function(e,t){var n={description:"NotifyLocalCameraPull",nty:1721,result:e,param:{wnd:t}};null!==h&&(d.info("clk_NotifySharingAppClouse ",(0,u.default)(n)),h.postNotifyMessage(n))},t.NotifyCameraListUpdate=function(e){var t={description:"NotifyCameraListUpdate",nty:1722,result:e};null!==h&&(d.info("clk_NotifyCameraListUpdate ",(0,u.default)(t)),h.postNotifyMessage(t))},t.NotifyDeviceListReady=function(){var e={description:"NotifyDeviceListReady",nty:1723,result:0};null!==h&&(d.info("clk_NotifyDeviceListReady ",(0,u.default)(e)),h.postNotifyMessage(e))},t.NotifyJoinConfFailedEx=function(e){v(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyLoginFailedEx=function(e){C(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyAppStared=function(e){var t={description:"NotifyAppStared",nty:1724,result:e};d.info("NotifyAppStared: ",(0,u.default)(t)),null!==h&&h.postNotifyMessage(t)},t.NotifySharingType=function(e,t){var n={description:"NotifySharingType",nty:1725,result:e,param:{type:t}};d.info("NotifySharingType: ",(0,u.default)(n)),null!==h&&h.postNotifyMessage(n)},t.NotifySipRegisterd=function(e){var t={description:"NotifySipRegisterd",nty:1726,result:e,param:{ip:$getState().login.serverAddress,account:$getState().login.account}};d.info("NotifySipRegisterd: ",(0,u.default)(t)),null!==h&&h.postNotifyMessage(t)},t.NotifySkipLogin=function(e){var t={description:"NotifySkipLogin",nty:1727,result:e};d.info("NotifySkipLogin: ",(0,u.default)(t)),null!==h&&h.postNotifyMessage(t)},t.NotifyShareResult=function(e,t,n){var r={description:"NotifyShareResult",nty:1728,result:e,param:{param1:t,param2:n}};d.info("NotifyShareResult: ",(0,u.default)(r)),null!==h&&h.postNotifyMessage(r)},t.NotifyGetUpdateFiles=function(e,t){var n={description:"NotifyGetUpdateFiles",nty:1729,result:e,param:{paramStr:t}};d.info("NotifyGetUpdateFiles: ",(0,u.default)(n)),null!==h&&h.postNotifyMessage(n)}},234:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NativeInterface=void 0;var a,o,i=n(98),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),h=r(d),p=n(209),_=(n(158),n(851)),C=n(186),v=window.Logger("conf")("logic/nnativeWnd/NativeInterface"),m=(t.NativeInterface=(o=a=function e(){(0,h.default)(this,e)},a.setLocalWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setLocalWindow callid = "+t+",wndHandle = "+n+",index = "+o),r=null,r=0===o?[{video_wnd_type:1,render:n,displaytype:1,startimage:""}]:[{video_wnd_type:1,render:n,displaytype:1,index:o,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,r);case 5:return a=e.sent,0!==a.result?v.info("Set local window failed, result = ",a.result):v.info("Set local window success, result = ",a.result),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setBFCPWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("setBFCPWindow callid="+t+",wndHandle="+n+",isData2Bfcp="+r),r){e.next=10;break}return a=[{video_wnd_type:3,render:n,displaytype:1,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,a);case 5:return o=e.sent,0!==o.result?v.info("Set bfcp window failed, result = ",o.result):v.info("Set bfcp window success, result = ",o.result),e.abrupt("return",o);case 10:return e.next=12,coreConf.bfcpWinAttach(n);case 12:return i=e.sent,v.info("attach win for data result: ",i),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setRemoteWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setRemoteWindow callid="+t+",wndHandle="+n),r=[{video_wnd_type:0,render:n,displaytype:1,startimage:""}],e.next=4,coreCall.setVideoWindow(1,t,r);case 4:return a=e.sent,0!==a.result?v.info("setRemoteWindow failed, result = ",a.result):v.info("setRemoteWindow success, result = ",a.result),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.initNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!!window.isHubEnv&&window.isHubEnv,v.info("initNativeScreen viewMode = "+t+", version = "+n+", isMaxHub = "+a),o=window.CLIENTCONFIG.NEW_APP_NAME,e.next=5,(0,p.initNativeScreen)(t,n,r,a,s,o);case 5:if(i=e.sent,0===i.result){e.next=11;break}return v.info("Init native screen failed, result = ",i.result),e.abrupt("return",null);case 11:return v.info("Init native screen success, result = ",i.result),e.abrupt("return",i.param.frameHwnd);case 13:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.uninitNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.uninitNativeScreen)(t,r);case 2:return n=e.sent,0!==n.result?v.info("Uninit native screen failed, result = ",n.result):v.info("Uninit native screen success, result = ",n.result),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.createWindows=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.createWindows)(t,r,a,o);case 2:if(n=e.sent,v.info("createWindows res = ",n),0===n.result){e.next=9;break}return v.info("Create windows failed, result = ",n.result),e.abrupt("return",null);case 9:return v.info("Create windows success, result = ",n.result),e.abrupt("return",n.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.updateWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.updateWindows)(t,n,r);case 2:if(a=e.sent,v.info("updateWindows, res = ",a),0===a.result){e.next=9;break}return v.info("Update windows failed, result = ",a.result),e.abrupt("return",null);case 9:return v.info("Update windows success, result = ",a.result),e.abrupt("return",a.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.destoryWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.destoryWindows)(t,n);case 2:if(r=e.sent,v.info("destoryWindows, res = ",r),0===r.result){e.next=9;break}return v.info("Destroy windows failed, result = ",r.result),e.abrupt("return",null);case 9:if(v.info("Destroy windows success, result = ",r.result),!r.param||!r.param.hwndList){e.next=14;break}return e.abrupt("return",r.param.hwndList);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowHighlight=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setWindowHighlight)(t,n);case 2:return r=e.sent,v.info("setWindowHighlight, res = ",r),0!==r.result?v.info("Set window highlight failed, result = ",r.result):v.info("Set window highlight success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowsName=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setWindowsName)(t,n);case 2:return r=e.sent,v.info("setWindowsName, res = ",r),0!==r.result?v.info("Set windows name failed, result = ",r.result):v.info("Set windows name success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setViewMode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setViewMode)(t,n);case 2:return r=e.sent,v.info("setViewMode, res = ",r),0!==r.result?v.info("Set view mode failed, result = ",r.result):(v.info("Set view mode success, result = ",r.result),a=$getState().conf,o=a.svcPreViewMode,i=a.svcOnLineAttendances,s=o||_.SVC_VIEW_MODE.BIG_SMALL_MODE,C.SvcAtdManager.setPageNum(s,i.length)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setPageNum=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setPageNum)(t,n,r);case 2:return a=e.sent,v.info("setPageNum, res = ",a),0!==a.result?v.info("set page num failed, result = ",a.result):v.info("set page num success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.getFrameHwnd=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n={},n.param={},n.param.frameHwnd=t,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),a.getBfcpFrameHwnd=function(){var e=$getState().conf.bfcpFrameHwnd,t={};return t.param={},t.param.frameHwnd=e,t},a.setHightlightShareWnd=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setHightlightShareWnd)(t,n);case 2:if(r=e.sent,v.info("setHightlightShareWnd, res = ",r),0===r.result){e.next=9;break}return v.info("Set hightlight shareWnd failed, result = ",r.result),e.abrupt("return",null);case 9:return v.info("Set hightlight shareWnd success, result = ",r.result),e.abrupt("return",r.param.hwnd);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getWindowIcon=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getWinIcon)(t);case 2:return n=e.sent,v.info("get Window Icon, res = ",n),0!==n.result?v.info("get Window Icon failed"):v.info("get Window Icon success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getTransparentWindow=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getTransparentWindow)(t);case 2:return n=e.sent,v.info("getTransparentWindow, res = ",n),0!==n.result?v.info("Get Transparent Window hwnd failed, result = ",n.result):v.info("Get Transparent Window hwnd success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getDataConfFrameWnd=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getDataConfFrameWnd)();case 2:return t=e.sent,v.info("getDataConfFrameWnd, res = ",t),0!==t.result?v.info("Get dataconfframe hwnd failed, result = ",t.result):v.info("Get dataconfframe hwnd success, result = ",t.result),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,void 0)})),a.setAvailableLayout=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setAvailableLayout)(t,n,r);case 2:return a=e.sent,v.info("setAvailableLayout, res = ",a),0!==a.result?v.info("set available layout failed, result = ",a.result):v.info("set available layout success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setBigconfDataInitRect=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.setBigconfDataInitRect)(t,n);case 2:r=e.sent,v.info("setBigconfDataInitRect, res = ",r),0!==r.result?v.info("setBigconfDataInitRect failed, result = ",r.result):v.info("setBigconfDataInitRect success, result = ",r.result);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setParam=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,r=(0,s.default)({},t),r=(0,s.default)(r,{frameHwnd:n,isHaveSharePriviledge:m(),isSvcConf:$getState().conf.isSvcConf}),e.next=5,(0,p.setParam)(r);case 5:a=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportQos=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,p.reportQos)(a);case 4:o=e.sent,v.info("reportQos, res = ",o),0!==o.result?v.info("report qos failed, result = ",o.result):v.info("report qos success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportUserInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,p.reportUserInfo)(a);case 4:o=e.sent,v.info("reportUserInfo, res = ",o),0!==o.result?v.info("reportUserInfo failed, result = ",o.result):v.info("reportUserInfo success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.showMessageBox=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,p.showMessageBox)(a);case 4:o=e.sent,v.info("showMessageBox, res = ",o),0!==o.result?v.info("showMessageBox failed, result = ",o.result):v.info("showMessageBox success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.destroyNativeWin=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.destroyNativeWin)();case 2:t=e.sent,v.info("destroyNativeWin, res = ",t),0!==t.result?v.info("destroyNativeWin failed, result = ",t.result):v.info("destroyNativeWin success, result = ",t.result);case 5:case"end":return e.stop()}},e,void 0)})),a.notifyGetWinSystemFonts=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.notifyGetWinSystemFonts)();case 2:if(t=e.sent,0===t.result){e.next=7;break}v.info("notifyGetWinSystemFonts failed, result = ",t.result),e.next=9;break;case 7:return v.info("notifyGetWinSystemFonts success, total = ",t.param.fontlist.length),e.abrupt("return",t.param.fontlist);case 9:case"end":return e.stop()}},e,void 0)})),a.notifyGetSystemInfo=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.notifyGetSystemInfo)();case 2:if(t=e.sent,v.info("notifyGetSystemInfo, res = ",t),0===t.result){e.next=8;break}v.info("notifyGetSystemInfo failed, result = ",t.result),e.next=9;break;case 8:return e.abrupt("return",t.param);case 9:case"end":return e.stop()}},e,void 0)})),o),function(){var e=$getState().conf.hasConFRight,t=$getState().conf.confHandle,n=!0;return""===t&&!1===e&&(n=!1),""===t&&$getState().conf.showvmrornot&&(n=!1),v.info("initNativeScreen isHaveSharePriviledge = "+n),n})},391:function(e,t,n){n(32),n(23),n(25),n(392),n(393),n(394),n(395),e.exports=n(8).Map},392:function(e,t,n){"use strict";var r=n(164),a=n(134);e.exports=n(165)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},393:function(e,t,n){var r=n(10);r(r.P+r.R,"Map",{toJSON:n(166)("Map")})},394:function(e,t,n){n(167)("Map")},395:function(e,t,n){n(168)("Map")},396:function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===C(e)}function r(e){return"boolean"==typeof e}function a(e){return null===e}function o(e){return null==e}function i(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function f(e){return"[object RegExp]"===C(e)}function l(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===C(e)}function h(e){return"[object Error]"===C(e)||e instanceof Error}function p(e){return"function"==typeof e}function _(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function C(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=a,t.isNullOrUndefined=o,t.isNumber=i,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=f,t.isObject=l,t.isDate=d,t.isError=h,t.isFunction=p,t.isPrimitive=_,t.isBuffer=e.isBuffer}).call(t,n(116).Buffer)},400:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCPURate=t.getAvcBfcpHwnd=t.getRemoteVideoHwnd=t.getLocalVideoHwnd=t.getAvcFrameHandles=t.setAvcNullForSvc=t.isAvcNativeExsit=t.setViewMode=t.switchVideoToMain=t.switchVideoToMin=t.handleSwitchToVideo=t.setConfServerId=t.setSubject=t.closeCallInterface=t.nativeNotifyUpdateBfcpFrameWnd=t.closeBfcpFrame=t.initBfcpWindow=t.initRemotWindow=t.updateLocalwindowCallId=t.updateCameraList=t.initCallInterface=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1665),u=r(c),f=window.Logger("conf")("logic/video/AVCNativeService"),l=null;t.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.initCallInterface(t,n,r);case 4:a=e.sent,0===a?f.info("initCallInterface int avc win suc"):(f.error("initCallInterface int avc win fail"),l=null),e.next=9;break;case 8:f.warn("initCallInterface avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateCameraList avc win no exist"),e.abrupt("return");case 5:l.updateCameraList(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateLocalwindowCallId avc win no exist"),e.abrupt("return");case 5:l.updateLocalwindowCallId(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("initRemotWindow avc win no exist"),e.abrupt("return");case 5:l.initRemotWindow(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===l&&(f.warn("initBfcpWindow avc win no exist"),l=new u.default),l.initBfcpWindow(t,n,r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.closeBfcpFrame=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.closeBfcpFrame();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.nativeNotifyUpdateBfcpFrameWnd(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closeCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeCallInterface avc win no exist"),e.abrupt("return");case 5:return l.closeBfcpFrame(),e.next=8,l.closeCallInterface();case 8:t=e.sent,0===t?(f.info("closeCallInterface avc win suc"),l=null):f.error("closeCallInterface avc win fail");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSubject=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setSubject(e)},t.setConfServerId=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setConfServerId(e)},t.handleSwitchToVideo=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.handleSwitchToVideo(t);case 4:n=e.sent,0===n?f.info("handleSwitchToVideo int avc win suc"):(f.error("handleSwitchToVideo int avc win fail"),l=null),e.next=9;break;case 8:f.warn("handleSwitchToVideo avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.switchVideoToMin=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMin avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMin();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchVideoToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMain avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setViewMode=function(e,t){null===l?f.warn("setViewMode avc win no exist"):l.setViewMode(e,t)},t.isAvcNativeExsit=function(){return!(null===l)},t.setAvcNullForSvc=function(){l=null,f.info("setAvcNullForSvc")},t.getAvcFrameHandles=function(){return null===l?0:l.getAvcFrameHandles()},t.getLocalVideoHwnd=function(){return null===l?0:l.getLocalVideoHwnd()},t.getRemoteVideoHwnd=function(){return null===l?0:l.getRemoteVideoHwnd()},t.getAvcBfcpHwnd=function(){return null===l?0:l.getAvcBfcpHwnd()},t.handleCPURate=function(e){return null===l?0:l.handleCPURate(e)}},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetConfig=t.DFConfig=void 0;var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(602),i=window.Logger("dataconf")("config"),s=t.DFConfig=function e(){(0,a.default)(this,e)};s.platform=o.DFPLATFORM.platform,s.isWin=o.DFPLATFORM.isWin,s.isBigWin=o.DFPLATFORM.isWin,s.isMobile=o.DFPLATFORM.isMobile,s.isPc=o.DFPLATFORM.isPc,s.isMac=o.DFPLATFORM.isMac,s.isWinBase=o.DFPLATFORM.isWinBase,s.moduleName="DataConf",s.isAppShareEnabled=o.DFPLATFORM.isWin||o.DFPLATFORM.isBigWin,s.pathSeparator=o.DFPLATFORM.isWin||o.DFPLATFORM.isBigWin?"\\":"/",s.supportBuried=o.DFPLATFORM.isBigWin,s.userSipNumberRequestBigParams=o.DFPLATFORM.isMobile&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||o.DFPLATFORM.isBigWin,s.useSBC=!o.DFPLATFORM.isBigWin,s.decFr=function(){return o.DFPLATFORM.isMobile||2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},s.encFr=function(){return 2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},s.isDocShareEnabled=function(){var e=void 0!==window.enableDocShare?parseInt(window.enableDocShare,10):0;return i.info("openDocShareFlag  enableDocShare : "+window.enableDocShare),!isNullOrEmpty(e)&&1===e},s.whiteBoardShareEnable=o.DFPLATFORM.isWin,s.serverType=function(){return s.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING?1:3},s.shouldSendServerInfoNotify=function(){return window.CLIENTCONFIG.ENABLE_IT_MEETING},s.shouldPasscodeBase64=function(){return s.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING},s.captureType=o.DFPLATFORM.isMac?4:3,s.sendAnnotationEnable=o.DFPLATFORM.isWin||o.DFPLATFORM.isBigWin,s.supportDataToBfcp=o.DFPLATFORM.isMac,s.deployMode=constant.MEETING_NET_TYPE.MEDIAX_MEETING,s.firewallType=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.DATA_FIREWALL_MODE.SBC:o.DATA_FIREWALL_MODE.NULL,s.stgAddresslist="",s.devType=o.DFPLATFORM.isBigWin?11:1,s.dataCodeccVersion=5;t.resetConfig=function(){i.info("resetConfig start"),s.dataCodeccVersion=5,s.devType=o.DFPLATFORM.isBigWin?11:1}},413:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarManager=void 0;for(var o,i,s=n(112),c=a(s),u=n(98),f=a(u),l=n(1),d=a(l),h=n(100),p=a(h),_=n(2),C=a(_),v=n(4),m=a(v),S=n(5),g=a(S),E=(n(224),n(158)),w=(n(209),n(234)),I=n(186),T=n(400),N=r(T),b=n(204),O=r(b),A=constant.KEYPAD_CONST,R=(A.BTN_HIGH_LIGHT_TIME,A.ON_HOLD_TIME_STAMP,A.KEY_AUDIO_LIST),y=A.KEY_AUDIO_SRC,L=R.length,M=[],D=0;D<L;D++){var x=new Audio;x.src=y+R[D],x.preload="auto",M.push(x)}for(var k=0;k<L;k++){var P=new Audio;P.src=y+R[k],P.preload="auto",M.push(P)}var F=window.Logger("conf")("logic/video/toolbarmanager"),U=t.ToolbarManager=(i=o=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"playDialAudio",value:function(e){var t=void 0;if(12===e&&(e=0),window.webView)window.webView.playRing(e+".wav",0);else if(this[e]?(t=M[Number(e)+L],this[e]=!1):(t=M[e],this[e]=!0),coreCommon.isMobile()){var n=new Media(y+R[Number(e)],function(){window.log("audio load success.")},function(){window.log("audio load failed.")});n.play()}else t&&(t.currentTime=0,t.play())}}]),e}(),o.rpChairman={stu:-1,time:Date.now(),timer:-1},o.selfMuteState=-1,o.clearParam=function(){clearTimeout(U.rpChairman.timer),U.rpChairman={stu:-1,time:Date.now(),timer:-1},U.selfMuteState=-1},o.setMicVol=function(){var e=(0,C.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.index>=0&&(F.info("user click to set mic device, index=",t.index),coreSetting.setAndSaveMicDevice(t.index)),t.isMute>=0&&(F.info("setMicVolNotify, param = "+(0,p.default)(t)),n=1===t.isMute,U.setValueZeroFunc(),I.SvcAtdManager.setMuteState(!0,n));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setSpkVol=function(){var e=(0,C.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.index>=0&&(F.info("user click to set spk device, index=",t.index),coreSetting.setAndSaveSpkDevice(t.index)),!(t.isMute>=0)){e.next=9;break}if(!$getState().call.isMuteSpk){e.next=7;break}return e.next=5,coreCommon.SpkControl.getInstance().muteSpk(!1);case 5:e.next=9;break;case 7:return e.next=9,coreCommon.SpkControl.getInstance().muteSpk(!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setMicState=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(F.info("setMicState = "+t),r=(0,f.default)({frameHwnd:n},{set_mic_state:t}),F.info("setMicState "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setSpkSate=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(F.info("setSpkSate = "+t),r=(0,f.default)({frameHwnd:n},{set_spk_state:t}),F.info("setSpkSate "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setConfHandle=function(e){var t=0;if($getState().conf.videoFrameHwnd>0&&(t=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(t=N.getAvcFrameHandles()),t>0){var n=(0,f.default)({frameHwnd:t},{is_in_conf:""===e?0:1},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});F.info("setConfhanlde "+(0,p.default)(n)),w.NativeInterface.setParam(n)}else F.warn("setConfhanlde fail cause of  videoWnd = "+t)},o.setCameraState=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),n>0&&(F.info("setCameraState = "+t),r=(0,f.default)({frameHwnd:n},{set_camera_state:t}),F.info("setCameraState "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setValueZeroFunc=(0,C.default)(d.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(F.info("userClick  mic mute btn"),t=$getState().myInfo.bind_no,n=$getState().conf,r=n.confHandle,a=n.isConfMicMute,o=n.selfNum,i=$getState().call,s=i.micValue,c=i.isMuteMic,""===r){e.next=24;break}if(!(a>1)){e.next=6;break}return F.info("middle mute state, do nothing..."),e.abrupt("return");case 6:if(F.info("userClick mute btn, change mute state: "+o+" bindNum: "+t),u=isNullOrEmpty(o)?t:o,0!==s){e.next=13;break}F.info("user click mute btn, value is 0"),a&&(F.info("conf unmute self mic"),(0,E.actionMuteAttendee)(!1,u,!0)),e.next=22;break;case 13:if(F.info("userClick mute btn, change mute state: ",a),!c||a){e.next=17;break}return coreCommon.MicControl.getInstance().muteMic(!1),e.abrupt("return");case 17:if(!isNullOrEmpty(o)||c){e.next=20;break}return coreCommon.MicControl.getInstance().muteMic(!0),e.abrupt("return");case 20:c&&coreCommon.MicControl.getInstance().muteMic(!1),(0,E.actionMuteAttendee)(!a,u,!0);case 22:e.next=26;break;case 24:F.info("call mute self mic"),c?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 26:case"end":return e.stop()}},e,void 0)})),o.dialClk=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.info("dialClk, param = "+(0,p.default)(t)),n=void 0,r=t.num,a=$getState().call.callId,coreCall.actionDialDTMF(a,r),r<10?n=r:"*"===r?n=10:"#"===r?n=11:"+"===r&&(n=0),U.playDialAudio(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.postponeConf=function(){var e=(0,C.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.confHandle,$dispatch(coreUi.updatePastponeTime(t.timeout)),(0,E.postponeConf)(n,t.timeout);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.removeVideo=(0,C.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.info("removeVideo start"),t=$getState().call.callId,t?(coreCall.removeVideo(t),appService.showMainWindow(!0)):F.info("removeVideo callId is null, please check");case 3:case"end":return e.stop()}},e,void 0)})),o.setCameraStu=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(F.info("setCameraStu, param = "+(0,p.default)(t)),!(t.index>=0)){e.next=6;break}return F.info("user click to set cam device, index=",t.index),e.next=5,coreSetting.setAndSaveCamDevice(t.index);case 5:coreCommon.CameraControl.getInstance().switchCameraStateAction(!0);case 6:if(void 0==t.state){e.next=15;break}if(n=$getState().call,r=n.callStatus,a=n.cameraIsDisabled,F.info("<video>user click openCamera,callStatus = "+r),!(o=!("VIDEO_OUT"!==r&&!a))){e.next=14;break}return e.abrupt("return");case 14:coreCommon.CameraControl.getInstance().switchCameraStateAction(t.state);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.applyOrReleasechairman=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(F.info("applyOrReleasechairman, param = "+(0,p.default)(t)),n=$getState().conf.memberListInfo,r=U.getSelfOfNumber(n),t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.RELEASE){e.next=8;break}return e.next=6,(0,E.actionReleaseChairman)(r);case 6:e.next=28;break;case 8:if(t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.REQUEST){e.next=28;break}if(e.prev=9,a=t.pwd+"",(o=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=16;break}U.reRequestChairman(a,r),e.next=23;break;case 16:if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=22;break}return F.info("SMC first "),e.next=20,(0,E.actionRequestChairman)("",r);case 20:e.next=23;break;case 22:U.reRequestChairman(a,r);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),F.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[9,25]])}));return function(t){return e.apply(this,arguments)}}(),o.reRequestChairman=function(){var e=(0,C.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F.info("reRequestChairman by [pwd]"),r=$getState().login.deployMode,e.next=4,(0,E.actionRequestChairman)(t,n);case 4:r===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),o.getSelfOfNumber=function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,i=(0,c.default)(e);!(n=(o=i.next()).done);n=!0){var s=o.value;if(1===s.is_self){t=s.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t},o.handleReleaseChairmanResNotify=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.info("handleReleaseChairmanResNotify result = "+t.param),n=t.param.ret,r={state:0,result:n},a=$getState().conf.isBigConf,0===n?(window.CLIENTCONFIG.ISWIN?a?(I.SvcAtdManager.handleCancelWatch(),I.SvcAtdManager.alertBox("NATIVE_RELEASE_CHAIR_ENTER_ACTIVE_CONF",1)):I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_RELEASED_RIGHTS",1):window.CLIENTCONFIG.ISMOBILE?$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.SUCCESSFULLY_RELEASED_RIGHTS,2):window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS,5,!1,"pcToast",""),(0,E.setSmcFirstRequest)()):(F.error("failed to release the chairman ",n),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_FAILED_RELEASE_THE_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?alert(language.FAILED_RELEASE_THE_CHAIR):window.Toast(language.FAILED_RELEASE_THE_CHAIR,5,!1,"pcToast",""));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleRequestChairmanResNotify=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a,o,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.info("handleRequestChairmanResNotify result = "+(0,p.default)(t.param)),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=t.param.ret,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0===a?(i&&$dispatch(coreUi.showqusetchairman()),o&&(F.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_APPLIED_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.SUCCESSFULLY_APPLIED_CHAIR,2):window.Toast(language.SUCCESSFULLY_APPLIED_CHAIR,5,!1,"pcToast","")):r&&coreConf.getIsSmcFirstRequestCharimanRest()?(coreConf.setIsSmcFirstRequestCharimanRest(!1),$dispatch(coreUi.showqusetchairman())):(F.error("failed to request the chairman ",a),window.CLIENTCONFIG.ISWIN?5===a&&I.SvcAtdManager.alertBox("IDS_TEXT_APPLY_CHAIRMAN_FAIL"):window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.ENABLE_IT_MEETING?(0,E.popupRequestChairmanInputBox)():alert(language.APPLICATION_FAILED):window.Toast(language.APPLICATION_FAILED,5,!1,"pcToast",""),o||(F.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.isConfHasCharMain=(0,C.default)(d.default.mark(function e(){var t,n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),F.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])})),o.initDeviceStates=(0,C.default)(d.default.mark(function e(){var t,n,r,a,o,i,s,c,u,l;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().call,n=t.isOpenCamera,r=t.cameraNum,a=$getState().conf.isConfMicMute,o=$getState().call,i=o.isMuteMic,s=o.isMuteSpk,c={isMuteSpk:s?1:0,mic_volume:a||i?0:100,camera_on:r>0?n:-1},u=$getState().conf.videoFrameHwnd,l=(0,f.default)({frameHwnd:u},{init_device_state:c}),F.info("initDeviceStates "+(0,p.default)(l)),w.NativeInterface.setParam(l);case 6:case"end":return e.stop()}},e,void 0)})),o.changeCameraStates=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={camera_on:t?1:0},r=$getState().conf.videoFrameHwnd,a=(0,f.default)({frameHwnd:r},{init_device_state:n}),F.info("changeCameraStates "+(0,p.default)(a)),w.NativeInterface.setParam(a);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setChairmanState=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a,o,i,s,c,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return U.rpChairman.stu=-1,e.abrupt("return");case 3:if(n=I.SvcAtdManager.getVideoFramHwnd(),!$getState().conf.isVideoConf){e.next=23;break}r=-1,a=0,o=t.length;case 7:if(!(a<o)){e.next=14;break}if(1!==t[a].is_self){e.next=11;break}return r=t[a].role,e.abrupt("break",14);case 11:a++,e.next=7;break;case 14:if(-1!==r){e.next=17;break}return F.info("reportChairmanState not find self!!!"),e.abrupt("return");case 17:i=function(e){var t={state:e},r=(0,f.default)({frameHwnd:n},{set_chairman_state:t},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});F.info("reportChairmanState "+(0,p.default)(r)),w.NativeInterface.setParam(r)},s=Date.now()-U.rpChairman.time,F.info("amIChairman = "+r),U.rpChairman.stu!==r||s>5e3?(U.rpChairman.stu=r,U.rpChairman.time=Date.now(),clearTimeout(U.rpChairman.timer),F.info("reportChairmanState 111 tic = "+s),i(r)):s<5e3&&(clearTimeout(U.rpChairman.timer),U.rpChairman.timer=setTimeout(function(){U.rpChairman.stu=r,U.rpChairman.time=Date.now(),F.info("reportChairmanState 222"),i(r),clearTimeout(U.rpChairman.timer)},5e3-s)),e.next=24;break;case 23:window.CLIENTCONFIG.ISWIN&&(c={set_chairman_state:{state:$getState().conf.selfRole}},O.setDataConfParams(c));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setMuteStateInAvc=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISWIN){e.next=14;break}n=-1,r=0,a=t.length;case 3:if(!(r<a)){e.next=10;break}if(1!==t[r].is_self){e.next=7;break}return n=t[r].is_mute?0:1,e.abrupt("break",10);case 7:r++,e.next=3;break;case 10:if(-1!==n){e.next=12;break}return e.abrupt("return");case 12:F.info("amIMute = "+n),U.selfMuteState!=n&&(U.selfMuteState=n,F.info("reportSelfMuteState "+(0,p.default)(n)),U.setMicState(n));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.hangup=function(){var e=(0,C.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.info("hangup, param = "+(0,p.default)(t)),e.t0=t.leaveOption,e.next=e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.LEAVECONF?4:e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.DISSOLUTIONCONF?4:7;break;case 4:return(0,E.setSmcFirstRequest)(),U.hangupEndCurrentCall(t.leaveOption),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.hangupEndCurrentCall=function(){var e=(0,C.default)(d.default.mark(function e(t){var n,r,a,o,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.sipLoginOnly&&(F.info("hangupEndCurrentCall siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())),n=$getState(),r=n.conf,a=r.confHandle,o=r.selfRole,i=n.call.callId,U.clearParam(),coreConf.isInConf()){e.next=9;break}return F.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=24;break;case 9:if(""===a){e.next=21;break}if(!o||1!==t){e.next=16;break}return F.info("ConfrimNotify end conf, confHandle=",a),e.next=14,(0,E.actionEndConf)();case 14:e.next=19;break;case 16:return F.info("ConfrimNotify leave conf, confHandle=",a),e.next=19,(0,E.actionLeaveConf)();case 19:e.next=24;break;case 21:return F.info("ConfrimNotify endCallInConf, callId=",i),e.next=24,(0,E.endCallInConf)(i);case 24:I.SvcAtdManager.destroyNativeWin();case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.hangupExitBtnClk=(0,C.default)(d.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.callStatus,a=n.callId,o=t.conf,i=o.confHandle,s=o.selfRole,c=o.uportalTokenErr,u=t.login.sipLoginOnly,F.info("user click HangUpBtn,confhandle = "+i+",selfRole = "+s+",callStatus = "+r+",uportal[Token]Err = "+desensitive(c)+",sipLoginOnly = "+u),!c||u){e.next=6;break}return(0,E.endCallAndLogout)(),e.abrupt("return");case 6:if(1!==s){e.next=10;break}"VIDEO_CONNECTED"!==r&&"CALL_CONNECTED"!==r||(0,E.handleShowEndConf)(!0),e.next=22;break;case 10:if(coreConf.isInConf()){e.next=15;break}return e.next=13,coreCall.callHangup(a);case 13:e.next=22;break;case 15:if(""===i||void 0===i){e.next=20;break}return e.next=18,window.confirm(language.CHOSE_LEAVE_CONF).then(function(){var e=(0,C.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=6;break}return e.next=3,(0,E.actionLeaveConf)();case 3:case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 18:e.next=22;break;case 20:return e.next=22,(0,E.endCallInConf)();case 22:case"end":return e.stop()}},e,void 0)})),o.hangupConfirm=function(){var e=(0,C.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),i)},442:function(e,t,n){"use strict";(function(t){function n(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(154))},447:function(e,t,n){n(32),n(23),n(25),n(448),n(449),n(450),n(451),e.exports=n(8).Set},448:function(e,t,n){"use strict";var r=n(164),a=n(134);e.exports=n(165)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},449:function(e,t,n){var r=n(10);r(r.P+r.R,"Set",{toJSON:n(166)("Set")})},450:function(e,t,n){n(167)("Set")},451:function(e,t,n){n(168)("Set")},491:function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn(e)}function a(){a.init.call(this)}function o(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function i(e,t,n,a){var i,s,c;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=a?[n,c]:[c,n]:a?c.unshift(n):c.push(n),(i=o(e))>0&&c.length>i&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=c.length,r(u)}return e}function s(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,C(this.listener,this.target,e))}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=s.bind(r);return a.listener=n,r.wrapFn=a,a}function u(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?h(a):l(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function l(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var p,_="object"==typeof Reflect?Reflect:null,C=_&&"function"==typeof _.apply?_.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};p=_&&"function"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var v=Number.isNaN||function(e){return e!==e};e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var m=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");m=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return o(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var s=a[e];if(void 0===s)return!1;if("function"==typeof s)C(s,this,t);else for(var c=s.length,u=l(s,c),n=0;n<c;++n)C(u[n],this,t);return!0},a.prototype.addListener=function(e,t){return i(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return i(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,c(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,a,o,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():d(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return u(this,e,!0)},a.prototype.rawListeners=function(e){return u(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},492:function(e,t,n){t=e.exports=n(585),t.Stream=t,t.Readable=t,t.Writable=n(493),t.Duplex=n(200),t.Transform=n(588),t.PassThrough=n(908)},493:function(e,t,n){"use strict";(function(t,r,a){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function i(e){return x.from(e)}function s(e){return x.isBuffer(e)||e instanceof k}function c(){}function u(e,t){R=R||n(200),e=e||{};var r=t instanceof R;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,i=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function f(e){if(R=R||n(200),!(F.call(f,this)||this instanceof R))return new f(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),D.call(this)}function l(e,t){var n=new Error("write after end");e.emit("error",n),A.nextTick(t,n)}function d(e,t,n,r){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),A.nextTick(r,o),a=!1),a}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=x.from(t,n)),t}function p(e,t,n,r,a,o){if(!n){var i=h(t,r,a);r!==i&&(n=!0,a="buffer",r=i)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,s,r,a,o);return c}function _(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function C(e,t,n,r,a){--t.pendingcb,n?(A.nextTick(a,r),A.nextTick(N,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),N(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(v(n),t)C(e,n,r,t,a);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?y(S,e,n,o,a):S(e,n,o,a)}}function S(e,t,n,r){n||g(e,t),t.pendingcb--,r(),N(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0,c=!0;n;)a[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;a.allBuffers=c,_(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,f=n.encoding,l=n.callback;if(_(e,t,!1,t.objectMode?1:u.length,u,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),N(e,t)})}function T(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A.nextTick(I,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function N(e,t){var n=w(t);return n&&(T(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function b(e,t,n){t.ending=!0,N(e,t),n&&(t.finished?A.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=n(442);e.exports=f;var R,y=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:A.nextTick;f.WritableState=u;var L=n(396);L.inherits=n(114);var M={deprecate:n(907)},D=n(586),x=n(117).Buffer,k=a.Uint8Array||function(){},P=n(587);L.inherits(f,D),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:M.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!F.call(this,e)||this===f&&(e&&e._writableState instanceof u)}})):F=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,n){var r=this._writableState,a=!1,o=!r.objectMode&&s(e);return o&&!x.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=c),r.ended?l(this,n):(o||d(this,r,e,n))&&(r.pendingcb++,a=p(this,r,o,e,t,n)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||b(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=P.destroy,f.prototype._undestroy=P.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(154),n(905).setImmediate,n(16))},502:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAttendanceManager=t.dealWithWatchConfList=t.handleSvcShowAttChangeMobile=t.handleSvcShowAttChange=t.handleSvcClickJSPage=t.handleSvcWatchChange=t.handleSvcLockWatch=t.handleSSRCURL=t.loggerPrintSSRC=t.loggerPrint=void 0;var a,o,i=n(1113),s=r(i),c=n(4),u=r(c),f=n(98),l=r(f),d=n(100),h=r(d),p=n(1),_=r(p),C=n(2),v=r(C),m=n(1114),S=window.Logger("conf")("logic/video/svcAttendanceManager");window.hasDealAttendeeUpdateEvent=0,window.isChangeOfBroadcast=!1;window.multiStreamPageInfoChangeNotify=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,C,v,m,g,w,T,N,b,A,R,y,L,M,D,x,k;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("NativeToJS select watch case multiStreamMode="+t.multiStreamMode+",pageNo="+t.pageNo+",LargeVedioStatus="+t.LargeVedioStatus+",broadcastBeforeStatus="+t.broadcastBeforeStatus+",focusVedio="+handlePhoneNumber(t.focusVedio)),$dispatch(coreUi.changeSvcNativeToJS(t)),n=$getState().conf,r=n.svcMobileConfHandles,a=n.svcRecallorNot,o=n.ssrcRange,i=n.svcOnLineAttendances,s=n.svcSelfNumber,c=n.svcBandMode,u=n.svcMobileHandleNum,f=n.svcMaxWatchResolution,!a){e.next=6;break}return S.info("No Need send watch request"),e.abrupt("return");case 6:if(l=!1,d=$getState().call.callId,2!==t.multiStreamMode){e.next=15;break}return h=[{number:"",ssrc:0,width:0,height:0}],S.info("dataMode,setAllSvcVideoWindows,multiStreamMode=2, stop watch muiltivideo."),p={attendeeList:h,selfNum:s},e.next=14,coreConf.sendWatchSvcRequestService(p);case 14:return e.abrupt("return");case 15:return isNullOrEmpty(t.focusVedio)||1!==t.LargeVedioStatus||($dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:t.focusVedio}))),0===t.LargeVedioStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),2===t.LargeVedioStatus&&(l=!0,1===t.broadcastBeforeStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})))),C={callid:d,infoid:0},e.next=21,new coreTup.HWTupCall;case 21:return v=e.sent,e.next=24,v.getBasicCallInfo(C);case 24:if(m=e.sent,g=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,w=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,S.info("is support hd-encoder(0:NO, 1: YES) ",m.param.call_info.svc_is_support_hd_encoder),0===m.param.call_info.svc_is_support_hd_encoder?(g=$getState().conf.svcMobileSpeakerModeMaxLook,w=$getState().conf.svcMobileDivideModeMaxLook):(g=$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook,w=$getState().conf.svcHighPerformanceMobileDivideModeMaxLook),T=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,isNullOrEmpty(f)||(T.width=f.width,T.height=f.height),S.info("Nego level-id limit max resolution:",T),0!==t.multiStreamMode){e.next=52;break}return S.info("MaxSpeakerMode, eSight load max resolution= ",g),isNullOrEmpty(g)||(T=O.getRealResolution(T,g)),N=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,S.info("Nego Bandwidth limit max resolution:",N),isNullOrEmpty(N)||(T=O.getRealResolution(T,N)),S.info("send request watch resolution:",T),b={render:r.remoteLargeViewIdx,ssrc_id:o.min,width:T.width,height:T.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},A=new Array,A.push(b),e.next=44,I(i[0],0,T,1,l,t.focusVedio);case 44:if(R=e.sent,S.info("handleSvcWatchChang result",R.result),0!==R.result){e.next=50;break}return e.next=49,coreCall.setAllSvcVideoWindows(1,d,A);case 49:$dispatch(coreUi.changeOldDidivePagerNo(0));case 50:e.next=82;break;case 52:if(1!==t.multiStreamMode){e.next=82;break}if(S.info("divideMode, eSight load max resolution= ",w),isNullOrEmpty(w)||(T=O.getRealResolution(T,w)),y=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,S.info("Nego Bandwidth limit max resolution:",y),isNullOrEmpty(y)||(T=O.getRealResolution(T,y)),S.info("send request watch resolution:",T),L=window.CLIENTCONFIG.SVC_WINDOW_MAX_DIVIDE_NUM_PHONE,u&&(L=u),S.info("modelength",L),i=i.slice(1),M=t.pageNo,D=M%2,x=M%2,M===$getState().conf.svcOldDidivePagerNo?(D=3,$dispatch(coreUi.changeOldDidivePagerNo(0))):$dispatch(coreUi.changeOldDidivePagerNo(M)),!(M>=1)){e.next=82;break}if(k="",!(i.length>=M*L+1)){e.next=77;break}return k=i.slice((M-1)*L,M*L),e.next=73,I(k,1,T,D,!1,"",M);case 73:return e.next=75,E(k.length,d,T,D,x);case 75:e.next=82;break;case 77:return k=i.slice((M-1)*L),e.next=80,I(k,1,T,D,!1,"",M);case 80:return e.next=82,E(k.length,d,T,D,x);case 82:$dispatch(coreUi.changeConfViewMode(t.multiStreamMode)),$dispatch(coreUi.changeSvcShowPage(t.pageNo));case 84:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var g=t.loggerPrint=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a="";if(t&&!isNaN(t.length)&&t.length>0)for(var o=0;o<t.length;o++)!0===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):!1===n?a=a+";number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"PC"===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"SSRC"===n&&(a=a+";ssrc:"+t[o].ssrc+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):"")+",width="+t[o].width+",height="+t[o].height);S.info(e,a,r)};t.loggerPrintSSRC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";if(t&&!isNaN(t.length)&&t.length>0){for(var a=0;a<t.length;a++)isNullOrEmpty(t[a].number)||(t[a].number=handlePhoneNumber(t[a].number));r=(0,h.default)(t)}S.info(e+r+n)};window.removeSvcVideoWindows=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call.callId,S.info("window.removeSvcVideoWindows"),r&&n.windowArray&&n.windowArray.length>=1)for(o=0;o<n.windowArray.length;o++)coreCall.removeSvcVideoWindow(a,0,n.windowArray[o].ssrc_id);case 4:case"end":return e.stop()}},e,void 0)})),window.reSetSvcVideoWindows=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call,o=a.callId,i=a.currentCamera,S.info("window.reSetSvcVideoWindows"),!r){e.next=20;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=16;break}if(s=$getState().call,c=s.isOpenCamera,u=s.currentCallId,f=s.isOpenCameraDe,S.info("Camera isOpenCamera = "+c),!c){e.next=13;break}return e.next=10,coreCall.setVideoIndex(i);case 10:S.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f),e.next=14;break;case 13:S.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f);case 14:e.next=20;break;case 16:return e.next=18,coreCall.setVideoIndex(i);case 18:return e.next=20,coreCall.setAllSvcVideoWindows(n.count,o,n.windowArray);case 20:case"end":return e.stop()}},e,void 0)}));var E=t.handleSSRCURL=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,C,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("addSvcVideoWindow start",t),n=new Array,r=$getState().conf,a=r.svcMobileConfHandles,o=r.usedSsrcList,i=r.svcBandMode,s=r.ssrcRange,c=s.min+1,-1===t)u=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,S.info("NumLength = -1 init ,lookRatio = ",u),0!==u.width&&0!==u.height||(S.info("NumLength = -1 lookRatio width or height is 0"),u={width:640,height:360}),f={render:a.remoteLargeViewIdx,ssrc_id:$getState().conf.ssrcRange.min,width:u.width,height:u.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},n.push(f);else for(l=1===E?0:3,d=0,1===g?d=0:0===g?d=3:3===g&&(d=6),h=s.min+t+d,h>s.max&&(d=0),0!==m.width&&0!==m.height||(S.info("lookRatio width or height is 0"),m={width:320,height:180}),p=0;p<t;p++)C={render:a.remoteViewIdx[p+l],ssrc_id:c+p+d,width:m.width,height:m.height,bSharpness:0},n.push(C);return e.next=7,coreCall.setAllSvcVideoWindows(n.length,v,n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),w=t.handleSvcLockWatch=function(e,t){S.info("handleSvcLockWatch",e,t.number?t.number.substr(0,3)+"****"+t.number.substr(-3):"");var n=$getState().conf.isBigConf,r=coreConf.isConfChairMan();if(n&&!r)return void S.info("handleSvcLockWatch in bigConf not ChairMan can not lockWatch");var a={mode:e,watchInfo:t};$dispatch(coreUi.changeSvcControlMode(e));var o=(0,l.default)({},t);$dispatch(coreUi.changeSvcSelectWatchInfo(o)),1===e?$dispatch(coreUi.changeIsSvcSelectMode(!0)):$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISMOBILE&&window.SvcLockWatch(a)},I=t.handleSvcWatchChange=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,p,C,v,m,E,w,I,b,O,A,R,y,L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,x=arguments.length>4&&void 0!==arguments[4]&&arguments[4],k=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:0);return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Array,r=$getState().conf,a=r.svcSelectWatchInfo,o=r.svcControlMode,i=r.svcViewMode,s=r.ssrcRange,c=r.usedSsrcList,u=r.broadCastInfo,f=r.svcSelfNumber,l=r.svcOnLineAttendances,d=r.isSameGradeMcu,h=null,0!==L){e.next=9;break}if(1!==o||x){if(p="",0===d&&l.length>1){for(C=0,v=0;v<l.length;v++)1===l[v].is_same_grade_mcu&&C++;1===C&&(p="M255T0",S.info("numberT enter"))}h={number:p,ssrc:s.min,width:M.width,height:M.height},x?S.info("sendWatchSvcRequest broad"):S.info("sendWatchSvcRequest spk")}else h={number:a.number,ssrc:s.min,width:M.width,height:M.height},S.info("sendWatchSvcRequest lock watch");n.push(h),N([]),e.next=28;break;case 9:if(1!==L){e.next=28;break}for(m=0,1===D?m=0:0===D?m=3:3===D&&(m=6),E=s.min+t.length+m,E>s.max&&(m=0),w="",I=$getState().conf.isBigConf,b=0;b<t.length;b++)w=1===k&&I?"":t[b].number,h={number:w,ssrc:s.min+1+b+m,width:M.width,height:M.height},n.push(h);O=!1,A=0;case 19:if(!(A<n.length)){e.next=26;break}if(1!==D&&3!==D||"M255T0"!==n[A].number){e.next=23;break}return O=!0,e.abrupt("break",26);case 23:A++,e.next=19;break;case 26:N(O?n:[]),S.info("sendWatchSvcRequest average");case 28:return g("sendWatchSvcRequest parameterwatchAttendees=",n,!1,f.substr(0,3)+"****"+f.substr(-3)),R={attendeeList:n,selfNum:f},e.next=32,coreConf.sendWatchSvcRequestService(R);case 32:return y=e.sent,0===y.result&&T(n),e.abrupt("return",y);case 35:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=(t.handleSvcClickJSPage=function(e){window.SvcClickJSPageNum(e)},t.handleSvcShowAttChange=function(e){$dispatch(coreUi.changeSvcShowAttendances(e))}),N=t.handleSvcShowAttChangeMobile=function(e){$dispatch(coreUi.changeSvcShowAttendancesMobile(e))},b=t.dealWithWatchConfList=function(){var e=constant.ACTIVE_USER.MOBILE,t=$getState().conf.svcOnLineAttendances;if(0===t.length)return void S.info("currentOnLineAttendances is empty return");var n=$getState().conf.svcActiveAttendances;S.info("dealWithWatchConfList  before currentOnLineAttendances  ",t.length);var r=[];0===n.length?r=(0,l.default)([],t):(r=sortPreAndOrigiArray(n,t),n=[]),n=r.length>e?(0,l.default)([],r.slice(0,e)):(0,l.default)([],r);for(var a=0;a<r.length;a++){var o=r[a];if(1===o.is_self){r.splice(a,1),r.unshift(o);break}}$dispatch(coreUi.changeSvcOnLineAttendances(r)),$dispatch(coreUi.changeSvcActiveAttendances(n)),S.info("dealWithWatchConfList  after currentOnLineAttendances  ",$getState().conf.svcOnLineAttendances.length)},O=t.SvcAttendanceManager=(o=a=function e(){(0,u.default)(this,e)},a.handleSvcAttendancesUpdateEvent=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("start handle svc Attendances update event",t.length),n=$getState().conf,r=n.ssrcRange,a=n.svcBigPicInfo,0!==window.hasDealAttendeeUpdateEvent||a.hasOwnProperty("ssrc")||(S.info("start handle svc Attendances handleSvcWatchIndNotify is not received!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:r.min}))),window.hasDealAttendeeUpdateEvent=1,window.isChangeOfBroadcast=!1,e.next=7,O.dealSvcAttendanceList(t);case 7:if(!(o=e.sent)||window.CLIENTCONFIG.ISMOBILE){e.next=18;break}if(S.info("svcShowAttendances is changed!"),i=$getState().conf,s=i.svcShowAttendances,c=i.svcViewMode,u=i.ssrcRange,f=i.svcBigPicInfo,l=i.svcOnLineAttendances,1===c&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),!(l.length>1)){e.next=15;break}return e.next=15,O.sendWatchSvcRequest(s);case 15:return e.next=17,O.setSvcVideoRender(s,"true");case 17:O.calcBigCanvasRatio();case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSvcModeSwitch=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("Switch to svcViewMode:"+h+",maxSizeForPage:"+p),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcShareMode,a=t.svcBigPicInfo,$dispatch(coreUi.changeConfViewMode(h)),1!==h&&(o=O.calcCanvas16And9Size(),$dispatch(coreUi.changeBigWinStyle(o)),S.info("changeBigWinStyle, canvasSize is ",o)),e.next=6,coreCall.closeAllSvcRemoteSocket();case 6:if($dispatch(coreUi.changeMaxSizeForPage(p)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),0!==h&&1!==h){e.next=20;break}return O.initSvcShowAttendances(n,p),1===h&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),i=$getState().conf.svcShowAttendances,e.next=15,O.sendWatchSvcRequest(i);case 15:return e.next=17,O.setSvcVideoRender(i);case 17:r&&0===h&&-3===a.ssrc&&(s=coreCall.getBigContainerSize(),s={width:s.width,height:s.height-54},coreCall.setSvcBFCPVideoRender(s)),e.next=38;break;case 20:c=null,u=new Array,f=0;case 23:if(!(f<n.length)){e.next=30;break}if(1!==n[f].is_self){e.next=27;break}return c=n[f],e.abrupt("break",30);case 27:f++,e.next=23;break;case 30:return l=O.constructSvcShowAttendanceInfo(c),l&&u.push(l),T(u),r&&-3===a.ssrc&&(d=coreCall.getBigContainerSize(),d={width:d.width,height:d.height-54},coreCall.setSvcBFCPVideoRender(d)),e.next=36,O.sendWatchSvcRequest(u);case 36:return e.next=38,O.setSvcVideoRender([]);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcSelect=function(){var e=(0,v.default)(_.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,d,h,p,C,v;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("Select attendance name:,viewMode = "+n),r=$getState().conf,a=r.svcOnLineAttendances,o=r.ssrcRange,i=r.isSvcShareMode,s=r.svcShowPage,c=r.svcBandMode,u=r.svcBigPicInfo,f={number:t.number,is_mute:t.is_mute,name:t.name},d=(0,l.default)({},t),d.ssrc=o.min,0!==n){e.next=20;break}return u.hasOwnProperty("ssrc")&&-3===u.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),!i||0!==s||-3!==u.ssrc&&-2!==u.ssrc||(T([]),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(a,$getState().conf.maxSizeForPage)),h=$getState().conf.svcShowAttendances,e.next=16,O.sendWatchSvcRequest(h);case 16:return e.next=18,O.setSvcVideoRender(h);case 18:e.next=41;break;case 20:return e.next=22,coreCall.closeAllSvcRemoteSocket();case 22:return p=new Array,p.push(o.min),C=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===c&&(C=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(C)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),T([]),$dispatch(coreUi.changeUsedSvcSSRCList(p)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),O.initSvcShowAttendances(a,C),v=$getState().conf.svcShowAttendances,e.next=39,O.sendWatchSvcRequest(v);case 39:return e.next=41,O.setSvcVideoRender(v);case 41:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.handleSvcShareClick=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShareData;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("handleSvcShareClick :svcBroadcastData:",s),t=$getState().conf,n=t.ssrcRange,r=t.svcOnLineAttendances,a=t.maxSizeForPage,o=t.shareScreenWH,$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(r,a),e.next=8,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:i={lastheight:o.lastheight+1,lastwidth:o.lastwidth+1},$dispatch(coreUi.changeShareScreenWH(i)),$dispatch(coreUi.changeIsShowMainScreen(!1));case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcBFCClick=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf,n=t.ssrcRange,r=t.isSvcShareMode,a=t.svcBigPicInfo,o=t.svcShareData,i=t.svcOnLineAttendances,s=t.maxSizeForPage,c=t.svcViewMode,S.info("handleSvcBFCClick :svcBroadcastData:",o),$dispatch(coreUi.changeSvcBigPicInfo(o)),coreCall.resetBFCStatus($getState().call.callId,1),e.next=6,coreCall.closeSvcRemoteSocket(n.min);case 6:return $dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(i,s),e.next=12,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 12:return e.next=14,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 14:r&&(0,m.refreshShareSize)(a.ssrc);case 15:case"end":return e.stop()}},e,void 0)})),a.stopSvcShareOrBfcp=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("stopSvcShareOrBfcp"),t=$getState().conf,n=t.svcBigPicInfo,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=t.ssrcRange,s=t.svcOnLineAttendances,c=t.isSvcShareMode,u=t.svcShareData,f=t.isShowMainScreen,!c){e.next=10;break}return $dispatch(coreUi.changeIsSvcShareMode(!1)),$dispatch(coreUi.changeSvcShareData({})),f?0===r&&0===a&&(S.info("stopSvcShareOrBfcp no need switch to video!"),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),O.initSvcShowAttendances(s,o)):(S.info("stopSvcShareOrBfcp need switch to video!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min,name:""})),$dispatch(coreUi.changeSvcControlMode(0)),l=O.getBigCanvasSize(),$dispatch(coreUi.changeBigWinStyle(l)),S.info("stopSvcShareOrBfcp reset big containerSize is "+(0,h.default)(l)),$dispatch(coreUi.changeIsShowMainScreen(!0))),e.next=8,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:case"end":return e.stop()}},e,void 0)})),a.receviceSvcShareOrBfcp=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("receviceSvcShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcShowAttendances,a=t.svcOnLineAttendances,o=t.svcBandMode,i=t.ssrcRange,1===n&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===o&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(s)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),O.initSvcShowAttendances(a,s),r=$getState().conf.svcShowAttendances),$dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(1)),c=0===u?-2:-3,$dispatch(coreUi.changeSvcShareData({ssrc:c,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:c,name:f})),e.next=12,coreCall.closeSvcRemoteSocket(i.min);case 12:return e.next=14,O.sendWatchSvcRequest(r);case 14:return e.next=16,O.setSvcVideoRender(r);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.resizeBfcWindow=function(){S.info("resizeBfcWindow");var e=$getState().conf.svcViewMode,t=coreCall.getBigContainerSize(),n=t.height-54;2===e&&(n=t.height),t={width:t.width,height:n},coreCall.setSvcBFCPVideoRender(t)},a.resizeBigSvcWindow=function(){S.info("resizeBigSvcWindow");var e=$getState().conf,t=e.ssrcRange;e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(t.min)){var n=O.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(n));var r=t.min+"_frame_share";S.info("resizeBigSvcWindow,bigCanvasSize is ",n),coreCall.setSvcRemoteVideoRender(t.min,r,n)}},a.resizeLocalBigWindow=function(){S.info("resizeBigSvcWindow");var e=$getState().conf;e.ssrcRange,e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(-1)){var t=O.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(t)),S.info("resizeBigSvcWindow,bigCanvasSize is ",t),coreCall.setSvcLocalVideoRender(t)}},a.changeSvcWindowSize=function(e,t){if(-1===e)coreCall.setSvcLocalVideoRender(t);else{var n=e+"_frame_share";coreCall.setSvcRemoteVideoRender(e,n,t)}},a.handleSvcSpeakerNotify=function(){for(var e=$getState().conf,t=e.confSpeaker,n=e.svcShowAttendances,r=(0,l.default)([],n),a=0;a<r.length;a++)r[a].is_speaker=!1;var o=!1;if(t.speaker.length>0)for(var i=t.speaker[0].number,s=0;s<r.length;s++)if(i===r[s].number){r[s].is_speaker=!0,o=!0;break}o&&T(r)},a.dealSvcAttendanceList=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,C,v,m,E,I,T,N,A,R,y,L,M,D;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("dealSvcAttendanceList start"),n=$getState().conf,r=n.svcControlMode,a=n.svcSelectWatchInfo,o=n.broadCastInfo,i=n.isSvcConf,s=n.svcOnLineAttendances,c=n.svcRecallorNot,u=n.serialMcuMemberList,f=n.isSameGradeMcu,l=n.svcViewMode,d=n.svcOldDidivePagerNo,p=n.isBigConf,C=n.svcActiveAttendances,v=O.getOnLineAttendances(t),p&&C&&C.length>0?(m=sortPreAndOrigiArray(C,v),$dispatch(coreUi.changeSvcOnLineAttendances(m))):$dispatch(coreUi.changeSvcOnLineAttendances(v)),"NOSelfNOWatch"!==(v=$getState().conf.svcOnLineAttendances)){e.next=7;break}return e.abrupt("return");case 7:if(E=new Array,I="",T="",window.CLIENTCONFIG.ISMOBILE)for(1===r&&(0,h.default)(v).indexOf(a.number)<0&&w(0,{number:a.number}),o.isBroadCast&&(0,h.default)(v).indexOf(o.broadCastList[0].number)<0&&(N={isBroadCast:!1,broadCastList:[]},$dispatch(coreUi.changeBroadCastInfo(N))),A=0;A<v.length;A++)I={name:v[A].name,number:v[A].number,role:v[A].role,is_mute:v[A].is_mute,is_self:v[A].is_self,is_same_grade_mcu:v[A].is_same_grade_mcu},T=T+","+v[A].number,E.push(I);else E=v;if($dispatch(coreUi.changeSvcOnLineAttendances(E)),!window.CLIENTCONFIG.ISMOBILE||!i){e.next=23;break}return R=$getState().conf.isBigConf,R&&(b(),E=$getState().conf.svcOnLineAttendances),c&&(g("recall updateVideoView",E),window.updateVideoView(E,!0),$dispatch(coreUi.changesvcRecallorNot(!1))),y=$getState().conf,L=!O.checkSerialConf(y),L&&$dispatch(coreUi.changeOldDidivePagerNo(1)),M={multiStreamMode:1,pageNo:1,LargeVedioStatus:-1,broadcastBeforeStatus:0,focusVedio:""},L&&0===f&&"0"!==y&&1===d&&1===l&&(S.info("send grade watch info"),window.multiStreamPageInfoChangeNotify(M),$dispatch(coreUi.changeMobileSerialNumber("0"))),(0,h.default)(E)!==(0,h.default)(s)&&(g("updateVideoView01",E),window.updateVideoView(E,!1)),e.abrupt("return");case 23:return e.next=25,O.handlePCSvcBroadcast(v);case 25:return D=e.sent,e.abrupt("return",D);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handlePCSvcBroadcast=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,O.dealSvcBroadcastUpdate(t),0!==t.length){e.next=5;break}return S.info("onLineAttendances length is zero,please check."),e.abrupt("return",n);case 5:if(r=$getState().conf.svcViewMode,1===r&&t.length<3&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===$getState().conf.svcBandMode&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(a))),o=$getState().conf,i=o.svcShowAttendances,s=o.maxSizeForPage,c=o.svcViewMode,2!==c){e.next=24;break}u=null,f=new Array,l=0;case 12:if(!(l<t.length)){e.next=19;break}if(1!==t[l].is_self){e.next=16;break}return u=t[l],e.abrupt("break",19);case 16:l++,e.next=12;break;case 19:d=O.constructSvcShowAttendanceInfo(u),d&&f.push(d),T(f),e.next=25;break;case 24:1===c?0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=O.initSvcShowAttendances(t,s)):n=O.updateDivideShowAttendances(t,i):0===c&&(0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=O.initSvcShowAttendances(t,s)):n=O.updateBigSmallShowAttendances(t,i));case 25:return window.isChangeOfBroadcast&&(n=!0),e.abrupt("return",n);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.dealSvcPageSwitch=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,h,p,C,v,g,E,w,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowPage;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(S.info("dealSvcPageSwitch svcShowPage : "+I),$dispatch(coreUi.changeSvcShowPage(I)),t=$getState().conf,n=t.svcShowAttendances,r=t.svcViewMode,a=t.maxSizeForPage,o=t.svcOnLineAttendances,i=t.svcBigPicInfo,s=t.isSvcShareMode,c=t.svcShareData,u=new Array,f=O.getCanUseAttendancesPos(r,I,a,s),l=new Array,d=f;d<o.length;d++)l.push(o[d]);h=0;case 8:if(!(h<n.length)){e.next=15;break}return p=n[h].ssrc,e.next=12,coreCall.closeSvcRemoteSocket(p);case 12:h++,e.next=8;break;case 15:for(0!==r&&$dispatch(coreUi.changeUsedSvcSSRCList([])),C=a,0===r&&0===I?s&&-2!==i.ssrc&&-3!==i.ssrc&&(C-=1):1===r&&I>0&&(u.push(n[0]),C-=1),v=Math.min(C,l.length),g=0;g<v;g++)(E=O.constructSvcShowAttendanceInfo(l[g]))&&u.push(E);if(0===r)for(w=0;w<n.length;w++)O.removeSvcSSRC(n[w].ssrc);return T(u),1===r&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),0!==I||1!==n.length||!s||-2!==i.ssrc&&-3!==i.ssrc||(0,m.refreshShareSize)(i.ssrc),e.next=26,O.sendWatchSvcRequest(u);case 26:return e.next=28,O.setSvcVideoRender(u,"true","true");case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.initSvcShowAttendances=function(e,t){S.info("initSvcShowAttendances start");var n=$getState().conf,r=n.isSvcShareMode,a=n.svcBigPicInfo,o=new Array,i=!1;r&&-2!==a.ssrc&&-3!==a.ssrc&&(t-=1);for(var s=Math.min(t,e.length),c=0;c<s;c++){var u=O.constructSvcShowAttendanceInfo(e[c]);u&&o.push(u),i=!0}return T(o),g("initSvcShowAttendances end,newSvcShowAttendances:",o),i},a.updateBigSmallShowAttendances=function(e,t){g("updateBigSmallShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcViewMode,a=n.maxSizeForPage,o=n.svcShowPage,i=n.svcBigPicInfo,s=(n.isSvcBroadcastMode,n.svcBroadcastData,n.isSvcShareMode),c=!1,u=O.getCanUseAttendancesPos(r,o,a,s),f=(0,l.default)([],t),d=new Array,h=0;if(0===o){s&&-2!==i.ssrc&&-3!==i.ssrc&&(a-=1);if(1!==f[0].is_self&&1===e[0].is_self){g("updateBigSmallShowAttendances: add local attendance to svcShowAttendance",[e[0]],!1);var p=O.constructSvcShowAttendanceInfo(e[0]);f.splice(0,0,p),c=!0}for(var _=0;_<1;_++)d.push(f[_]);h=1}for(var C=O.getCanUseAttendances(u,e,f),v=h;v<f.length;v++){var E=$getState().conf,w=E.isSameGradeMcu,I=E.serialMcuMemberList;if(0===w&&0===f[v].is_same_grade_mcu){O.checkSerialConf(f[v].number)||(c=!0),I.length>0?d.push(f[v]):(!1,O.removeSvcSSRC(f[v].ssrc),c=!0)}else if(O.isOnline(f[v]))g("updateBigSmallShowAttendances:push old inline",[f[v]],!1),d.push(f[v]);else if(C.length>0){S.info("updateBigSmallShowAttendances:update old offline "+f[v].number.substr(0,3)+"****"+f[v].number.substr(-3)+" to inline "+C[0].number.substr(0,3)+"****"+C[0].number.substr(-3));var N=O.updateSvcShowAttendanceInfo(f[v],C[0]);d.push(N),C.splice(0,1),c=!0}else O.removeSvcSSRC(f[v].ssrc),c=!0}for(var b=0;b<C.length;b++)if(d.length<a){var A=O.constructSvcShowAttendanceInfo(C[b]);A&&(d.push(A),c=!0)}for(;d.length>a;)O.removeSvcSSRC(d[d.length-1].ssrc),d.pop(),c=!0;return 0!==d.length?T(d):($dispatch(coreUi.changeSvcShowPage(0)),O.initSvcShowAttendances(e,a),s&&(0,m.refreshShareSize)(i.ssrc)),g("updateBigSmallShowAttendances end,newSvcAttendancesTemp:",d),c},a.addRemoveBroadcast=function(e,t,n,r){S.info("addRemoveBroadcast",e);var a=!1;if(e){if(1!==n[0].is_broadcast||1===n[0].is_self){g("addRemoveBroadcast: add broadcast to svsShowAttendance",[r[0]],"PC");var o=O.constructSvcShowAttendanceInfo(r[0]);n.splice(0,0,o),a=!0}else if(n[0].number!==t.number){g("addRemoveBroadcast: update broadcast to attendance",[r[0]],"PC");var i=O.updateSvcShowAttendanceInfo(n[0],r[0]);n[0]=i,a=!0}}else 1===n[0].is_broadcast&&0===n[0].is_self&&(g("addRemoveBroadcast: delete broadcast from svsShowAttendance",[n[0]]),O.removeSvcSSRC(n[0].ssrc),n.splice(0,1),a=!0);return a},a.updateDivideShowAttendances=function(e,t){g("updateDivideShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o=n.svcViewMode,i=!1,s=(0,l.default)([],t),c=O.getCanUseAttendancesPos(o,r,a),u=O.getCanUseAttendances(c,e,t),f=new Array;if(e.length>0&&1===e[0].is_self&&O.isInSvcShowAttendances(e[0])<0){var d=O.constructSvcShowAttendanceInfo(e[0]);d&&f.push(d),i=!0}for(var h=0;h<s.length;h++){var p=(s[h].number,$getState().conf),_=p.isSameGradeMcu,C=p.serialMcuMemberList;if(0===_&&0===s[h].is_same_grade_mcu){O.checkSerialConf(s[h].number)||(i=!0),C.length>0?f.push(s[h]):(!1,O.removeSvcSSRC(s[h].ssrc),i=!0)}else if(O.isOnline(s[h]))g("updateDivideShowAttendances:push old inline",[s[h]],!1),f.push(s[h]);else if(u.length>0){S.info("updateDivideShowAttendances:update old offline "+handlePhoneNumber(s[h].number)+" to inline "+handlePhoneNumber(u[0].number));var v=O.updateSvcShowAttendanceInfo(s[h],u[0]);f.push(v),u.splice(0,1),i=!0}else O.removeSvcSSRC(s[h].ssrc),i=!0}for(var m=0;m<u.length&&f.length<a;m++){var E=O.constructSvcShowAttendanceInfo(u[m]);E&&(f.push(E),i=!0)}for(;f.length>a;)O.removeSvcSSRC(f[f.length-1].ssrc),f.pop(),i=!0;return f.length>1?T(f):($dispatch(coreUi.changeSvcShowPage(0)),O.initSvcShowAttendances(e,a)),g("updateDivideShowAttendances end --- newSvcAttendancesTemp:",f),i},a.setSvcVideoRender=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,C,v,m,g,E,w,I,T,N,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true",A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcBigPicInfo,o=n.svcDivideWinSize,i=n.ssrcRange,s=n.svcRenders,c=n.isSvcShareMode,u=n.svcShareData,f=n.svcOnLineAttendances,l=n.isOppsite,d=n.isShowMainScreen,S.info("setSvcVideoRender start, svcViewMode="+r+", old svcRenders length is "+s.length+",divisize w="+o.width+",h="+o.height),p=new Array,C={width:127,height:70},v=coreCall.getBigContainerSize(),0===r||2===r?v=O.calcBigCanvasRatio():1===r&&(C=O.handleRealCanvasSize(o.width,o.height)),m=void 0,(2!==r||!l)&&a.hasOwnProperty("ssrc")||"false"!==A){e.next=13;break}return e.next=10,coreCall.setSvcLocalVideoRender(v);case 10:m=e.sent,e.next=16;break;case 13:return e.next=15,coreCall.setSvcLocalVideoRender(C);case 15:m=e.sent;case 16:if(g={render:m,ssrc:-1},m&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = local_frame_share "),p.push(g)),!(f.length>=2)){e.next=37;break}if(2!==f.length||c){e.next=23;break}S.info("no need set small render"),e.next=37;break;case 23:E=0;case 24:if(!(E<t.length)){e.next=37;break}if(1!==t[E].is_self){e.next=27;break}return e.abrupt("continue",34);case 27:return w=t[E].ssrc,I=t[E].ssrc+"_frame_share",1===r&&t[E].svcDivideCanvasSize&&0!==t[E].svcDivideCanvasSize.width&&0!==t[E].svcDivideCanvasSize.height&&(C=t[E].svcDivideCanvasSize),e.next=32,coreCall.setSvcRemoteVideoRender(w,I,C);case 32:m=e.sent,m&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+I+",newRenderSize is "+(0,h.default)(C)),g={render:m,ssrc:t[E].ssrc},p.push(g));case 34:E++,e.next=24;break;case 37:if(0!==r&&2!==r||"NoBig"===b){e.next=50;break}if(T=i.min,N=i.min+"_frame_share",2!==r||!l){e.next=46;break}return e.next=43,coreCall.setSvcRemoteVideoRender(T,N,C);case 43:m=e.sent,e.next=49;break;case 46:return e.next=48,coreCall.setSvcRemoteVideoRender(T,N,v);case 48:m=e.sent;case 49:m&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+N+",newRenderSize is "+(0,h.default)(v)),g={render:m,ssrc:T},p.push(g));case 50:if(d||!c||!u.hasOwnProperty("ssrc")||-3!==u.ssrc||"false"!==A){e.next=53;break}return e.next=53,coreCall.setSvcBFCPVideoRender(v);case 53:O.clearOldRenders(s,p),"true"===b&&p.length!==s.length&&coreCall.svcRedistributeVideoTmmbr($getState().call.callId),S.info("setSvcVideoRender end,new svcRenders.length ="+p.length+",flag="+b);case 56:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.clearOldRenders=function(){var e=(0,v.default)(_.default.mark(function e(t,n){var r,a,o;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("clearOldRenders start,oldRenders length = "+t.length+",newRenders length = "+n.length),r=0;case 2:if(!(r<t.length)){e.next=19;break}a=!1,o=0;case 5:if(!(o<n.length)){e.next=12;break}if(t[r].ssrc!==n[o].ssrc){e.next=9;break}return a=!0,e.abrupt("break",12);case 9:o++,e.next=5;break;case 12:if(a){e.next=16;break}return S.info("clearOldRenders, close ssrc is "+t[r].ssrc),e.next=16,coreCall.closeSvcRemoteSocket(t[r].ssrc);case 16:r++,e.next=2;break;case 19:$dispatch(coreUi.changeSvcRenders(n));case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setSvcLocalRender=(0,v.default)(_.default.mark(function e(){var t,n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setSvcLocalRender start"),t=new Array,n=O.calcBigCanvasRatio(),$dispatch(coreUi.changeBigWinStyle(n)),e.next=6,coreCall.setSvcLocalVideoRender(n);case 6:r=e.sent,r&&(a={render:r,ssrc:-1},S.info("setSvcLocalRender,setSvcLocalVideoRender,renderURI = local_frame_share"),t.push(a),$dispatch(coreUi.changeSvcRenders(t))),S.info("setSvcLocalRender end");case 9:case"end":return e.stop()}},e,void 0)})),a.setDesktopMaxEncodeResolution=(0,v.default)(_.default.mark(function e(){var t,n,r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.svcDesktopMaxEncode,!(isNullOrEmpty(t)||0===t.width&&0===t.height)){e.next=3;break}return e.abrupt("return");case 3:return"win"!==window.CLIENTCONFIG.PLATFORM&&"mac"!==window.CLIENTCONFIG.PLATFORM||(window.cpus&&window.cpus>=4?(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),S.info("Svc_Esight_Config_CPUS")):(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540),S.info("Svc_Esight_Config_CPUS"))),n={svc_max_enc_res:{width:t.width,height:t.height}},S.info("Svc_Esight_Config setDesktopMaxEncodeResolution start, media= ",n),e.next=8,new coreTup.HWTupCall;case 8:return r=e.sent,e.next=11,r.configSvcEncodeParam(n);case 11:case"end":return e.stop()}},e,void 0)})),a.setMobileMaxEncodeResolution=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcMobileMaxSoftEncode,a=n.svcMobileMaxHardEncode,!isNullOrEmpty(r)&&0!==r.width&&0!==r.height||!isNullOrEmpty(a)&&0!==a.width&&0!==a.height){e.next=4;break}return S.info("Svc_Esight_Config setMobileMaxEncodeResolution return"),e.abrupt("return");case 4:return o={callid:t,infoid:0},e.next=7,new coreTup.HWTupCall;case 7:return i=e.sent,e.next=10,i.getBasicCallInfo(o);case 10:if(s=e.sent,0!==s.result){e.next=15;break}S.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo success"),e.next=17;break;case 15:return S.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo failed"),e.abrupt("return");case 17:if(c=void 0,0===s.param.call_info.svc_is_support_hd_encoder?(c=$getState().conf.svcMobileMaxSoftEncode,S.info("Svc_Esight_Config setMobileMaxEncodeResolution soft maxEncode= ",c)):(c=$getState().conf.svcMobileMaxHardEncode,S.info("Svc_Esight_Config setMobileMaxEncodeResolution hard maxEncode= ",c)),!(isNullOrEmpty(c)||0===c.width&&0===c.height)){e.next=21;break}return e.abrupt("return");case 21:return u={svc_max_enc_res:{width:c.width,height:c.height}},S.info("Svc_Esight_Config setMobileMaxEncodeResolution start"),e.next=25,i.configSvcEncodeParam(u);case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMaxWatchResolutionByLevelId=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,s;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={callid:t,infoid:2},r=void 0,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=11;break}return e.next=5,new coreTup.HWTupCall;case 5:return a=e.sent,e.next=8,a.getBasicCallInfo(n);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,coreCall.getBasicCallInfoNew(n);case 13:r=e.sent;case 14:if(0!==r.result){e.next=18;break}S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo success"),e.next=20;break;case 18:return S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo failed"),e.abrupt("return");case 20:o=r.param.tx_main_video.width,i=r.param.tx_main_video.height,s={width:0,height:0},1280===o&&720===i?(s.width=1280,s.height=720):704===o&&576===i?(s.width=640,s.height=360):S.error("level-id info acheived is error"),0!==s.width&&0!==s.height&&$dispatch(coreUi.changeSvcMaxWatchResolution(s)),S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId maxWatchResolution",s);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.sendWatchSvcRequest=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,h,p,C,v,m,E,w,I,T,N,b,A,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowAttendances;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n={},r=$getState().conf,a=r.svcBigPicInfo,o=r.svcViewMode,i=r.ssrcRange,s=r.usedSsrcList,c=r.svcOnLineAttendances,u=r.svcControlMode,f=r.isSvcShareMode,d=r.isBigConf,h=r.svcShowPage,p=r.isSameGradeMcu,C=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),v=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180),m=c.length>0?c[0].number:"0",E=0;case 7:if(!(E<c.length)){e.next=14;break}if(!c[E].is_self){e.next=11;break}return m=c[E].number,e.abrupt("break",14);case 11:E++,e.next=7;break;case 14:if(w=$getState().conf.svcDesktopSpeakerBigMaxLook,I=$getState().conf.svcMaxWatchResolution,isNullOrEmpty(w)||0===w.width||0===w.height||(C.width=w.width,C.height=w.height,S.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchAttendeeSize= ",C)),C=O.getRealResolution(C,I),v=O.getSmallWatchAttendeeSize(),T=null,0!==o&&2!==o||(S.info("sendWatchSvcRequest,add bigPic watch attendance start"),N="",1===u?a.ssrc>0?(O.isOnline(a)||O.checkSerialConf(a.number)?N=a.number:($dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min})),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeIsSvcSelectMode(!1))),2!==c.length||f||($dispatch(coreUi.changeIsSvcSelectMode(!1)),N=""),T={number:N,ssrc:i.min,width:C.width,height:C.height},t.push(T),S.info("sendWatchSvcRequest,add bigPic watch attendance "+N.substr(0,3)+"****"+N.substr(-3))):-2!==a.ssrc&&-3!==a.ssrc||(T={number:N,ssrc:0,width:C.width,height:C.height},t.push(T),S.info("sendWatchSvcRequest,add share watch attendance "+N.substr(0,3)+"****"+N.substr(-3))):(T={number:N,ssrc:i.min,width:C.width,height:C.height},t.push(T),S.info("sendWatchSvcRequest,add bigPic watch attendance "+N.substr(0,3)+"****"+N.substr(-3)))),!(c.length>=2)){e.next=35;break}if(2!==c.length||f){e.next=26;break}S.info("no need send small watch request"),e.next=35;break;case 26:b=0;case 27:if(!(b<R.length)){e.next=35;break}if(1!==R[b].is_self){e.next=30;break}return e.abrupt("continue",32);case 30:0===p&&0===R[b].is_same_grade_mcu?T={number:"M255T0",ssrc:R[b].ssrc,width:v.width,height:v.height}:(d&&0===h&&(R[b].number=""),T={number:R[b].number,ssrc:R[b].ssrc,width:v.width,height:v.height}),t.push(T);case 32:b++,e.next=27;break;case 35:g("sendWatchSvcRequest watchAttendees is ",t,"SSRC"),A={attendeeList:t,selfNum:m},coreConf.sendWatchSvcRequestService(A);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleWinResize=function(){var e=(0,v.default)(_.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("handleWinResize"),t=$getState().conf.svcShowAttendances,1===n&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize(),O.setSvcVideoRender(t));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.dealDivideCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;S.info("dealDivideCanvasSize");for(var t=O.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_16_B_9),n=O.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_9_B_16),r=$getState().conf.svcShowAttendances,a=0;a<r.length;a++)r[a].svcDivideCanvasSize&&r[a].svcDivideCanvasSize.width<r[a].svcDivideCanvasSize.height?r[a].svcDivideCanvasSize=n:r[a].svcDivideCanvasSize=t;T(r)},a.handleRealCanvasSize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9;S.info("handleRealCanvasSize",e,t);var a=e,o=t,i=n,s=r,c=e/i,u=t/s,f={width:0,height:0};return c>u?(a=Math.floor(i*u),f={width:a,height:t}):(o=Math.floor(s*c),f={width:e,height:o}),f},a.getBigCanvasSize=function(){S.info("getBigCanvasSize");var e=$getState().conf,t=e.isSvcShareMode,n=e.svcOnLineAttendances,r=e.svcViewMode,a=coreCall.getBigContainerSize();return 0===r?t?n.length<=1?a.height=a.height-54:a.height=a.height-54-74:n.length<=2?a.height=a.height-54:a.height=a.height-54-74:2===r&&(a.height=a.height-54),a},a.calcBigCanvasRatio=function(){S.info("calcBigCanvasRatio");var e=$getState().conf,t=(e.isSvcShareMode,e.svcOnLineAttendances,e.svcViewMode,$getState().call.bigWinStyle),n=O.getBigCanvasSize();return n=t.width<t.height?O.handleRealCanvasSize(n.width,n.height,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.width,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.height):O.handleRealCanvasSize(n.width,n.height),$dispatch(coreUi.changeBigWinStyle(n)),n},a.calcCanvas16And9Size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.VIDEO_SIZE_BITE.SIZE_16_B_9;S.info("calcCanvas16And9Size");var n=$getState().conf,r=n.svcDivideWinSize,a=n.svcViewMode,o=0,i=0;if(1===a)o=r.width,i=r.height;else{var s=O.getBigCanvasSize();o=s.width,i=s.height}var c=o,u=i,f=t.width,l=t.height;e&&0!==e.width&&0!==e.height&&(f=e.width,l=e.height);var d=O.handleRealCanvasSize(c,u,f,l);return d.width-=2,d.height-=2,d},a.handleDivideModeCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S.info("handleDivideModeCanvasSize,originalWidth is "+t+",originalHeight is "+n);var r=$getState().conf.svcDivideWinSize,a=r.width,o=r.height,i=a,s=o,c=a/t,u=o/n,f={width:0,height:0};c>u?(i=Math.floor(t*u),f={width:i,height:o}):(s=Math.floor(n*c),f={width:a,height:s}),f.width-=2,f.height-=2;for(var l=$getState().conf.svcShowAttendances,d=0;d<l.length;d++)if(l[d].ssrc===e){l[d].svcDivideCanvasSize=f;var h=l[d].ssrc+"_frame_share";coreCall.setSvcRemoteVideoRender(l[d].ssrc,h,f);break}T(l)},a.handleDivideModeWinSize=function(){S.info("handleDivideModeWinSize");var e=$getState().conf.svcShowAttendances,t=coreCall.getBigContainerSize(),n={width:0,height:0};t={width:t.width,height:t.height-54-50},e.length>20?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/5)):e.length>16?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/4)):e.length>12?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/4)):e.length>9?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/3)):e.length>6?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/3)):e.length>4?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/2)):e.length>2?(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height/2)):2===e.length&&(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height)),$dispatch(coreUi.changeDivideWinSize(n))},a.constructSvcShowAttendanceInfo=function(e){if(S.info("constructSvcShowAttendanceInfo attendance number is "+e.number.substr(0,3)+"****"+e.number.substr(-3)),e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=-1;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return S.info("constructSvcShowAttendanceInfo ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null;O.addSvcSSRC(a)}return{name:e.name,number:e.number,is_self:e.is_self,is_speaker:e.is_speaker,role:e.role,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,ssrc:a}}},a.updateSvcShowAttendanceInfo=function(e,t){var n="name:"+t.name.substr(0,1)+"**"+t.name.substr(-1)+",number:"+t.number.substr(0,3)+"****"+t.number.substr(-3);S.info("updateSvcShowAttendanceInfo oldAttendance:"+e.number.substr(0,3)+"****"+e.number.substr(-3)+", newAttendance:"+n);var r=(0,l.default)({},e);return r.name=t.name,r.number=t.number,r.is_self=t.is_self,r.role=t.role,r.is_same_grade_mcu=t.is_same_grade_mcu,r},a.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=$getState().conf.svcShowAttendances,a=!1,o=!1,i=new Array,s={name:"",number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0,role:0},c=0;c<e.length;c++){var u=0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(5===e[c].state&&u){if(0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){1===e[c].is_broadcast&&(s.is_broadcast=1,s.number=e[c].number),o=!0,i.push({number:e[c].number,is_mute:e[c].is_mute});continue}1===e[c].is_self?(a=!0,window.CLIENTCONFIG.ISMOBILE&&$dispatch(coreUi.changeSvcSelfNumber(e[c].number)),$dispatch(coreUi.changeSvcSelfName(e[c].name)),n.splice(0,0,e[c])):5===e[c].state&&u&&n.push(e[c])}for(var f=0;f<r.length;f++)r[f].number===e[c].number&&r[f].name!==e[c].name&&e[c].name&&(r[f].name=e[c].name)}return o?($dispatch(coreUi.changeSerialMemberList(i)),n.splice(1,0,s)):$dispatch(coreUi.changeSerialMemberList([])),T(r),g("getOnLineAttendances end,onLineAttendances:",n,"PC"),a?n:"NOSelfNOWatch"},a.dealSvcBroadcastUpdate=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i,c,u,f,l,d,h;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("dealSvcBroadcastUpdate start"),n=$getState().conf,r=n.isSvcBroadcastMode,a=n.svcBroadcastData,o=n.svcBigPicInfo,i=n.ssrcRange,c=n.svcViewMode,u=n.svcBandMode,0!==t.length){e.next=4;break}return e.abrupt("return");case 4:f=!1,l=0;case 6:if(!(l<t.length)){e.next=15;break}if(f=1===t[l].is_broadcast&&1!==t[l].is_self){e.next=10;break}return e.abrupt("continue",12);case 10:return(0,s.default)(a).length>0&&a.number===t[l].number?S.info("dealSvcBroadcastUpdate: the broadcast is the same"):(S.info("dealSvcBroadcastUpdate: control mode to broadcast mode"),d={name:t[l].name,number:t[l].number,is_self:t[l].is_self,is_speaker:t[l].is_speaker,role:t[l].role,ssrc:i.min,is_same_grade_mcu:t[l].is_same_grade_mcu},o.hasOwnProperty("ssrc")&&-3===o.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(d)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcControlMode(0)),1===c&&(S.info("dealSvcBroadcastUpdate: switch control mode to broadcast mode and switch layout mode to BigAndSmall mode"),h=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===u&&(h=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(h)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0))),window.isChangeOfBroadcast=!0),e.abrupt("break",15);case 12:l++,e.next=6;break;case 15:!f&&r&&(o.number===a.number&&(S.info("dealSvcBroadcastUpdate: control mode to mute mode"),$dispatch(coreUi.changeSvcControlMode(0))),S.info("dealSvcBroadcastUpdate: cancel broadcast mode"),$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),window.isChangeOfBroadcast=!0);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isOnline=function(e){for(var t=$getState().conf.svcOnLineAttendances,n=!1,r=e.number,a=0;a<t.length;a++)if(r===t[a].number){n=!0;break}return n},a.isInSvcShowAttendances=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=$getState().conf.svcShowAttendances;t.length>0&&(n=t);for(var r=-1,a=0;a<n.length;a++){e.number;if(0===$getState().conf.isSameGradeMcu&&0===e.is_same_grade_mcu&&"M255T0",n[a].number===e.number){r=a;break}}return r},a.getCanUseAttendancesPos=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];S.info("getCanUseAttendancesPos maxSizeForPage:"+n+",isSvcShareMode:"+r);var a=0,o=$getState().conf.svcBigPicInfo;return 1===e?t>0&&(a=t*(n-1)+1):0===e&&(a=r&&o.hasOwnProperty("ssrc")&&-2!==o.ssrc&&-3!==o.ssrc?Math.max(0,t*n-1):t*n),a},a.getCanUseAttendances=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];S.info("getCanUseAttendances startPos:"+e);for(var r=!1,a=$getState().conf.isSameGradeMcu,o=0;o<n.length;o++)if(0===a&&0===n[o].is_same_grade_mcu){r=!0;break}for(var i=new Array,s=e;s<t.length;s++)r&&0===t[s].is_same_grade_mcu||0===t[s].is_self&&O.isInSvcShowAttendances(t[s],n)<0&&i.push(t[s]);return g("getCanUseAttendances end,canUseOnLineAttendances:",i,"PC"),i},a.addSvcSSRC=function(e){S.info("addSSRC: "+e,e);var t=$getState().conf.usedSsrcList,n=(0,l.default)([],t);n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n))},a.removeSvcSSRC=function(){var e=(0,v.default)(_.default.mark(function e(t){var n,r,a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("removeSSRC: "+t,t),-1!==t){e.next=3;break}return e.abrupt("return");case 3:n=$getState().conf,r=n.usedSsrcList,a=n.svcRenders,o=(0,l.default)([],r),i=o.indexOf(t),o.splice(i,1),$dispatch(coreUi.changeUsedSvcSSRCList(o));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getSmallWatchAttendeeSize=function(){S.info("getSmallWatchAttendeeSize");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=t.length-1,a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);if(1===n)if(r>=2&&r<=6){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var o=$getState().conf.svcDesktopDivideModeMaxLook2_6;a=O.getRealResolution(a,o)}else if(r>=7&&r<=16){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var i=$getState().conf.svcDesktopDivideModeMaxLook7_16;a=O.getRealResolution(a,i)}else{a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var s=$getState().conf.svcDesktopDivideModeMaxLook17_24;a=O.getRealResolution(a,s)}else{var c=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;a=O.getRealResolution(a,c)}var u=$getState().conf.svcMaxWatchResolution;return a=O.getRealResolution(a,u)},a.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,S.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},a.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},o)},503:function(e,t,n){e.exports=n(0)(37)},535:function(e,t,n){function r(){a.call(this)}e.exports=r;var a=n(491).EventEmitter;n(114)(r,a),r.Readable=n(492),r.Writable=n(909),r.Duplex=n(910),r.Transform=n(911),r.PassThrough=n(912),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){f||(f=!0,e.end())}function i(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===a.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",i),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",i));var f=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},536:function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=r(e);if("string"!=typeof t&&(m.isEncoding===S||!S(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=p,this.end=_,t=3;break;default:return this.write=C,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=i(t[r]),a>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0)}function c(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function _(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function C(e){return e.toString(this.encoding)}function v(e){return e&&e.length?this.write(e):""}var m=n(117).Buffer,S=m.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=l,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},543:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dealWithSipNumber=t.setUnreadNumber=t.handleChangeBroadCastInfo=t.revertMemberToMuteState=t.setMemberToMuteState=t.calcMemberCount=t.dealWithConfSpeakerList=t.searchContactName=t.searchContact=t.updateMemberDetail=t.searchMemberDetail=t.attendeeSortFunc=t.svcConfAttendeeSortFunc=t.dealWithMemberListDataRest=t.dealWithMemberListDataiDo=t.dealItShortNumber=void 0;var a=n(106),o=r(a),i=n(100),s=r(i),c=n(98),u=r(c),f=n(1),l=r(f),d=n(2),h=r(d),p=n(502),_=n(186),C=n(158),v=window.Logger("conf")("logic/memberlist"),m=t.dealItShortNumber=function(){var e=(0,h.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=34;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return e.abrupt("return");case 3:for(r=$getState().myInfo,a={},o=0;o<t.length;o++)i="",t[o].userInfo&&(i=t[o].userInfo.account),t[o].number.indexOf("@")>0&&(t[o].number=t[o].number.split("@")[0]),i&&t[o].userInfo.espacenumber&&t[o].userInfo.short_phone&&t[o].userInfo.espacenumber!==t[o].userInfo.short_phone&&t[o].number===t[o].userInfo.espacenumber&&(a[i]||(a[i]={},a[i].userInfo=t[o].userInfo));if(!n){e.next=18;break}e.t0=l.default.keys(a);case 8:if((e.t1=e.t0()).done){e.next=16;break}if(s=e.t1.value,a[s].userInfo.short_phone!==n.number){e.next=14;break}return v.info("data conf list -+--------already have this memeber:"+handlePhoneNumber(n.number)),n="",e.abrupt("return",!1);case 14:e.next=8;break;case 16:e.next=33;break;case 18:e.t2=l.default.keys(a);case 19:if((e.t3=e.t2()).done){e.next=33;break}c=e.t3.value,u=0;case 22:if(!(u<t.length)){e.next=31;break}if(t[u].number!==a[c].userInfo.short_phone){e.next=28;break}return a[c].userInfo.name=t[u].name,v.info("data+--------- findX---"+handlePhoneNumber(t[u].number)),t.splice(u,1),e.abrupt("break",31);case 28:u++,e.next=22;break;case 31:e.next=19;break;case 33:v.info("data conf list-+---------"+t.length);case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),S=(t.dealWithMemberListDataiDo=function(){var e=(0,h.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=S(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithMemberListDataRest=function(){var e=(0,h.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,h,p,_;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=g(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,s=t.filter(function(e){return!n.some(function(t){return t.number===e.number})}),c=!1,0===n.length&&s.length>0&&!r&&(c=!0),e.next=8,E(s,n);case 8:return f=e.sent,d=f.addMemberNames,window.CLIENTCONFIG.ENABLE_IT_MEETING&&m(n),h=d?d.substring(0,d.length-1):"",p=o?o.substring(0,o.length-1):"",_=i?i.substring(0,i.length-1):"",I(c,h,p,_),e.abrupt("return",{currentMemberList:n});case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,new Array),a=!1,o=e?e.length:0,i=0;i<o;++i){e[i].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[i].number)),$dispatch(coreUi.changeConfMicMute(e[i].is_mute)),1===e[i].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[i].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[i].is_mute&&(e[i].is_speaking=!1,e[i].speak_valume=0);var s=w(e[i].state);e[i].state=s;for(var c=0;c<t.length;c++){t[c];e[i].number===t[c].number&&(!0,t[c].userInfo.name=e[i].name,e[i].userInfo=t[c].userInfo)}if(isNullOrEmpty(e[i].userInfo)){var u={name:e[i].name,number:e[i].number,account:void 0,email:"",sms:""};e[i].userInfo=u}var f=0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[i].is_broadcast&&f){var l={name:e[i].name,number:e[i].number,is_speaker:e[i].is_speaking,role:e[i].role,is_mute:e[i].is_mute,is_self:e[i].is_self};r.push(l),a=!0}}window.CLIENTCONFIG.ENABLE_IT_MEETING&&m(e);var d={isBroadCast:a,broadCastList:r};return v.info("isBroadCast ido =",a),P(d),e.sort(N),coreConf.updateConfMemberList(e),{enterMemberNames:"",leaveMemberNames:"",memberList:e}}),g=function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,""),a="",o=new Array,i=!1,s=!1,c=t?t.length:0,u=0;u<c;++u){var f=0,l=e?e.length:0;s=!1;for(var d=0;d<l;++d){if(t[u].number===e[d].number){s=!0;var h=w(e[d].state);t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||h!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||e[d].is_self||(v.info("member entry: ",handlePhoneNumber(t[u].number)),r+=t[u].userInfo.name+","),t[u].hand_state=e[d].hand_state,t[u].is_deaf=e[d].is_deaf,t[u].is_mute=e[d].is_mute,t[u].media_type=e[d].media_type,t[u].role=e[d].role,t[u].state=h,t[u].is_self=e[d].is_self,t[u].participant_id=e[d].participant_id,t[u].is_broadcast=e[d].is_broadcast,t[u].userInfo.name=e[d].name;var p=0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[d].is_broadcast&&p){var _={name:e[d].name,number:e[d].number,is_speaker:e[d].is_speaking,role:e[d].role,is_mute:e[d].is_mute,is_self:e[d].is_self};o.push(_),i=!0}e[d].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[d].number)),$dispatch(coreUi.changeConfMicMute(e[d].is_mute)),1===e[d].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[d].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[d].is_mute&&(t[u].is_speaking=!1,t[u].speak_valume=0);break}f++}f>=l&&(t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&(v.info("member leave: ",handlePhoneNumber(t[u].number)),a+=t[u].userInfo.name+","),t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0,s=!0),!1===s&&(t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0)}var C={isBroadCast:i,broadCastList:o};return v.info("isBroadCast= rest ",i),P(C),{enterMemberNames:r,leaveMemberNames:a}},E=function(){var e=(0,h.default)(l.default.mark(function e(t,n){var r,a,o,i,c,u,f,d,h;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",a=$getState().conf.selfRole,t)for(o=0;o<t.length;++o)v.info("member added: ",handlePhoneNumber(t[o].number)),t[o].is_self&&($dispatch(coreUi.changeConfMicMute(t[o].is_mute)),1===t[o].role&&1!==a&&($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1))),i={name:t[o].name,account:void 0,email:"",sms:""},R(t[o].number,t[o].name),c=w(t[o].state),c!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||t[o].is_self||(r+=i.name+","),u={name:t[o].name,number:t[o].number,userInfo:i,role:t[o].role,is_mute:t[o].is_mute,is_deaf:t[o].is_deaf,state:c,hand_state:t[o].hand_state,media_type:t[o].media_type,is_self:t[o].is_self,is_speaking:!1,speak_volume:0,participant_id:t[o].participant_id,is_broadcast:0},m(n,u)&&(v.info("data conf list add------------"+handlePhoneNumber(u.number)),n.push(u)),t[o].is_self&&$dispatch(coreUi.changeConfMicMute(t[o].is_mute));if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(f=$getState().conf.confServerId,window.confConnectInfo&&f&&1===window.confConnectInfo[f])){for(window.confConnectInfo[f]=2,d=[],h=0;h<n.length;h++)d[h]={},d[h].contactsId=n[h].userInfo.account,d[h].calleeNumber=n[h].number,d[h].displayName=n[h].name,n[h].userInfo.name&&(d[h].displayName=n[h].userInfo.name),v.info("data conf list add------------"+handlePhoneNumber(d[h].displayName));window.confRecordNotify(f,$getState().conf.confSubject,"","",(0,s.default)(d))}return e.abrupt("return",{addMemberNames:r});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return 0===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:1===e||2===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT},I=function(e,t,n,r){var a="",i=$getState(),s=i.conf.msgList,c=[].concat((0,o.default)(s));e&&t?(a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_IN_CONFERENCE},c.find(function(e){return e.type===a.type})?v.info("repeat msg, ignor..."):(T(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(language.YOU_JOIN_CONFERENCE,2,null,!1))):t&&(v.info("new add member: ",handlePhoneNumber(t)),a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},c.find(function(e){return e.type===a.type})?v.info("repeat new add msg, ignor..."):(T(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(t+language.JOINED_MEETING,2,null,!1))),n&&(a={attendees:n,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},T(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(n+language.JOINED_MEETING,2,null,!1)),r&&(a={attendees:r,type:constant.CONF_MSG_TYPE.TYPE_LEAVE_CONFERENCE},T(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(r+language.LEAVE_CONFERENCE,2,null,!1)),$dispatch(coreUi.updateConfMessage(c))},T=function(e,t){t.length>=3&&t.shift(),t.push(e)},N=(t.svcConfAttendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.is_self<t.is_self?1:n&&e.state>t.state?1:-1},t.attendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.role>t.role?-1:e.role<t.role?1:e.is_self>t.is_self?-1:e.is_self<t.is_self?1:n&&e.state>t.state?1:n&&e.state<t.state?-1:b(e,t)}),b=function(e,t){var n=e.userInfo.name.charCodeAt(0)<122&&e.userInfo.name.charCodeAt(0)>48,r=t.userInfo.name.charCodeAt(0)<122&&t.userInfo.name.charCodeAt(0)>48;return n>r?-1:n<r?1:n?O(e.userInfo.name,t.userInfo.name):A(e.userInfo.name,t.userInfo.name,e.userInfo.q_pin_yin,t.userInfo.q_pin_yin)},O=function(e,t){return e>t?1:e<t?-1:0},A=function(e,t,n,r){n||(n=window.pinyinUtil.getPinyin(e)),r||(r=window.pinyinUtil.getPinyin(t));var a=n&&r;return a&&n>r?1:a&&n<r?-1:e>t?-1:e<t?1:0},R=t.searchMemberDetail=function(e,t){var n=void 0;L(e,t).then(function(r){r&&1<=r.length&&(n=(0,u.default)({},r[0]),y(n,e,t))})},y=t.updateMemberDetail=function(e,t,n){var r=[].concat((0,o.default)($getState().conf.memberListInfo)),a=r.findIndex(function(e){return e.number!==e.name&&e.number===t&&(""===n||""!==n&&e.name===n)});-1!==a?(v.info("update userInfo after find: "+handlePhoneNumber(t)),(0,u.default)(r[a],{userInfo:e}),$dispatch(coreUi.changeMemberListInfo(r)),coreConf.updateConfMemberList(r),isNullOrEmpty($getState().conf.searchText)||(0,C.searchMemberList)($getState().conf.searchText,r)):v.info("can not find member in memberlist"+handlePhoneNumber(t))},L=t.searchContact=function(){var e=(0,h.default)(l.default.mark(function e(t,n){var r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.split("@")[0].replace("sip:",""),v.info("query contact from local by number: "+handlePhoneNumber(t)),e.next=4,coreDb.queryContactByNumber(t);case 4:if(r=e.sent,a=!1,r&&r.length>0?(v.info("query from local success: "+r.length),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1?r=[]:r.length<1&&(a=!0)):a=!0,!a){e.next=15;break}return v.info("can not find in local, query contact from server"),e.next=11,coreContact.searchServerContact(t);case 11:o=e.sent,i=o.userInformationList,s=i,s&&(v.info("query contact from server success: "+s.length),(0,u.default)(r,s),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1&&(r=[]));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),M=(t.searchContactName=function(){var e=(0,h.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toString(),r=t.toString(),!window.skipLogin){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,coreDb.queryContactByPhonenumberAccurate(t);case 6:if(!(a=e.sent)||!a[0]){e.next=13;break}v.info("find in local success"),r=a[0].name,a.length>1&&a.forEach(function(e){""===e.account&&(r=e.name)}),e.next=19;break;case 13:return v.info("can not find in local, query contact from server"),e.next=16,coreContact.queryServerContact(t);case 16:o=e.sent,i=o.param.name,i&&(r=i);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithConfSpeakerList=function(){var e=(0,h.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,h,m,S;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,0!==r.length){e.next=3;break}return e.abrupt("return");case 3:for(void 0!==t&&void 0!==t.num_of_speaker&&t.num_of_speaker>1&&t.speaker.sort(M),a="",void 0===t.speaker&&(0,u.default)(t,{speaker:[]}),x(r);t.speaker.length>2;)t.speaker.pop();o=0;case 9:if(!(o<t.speaker.length)){e.next=35;break}if(!(t&&t.speaker[o]&&isNullOrEmpty(t.speaker[o].number))){e.next=13;break}return v.warn("speaker num is null, so continue"),e.abrupt("continue",32);case 13:i=!1,s=0;case 15:if(!(s<r.length)){e.next=24;break}if(t.speaker[o].number!==r[s].number){e.next=21;break}return(0,u.default)(t.speaker[o],{name:r[s].userInfo.name?r[s].userInfo.name:r[s].name,account:r[s].userInfo.account,isSelf:r[s].is_self}),r[s]=(0,u.default)({},r[s],{is_speaking:t.speaker[o].is_speaking,speak_valume:t.speaker[o].speak_valume}),i=!0,e.abrupt("break",24);case 21:s++,e.next=15;break;case 24:if(i){e.next=30;break}return v.info("conf member list do not have speaker detail, search it, numer is "+handlePhoneNumber(t.speaker[o].number)),e.next=28,L(F(t.speaker[o].number));case 28:c=e.sent,c&&1<=c.length&&(f=$getState(),d=f.myInfo.account,(0,u.default)(t.speaker[o],{name:c[0].name,account:c[0].account,isSelf:d===c[0].account}));case 30:(0,u.default)(t.speaker[o],{isToMuted:!1}),a+=handlePhoneNumber(t.speaker[o].number)+"#"+t.speaker[o].name.substr(0,1)+"**"+t.speaker[o].name.substr(-1)+" # ";case 32:o++,e.next=9;break;case 35:v.info("dealWithConfSpeakerList: "+a),$dispatch(coreUi.updateConfSpeaker(t)),$dispatch(coreUi.changeFlagStatus()),window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isSvcConf&&window.SvcSpeakerToNative(t),window.CLIENTCONFIG.ISMOBILE&&(h=D(t),isNullOrEmpty(h)?window.showCallTips(""):(m=language.ON_SPEAKING.format(h),window.showCallTips(m))),$dispatch(coreUi.changeMemberListInfo(r)),$getState().conf.isSvcConf&&(S=D(t),window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN?_.SvcAtdManager.handleSpeakerNotify(S):p.SvcAttendanceManager.handleSvcSpeakerNotify()),isNullOrEmpty($getState().conf.searchText)||(0,C.searchMemberList)($getState().conf.searchText,r);case 43:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){return e.speaking_volume<t.speaking_volume?1:e.speaking_volume>t.speaking_volume?-1:0}),D=function(e){if(e){var t=void 0;return 0!==e.num_of_speaker&&e.speaker instanceof Array&&(t=e.speaker[0].name),t}},x=function(e){for(var t=0;t<e.length;t++)e[t]=(0,u.default)({},e[t],{is_speaking:!1,speak_valume:0})},k=(t.calcMemberCount=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&t++;v.info("calcMemberCount in "),_.SvcAtdManager.setConfUserInfo(t);var r=t.toString()+"/"+e.length.toString();$dispatch(coreUi.changeMeetingMembers(r)),v.info("current member count: "+r)},t.setMemberToMuteState=function(e,t){var n=$getState(),r=n.conf.memberListInfo,a=(0,u.default)([],r);v.info("set attendee tomute state, attendee="+handlePhoneNumber(e)+", isMute="+t);for(var o=0;o<a.length;++o)if(a[o].number===e){a[o].is_mute=t?constant.MUTE_STATE.MUTE_STATE_TOMUTE:constant.MUTE_STATE.MUTE_STATE_TOUNMUTE;break}$dispatch(coreUi.changeMemberListInfo(a)),isNullOrEmpty($getState().conf.searchText)||(0,C.searchMemberList)($getState().conf.searchText,a)},t.revertMemberToMuteState=function(e){var t=$getState(),n=t.conf.memberListInfo,r=(0,u.default)([],n);v.info("revert attendee tomute state, isMute="+e);for(var a=0;a<r.length;++a)r[a].is_mute>1&&(r[a].is_mute=e?constant.MUTE_STATE.MUTE_STATE_UNMUTE:constant.MUTE_STATE.MUTE_STATE_MUTE);$dispatch(coreUi.changeMemberListInfo(r)),isNullOrEmpty($getState().conf.searchText)||(0,C.searchMemberList)($getState().conf.searchText,r)},function(e,t){var n="";if(t.isBroadCast)if(t.broadCastList&&!isNaN(t.broadCastList.length)&&t.broadCastList.length>0)for(var r=0;r<t.broadCastList.length;r++)n=n+";ssrc"+(t.broadCastList[r].name.length>1?t.broadCastList[r].name.substr(0,1)+"**"+t.broadCastList[r].name.substr(-1):"**")+",number:"+handlePhoneNumber(t.broadCastList[r].number)+",is_self:"+t.broadCastList[r].is_self;else n=!1;v.info(e,n)}),P=t.handleChangeBroadCastInfo=function(e){if(window.CLIENTCONFIG.ISMOBILE){k("handleChangeBroadCastInfo",e);var t=$getState().conf.broadCastInfo,n=!1;if(t.isBroadCast!==e.isBroadCast?n=!0:t.broadCastList.length>0&&e.broadCastList.length>0?t.broadCastList[0].number!==e.broadCastList[0].number&&(n=!0):t.broadCastList.length!==e.broadCastList.length&&(n=!0),v.info("handleChangeBroadCastInfo flag ",n),n){var r=JSON.parse((0,s.default)(e));if(void 0!==r.broadCastList){var a="",o="";r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})}if(v.info("handleChangeBroadCastInfo broadCastInfo ",(0,s.default)(r)),e.isBroadCast)for(var i=0;i<e.broadCastList.length;i++){var c=language.SVC_BROAD_CAST.format(e.broadCastList[i].name);v.info("JSToNativeToast isself  tempLanguage ",c.substr(0,5)+"***");var u=$getState().conf.isSvcConf;window.CLIENTCONFIG.ISMOBILE&&u&&window.JSToNativeToast(2e3,c),1!==e.broadCastList[i].is_self&&window.broadCastInfo(e)}else window.broadCastInfo(e)}}if(window.CLIENTCONFIG.ISMAC){var f=$getState().conf.broadCastInfo,l=!1;if(f.isBroadCast!==e.isBroadCast?l=!0:f.broadCastList.length>0&&e.broadCastList.length>0?f.broadCastList[0].number!==e.broadCastList[0].number&&(l=!0):f.broadCastList.length!==e.broadCastList.length&&(l=!0),e.isBroadCast&&l)for(var d=0;d<e.broadCastList.length;d++){var h=language.SVC_BROAD_CAST.format(e.broadCastList[d].name),p=$getState().conf.isSvcConf;p&&(v.info("mac broad toast message : ",h),window.Toast(h,5,!1,"pcToast",""))}}$dispatch(coreUi.changeBroadCastInfo(e))},F=(t.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];if(coreConf.isInConf()||!(coreCall.getCallCount()<=0)){var n=$getState(),r=n.conf.groupId,a=n.call,o=a.userInfo,i=a.screenState,s=n.recent.currentRecentInfo,c=e.account,u=e.group_id;r&&u&&r===u?(s&&s.group&&s.group.group_id===r&&("min"!==i&&"extra"!==i||(t=0)),v.info("set conf page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0))):c&&o&&c===o.account&&(s&&s.contact&&s.contact.account===c&&("min"!==i&&"extra"!==i||(t=0)),v.info("set call page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0)))}},t.dealWithSipNumber=function(e){if(isNullOrEmpty(e))return v.warn("number is empty. "),"";var t=e.toString();return-1!==t.indexOf("sip:")&&(t=t.substring(4)),-1!==t.indexOf("@")&&(t=t.split("@")[0]),t})},544:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(95),o=r(a),i=n(957),s=r(i);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var a=(0,s.default)(t,n);if(void 0===a){var i=(0,o.default)(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var c=a.get;if(void 0!==c)return c.call(r)}},585:function(e,t,n){"use strict";(function(t,r){function a(e){return F.from(e)}function o(e){return F.isBuffer(e)||e instanceof U}function i(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?x(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){D=D||n(200),e=e||{};var r=t instanceof D;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(V||(V=n(536).StringDecoder),this.decoder=new V(e.encoding),this.encoding=e.encoding)}function c(e){if(D=D||n(200),!(this instanceof c))return new c(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),P.call(this)}function u(e,t,n,r,o){var i=e._readableState;if(null===t)i.reading=!1,_(e,i);else{var s;o||(s=l(i,t)),s?e.emit("error",s):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===F.prototype||(t=a(t)),r?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?f(e,i,t,!1):m(e,i)):f(e,i,t,!1))):r||(i.reading=!1)}return d(i)}function f(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),m(e,t)}function l(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=j?e=j:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(H("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?M.nextTick(v,e):v(e))}function v(e){H("emit readable"),e.emit("readable"),T(e)}function m(e,t){t.readingMore||(t.readingMore=!0,M.nextTick(S,e,t))}function S(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(H("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;H("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&k(e,"data")&&(t.flowing=!0,T(e))}}function E(e){H("readable nexttick read 0"),e.read(0)}function w(e,t){t.resumeScheduled||(t.resumeScheduled=!0,M.nextTick(I,e,t))}function I(e,t){t.reading||(H("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(H("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=b(e,t.buffer,t.decoder),n}function b(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?O(e,t):A(e,t),r}function O(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var o=n.data,i=e>o.length?o.length:e;if(i===o.length?a+=o:a+=o.slice(0,e),0===(e-=i)){i===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(i));break}++r}return t.length-=r,a}function A(e,t){var n=F.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,i),0===(e-=i)){i===o.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(i));break}++a}return t.length-=a,n}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,M.nextTick(y,t,e))}function y(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var M=n(442);e.exports=c;var D,x=n(197);c.ReadableState=s;var k=(n(491).EventEmitter,function(e,t){return e.listeners(t).length}),P=n(586),F=n(117).Buffer,U=t.Uint8Array||function(){},B=n(396);B.inherits=n(114);var W=n(902),H=void 0;H=W&&W.debuglog?W.debuglog("stream"):function(){};var V,$=n(903),G=n(587);B.inherits(c,P);var Y=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=G.destroy,c.prototype._undestroy=G.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){return V||(V=n(536).StringDecoder),this._readableState.decoder=new V(e),this._readableState.encoding=e,this};var j=8388608;c.prototype.read=function(e){H("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return H("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):C(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&R(this),null;var r=t.needReadable;H("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,H("length less than watermark",r)),t.ended||t.reading?(r=!1,H("reading or ended",r)):r&&(H("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var a;return a=e>0?N(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==a&&this.emit("data",a),a},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function n(e,t){H("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function a(){H("onend"),e.end()}function o(){H("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",C),e.removeListener("error",c),e.removeListener("unpipe",n),d.removeListener("end",a),d.removeListener("end",l),d.removeListener("data",s),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||C()}function s(t){H("ondata"),m=!1,!1!==e.write(t)||m||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==L(h.pipes,e))&&!v&&(H("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,m=!0),d.pause())}function c(t){H("onerror",t),l(),e.removeListener("error",c),0===k(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),l()}function f(){H("onfinish"),e.removeListener("close",u),l()}function l(){H("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,H("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,_=p?a:l;h.endEmitted?M.nextTick(_):d.once("end",_),e.on("unpipe",n);var C=g(d);e.on("drain",C);var v=!1,m=!1;return d.on("data",s),i(e,"error",c),e.once("close",u),e.once("finish",f),e.emit("pipe",d),h.flowing||(H("pipe resume"),d.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,n);return this}var i=L(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},c.prototype.on=function(e,t){var n=P.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):M.nextTick(E,this))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(H("resume"),e.flowing=!0,w(this,e)),this},c.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(H("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){if(H("wrapped data"),n.decoder&&(a=n.decoder.write(a)),(!n.objectMode||null!==a&&void 0!==a)&&(n.objectMode||a&&a.length)){t.push(a)||(r=!0,e.pause())}});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<Y.length;o++)e.on(Y[o],this.emit.bind(this,Y[o]));return this._read=function(t){H("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=N}).call(t,n(16),n(154))},586:function(e,t,n){e.exports=n(491).EventEmitter},587:function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var i=n(442);e.exports={destroy:r,undestroy:a}},588:function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){i(e,t,n)}):i(this,null,null)}function i(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=a;var s=n(200),c=n(396);c.inherits=n(114),c.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},599:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remoteScreenShare=t.shareScreenOper=t.joinConfSuccess=t.joinConfFailed=t.setServerIp=t.stopCalcCPUUsage=t.startCalcCPUUsage=t.sendHttpPost=void 0;var a=n(1),o=r(a),i=n(100),s=r(i),c=n(98),u=r(c),f=n(2),l=r(f),d=n(850),h=n(1112),p=window.Logger("bigwinBuried")("buried"),_="",C=void 0,v=t.sendHttpPost=function(){var e=(0,l.default)(o.default.mark(function e(t,n){var r,a,i,c,f,l,h,_,C,v,m,S,g,E,w,I,T,N,b,O,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return p.error("client config is not bigwin."),e.abrupt("return");case 3:if(n){e.next=5;break}return e.abrupt("return");case 5:r=$getState(),a=r.login,i=a.account,c=a.sipImpi,f=r.bigwinBuried.buried,l="",c.indexOf("@")&&-1!==(h=c.indexOf("@"))&&(l=c.slice(0,h)),_=new Date,C=_.getMonth()+1>=10?_.getMonth()+1:"0"+(_.getMonth()+1),v=_.getDate()>=10?_.getDate():"0"+_.getDate(),m=_.getHours()>=10?_.getHours():"0"+_.getHours(),S=_.getMinutes()>=10?_.getMinutes():"0"+_.getMinutes(),g=_.getSeconds()>=10?_.getSeconds():"0"+_.getSeconds(),E=_.getFullYear()+"-"+C+"-"+v+" "+m+":"+S+":"+g,w={accessCode:f.acccode,meetingId:f.passcode,meetingName:f.meetingName,userId:i,sipNo:l,timeUTC:E,timeZone:(new Date).getTimezoneOffset()/-60},I=(0,u.default)(w,n),I=(0,s.default)(I),T=coreSecurity.encode64(I),T=coreSecurity.encode64(T),N=A||window.CLIENTCONFIG.BURIED_POST_ADDR,b=(0,d.createXMLHttpRequest)(),O=N+"?idsite=ConfCloudLink&action="+t+"&actiontype=commonlog&_id="+i+"&data="+T,b.open("POST",O,!0),b.send();case 25:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=navigator.userAgent.toLowerCase(),t="";return-1!==e.indexOf("nt 10.0")&&(t="windows 10"),-1!==e.indexOf("nt 6.2")&&(t="windows 8"),-1!==e.indexOf("nt 6.1")&&(t="windows 7"),-1!==e.indexOf("nt 6.0")&&(t="windows Vista"),-1!==e.indexOf("nt 5.1")&&(t="windows XP"),-1===e.indexOf("macintosh")&&-1===e.indexOf("mac os x")||(t="Mac"),-1!==e.indexOf("adobeair")&&(t="Adobe Air"),-1!==e.indexOf("linux")&&(t="Linux"),t};t.startCalcCPUUsage=function(){if(p.info("buried startCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void p.error("client config is not bigwin.");C=setInterval(function(){(0,h.cpuUsage)(function(e){if((e=parseInt(100*e,10))>70){v("perfAlarm",{almType:0,almVal:e+"%",parmStr:"",parmStr1:""})}})},6e4)},t.stopCalcCPUUsage=function(){if(p.info("buried stopCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void p.error("client config is not bigwin.");clearInterval(C)},t.setServerIp=function(e){_=e},t.joinConfFailed=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("buried joinConfFailed"),t=$getState(),n=t.bigwinBuried.buriedJoinConfVip,r=m(),_="",a={platform:r,browserType:"",browserVer:"",joinType:s,joinNumber:"",myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:_,msIP:_,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,errId:"",errStr:"",parmStr:"",parmStr1:"",parmStr2:""},i="joinFail",v(i,a);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.joinConfSuccess=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4096,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("buried joinConfSuccess"),t=$getState(),n=t.bigwinBuried.buried,r=t.conf,a=m(),i=1,r.isVideoConf?r.isSvcConf||(i=0):i=2,s={platform:a,browserType:"",browserVer:"",joinType:f,joinNumber:"",joinRole:l,myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n.joinConfVip,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:_,msIP:_,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,realRole:l,callBitRate:4096,negoBitRate:u,negoAVCaps:i,parmStr:"",parmStr1:"",parmStr2:""},c="joinSuccess",v(c,s);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.shareScreenOper=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("buried shareScreenOper"),n={operType:t,shareType:a,parmStr:"",parmStr1:""},r="shareOper",v(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.remoteScreenShare=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("buried remoteScreenShare"),n={shareType:a,remoteUser:t,parmStr:"",parmStr1:""},r="remoteShare",v(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},600:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=0===e.param.ret;return coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_EXTEND,null,t?[1]:[0,e.param.ret]),v.handleGetDataPostponeConf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isMemberListNull=t.isUserEndConf=t.getInfoOfConf=t.getSsrcRange=t.isSvcConf=t.isDataConf=t.isVideoConf=t.getIsAvcMultiViewBroadcast=t.setIsAvcMultiViewBroadcast=t.getCurrentConfId=t.getSavedRecallInfo=t.getUpdatedParticipants=t.getIsRecall=t.setIsFirstEnterConf=t.getIsFirstEnterConf=t.setIsSmcFirstRequestCharimanRest=t.getIsSmcFirstRequestCharimanRest=t.cloudRecordRequest=t.changeActiveDirection=t.confctrlWatchAttendee=t.sendWatchSvcRequest=t.updateConfMemberList=t.handleTransToConfResult=t.handleSvcSeessionModify=t.handleCallEndedPostConf=t.handleConfEnded=t.broadcastAttendee=t.leaveConf=t.getConfMemberListContent=t.acceptConf=t.rejectConf=t.endCall=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.handleConfBeTransferToConf=t.handleConfIncoming=t.handleConfInfoNotify=t.handleConfConnected=t.handleGetConfInfoRes=t.getConfInfoService=t.transferChairman=t.cancelConf=t.getConfList=t.getVRMList=t.setConfNotifyFunc=t.changeConfSelfRole=t.requestChairman=t.releaseChairman=t.handup=t.lockConf=t.muteConf=t.muteAttendee=t.removeAttendee=t.callAttendee=t.hangupAttendee=t.addAttendee=t.reInviteAttendee=t.endConf=t.p2pTransferConf=t.isConfChairMan=t.isNeedUpdate2DataConf=t.isInConf=t.upgradeConf=t.createConf=t.unInitConfCtrl=t.confctrlInit=t.bookConf=void 0;var i=n(100),s=a(i),c=n(1),u=a(c),f=n(2),l=a(f),d=n(1115),h=a(d),p=n(209),_=n(1118),C=n(158),v=r(C),m=n(224),S=n(400),g=r(S),E=n(204),w=r(E),I=window.Logger("confModel")("index"),T=null,N=constant.MEETING_NET_TYPE.MEDIAX_MEETING,b=null,O=(t.bookConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(t,!1),e.next=3,n.bookConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.start_time,t.conf_len,t.time_zone,t.noPassword);case 3:return r=e.sent,n=null,I.info("bookConf,set confService null"),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confctrlInit=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T=null,I.info("confctrlInit, set confService null"),t=$getState().conf.isSupportAS,t?V():H();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unInitConfCtrl=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return I.info("unInitConfCtrl no need for other except smc it hwmeeting"),e.abrupt("return");case 3:return e.next=5,new coreTup.HwTupConfCtrlSdk;case 5:return t=e.sent,e.next=8,t.confCtrlUnInit();case 8:n=e.sent,0===n.result?I.info("confCtrlUninit success"):I.info("confCtrlUninit failed, result = "+n.result);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===T){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return T=new h.default(t),e.next=6,T.createConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.noPassword,t.deviceSet);case 6:return n=e.sent,r=n.isSuc,r||(T=null,I.error("createConf fail ,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.upgradeConf=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.error("upgradeConf start"),null!==T){e.next=4;break}return I.error("no conf service existcan not upgradeConf"),e.abrupt("return");case 4:return w.setIsAutoStartScreenShare(!0),e.next=7,T.upgradeConf();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInConf=function(){return!(null===T)},t.isNeedUpdate2DataConf=function(){return null===T||null!==T&&!w.confInfoNotifyParamsExist()&&T.confInfo.mediaType<=16},t.isConfChairMan=function(){return null!==T&&1===T.confInfo.confRole},t.p2pTransferConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===T){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return T=new h.default(t),void 0!==t.isAutoScreenShare?w.setIsAutoStartScreenShare(t.isAutoScreenShare):w.setIsAutoStartScreenShare(!1),e.next=7,T.p2pTransferConf(t);case 7:return n=e.sent,r=n.isSuc,r||(I.error("confService.p2pTransferConf fail,set confService null"),T=null),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("endConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.endConf();case 5:return t=e.sent,I.info("endConf set confService null, res = "+t),T=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reInviteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("reInviteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.reInviteAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.addAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("addAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.addAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hangupAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("hangupAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.hangupAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.callAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("callAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.callAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.removeAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("removeAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.removeAttendee(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("muteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.muteAttendee(t.isMute,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("muteConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.muteConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.lockConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("lockConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.lockConf(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handup=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("handup no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.handup(t.isHandup,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("releaseChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("requestChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.requestChairman(t.chairmanPwd,t.reqNumber);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeConfSelfRole=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==T&&(I.info("changeConfSelfRole "+t),T.confInfo.confRole=t,window.CLIENTCONFIG.ISMOBILE&&(I.info("notifyIsSelfChairManToNative "+t),window.notifyIsSelfChairManToNative(t)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setConfNotifyFunc=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("set confctrl service callback func"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:t=e.sent,t.setMultiNotifyFunc(491564,Y),t.setNotifyFunc(491525,q),t.setNotifyFunc(491577,J),t.setNotifyFunc(491538,Z),t.setNotifyFunc(491545,K),t.setNotifyFunc(491555,X),t.setNotifyFunc(491556,Q),t.setNotifyFunc(491544,se),t.setNotifyFunc(491563,$),t.setNotifyFunc(491600,G),t.setNotifyFunc(491566,j),t.setNotifyFunc(491580,W),t.setNotifyFunc(491595,B),t.setNotifyFunc(491552,te),t.setNotifyFunc(491553,ee),t.setNotifyFunc(491554,o),t.setNotifyFunc(491578,re),t.setNotifyFunc(491567,F),t.setNotifyFunc(491579,U),t.setNotifyFunc(491535,ae),t.setNotifyFunc(491531,x),t.setNotifyFunc(491529,ne),t.setNotifyFunc(491548,k),t.setNotifyFunc(491598,D),t.setNotifyFunc(491533,ce),t.setNotifyFunc(491534,ue),t.setNotifyFunc(491599,P),t.setNotifyFunc(491562,oe),t.setNotifyFunc(491557,ie),t.setNotifyFunc(491550,M),t.setNotifyFunc(491582,O),t.setNotifyFunc(491581,L),t.setNotifyFunc(491588,fe),t.setNotifyFunc(491570,le),t.setNotifyFunc(491589,de),t.setNotifyFunc(491603,z),t.setNotifyFunc(491601,y),t.setNotifyFunc(491571,pe),t.setNotifyFunc(491609,he);case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("AudientResult",e)}),A=function(e){for(var t=0,n=0,r=0;r<e.length;r++)t=e.charCodeAt(r),10===t?n+=2:t<127?n+=1:t>=128&&t<=2047?n+=2:t>=2048&&t<=65535&&(n+=3);return n},R=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().myInfo,r=n.account,a=n.name,I.info("confSignRequest attendee",t.substr(0,3)+"**"+t.substr(5,t.length)),I.info("confSignRequest account",r.substr(0,3)+"**"+r.substr(5,r.length)),I.info("confSignRequest name",a.substr(0,3)+"**"+a.substr(5,a.length)),o=parseInt((new Date).getTime()/1e3),I.info("confSignRequest date",o),e.next=8,T.confSignRequest(t,r,A(r),a,A(a),o);case 8:i=e.sent,I.info("confSignRequest",i),0===i.result?window.CLIENTCONFIG.ISMOBILE?(I.info("mobile sign success"),setTimeout(function(){$dispatch(coreUi.createConfTipMsg([language.SIGNSUCCESS]))},3e3)):(I.info("window sign success"),s=$getState().conf.videoFrameHwnd,c=g.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(f={frameHwnd:0!==s?s:c,dialog_type:1,content_id:"SIGNSUCCESS"},setTimeout(function(){(0,p.showMessageBox)(f)},3e3)),"mac"===window.CLIENTCONFIG.PLATFORM&&setTimeout(function(){window.Toast(language.SIGNSUCCESS,2,!1,"pcToast","")},3e3)):I.info("confSignRequest failed",i.result);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("confSignRequest data ",t),n=t.param.event_info,r=[],0===n.event_type&&0===n.open_switch&&(b=setInterval(function(){if(r=$getState().conf.memberListInfo,r.length>0)for(var e in r)if(r[e].is_self){R(r[e].number),clearInterval(b);break}},1e3));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=function(e){coreCommon.Observer.publish("ChangeDirectionResult",e)},M=function(e){var t=JSON.parse((0,s.default)(e));if(void 0!==t.param.number){var n="";n=t.param.number,t.param.number=handlePhoneNumber(n)}I.info("",t),T&&e.param&&e.param.number&&T.localRemoveAttendee(e.param.number),coreCommon.Observer.publish("callAttendeeResult",e)},D=function(e){coreCommon.Observer.publish("McuConfType",e)},x=function(e){coreCommon.Observer.publish("BroadcaseResult",e)},k=function(e){coreCommon.Observer.publish("inviteAttendeeResult",e)},P=function(e){coreCommon.Observer.publish("transferChairman",e)},F=function(e){coreCommon.Observer.publish("UportalBookConfResult",e)},U=function(e){coreCommon.Observer.publish("handleSvcWatchInd",e.param)},B=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("NonChairCtrlcaps",t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("handleSpeakerReport",t),7!==t.param.result&&115!==t.param.result||window.isSupportiDo||coreCommon.Observer.publish("UportalTokenErr",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),H=(t.getVRMList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new coreTup.HwTupConfCtrlSdk;case 4:return t=e.sent,e.next=7,t.getVRMList();case 7:n=e.sent,0===n.result?I.info("get vmr list success"):I.info("get vmr list failed, result = "+n.result);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreAccount.getLoginModel(),!((n=t.sipLoginOnly)||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN)){e.next=4;break}return I.info("get conflist is it smc metting or bigwin or sipLoginOnly, return."),e.abrupt("return");case 4:return I.info("get conflist"),r={account_id:$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING?"":$getState().myInfo.account,conf_right:2,include_end:0,page_index:1,page_size:20},e.next=8,new coreTup.HwTupConfCtrlSdk;case 8:a=e.sent,a.getConfList(r);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),V=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreAccount.getLoginModel(),!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=4;break}return I.warn("subscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 4:return I.info("subscribeconflist"),e.next=7,new coreTup.HwTupConfCtrlSdk;case 7:r=e.sent,r.subscribeConfList();case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),$=(t.cancelConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("cancel the meeting,[coreConf]"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:n=e.sent,n.cancelConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.transferChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("transfer chairman"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:n=e.sent,n.transferChairman(t.confHandle,t.attendeeInfo);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfInfoService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("get confInfo"),e.next=3,new coreTup.HwTupConfCtrlSdk;case 3:n=e.sent,n.getConfInfo(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(I.info("handleGetConfListRes: "+e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():coreCommon.Observer.publish("UportalTokenErr",e));coreCommon.Observer.publish("ConfList",e.param)}),G=function(e){I.info("handleSubscribeConfListRes= ",e.result),0===e.param.result?I.info("subscribe ConfList success"):I.info("subscribe ConfList fail,error code= ",e.param.result)},Y=t.handleGetConfInfoRes=function(e){if(I.info("handleGetConfInfoRes",e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void coreCommon.Observer.publish("UportalTokenErr",e);constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState&&coreConf.getPairConfPasResult(e.param),coreCommon.Observer.publish("ConfInfo",e.param)},j=function(e){if(I.info("handleVMRConfResult: "+e.param.result),7===e.param.result)return window.CLIENTCONFIG.ENABLE_IT_MEETING?void 0:void coreCommon.Observer.publish("UportalTokenErr",e);coreCommon.Observer.publish("VMRConfResult",e.param)},q=function(e){T&&T.handleConfMTnumber(e)},J=(t.handleConfConnected=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=4;break}T.handleConfConnected(t),e.next=10;break;case 4:if(I.error("confService is null, handleConfConnected"),!(t&&t.param&&t.param.handle)){e.next=10;break}return e.next=8,new coreTup.HwTupConfCtrlSdk;case 8:n=e.sent,n.leaveConf(t.param.handle);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if($getState().synergismInfo.inPairConf)return I.info("in pair conf, start handleConfRightResult"),void coreCommon.Observer.publish("pairInviteJoinConf",e);T&&T.handleConfRightResult(e)}),z=(t.handleConfInfoNotify=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info(" confinfonotify."),!T){e.next=5;break}T.handleConfInfoNotify(t),e.next=11;break;case 5:if(I.info(" confinfonotify confservice is null"),!(t&&t.param&&t.param.handle)){e.next=11;break}return e.next=9,new coreTup.HwTupConfCtrlSdk;case 9:n=e.sent,n.leaveConf(t.param.handle);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("enter handleBigConfInfo"),T&&t.param&&t.param.type&&(I.info(" handleBigConfInfo data.param.type = "+t.param.type),T.handleBigConfInfo(t.param.type));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),K=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.isSameGradeMcu,a=n.isSvcConf,o=n.isAudience,0!==t.param.conf_status.num_of_participant||!a&&0!==r&&o){e.next=4;break}return I.info("don't attendeeListUpdate, isSvcConf = "+a+", isSameGradeMcu = "+r+", isAudience = "+o),e.abrupt("return");case 4:if(7!==t.param.result){e.next=9;break}if(I.error("CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND,error result = 7"),window.isSupportiDo){e.next=9;break}return coreCommon.Observer.publish("UportalTokenErr",t),e.abrupt("return");case 9:if(!T||!T.isFirstGetMemberList||N!==constant.MEETING_NET_TYPE.SMC_MEETING){e.next=27;break}if(!t||0==(t.param.conf_status.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)){e.next=14;break}T.isFirstGetMemberList=!1,e.next=27;break;case 14:if(!window.CLIENTCONFIG.ISBIGWIN||window.isSupportiDo){e.next=27;break}if((0,m.NotifyJoinConfFailed)(0),$getState().bigwinBuried.buried.postHasSent||(coreCommon.BigwinObserver.publish("OnJoinConfFailed"),coreCommon.BigwinObserver.publish("OnChangeHasSent",!0)),i=$getState(),s=i.conf,c=s.confHandle,f=s.selfRole,l=i.call.callId,""===c){e.next=24;break}return I.error("is Not DataConf, leave conf, confHandle=",c),e.next=22,(0,C.actionLeaveConf)();case 22:e.next=27;break;case 24:return I.error("is Not DataConfl, end call, callId=",l),e.next=27,(0,C.endCallInConf)(l);case 27:T&&T.handleConfAttendeeListUpdate(t);case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),X=function(e){T&&T.handleMuteConfResult(e)},Z=function(e){T&&T.handleConfBroadCastLocal(e)},Q=function(e){T&&T.handleMuteAttendeeResult(e)},ee=function(e){T&&T.handleReleaseChairmanResult(e)},te=function(e){T&&T.handleReqChairmanResult(e)},ne=function(e){T&&T.handleEnterPwdToChairmanResult(e)},re=(t.handleConfIncoming=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.confctrlInitAtomic.wait();case 2:if(null===T){e.next=11;break}if(I.error("already has conf, reject it"),!(t&&t.param&&t.param.handle)){e.next=10;break}return e.next=7,new coreTup.HwTupConfCtrlSdk;case 7:return n=e.sent,e.next=10,n.rejectConf(t.param.handle);case 10:return e.abrupt("return");case 11:T=new h.default,r=T.handleConfIncoming(t),r||(T=null,I.error("handleConfIncoming error, set confService null"));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfBeTransferToConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("CONFCTRL_E_EVT_BE_TRANS_TO_CONF_IND,call transfer to conf, handle = "+t.param.handle+", mediaType is "+t.param.conf_info.media_type),null!==T){e.next=12;break}if(!(coreCall.getCallCount()>1||coreCall.getCallCount()<1)){e.next=10;break}if(I.warn("more than one call or no call, can not transfer to conf,getCallCount = "+coreCall.getCallCount()),!(t&&t.param&&t.param.handle)){e.next=9;break}return e.next=7,new coreTup.HwTupConfCtrlSdk;case 7:n=e.sent,n.leaveConf(t.param.handle);case 9:return e.abrupt("return");case 10:T=new h.default(null),T.setIsCallTransToConfTrue();case 12:T.handleConfBeTransferToConf(t);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===T){e.next=4;break}return I.error("conf service is not null in oneKeyEnterConfService"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 4:return T=new h.default(null),e.next=7,T.oneKeyEnterConf(t.confAcs,t.confId,t.confPwd,t.isVideo,t.deviceSet,t.isVMR);case 7:return n=e.sent,n||(T=null,I.error("oneKeyEnterConfService res = "+(0,s.default)(n)+"set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===T){e.next=3;break}return I.error("conf service is not null in enterConfInConfList"),e.abrupt("return",!1);case 3:return T=new h.default(null),e.next=6,T.enterConfInConfList(t.confId,t.cycle_conf_id);case 6:return n=e.sent,n||(T=null,I.error("enterConfInConfListService fail,set confService null")),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===T){e.next=3;break}return I.error("conf service is not null in enterConfByIdOnlyService"),e.abrupt("return",!1);case 3:return T=new h.default(null),e.next=6,T.enterConfByIdOnly(t.confId,t.confPas,t.deviceSet);case 6:return n=e.sent,r=n.isSuc,r||(T=null,I.error("enterConfByIdOnlyService fail,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endCall=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("endCall no conf service exist"),e.abrupt("return");case 3:return I.info("endCall in conf"),e.next=6,T.endCall();case 6:return t=e.sent,T=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.rejectConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("rejectConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.rejectConf(t);case 5:if(!(n=e.sent)||0!==n.result){e.next=12;break}return I.info("reject conf success,set confservice null"),T=null,e.abrupt("return",!0);case 12:return T=null,I.info("reject conf failed,set confservice null"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.acceptConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("acceptConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.acceptConf(t.confHandle,t.isVideoType);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfMemberListContent=function(){return null===T?void I.error("getConfMemberListContent no conf service exist"):T.getConfMemberListContent()},t.leaveConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("leaveConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.leaveConf();case 5:return t=e.sent,t&&0===t.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_LEAVE,[1]),coreConf.getConfInfoFromDb(),I.info("leave conf success,set confservice null")):(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_LEAVE,[0,t.result]),I.info("leave conf failed,set confservice null")),T=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.broadcastAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("broadcastAttendee no conf service exist"),e.abrupt("return");case 3:return I.info("broadcastAttendee,isBroadcast is "+t.isBroadcast+",number is "+handlePhoneNumber(t.number)),e.next=6,T.broadcastAttendee(t.isBroadcast,t.number);case 6:if(!(n=e.sent)||0!==n.result){e.next=12;break}return I.info("broadcastAttendee success"),e.abrupt("return",n);case 12:return I.info("broadcastAttendee failed"),e.abrupt("return");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfEnded=function(e){if(null===T)return void I.info("handleConfEnded confservice is null");T.handleConfEnded(e)&&(w.beLeaveDataConf(),T=null,I.info("handleConfEnded,set confservice null"),coreConf.getConfInfoFromDb())},t.handleCallEndedPostConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=5;break}return e.next=3,T.handleCallEndedForOneKeyEnterConf(t);case 3:n=e.sent,n?(T=null,I.info("handleCallEndedPostConf,set confservice null")):I.warn("handleCallEndedPostConf callid is differ, no need to deal");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleSvcSeessionModify=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("handleSvcSeessionModify no conf service exist"),e.abrupt("return");case 3:T.handleSvcSeessionModify(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("HandleSvcConfWatchRet",e)}),ae=function(e){T?T.handleVideoWatchResult(e):I.error("handleVideoWatchResult,confService is null")},oe=function(e){T?T.handleLockConfResult(e):I.error("handleLockConfResult,confService is null")},ie=function(e){T?T.handleHandupAttendeeResult(e):I.error("handleHandupAttendeeResult,confService is null")},se=function(e){if(7===e.param.result&&!window.isSupportiDo)return void coreCommon.Observer.publish("UportalTokenErr",e);T&&T.handleConfSpeakerNotify(e)},ce=(t.handleTransToConfResult=function(e){T&&T.handleTransToConfResult(e)},t.updateConfMemberList=function(e){T&&T.updateConfMemberList(e)},t.sendWatchSvcRequest=function(e){if(T)return T.sendWatchSvcRequest(e.attendeeList,e.selfNum);I.info("sendWatchSvcRequest confService is null,selfNum="+handlePhoneNumber(e.selfNum))},t.confctrlWatchAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("confctrlWatchAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.confctrlWatchAttendee(t);case 5:if(n=e.sent,r=_e(),!n||0!==n.result){e.next=13;break}return coreUt.utEventStart(constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,t,[r,handlePhoneNumber(t)]),I.info("confctrlWatchAttendee success"),e.abrupt("return",n);case 13:return a=[r,handlePhoneNumber(t),0],n&&a.push(n.result),coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,a),I.info("confctrlWatchAttendee failed"),e.abrupt("return");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("handleMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",e.param)}),ue=function(e){I.info("handleCancelMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",-1)},fe=(t.changeActiveDirection=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("changeActiveDirection no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.changeActiveDirection(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cloudRecordRequest=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=3;break}return I.error("cloudRecordRequest no conf service exist"),e.abrupt("return");case 3:return e.next=5,T.cloudRecordRequest(t.messageId,t.switchType);case 5:if(n=e.sent,I.info("reacrd cloudRecordRequest[3] res:",(0,s.default)(n)),!n||0!==n.result){e.next=12;break}return I.info("reacrd success"),e.abrupt("return",n);case 12:I.info("reacrd failed",n.rsp),v.handleShowErrorMsgBox("START_PAUSE_RECORDING_FAILED");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("setRecordVideoResult",e)}),le=function(e){I.info("reacrd handleConfStateDirectBroadCastIndresult [1]",(0,s.default)(e)),coreCommon.Observer.publish("confStateDirectBroadCastIndresult",e)},de=function(e){I.info("reacrd handleRecordVideoStatusChairmanIndResult [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoStatusChairmanIndResult",e)},he=function(e){coreCommon.Observer.publish("cancelConf",e)},pe=(t.getIsSmcFirstRequestCharimanRest=function(){return null!==T&&T.getIsSmcFirstRequestCharimanRest()},t.setIsSmcFirstRequestCharimanRest=function(e){null!==T?T.setIsSmcFirstRequestCharimanRest(e):I.error("setIsSmcFirstRequestCharimanRest conservice is null")},t.getIsFirstEnterConf=function(){return null!==T&&T.getIsFirstEnterConf()},t.setIsFirstEnterConf=function(e){null!==T?T.setIsFirstEnterConf(e):I.error("setIsFirstEnterConf conservice is null")},t.getIsRecall=function(){return null!==T&&T.getIsRecall()},t.getUpdatedParticipants=function(){if(null!==T)return T.getUpdatedParticipants()},t.getSavedRecallInfo=function(){return null===T?"":T.getSavedRecallInfo()},function(e){T?T.handleConfstateLock(e):I.error("handleConfstateLock, confService is null")}),_e=t.getCurrentConfId=function(){return null===T?"":T.getCurrentConfId()};t.setIsAvcMultiViewBroadcast=function(e){if(null===T)return void I.error("confctrlWatchAttendee no conf service exist");T.setIsAvcMultiViewBroadcast(e)},t.getIsAvcMultiViewBroadcast=function(){return null!==T&&T.getIsAvcMultiViewBroadcast()},t.isVideoConf=function(){return!!T&&T.isVideoConf()},t.isDataConf=function(){return!!T&&T.isDataConf()},t.isSvcConf=function(){return!!T&&T.getIsSvc()},t.getSsrcRange=function(){return T?T.getSsrcRange():{}},t.getInfoOfConf=function(e){return T?T.getConfInfo(e):null},t.isUserEndConf=function(){return!!T&&T.isUserEndConf()},t.isMemberListNull=function(){return!T||T.isMemberListNull()}},601:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=r(a),i=n(3),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=window.Logger("api")("clkapi"),h=null,p=null,_=new Array,C=function(e){null!==h&&h.sendToTup(e)},v=function(){function e(){var t=this;return(0,u.default)(this,e),p&&h&&0===h.readyState?(d.info("API WebSocket is connecting"),p):p=new s.default(function(e,n){h&&1===h.readyState?e(t):(h=new WebSocket("ws://localhost:"+(window.CLIENTCONFIG.API_PORT||"7685"),"clk_api_call_service_protocol"),h.onopen=function(){d.info("API WebSocket is opened"),e(t)},h.onclose=function(){d.info("API WebSocket is closed"),h=null},h.onerror=function(e){d.info("API WebSocket is error, e = "+(0,o.default)(e)),h=null},h.onmessage=function(e){var t=JSON.parse(e.data);d.info("CloudLink Recive API message: ",t),t.cmd>0&&"function"==typeof _[t.cmd]&&_[t.cmd](t)})})}return(0,l.default)(e,[{key:"setCmdFunc",value:function(e,t){d.info("set cmd func, cmd = "+e),_[e]=t}},{key:"postRpsMessage",value:function(e,t){var n={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:t};C(n),d.debug("CloudLink Rsp to proxy: description = "+n.description+", rps = "+n.rps+", opt = "+n.opt+", call = "+n.call+", result = "+n.result)}},{key:"postRpsParamMessage",value:function(e,t,n){var r={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:n,param:t};C(r),d.debug("CloudLink Rsp param to proxy: description = "+r.description+", rps = "+r.rps+", opt = "+r.opt+", call = "+r.call+", result = "+r.result+", param = "+r.param)}},{key:"postNotifyMessage",value:function(e){d.debug(e.description,e),C(e)}}]),e}();t.default=v},602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DCONF_STATUS={NONE:0,JOINING:1,IN_CONF:2,JOIN_FAIL:3,LEAVING:4,LEFT:5},t.DFPLATFORM={platform:window.CLIENTCONFIG.PLATFORM,isWin:window.CLIENTCONFIG.ISWIN,isBigWin:window.CLIENTCONFIG.ISBIGWIN,isMac:window.CLIENTCONFIG.ISMAC,isMobile:window.CLIENTCONFIG.ISMOBILE,isPc:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISMAC||window.CLIENTCONFIG.ISBIGWIN,isWinBase:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN},t.IID_COMPONENT={BASE:0,DS:1,AS:2,WB:512},t.NATIVE_DATA_PARAMTYPE={CREATE_DOC_PAGE:0,SET_CURRENT_PAGE:1,SET_BG_COLOR:2,DELETE_PAGE:3,DELETE_DOC:4,SET_CANVAS_SIZE:5,SET_APP_BG_COLOR:6},t.DATA_FIREWALL_MODE={STG:0,SVN:1,SBC:2,NULL:3}},77:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwMobileConfSdk=void 0;var o=n(98),i=a(o),s=n(4),c=a(s),u=n(599),f=r(u),l=n(1112),d=r(l),h=n(850),p=r(h),_=n(951),C=r(_),v=n(1657),m=r(v),S=n(964),g=r(S),E=n(863),w=r(E),I=n(1714),T=r(I),N=n(158),b=r(N),O=n(1126),A=r(O),R=n(1125),y=r(R),L=n(962),M=r(L),D=n(1131),x=r(D),k=n(543),P=r(k),F=n(1119),U=r(F),B=n(963),W=r(B),H=n(400),V=r(H),$=n(953),G=r($),Y=n(1114),j=r(Y),q=n(502),J=r(q),z=n(186),K=r(z),X=n(862),Z=r(X),Q=n(1121),ee=r(Q),te=n(234),ne=r(te),re=n(1130),ae=r(re),oe=n(1128),ie=r(oe),se=n(1127),ce=r(se),ue=n(1129),fe=r(ue),le=n(966),de=r(le),he=n(965),pe=r(he),_e=n(967),Ce=r(_e),ve=n(1715),me=r(ve),Se=n(1132),ge=r(Se),Ee=n(209),we=r(Ee),Ie=n(1122),Te=a(Ie),Ne=n(601),be=a(Ne),Oe=n(224),Ae=r(Oe),Re=n(1716),ye=r(Re),Le=n(204),Me=r(Le),De=n(861),xe=r(De),ke=n(1717),Pe=r(ke),Fe=n(1718);t.HwMobileConfSdk=function e(){(0,c.default)(this,e),this.NativeWndService=Te.default,(0,i.default)(this,we),(0,i.default)(this,f),(0,i.default)(this,d),(0,i.default)(this,p),(0,i.default)(this,C),(0,i.default)(this,m),(0,i.default)(this,g),(0,i.default)(this,w),(0,i.default)(this,T),(0,i.default)(this,b),(0,i.default)(this,A),(0,i.default)(this,y),(0,i.default)(this,M),(0,i.default)(this,x),(0,i.default)(this,P),(0,i.default)(this,U),(0,i.default)(this,W),(0,i.default)(this,V),(0,i.default)(this,G),(0,i.default)(this,j),(0,i.default)(this,J),(0,i.default)(this,K),(0,i.default)(this,Z),(0,i.default)(this,ee),(0,i.default)(this,ne),(0,i.default)(this,ae),(0,i.default)(this,ie),(0,i.default)(this,ce),(0,i.default)(this,fe),(0,i.default)(this,de),(0,i.default)(this,pe),(0,i.default)(this,Ce),(0,i.default)(this,me),(0,i.default)(this,ge),this.clkAPIWebSocket=be.default,(0,i.default)(this,Ae),(0,i.default)(this,ye),(0,i.default)(this,Me),(0,i.default)(this,xe),(0,i.default)(this,Pe),(0,i.default)(this,(0,Fe.getConfApi)().getApiList()),this.confInfoMap=Fe.confInfoMap}},850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unnormalEnd=t.normalEnd=t.createXMLHttpRequest=void 0;var r=n(599),a=n(951),o=window.Logger("bigwinBuried")("buried");t.createXMLHttpRequest=function(){var e=void 0;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return e},t.normalEnd=function(e,t,n){o.info("buried normalEnd");var i=parseInt((new Date).getTime()/1e3,10),s=i-n;o.info(""+s);var c={endType:e,isUserEnd:t,holdTime:s};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("normalEnd",c)},t.unnormalEnd=function(e,t){o.info("buried unnormalEnd");var n=parseInt((new Date).getTime()/1e3,10),i=n-t;o.info(""+i),o.info("end call reason :",e);var s={holdTime:i,errId:e};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("abnormalEnd",s)}},851:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.COMMON_NOTIFY=t.MESSAGE_VIDEO_SUFFIX=t.MESSAGE_VIDEO=t.KEYBOARD=t.CURSOR_POSITION_TYPE=t.CLK_PLUGIN_CMD=t.LOG_UPLOAD_RESULT=t.ATTENDEE_TYPE=t.WINDOWS_SYSTEM_THEME=t.UPDATE_MODEL_CONTENT_TYPE=t.FORGETPWDACCOUNTTYPETITLE=t.LANGUAGETYPE=t.FORGETPWDACCOUNTTYPE=t.UserDefineType=t.MAKE_PAIR_FAILED_REASON=t.PAIR_CONF_RESULT=t.PAIR_CONF_COMMAND_SEQ=t.EN_CMPT_DETECT_ERROR=t.QUICK_REPLY_TXT=t.DATA_CLOUD_RECORD_TYPE=t.DATA_CONF_SHARE_OPERATE_TYPE=t.DATA_CONF_SHARE_TOKEN_TYPE=t.AUDIO_ROUTE_CHANGE_REASON=t.AUDIO_ROUTE_TYPE=t.COMPONENT_IID=t.CLICK_INTERVAL_TIME=t.FEEDBACK_TEXT_MAX_LENGTH=t.FEEDBACK_IMG_MAX_NUMBER=t.FEEDBACK_IMG_MAX_SIZE=t.MOBILE_SEND_PHOTO_TYPE=t.SYNERGISM_FAIL_REASON=t.TITLE_NEW_LINE=t.CALL_STATE=t.PAIR_CALL_STATE=t.PAIR_STATE=t.PAIR_TYPE=t.OPR_EVENT_TYPE=t.IM_MSG_TYPE=t.DESKTOP_SHARE_SET_SIZE=t.DESKTOP_SHARE_SETTING=t.TOOLBAR_EVENT_TYPE=t.SELECT_BOX_STATUS=t.SELECT_BOX_ACCESSPOINT=t.PROBE_COMPRESSED_PACKAGE=t.IMPORT_CERTIFICATE_TYPE=t.TIME_ZONE_FLAG=t.REQUEST_TYPE=t.SERVER_ADDRESS_SHA512=t.MEETING_NET_TYPE=t.REQUEST_CHAIRMAN=t.CALL_MEDIA_TYPE=t.CALL_IN_OUT_TYPE=t.VIDEO_EXTRA_SIZE=t.CALL_VIDEO_SCREEN_STATE=t.DATA_CONF_SHARRING_STATUS=t.CALL_VIDEO_STATUS=t.CON_CREATE_MEETING_STATUS=t.LOGIN_STATUS=t.LOGIN_MODE=t.LOGIN_ERROR_TYPE=t.VIDEO_SIZE_BITE=t.VIDEO_SMALL_SIZE=t.BFCP_TRANS_TYPE=t.NETWORK_TYPE=t.CHR_UPLOAD_ITEM=t.SCREEN_ORIENTATION=t.APP_STATE=t.DEVICE_TYPE=t.SHOW_DATACONF_MODE=t.SCREEN_CODE=t.LOGOUT_TYPE=t.RESUME_EVENT=t.CLIENT_DESC=t.AUTH_TYPE=t.USER_AGENT=t.CLIENT_TYPE=t.KEY_CODE_ENTER=t.SERVER_PUBLIC_PATH=t.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG=t.SVC_ANDROID_PHONE_VIDEO_CAMERA_PARAM=t.ANDROID_PHONE_VIDEO_CAMERA_PARAM=t.SVC_IOS_PHONE_VIDEO_CAMERA_PARAM=t.IOS_PHONE_VIDEO_CAMERA_PARAM=t.CONF_PARTICIPANT_STATUS_TYPE=t.CONF_MSG_TYPE=t.BOOLEAN=t.GROUP_NOTIFY_TYPE=t.CLOSE_WAYS=t.MUTE_STATE=void 0,t.SEARCH_MESSAGE_TYPE_VALUE=t.SEARCH_MESSAGE_TYPE=t.CONTACT_SELECT_DIALOG_TYPE=t.SLIDER_DETAIL_TYPE=t.MEDIA_ACTIVITY_BTN_TYPE=t.GROUP_JOIN_FLAG=t.IS_DEALED_APPLY=t.IS_READ=t.IS_SENT=t.IS_RECEIVED=t.IS_LASTMSG=t.IS_QUOTE=t.IS_DELETE=t.IS_UPLOADED=t.IS_DOWNLOADED=t.JOIN_CONF_PASSWORD_INPUT_STATE=t.SIP_ONLY_TYPE=t.SIP_REGISTER_STATE=t.UPORTAL_LOGIN_STATE=t.CONF_AUDIO_STATE=t.EMOJI_TYPE=t.MSGSUBFLAG=t.EDITOR_TOOL_BAR=t.builtPlacements=t.DEAL_ERROR=t.HIDE_OR_SHOW_WINDOW=t.EXIT_OR_DISSOLUTION_GROUP=t.RIGHT_MENU_TYPE=t.SIZE_TO_PXS=t.SIZE_TO_PX=t.PX_TO_SIZES=t.PX_TO_SIZE=t.FILE_STATUS=t.SYS_SPK_MUTE=t.CONTACT_TAB_LIST=t.GROUP_TAB_LIST=t.FILE_TYPE=t.DOWNLOAD_IMAGE_STATE=t.FILE_DEAL_TYPE=t.FIX_DISCUSS=t.GROUP_TYPE=t.NOTIFICATION_MESSAGE_TYPE=t.MEDIA_STATUS=t.CALL_CONST=t.isMobile=t.KEYPAD_CONST=t.USER_INFO=t.SEARCH_STATUS=t.IS_ENCRYPT=t.QUERY_OPERATION_TYPE=t.SEND_STATUS=t.INPUT_TYPE=t.CALL_STATUS=t.GROUP_STATE=t.CONTACT_STATE=t.CARD_TYPE=t.BUBBLE_TYPE=t.MEDIA_TYPE=t.EADDR_CONTACT_RESULT_CODE=t.FILE_MEDIA_TYPE=t.CONTENT_TYPE=t.SOURCE_FLAG=t.IM_TYPE=t.OWNER_TYPE=t.ACTIVE_USER=t.RECENT_INFO_TYPE=t.CHAT_TYPE=t.ONLINE_STATUS=t.CONF_IS_MULTI_STREAM=t.SET_AVATAR_NUMBER=t.CONTACT_NUMBER=t.CONF_MEDIATYPE=t.CALL_FIREWALL_MODE=t.SVC_HWND_TYPE=t.SVC_VERSION_FLAG=t.SVC_MAX_SIZE_FOR_PAGE=t.SVC_SSRC_FLAG=t.SVC_BAND_MODE=t.SVC_VIEW_MODE=t.AVC_VIEW_MODE=t.MUTI_WATCH_RATIO=t.IM_STG_MODE=t.FIREWALL_MODE=t.ACCOUNT_TYPE=t.ConfSharingType=t.LOGIN_TYPE=t.ERR_START=t.ErrorLogInfo=t.ErrorInfo=t.OffLineErrorCode=t.SELECT_BOX_RECEIVE_TYPE=t.CHILD_SEND_TYPE=t.CHILD_RECEIVE_TYPE=t.EADDR_SERVER_TYPE=t.AVATAR_SIZE=t.MobileAppConfig=t.AppConfig=t.SERVICE_PROFILE_FUNC_ID_LIST=t.MEDIA_X_ERROR_INFO=t.MEDIA_X_ERROR_CODE=void 0;var a=n(852),o=r(a),i=n(854),s=r(i),c=n(856),u=r(c),f=n(857),l=r(f),d=n(860),h=function(e){return e&&e.__esModule?e:{default:e}}(d);t.MEDIA_X_ERROR_CODE=o.MEDIA_X_ERROR_CODE,t.MEDIA_X_ERROR_INFO=o.MEDIA_X_ERROR_INFO,t.SERVICE_PROFILE_FUNC_ID_LIST=s.SERVICE_PROFILE_FUNC_ID_LIST,t.AppConfig=s.AppConfig,t.MobileAppConfig=s.MobileAppConfig,t.AVATAR_SIZE=u.AVATAR_SIZE,t.EADDR_SERVER_TYPE=u.EADDR_SERVER_TYPE,t.CHILD_RECEIVE_TYPE=l.CHILD_RECEIVE_TYPE,t.CHILD_SEND_TYPE=l.CHILD_SEND_TYPE,t.SELECT_BOX_RECEIVE_TYPE=l.SELECT_BOX_RECEIVE_TYPE,t.OffLineErrorCode=h.default,t.ErrorInfo=d.ErrorInfo,t.ErrorLogInfo=d.ErrorLogInfo,t.ERR_START=d.ERR_START,t.LOGIN_TYPE={BASE:0,HWUC:1},t.ConfSharingType={Program:0,Document:1,Desktop:2,None:99},t.ACCOUNT_TYPE={NORMAL:0,IS_FREE:1},t.FIREWALL_MODE={LOGIN_E_FIREWALL_MODE_ONLY_HTTP:0,LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN:1,LOGIN_E_FIREWALL_MODE_NULL:2},t.IM_STG_MODE={NO_STG:0,USE_STG:1,USE_TLS:2},t.MUTI_WATCH_RATIO={MUTI_WATCH_RATIO_1080:{width:1920,height:1080},MUTI_WATCH_RATIO_720:{width:1280,height:720},MUTI_WATCH_RATIO_540:{width:960,height:540},MUTI_WATCH_RATIO_480:{width:720,height:480},MUTI_WATCH_RATIO_360:{width:640,height:360},MUTI_WATCH_RATIO_270:{width:480,height:270},MUTI_WATCH_RATIO_180:{width:320,height:180},MUTI_WATCH_RATIO_90:{width:160,height:90}},t.AVC_VIEW_MODE={AUDIO_MODE:0,VIDEO_MODE:1,BFCP_MODE:12,MIN_WIN_MIN:13,MIN_WIN_SINGLE:14,MIN_FLOAT_BIG_ONE:15,MIN_WIM_FLOAT:16},t.SVC_VIEW_MODE={BIG_SMALL_MODE:2,DIVIDE_MODE:3,PIC_IN_PIC_MODE:4,BFCP_MODE:5,MIN_WIN_MIN:6,MIN_WIN_SINGLE:7,MIN_WIN_VERTICAL:8,MIN_FLOAT_BIG_ONE:9,MIN_WIM_FLOAT:11},t.SVC_BAND_MODE={HIGH_BAND:0,MIDDLE_BAND:1,LOW_BAND:2},t.SVC_SSRC_FLAG={LOCAL_SSRC:-1,SHARE_SSRC:-2,BFCP_SSRC:-3},t.SVC_MAX_SIZE_FOR_PAGE={BS_MAX_SIZE:5,DV_MAX_SIZE:25,BIGWIN_DV_MAX_SIZE:16,LOW_BS_MAX_SIZE:3,LOW_DV_MAX_SIZE:4,PIP_MAX_SIZE:1,MIN_WIN_VERTICAL_SIZE:4},t.SVC_VERSION_FLAG={BIG:0,BASE:1},t.SVC_HWND_TYPE={SMALL_VIDEO:0,BIG_VIDEO:1,BFCP:2,AUDIO:3},t.CALL_FIREWALL_MODE={CALL_E_FIREWALL_MODE_LINE:0,CALL_E_FIREWALL_MODE_STG:1,CALL_E_FIREWALL_MODE_INNERSVN:2,CALL_E_FIREWALL_MODE_BUTT:3},t.CONF_MEDIATYPE={CONF_MEDIATYPE_FLAG_VOICE:1,CONF_MEDIATYPE_FLAG_VIDEO:2,CONF_MEDIATYPE_FLAG_VOICE_VIDEO:3,CONF_MEDIATYPE_FLAG_HDVIDEO:4,CONF_MEDIATYPE_FLAG_VOICE_HDVIDEO:5,CONF_MEDIATYPE_FLAG_TELEPRESENCE:8,CONF_MEDIATYPE_FLAG_DATA:16,CONF_MEDIATYPE_FLAG_VOICE_DATA:17,CONF_MEDIATYPE_FLAG_VIDEO_DATA:19,CONF_MEDIATYPE_FLAG_HDVIDEO_DATA:21,CONF_MEDIATYPE_FLAG_DESKTOPSHARING:32},t.CONTACT_NUMBER={MAX_CONTACT_NUM:1e3,MAX_GROUP_NUM:200},t.SET_AVATAR_NUMBER={MAX_HISTORY_NUM:5,MAX_IMAGE_FILE_SIZE:10485760},t.CONF_IS_MULTI_STREAM={IS_NOMULTI_STREAM:0,IS_MULTI_STREAM:1},t.ONLINE_STATUS={OFFLINE:0,ONLINE:1,HIDDEN:2,BUSY:3,LEAVE:4,DO_NOT_DISTURB:5,MOBILE_ONLINE:6},t.CHAT_TYPE={SINGLE_CHAT:0,SINGLE_CHAT_TEMPORARY:1,GROUP_CHAT:2,GROUP_CHAT_TEMPORARY:3,SERVICE_ONLINE:4,REMINDER:5,DISCUSSION_GROUP:6,FILE_TRANSFER_NOTIFICATION:7,SYSTEM_NOTIFICATION:10,SYSTEM_ADVERTISING:11,FUSION_MEETING_NOTIFICATION:14,IM_NOTIFICATION_MESSAGE:20,AUTO_REPLY:101,CUSTOM_CHAT:111},t.RECENT_INFO_TYPE={ANNOUNCEMENT:0,MEMBER:1,IMG_AND_VIDEO:2,FILE:3,LINK:4,TEAM_SPACE:5},t.ACTIVE_USER={PC:8,MOBILE:3,MAC:3},t.OWNER_TYPE={MINE:"mine",OTHERS:"others"},t.IM_TYPE={SINGLE:0,GROUP:1,SHORT_MESSAGE:2,SYSTEM_ANNOUNCEMENT:3,OTHER:4},t.SOURCE_FLAG={IM:0,MEETING:1},t.CONTENT_TYPE={TEXT:0,RICH_TEXT:1},t.FILE_MEDIA_TYPE={FILE:"File",AUDIO:"Audio",VIDEO:"Video",FAX:"Fax",Img:"Img"},t.EADDR_CONTACT_RESULT_CODE={SUCCESS:"50000",NO_CHANGE:"50001",FAILED:"50002"},t.MEDIA_TYPE={TEXT:0,AUDIO:1,VIDEO:2,PHOTO:3,FILE:4,PUBLIC_NUMBER:5,SCREEN_SHOT:3,CARD:7,PHOTO_TEXT:8,SHARE:10,QUOTE:11,GROUP_NOTIFY:12,GROUP_MEMBERCHG_NOTIFY:13,CALL_RECORD_NOTIFY:14,LIKE:15,WITHDRAW_NOTIFY:16,APPLY_JOIN_FIXED_GROUP_NOTIFY:17,UPGRADE_TO_FIXED_GROUP_NOTIFY:18,AUTO_REPLY:19,CHANGE_JOIN_GROUP_VERIFY:20,GROUP_NAME_CHANGE:21,CALL_AUDIO:100,CALL_VIDEO:101,MOBILE_AUDIO:200,MOBILE_VIDEO:201,DANGEROUS:444},t.BUBBLE_TYPE={UNDEFINED:"undefined",DANGEROUS:"dangerous",NORMAL:"normal",AUDIO:"audio",VOICE:"voice",VIDEO:"video",PHOTO:"photo",FILE:"file",SCREEN_SHOT:"screen shot",CARD:"card",SHARE_FILE:"share file",SHARE_KNOWLEDGE:"share knowledge",QUOTE:"quote",LIKE:"like",CALL_AUDIO:"call audio",CALL_VIDEO:"call video",MOBILE_AUDIO:"mobile audio",MOBILE_VIDEO:"mobile video"},t.CARD_TYPE={PERSON:18,FILE:41,ESpaceSharingTypeText:0,ESpaceSharingTypeImgAndText:1,ESpaceSharingTypeAudioAndVideo:2,ESpaceSharingTypeActivity:3,ESpaceSharingTypeRedPacket:7,ESpaceSharingTypeLocation:8,ESpaceSharingTypeFavorites:9,ESpaceSharingType2ndRedPacket:10,ESpaceSharingTypeCard:16,ESpaceSharingTypeNew:-1,ESpaceSharingTypeNewCard:1,ESpaceSharingTypeTeamCard:17,ESpaceSharingTypeExpertCard:18,ESpaceSharingTypeCombineTransmit:19,ESpaceSharingTypePosition:20,ESpaceSharingTypeCloudText:32,ESpaceSharingTypeCloudImage:33,ESpaceSharingTypeCloudAudio:34,ESpaceSharingTypeCloudVideo:35,ESpaceSharingTypeCloudWord:36,ESpaceSharingTypeCloudExcel:37,ESpaceSharingTypeCloudPPT:38,ESpaceSharingTypeCloudPDF:39,ESpaceSharingTypeCloudOther:40,ESpaceSharingTypeCloudFolder:41,ESpaceSharingTypeThirdPartyCustom:48,ESpaceThirdSystemMsgPush:49,UNDEFINED:65536},t.CONTACT_STATE={ADD:48,DELETE:49},t.GROUP_STATE={ADD:"0",DELETE:"1"},t.CALL_STATUS={CALLED:"called",CALLING:"calling",NO_CALL:"no_call",ANSWERED:"answered",ANSWERING:"answering",NO_ANSWER:"no_answer"},t.INPUT_TYPE={INPUTTING:0,STOP:1},t.SEND_STATUS={success:1,error:0,resend:2},t.QUERY_OPERATION_TYPE={NORMAL:0,FIRST:1},t.IS_ENCRYPT={YES:1,NO:0},t.SEARCH_STATUS={none:0,searching:1,searchover:2},t.USER_INFO={CALL_INFO:{bind_no:"CALL_TYPE_VOIP",espacenumber:"CALL_TYPE_VOIP",home_phone:"CALL_TYPE_HOME_PHONE",ip_phone:"CALL_TYPE_IP_PHONE",mobile:"CALL_TYPE_MOBILE",other_mobiles:"OTHER_MOBILES",office_phone:"OFFICE_PHONE",office_phone2:"HARDWARE_TERMINAL_PHONE",other_phone:"CALL_TYPE_OTHER_PHONE",other_phone2:"CALL_TYPE_OTHER_PHONE2",short_phone:"HARDWARE_TERMINAL_PHONE",im_no:"IM_NO"},VIDEO_INFO:{bind_no:"CALL_TYPE_VOIP",espacenumber:"CALL_TYPE_VOIP",home_phone:"CALL_TYPE_HOME_PHONE",ip_phone:"CALL_TYPE_IP_PHONE",office_phone:"OFFICE_PHONE",office_phone2:"HARDWARE_TERMINAL_PHONE",other_phone:"CALL_TYPE_OTHER_PHONE",other_phone2:"CALL_TYPE_OTHER_PHONE2",short_phone:"HARDWARE_TERMINAL_PHONE",im_no:"IM_NO"}},t.KEYPAD_CONST={DIAL_NUM_LIST:["1","2","3","4","5","6","7","8","9","*","0+","#"],KEY_AUDIO_SRC:"../resources/audio/key/",KEY_AUDIO_LIST:["0.wav","1.wav","2.wav","3.wav","4.wav","5.wav","6.wav","7.wav","8.wav","9.wav","10.wav","11.wav"],MAX_DIAL_NUM_LEN:128,DISTANCE:200,LOAD_LENGTH:50,ON_HOLD_TIME_STAMP:400,BTN_HIGH_LIGHT_TIME:150},t.isMobile=!1,t.CALL_CONST={PROMPT_CALL_FAILED:"CALL_CALLING_FAILED",PROMPT_PREVENT_TWO_CALLS:"PREVENT_TWO_CALLS",PREVENT_TWO_OUTGOING_CALL:"PREVENT_TWO_OUTGOING_CALL",CALL_HOLD_FAILED:"CALL_HOLD_FAILED",CALL_UNHOLD_FAILED:"CALL_UNHOLD_FAILED",PROMPT_SIP_NOT_REG:"CALL_SIP_NOT_REG",MAX_CALL_LENGTH:2,MAX_VIDEO_CALL_LENGTH:1,DTMF_MAX_VALUE:11,DTMF_NUM_LIST:["1","2","3","4","5","6","7","8","9","*","0","#"],TIME_RE_REGISTER:2e3,VOLUME_MAX:100,VOLUME_DEFAULT:50,NOTIFY_WIDTH:310,NOTIFY_HEIGHT:191,BOTTOM_MAX:90,VIBRATE_DISTANCE:1e3,VIBRATE_CYCLE:2e3,VOLUME_CIRCLE_SIZE:12,CALL_NUM_LIST:["bind_no","home_phone","ip_phone","mobile","other_mobiles","office_phone","other_phone","other_phone2","short_phone","voip","im_no"]},t.MEDIA_STATUS={NORMAL:-1,SEND:7,SENDING:0,SEND_SUCCESS:1,SEND_ERROR:2,RECEIVE:3,RECEIVING:4,RECEIVE_SUCCESS:5,RECEIVE_ERROR:6,CANCEL_SEND:7,ERROR:-100},t.NOTIFICATION_MESSAGE_TYPE={MESSIONED:0,NOTIFICATION:1,REFERENCE:2},t.GROUP_TYPE={FIXED_GROUP:0,DISCUSS_GROUP:1},t.FIX_DISCUSS={NO:0,YES:1},t.FILE_DEAL_TYPE={DOWNLOAD:0,UPLOAD:1,SEND:2,RECEIVE:3,RE_RECEIVE:4,RE_DOWNLOAD:5},t.DOWNLOAD_IMAGE_STATE={DOWNLOADING:2,DOWNLOADED:3,FAILED:4},t.FILE_TYPE={NORMAL:9,AUDIO:8,VOICE:7,VIDEO:6,SHORT_VIDEO:5,PHOTO:4},t.GROUP_TAB_LIST={setting:0,member:1,files:2,album:3},t.CONTACT_TAB_LIST={information:0,number:1},t.SYS_SPK_MUTE={IS_MUTE:1,UN_MUTE:0},t.FILE_STATUS={upload:"upload",download:"download",failed:"fail"},t.PX_TO_SIZE={"10px":8,"13px":10,"15px":12,"18px":14,"20px":16,"23px":18,"26px":20,"28px":22},t.PX_TO_SIZES={"8px":8,"10px":10,"12px":12,"14px":14,"16px":16,"18px":18,"20px":20,"22px":22},t.SIZE_TO_PX={8:"10px",10:"13px",12:"15px",14:"18px",16:"20px",18:"23px",20:"26px",22:"28px"},t.SIZE_TO_PXS={8:"8px",10:"10px",12:"12px",14:"14px",16:"16px",18:"18px",20:"20px",22:"22px"},t.RIGHT_MENU_TYPE={SEARCH_LIST:0,RECENT_LIST:1,CONTACT_GROUP:2,CONTACT_LIST:3,GROUP_LIST:5,CONVERSATION:6,EDITOR:7,CONF_MEMBERLIST:8,GROUP_MEMBER:9,SETTING_LIST:10,SVC_CANVAS_LIST:11,PHONE_LINKAGE:12,ADD_CONTACT:13,IPC_MORE_MENU:14,LOGIN_SETTING_MENU:15,CONF_DETAIL_QRCODE:16,TEAM_LIST:17,CORP_CONTACT_LIST:18,LIST_CONTACT_LIST:19,GROUP_CONTACT_LIST:20},t.EXIT_OR_DISSOLUTION_GROUP={EXIT_GROUP:0,DISSOLUTION_GROUP:1},t.HIDE_OR_SHOW_WINDOW={HIDE_WINDOW:0,SHOW_WINDOW:1},t.DEAL_ERROR="dealWasError",t.builtPlacements={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},topRight:{points:["br","tr"]},bottomRight:{points:["tr","br"]},bottomLeft:{points:["tl","bl"]},center:{points:["cc","cc"]},userInfoPop:{points:["tl","cc"],offset:[-120,24]}},t.EDITOR_TOOL_BAR={FONT:"font",EMOTION:"emotion",ACCESSORY:"accessory",SCREEN_SHOT:"screen-shot",PULL_DOWN:"pull-down",CARD:"card",FAVOUR:"favour",HISTORY:"history",AT:"at",LIKE:"like",QUICKREPLY:"quick-reply"},t.MSGSUBFLAG={NORMAL:0,ANNOUNCEMENT:1},t.EMOJI_TYPE={SYSTEM:"system",COLLECTION:"collection"},t.CONF_AUDIO_STATE={CONF_AUDIO_INVITING:1,CONF_AUDIO_INCONF:5,CONF_AUDIO_QUIT:6},t.UPORTAL_LOGIN_STATE={UPORTAL_LOGIN_UNLOGIN:0,UPORTAL_LOGIN_LOGINING:1,UPORTAL_LOGIN_SUCCESS:2,UPORTAL_LOGIN_FAILED:3},t.SIP_REGISTER_STATE={SIP_REGISTER_UNREGISTER:0,SIP_REGISTER_REGISTERING:1,SIP_REGISTER_DEREGISTERING:2,SIP_REGISTER_REGISTERED:3,SIP_REGISTER_BUTT:4},t.SIP_ONLY_TYPE={SIP_ONLY_TYPE_NORMAL:0,SIP_ONLY_TYPE_HAS_SIP:1,SIP_ONLY_TYPE_HAS_UPORTAL_NO_SIP:2,SIP_ONLY_TYPE_NO_UPORTAL_NO_SIP:3},t.JOIN_CONF_PASSWORD_INPUT_STATE={UNKNOWN:-1,NEED:0,NOT_NEED:1,HAS_INPUT:2,HAS_USED:3},t.IS_DOWNLOADED={YES:1,NO:0},t.IS_UPLOADED={YES:1,NO:0},t.IS_DELETE={YES:1,NO:0},t.IS_QUOTE={YES:1,NO:0},t.IS_LASTMSG={YES:1,NO:0},t.IS_RECEIVED={YES:1,NO:0},t.IS_SENT={YES:1,NO:0},t.IS_READ={YES:1,NO:0},t.IS_DEALED_APPLY={YES:1,NO:0},t.GROUP_JOIN_FLAG={AUTO_JOIN:0,APPLY_JOIN:1},t.MEDIA_ACTIVITY_BTN_TYPE={SEND:"send",COMPLETE:"complete"},t.SLIDER_DETAIL_TYPE={contact:"Contact",group:"Group"},t.CONTACT_SELECT_DIALOG_TYPE={CONTACT_SELECT_DIALOG_DISCUSSGROUP:1,CONTACT_SELECT_DIALOG_CONFADDMEMBER:2,CONTACT_SELECT_DIALOG_RELAYMESSAGE:3,CONTACT_SELECT_DIALOG_ADD_CONTACT:4,CONTACT_SELECT_DIALOG_MOBILE_P2PTRANSTOCONF:5,CONTACT_SELECT_DIALOG_P2PTRANSTOGROUP:6,CONTACT_SELECT_DIALOG_TEMPMEETING:7,CONTACT_SELECT_DIALOG_TRANSFERCALL:8,CONTACT_SELECT_DIALOG_AT_GROUP_MEMBER:9,CONTACT_SELECT_DIALOG_DEL_CONTACT:10},t.SEARCH_MESSAGE_TYPE={SEARCH_TEXT:0,SEARCH_PICTURE:1,SEARCH_FILE:2,SEARCH_FILE_PICTURE:3},t.SEARCH_MESSAGE_TYPE_VALUE={PICTURE:1,FILE:2},t.MUTE_STATE={MUTE_STATE_UNMUTE:0,MUTE_STATE_MUTE:1,MUTE_STATE_TOUNMUTE:2,MUTE_STATE_TOMUTE:3},t.CLOSE_WAYS={CLOSE_APP:"close",MINIMIZE_APP:"minimizeApp"},t.GROUP_NOTIFY_TYPE={DISMISS_GROUP_NOTIFY:0,LEAVE_GROUP_NOTIFY:1,GROUP_MEMADD_NOTIFY:2,GROUP_OWNERCHG_NOTIFY:3,RECEIVE_JOIN_GROUP_NOTIFY:4,BEEN_REFUSED_GROUP_NOTIFY:5},t.BOOLEAN={TRUE:"true",FALSE:"false"},t.CONF_MSG_TYPE={TYPE_IN_CONFERENCE:0,TYPE_ENTER_CONFERENCE:1,TYPE_LEAVE_CONFERENCE:2,TYPE_OTHER_STATE:3,TYPE_TOP_SHOW:4,TYPE_GET_DESK_CONTROL:5,TYPE_LOSE_DESK_CONTROL:6,TYPE_CONTROLING_DESK:7,TYPE_RECOVER_CONTROL:8,TYPE_BE_REJECT_CONTROL:9,TYPE_CANCEL_CONTROL:10},t.CONF_PARTICIPANT_STATUS_TYPE={CONF_PARTICIPANT_STATUS_IN_CONF:0,CONF_PARTICIPANT_STATUS_CALLING:1,CONF_PARTICIPANT_STATUS_JOINING:2,CONF_PARTICIPANT_STATUS_LEAVED:3,CONF_PARTICIPANT_STATUS_NO_EXIST:4,CONF_PARTICIPANT_STATUS_BUSY:5,CONF_PARTICIPANT_STATUS_NO_ANSWER:6,CONF_PARTICIPANT_STATUS_REJECT:7,CONF_PARTICIPANT_STATUS_CALL_FAILED:8},t.IOS_PHONE_VIDEO_CAMERA_PARAM=[{captureRotation:3,localDisRotation:3,collectMode:1},{captureRotation:2,localDisRotation:2,collectMode:0},{captureRotation:1,localDisRotation:1,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0},{captureRotation:3,localDisRotation:3,collectMode:1},{captureRotation:0,localDisRotation:2,collectMode:0},{captureRotation:1,localDisRotation:1,collectMode:1},{captureRotation:2,localDisRotation:0,collectMode:0}],t.SVC_IOS_PHONE_VIDEO_CAMERA_PARAM=[{captureRotation:3,localDisRotation:0,collectMode:1},{captureRotation:2,localDisRotation:0,collectMode:0},{captureRotation:1,localDisRotation:0,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0},{captureRotation:3,localDisRotation:0,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0},{captureRotation:1,localDisRotation:0,collectMode:1},{captureRotation:2,localDisRotation:0,collectMode:0}],t.ANDROID_PHONE_VIDEO_CAMERA_PARAM=[{captureRotation:3,localDisRotation:3,collectMode:1},{captureRotation:2,localDisRotation:2,collectMode:0},{captureRotation:1,localDisRotation:1,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0},{captureRotation:1,localDisRotation:3,collectMode:1},{captureRotation:2,localDisRotation:2,collectMode:0},{captureRotation:3,localDisRotation:1,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0}],t.SVC_ANDROID_PHONE_VIDEO_CAMERA_PARAM=[{captureRotation:3,localDisRotation:0,collectMode:1},{captureRotation:2,localDisRotation:0,collectMode:0},{captureRotation:1,localDisRotation:0,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0},{captureRotation:1,localDisRotation:0,collectMode:1},{captureRotation:2,localDisRotation:0,collectMode:0},{captureRotation:3,localDisRotation:0,collectMode:1},{captureRotation:0,localDisRotation:0,collectMode:0}],t.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG=[{width:1280,height:720},{width:1120,height:630},{width:960,height:540},{width:800,height:450},{width:640,height:360},{width:480,height:270},{width:320,height:180},{width:160,height:90}],t.SERVER_PUBLIC_PATH={EMOTION_PATH:"file:///UC.InternalImg//emotion/",IMAGE_PATH:"file:///UC.ExternalImg//temp/"},t.KEY_CODE_ENTER=13,t.CLIENT_TYPE={PC:0,MOBILE:1,WEB:2,PAD:3},t.USER_AGENT={PC:"WeLink-desktop",MOBILE:"WeLink-Mobile "},t.AUTH_TYPE={NORMAL:0,TICKET:1,TICKET_WITH_USERNAME:2},t.CLIENT_DESC={PC:"WeLink Desktop",MOBILE:"WeLink Mobile"},t.RESUME_EVENT={IP_CHANGE:"ipchange",AWAY_OFFLINE:"offline",BACK_ONLINE:"online",SESSION_TIMEOUT:"sessionTimeout",SUSPEND:"suspend"},t.LOGOUT_TYPE={LOGOUT:"logout",EXIT:"exit",SETOFFLINE:"setOffline"},t.SCREEN_CODE={DBLCLICK:1,FINISH:8,ENTERPRESS:13},t.SHOW_DATACONF_MODE={SHOW_DATACONF_NONE:0,SHOW_DATACONF_NORMAL:1,SHOW_DATACONF_FULL:2},t.DEVICE_TYPE={WINDOWS:11,MAC:22,ANDROID:33,IOS:44},t.APP_STATE={DISCONNECTED:0,ONLINE:1,CONNECTING:2,RECONNECTING:3,NETWORK_ERROR:4,CONNECT_FAILED:5,RECONNECT_FAILED:6},t.SCREEN_ORIENTATION={SCREEN_ORIENTATION_SENSOR:0,SCREEN_ORIENTATION_PORTRAIT:1,SCREEN_ORIENTATION_LANDSCAPE:2},t.CHR_UPLOAD_ITEM={OPEN:"open",CLOSE:"close",AUTO:"auto"},t.NETWORK_TYPE={TYPE_NONE:0,TYPE_WIFI:1,TYPE_2G:2,TYPE_3G:3,TYPE_4G:4},t.BFCP_TRANS_TYPE={BFCP_TRANS_UDP:1,BFCP_TRANS_TCP:2,BFCP_TRANS_TLS:4},t.VIDEO_SMALL_SIZE={WIDTH:200,HEIGHT:115},t.VIDEO_SIZE_BITE={SIZE_16_B_9:{width:16,height:9},SIZE_9_B_16:{width:9,height:16}},t.LOGIN_ERROR_TYPE={sip:"SIP_LOGIN_ERROR",uportal:"UPORTAL_LOGIN_ERROR",eserver:"ESERVER_LOGIN_ERROR",eabserver:"EADDR_LOGIN_ERROR",common:"LOGIN_COMMON_ERROR"},t.LOGIN_MODE={IM:0,TE:1,TEMP_CONF:2},t.LOGIN_STATUS={NONE:0,ING:1,CONNECTING:2,ONLINE:3,OFFLINE:4},t.CON_CREATE_MEETING_STATUS={VIDEO_TYPE:5,AUDIO_TYPE:1,VOICE_DATA_TYPE:17,DATA_MULTIMEDIA_TYPE:21},t.CALL_VIDEO_STATUS={CALL_OUT:"CALL_OUT",CALL_CONNECTED:"CALL_CONNECTED",VIDEO_OUT:"VIDEO_OUT",VIDEO_CONNECTED:"VIDEO_CONNECTED",CALL_INCOMING:"CALL_INCOMING",SWITCH_TO_VIDEO:"SWITCH_TO_VIDEO",VIDEO_TRANSTO_CONF:"VIDEO_TRANSTO_CONF",CALL_TRANSTO_CONF:"CALL_TRANSTO_CONF"},t.DATA_CONF_SHARRING_STATUS={SENDING:"DATA_CONF_SHARRING_STATUS_Sending",RECEIVING:"DATA_CONF_SHARRING_STATUS_Receiving",IDLE:""},t.CALL_VIDEO_SCREEN_STATE={FULL:"full",MAX:"max",MIN:"min",EXTRA:"extra"},t.VIDEO_EXTRA_SIZE={WIDTH:312,HEIGHT:176},t.CALL_IN_OUT_TYPE={CALL_IN:0,CALL_OUT:1,CALL_MISSED:2},t.CALL_MEDIA_TYPE={AUDIO:0,VIDEO:1},t.REQUEST_CHAIRMAN={NEED_PASSWORD:1347440786,CHAIR_EXITS:5,CHAIR_PWD_ERR:6},t.MEETING_NET_TYPE={USM_MEETING:1,SMC_MEETING:2,MEDIAX_MEETING:3},t.SERVER_ADDRESS_SHA512={HWUC:"e75208978e7bc67d3b62abf6fc11848ff9f5b31d981900946078448b4a275d634fd9b460c2c11ff95136a0d5187fc4f885ad78843e1d6b28353467c163ed6727",CLOUDEC:"8f27dd804adc153f648790748784e1fa44801011417230cc40cedf6d0f08166fedfe13b6555b379255915f0e4e0e4210081f3d7fa938ad969db7ac470e3fead8",ACLOUDEC:"10a68cd71466c28aabbb18af65933b50343318e7a60144abbba0b390db0f35e1382f2a0c5ccba019af6324e16cd63181472767dddfc8c1bc654862c99a925a48",BCLOUDEC:"51898f228d693095c86c27280bca921e6ad239c808a181230b90d84810131f8c13db945c9d14b576dc818104cb3eefb8c76edd4286defdbb9ff81d663c8a06c3",CLOUDECMEETING:"bed610b8246affe5b5b6a3e26c5d0ae985a08f8dfcd45529594c22c0143623115df002793a8423f2fa6e3214b2ff68722acb245d361eb30016e1f66d72424036",BCLOUDECMEETING:"31fd702f0ce8e950c3508e280222c08fd98b4c6aa5fe7c2a962a91ac945633e5d6d0e3cc0fad227906053f10f2f31561ee6d1e056e6fce3b4b8a21bfa0f93190",ECADMIN:"9e58f56e3d23259c7911771800353bcab4de1a4dd02197dbb9b338c2f1e68ba2aac9779b40b9996f5ee100ba1a505e48045c4f530b482d359faf3fb5b871b706",XBDCLOUDEC:"10a68cd71466c28aabbb18af65933b50343318e7a60144abbba0b390db0f35e1382f2a0c5ccba019af6324e16cd63181472767dddfc8c1bc654862c99a925a48"},t.REQUEST_TYPE={POST:0,DELETE:1,PUT:2,GET:3,BUTT:4},t.TIME_ZONE_FLAG=[-12,-11,-10,-9,-8,-7,-7,-6,-6,-6,-6,-5,-5,-5,-4,-4,-4,-3.5,-3,-3,-3,-2,-1,-1,0,0,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3.5,4,4,4.5,5,5,5.5,5.75,6,6,6,6.5,7,7,8,8,8,8,9,9,9,9.5,9.5,10,10,10,10,11,11,12,12,13],t.IMPORT_CERTIFICATE_TYPE={CERTIFICATE_TYPE:"certificate",KEYS_TYPE:"Keys"},t.PROBE_COMPRESSED_PACKAGE={PROBE_NOT_EXIST:"10001",PROBE_NO_CERTIFICATE_EXIST:"10002",PROBE_CERTIFICATE_EXIST:"20001"},t.SELECT_BOX_ACCESSPOINT={ACCESSPOINT_ZERO:0,ACCESSPOINT_ONE:1,ACCESSPOINT_TWO:2,ACCESSPOINT_THREE:3,ACCESSPOINT_FOUR:4,ACCESSPOINT_FIVE:5,ACCESSPOINT_SIX:6,ACCESSPOINT_SEVEN:7,ACCESSPOINT_OTHER:9,ACCESSPOINT_TEN:10,ACCESSPOINT_ELEVEN:11,ACCESSPOINT_TWELVE:12,ACCESSPOINT_THIRTEEN:13,ACCESSPOINT_FOURTEEN:14},t.SELECT_BOX_STATUS={SELECT_BOX_NO:0,SELECT_BOX_YES:1,SELECT_BOX_GRAY:2},t.TOOLBAR_EVENT_TYPE={MIC:{CHANGEVALUE:0,BTNZERO:1},DIAL:{VISIBLE:0,NUMBTN_CLK:1},CHAIRMAN:{RELEASE:0,REQUEST:1},HANGUP:{LEAVECONF:0,DISSOLUTIONCONF:1,LEAVEANDLOGOUT:2}},t.DESKTOP_SHARE_SETTING={IS_DEFAULT:"default",IS_IMAGEQUALITY:"imageQuality",IS_DYNAMICEFFECT:"dynamicEffect"},t.DESKTOP_SHARE_SET_SIZE={DEFAULT_SIZE:40,IMAGEQUALITY_SIZE:100,DYNAMICEFFECT_SIZE:30},t.IM_MSG_TYPE={SINGLE:1,GROUP:2},t.OPR_EVENT_TYPE={PRIVACY:1,CHR:2,PRIVACY_CHR:3,LOG:4,PRIVACY_LOG:5,CHR_LOG:6,PRIVACY_CHR_LOG:7},t.PAIR_TYPE={IDLE:0,AUTO:1,MANUAL:2,QRCODE:3},t.PAIR_STATE={IDLE:0,PAIRING:1,PAIR_SUCCESS:2,CANCEL_PAIRING:3,PAIR_FAILED:4},t.PAIR_CALL_STATE={IDLE:0,RINGING:1,OUTGOING:2,ESTABLISHED:3,IN_CONFERENCE:4},t.CALL_STATE={CALL_E_CALL_STATE_IDLE:0,CALL_E_CALL_STATE_IN:1,CALL_E_CALL_STATE_OUT:2,CALL_E_CALL_STATE_LIVE:3,CALL_E_CALL_STATE_HOLD:4,CALL_E_CALL_STATE_END:5,CALL_E_CALL_STATE_BUTT:6},t.TITLE_NEW_LINE={NEW_LINE:"\n",NEW_LINE_LEN:30},t.SYNERGISM_FAIL_REASON={SOFT_TERMINAL_INITIATE:0,HARD_TERMINAL_INITIATE:1,ABNORMAL_HEARTBEAT:2,SEND_MAKE_PAIR_FAIL:3,SEND_MAKE_PAIR_RESPONSE_FAIL:4,SOFT_TERMINAL_TIMER_ERROR:5,PARSE_MAKE_PAIR_RESPONSE_FAIL:6,SOFT_TERMINAL_SEND_NOTIFY_TO_UI_FAIL:7,COMMAND_REQUEST_TIMEOUT:8,SEND_CANCEL_PAIR_FAIL:9,HARD_TERMINAL_TIMER_ERROR:10,AUTH_FAIL:11,USER_NUM_LIMITED:12,PROHIBIT_PAIR:13,HARD_TERMINAL_NOT_PERMIT:14,HARD_TERMINAL_SEND_NOTIFY_TO_UI_FAIL:15,SOFT_TERMINAL_SEND_SUBSCRIBE_FAIL:16,SOFT_TERMINAL_RECEIVE_SUBSCRIBE_RESULT_TIMEOUT:17,SOFT_TERMINAL_SUBSCRIBE_RESULT_FAIL:18,SOFT_TERMINAL_SEND_CONFERENCE_LINKAGE_FAIL:19,SOFT_TERMINAL_RECEIVE_CONFERENCE_LINKAGE_RESULT_TIMEOUT:20,SOFT_TERMINAL_CONFERENCE_LINKAGE_FAIL:21},t.MOBILE_SEND_PHOTO_TYPE={IM_SEND:"im_send",FEEDBACK_SEND:"feedack_send",SET_AVATAR:"set_avatar",IM_SEND_VIDEO:"im_send_video"},t.FEEDBACK_IMG_MAX_SIZE=10,t.FEEDBACK_IMG_MAX_NUMBER=3,t.FEEDBACK_TEXT_MAX_LENGTH=200,t.CLICK_INTERVAL_TIME=600,t.COMPONENT_IID={IID_COMPONENT_DS:1,IID_COMPONENT_AS:2,IID_COMPONENT_WB:512},t.AUDIO_ROUTE_TYPE={AUDIO_TYPE_UNKNOW:-1,AUDIO_TYPE_SPEAKER:0,AUDIO_TYPE_RECEIVER:1,AUDIO_TYPE_HEADPHONE:2,AUDIO_TYPE_HEADPHONEBT:3},t.AUDIO_ROUTE_CHANGE_REASON={DETECT_AUDIO_ROUTE_RESULT:-1,CHANGE_REASON_UNKNOWN:0,NEW_DEVICE_AVAILABLE:1,OLD_DEVICE_UNAVAILABLE:2},t.DATA_CONF_SHARE_TOKEN_TYPE={SCREEN_SHARE:1,WHITE_BOARD_SHARE:2,DOC_SHARE:3},t.DATA_CONF_SHARE_OPERATE_TYPE={DELETE:0,ADD:1},t.DATA_CLOUD_RECORD_TYPE={TYPE_LIVE:1,TYPE_RECORD:0,RECORD_START:1,RECORD_END:0},t.QUICK_REPLY_TXT={DEFAULT_TXT:"default",CUSTOM_TXT:"custom",MAX_LENGTH:10,FIRST_VISIT:0},t.EN_CMPT_DETECT_ERROR={EN_CMPT_DETECT_UNINIT_ERROR:20,EN_CMPT_DETECT_STARTED_ERROR:21,EN_CMPT_DETECT_SOCKET_ERROR:22,EN_CMPT_DETECT_SOCKET_BIND_ERROR:23,EN_CMPT_DETECT_SOCKET_CONN_ERROR:24,EN_CMPT_DETECT_THREAD_ERROR:25},t.PAIR_CONF_COMMAND_SEQ={JOIN_CONF:"WEB_JoinConfAPI"},t.PAIR_CONF_RESULT={SUCCESS:0,FAILED:1,BUSY:2,INVALID:3},t.MAKE_PAIR_FAILED_REASON={FAILED:0,OVER_LIMIT_AND_UNSUPPORT_FORCE:1,OVER_LIMIT_AND_SUPPORT_FORCE:2},t.UserDefineType={CONF_INVITE_USER_DATA_SHARING:3,CONF_END_INVITE_USER_DATA_SHARING:4,AS_NOTICE_INVITE_USER_WB_SHARING:26,AS_NOTICE_SHARING_USER_STOP:21,AS_NOTICE_SHARING_USER_STOP_ACK:22,AS_NOTICE_SHARING_WB_USER_STOP_TAB:24},t.FORGETPWDACCOUNTTYPE={PHONE:0,EMAIL:1,ACCOUNT:2},t.LANGUAGETYPE={2052:0,1033:1,1063:1},t.FORGETPWDACCOUNTTYPETITLE={0:"",1:"",2:""},t.UPDATE_MODEL_CONTENT_TYPE={IDLE:0,WHATSNEWHINTS:1,NEWHINTS:2,DOWNLOADING:3},t.WINDOWS_SYSTEM_THEME={BASIC:"IDS_THEME_DISPLAYNAME_BASIC",CLASSIC:"IDS_THEME_DISPLAYNAME_CLASSIC",HC1:"IDS_THEME_DISPLAYNAME_HC1",HC2:"IDS_THEME_DISPLAYNAME_HC2",HCBLACK:"IDS_THEME_DISPLAYNAME_HCBLACK",HCWHITE:"IDS_THEME_DISPLAYNAME_HCWHITE",AERO:"IDS_THEME_DISPLAYNAME_AERO"},t.ATTENDEE_TYPE={ATTENDEE_TYPE_NORMAL:0,ATTENDEE_TYPE_TELEPRESENCE:1,ATTENDEE_TYPE_SINGLE_CISCO_TP:2,ATTENDEE_TYPE_THREE_CISCO_TP:3,ATTENDEE_TYPE_H323:4,ATTENDEE_TYPE_TERMINAL:5,ATTENDEE_TYPE_OUTSIDE:6},t.LOG_UPLOAD_RESULT={SUCCESS:0,TIMEOUT:1,OVER_LIMIT:2,FAILED:3},t.CLK_PLUGIN_CMD={PLUGIN_CMD_LOGIN:2001,PLUGIN_CMD_CREATE_MEETING:2002,PLUGIN_CMD_JOIN_MEETING_BY_ID:2003,PLUGIN_CMD_INIT:2004,PLUGIN_CMD_EXIT:2006},t.CURSOR_POSITION_TYPE={NULL:0,LEFT_TO_MOVE:1,LEFT_TO_SELECT:2,RIGHT_TO_MOVE:3,RIGHT_TO_SELECT:4},t.KEYBOARD={BACKSPACE:8,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,ENTER:13},t.MESSAGE_VIDEO={MAX_WIDTH:260,MAX_HEIGHT:260},t.MESSAGE_VIDEO_SUFFIX=["mp4"],t.COMMON_NOTIFY={ON_COMMON_JS_LOADED:"ON_COMMON_JS_LOADED"}},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_X_ID_LENGTH=t.MEDIA_X_ERROR_INFO=t.MEDIA_X_ERROR_CODE=void 0;var r=n(853),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.MEDIA_X_ERROR_CODE=a.MEDIA_X_ERROR_CODE,t.MEDIA_X_ERROR_INFO=a.MEDIA_X_ERROR_INFO,t.MEDIA_X_ID_LENGTH=6},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_X_ERROR_INFO=t.MEDIA_X_ERROR_CODE=void 0;var r,a=n(104),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=t.MEDIA_X_ERROR_CODE={success:0,CONFCTRL_E_ERR_BEGIN:0,CONFCTRL_E_ERR_GENERAL:1,CONFCTRL_E_ERR_PARAM_ERROR:2,CONFCTRL_E_ERR_TIMEOUT:3,CONFCTRL_E_ERR_MEM_ERROR:4,CONFCTRL_E_ERR_DNS_ERROR:5,CONFCTRL_E_ERR_REQUEST_FAILED:6,CONFCTRL_E_ERR_AUTH_FAILED:7,CONFCTRL_E_ERR_SERVICE_ERROR:8,CONFCTRL_E_ERR_TIMER_ERROR:9,CONFCTRL_E_ERR_WRONG_SERVERTYPE:10,CONFCTRL_E_ERR_WRONG_SERVERVERSION:11,CONFCTRL_E_ERR_INVALID_URL:12,CONFCTRL_E_ERR_CONF_BLOCK_FULL:13,param_error:10001,no_access:10002,no_allow:10003,server_busy:10004,server_error:10005,server_un_use:10006,no_allow_2:10007,id_error:10008,token_error:10009,no_token:10010,parser_error:11001,param_error_2:11002,time_out:11003,power_un_enough:11004,time_same:11006,money_un_enough:11012,no_user:11013,param_parser_error:11014,account_un_use:11015,no_conference:11017,out_system_licence:11020,user_token_error:11021,pwd_out_time:11022,pwd_error:11023,same_pin_user:11024,conference_over:11026,conference_ing:11027,conference_no_kai:11028,conference_lock:11029,conference_resource_no_enough:11030,people_out_max_num:11032,no_master:11033,master_no_in_conference:11034,un_support_conference_type:11037,conference_time_out_max_time:11038,start_time_error:11040,yu_ding_error:11041,same_conference_time:11042,people_num_out_max:11043,fu_za_error:11044,fu_za_error_2:11045,fu_za_error_3:11046,fu_za_error_4:11047,fu_za_error_5:11048,fu_za_error_6:11049,fu_za_error_7:11050,out_max_conference_num:11051,token_type_error:11052,port_no_enough:11057,user_no_answer:11059,user_no_arrow:11060,user_mang:11061,user_ju_jue:11062,no_enough_lu:11063,mo_ban_name_same:11066,time_no_conference:11067,start_error:11068,fu_za_error_8:11069,fu_za_error_9:11070,fu_za_error_10:11071,xiu_gai_token_type_error:11072,notify_send_error:11073,num_no_cun_zai:11075,account_lock:11081,first_login:11083,account_lock_2:11084,fu_za_error_11:11085,fu_za_error_12:11086,fu_za_error_13:11087,memory_un_enough:11088,bing_fa_num_un_enough:11089,fu_za_error_14:11090,fu_za_error_15:11091,fu_za_error_16:11092,fu_za_error_17:11093,error_11094:11094,error_11095:11095,error_11096:11096,error_11097:11097,error_11098:11098,error_11099:11099,error_11100:11100,error_11101:11101,error_11102:11102,error_11103:11103,error_11104:11104,error_11105:11105,error_11106:11106,error_11107:11107,error_11108:11108,error_11109:11109,error_11110:11110,error_11111:11111,error_11112:11112,error_11113:11113,error_11114:11114,error_11115:11115,error_11116:11116,error_11118:11118,error_11119:11119,error_11180:11180,error_11181:11181,error_11182:11182,error_11183:11183,error_11184:11184,error_11186:11186,error_11188:11188,error_11190:11190,error_11191:11191,error_11192:11192,error_11193:11193,error_11194:11194,error_11195:11195,error_11196:11196,error_11197:11197,error_11198:11198,error_11199:11199,error_11200:11200};t.MEDIA_X_ERROR_INFO=(r={},(0,o.default)(r,i.CONFCTRL_E_ERR_GENERAL,""),(0,o.default)(r,i.CONFCTRL_E_ERR_PARAM_ERROR,""),(0,o.default)(r,i.CONFCTRL_E_ERR_TIMEOUT,""),(0,o.default)(r,i.CONFCTRL_E_ERR_MEM_ERROR,""),(0,o.default)(r,i.CONFCTRL_E_ERR_DNS_ERROR,"DNS"),(0,o.default)(r,i.CONFCTRL_E_ERR_REQUEST_FAILED,""),(0,o.default)(r,i.CONFCTRL_E_ERR_AUTH_FAILED,""),(0,o.default)(r,i.CONFCTRL_E_ERR_SERVICE_ERROR,""),(0,o.default)(r,i.CONFCTRL_E_ERR_TIMER_ERROR,""),(0,o.default)(r,i.CONFCTRL_E_ERR_WRONG_SERVERTYPE,""),(0,o.default)(r,i.CONFCTRL_E_ERR_WRONG_SERVERVERSION,""),(0,o.default)(r,i.CONFCTRL_E_ERR_INVALID_URL,"URL"),(0,o.default)(r,i.CONFCTRL_E_ERR_CONF_BLOCK_FULL,""),(0,o.default)(r,i.param_error,""),(0,o.default)(r,i.no_access,""),(0,o.default)(r,i.no_allow,""),(0,o.default)(r,i.server_busy,""),(0,o.default)(r,i.server_error,""),(0,o.default)(r,i.server_un_use,""),(0,o.default)(r,i.no_allow_2,""),(0,o.default)(r,i.id_error,"URIID"),(0,o.default)(r,i.token_error,""),(0,o.default)(r,i.no_token,""),(0,o.default)(r,i.parser_error,""),(0,o.default)(r,i.param_error_2,""),(0,o.default)(r,i.time_out,""),(0,o.default)(r,i.power_un_enough,""),(0,o.default)(r,i.time_same,""),(0,o.default)(r,i.money_un_enough,""),(0,o.default)(r,i.no_user,"/ID"),(0,o.default)(r,i.param_parser_error,""),(0,o.default)(r,i.account_un_use,""),(0,o.default)(r,i.no_conference,""),(0,o.default)(r,i.out_system_licence,"license"),(0,o.default)(r,i.user_token_error,""),(0,o.default)(r,i.pwd_out_time,""),(0,o.default)(r,i.pwd_error,""),(0,o.default)(r,i.same_pin_user,"pin"),(0,o.default)(r,i.conference_over,""),(0,o.default)(r,i.conference_ing,""),(0,o.default)(r,i.conference_no_kai,""),(0,o.default)(r,i.conference_lock,""),(0,o.default)(r,i.conference_resource_no_enough,""),(0,o.default)(r,i.people_out_max_num,""),(0,o.default)(r,i.no_master,""),(0,o.default)(r,i.master_no_in_conference,""),(0,o.default)(r,i.un_support_conference_type,""),(0,o.default)(r,i.conference_time_out_max_time,""),(0,o.default)(r,i.start_time_error,""),(0,o.default)(r,i.yu_ding_error,""),(0,o.default)(r,i.same_conference_time,""),(0,o.default)(r,i.people_num_out_max,""),(0,o.default)(r,i.fu_za_error,"1080P60F"),(0,o.default)(r,i.fu_za_error_2,"1080P60F"),(0,o.default)(r,i.fu_za_error_3,"1080P60F"),(0,o.default)(r,i.fu_za_error_4,"Web"),(0,o.default)(r,i.fu_za_error_5,"1080p 50/60"),(0,o.default)(r,i.fu_za_error_6,"H.264 4CIF"),(0,o.default)(r,i.fu_za_error_7,"MCU"),(0,o.default)(r,i.out_max_conference_num,""),(0,o.default)(r,i.token_type_error,""),(0,o.default)(r,i.port_no_enough,""),(0,o.default)(r,i.user_no_answer,""),(0,o.default)(r,i.user_no_arrow,""),(0,o.default)(r,i.user_mang,""),(0,o.default)(r,i.user_ju_jue,""),(0,o.default)(r,i.no_enough_lu,""),(0,o.default)(r,i.mo_ban_name_same,""),(0,o.default)(r,i.time_no_conference,""),(0,o.default)(r,i.start_error,""),(0,o.default)(r,i.fu_za_error_8,""),(0,o.default)(r,i.fu_za_error_9,""),(0,o.default)(r,i.fu_za_error_10,""),(0,o.default)(r,i.xiu_gai_token_type_error,""),(0,o.default)(r,i.notify_send_error,""),(0,o.default)(r,i.num_no_cun_zai,""),(0,o.default)(r,i.account_lock,""),(0,o.default)(r,i.first_login,""),(0,o.default)(r,i.account_lock_2,""),(0,o.default)(r,i.fu_za_error_11,""),(0,o.default)(r,i.fu_za_error_12,""),(0,o.default)(r,i.fu_za_error_13,""),(0,o.default)(r,i.memory_un_enough,""),(0,o.default)(r,i.bing_fa_num_un_enough,""),(0,o.default)(r,i.fu_za_error_14,"60"),(0,o.default)(r,i.fu_za_error_15,""),(0,o.default)(r,i.fu_za_error_16,"14"),(0,o.default)(r,i.fu_za_error_17,""),(0,o.default)(r,i.error_11094,""),(0,o.default)(r,i.error_11095,"()"),(0,o.default)(r,i.error_11096,"resultField"),(0,o.default)(r,i.error_11097,"condition"),(0,o.default)(r,i.error_11098,"sortField"),(0,o.default)(r,i.error_11099,""),(0,o.default)(r,i.error_11100,"QueryField"),(0,o.default)(r,i.error_11101,""),(0,o.default)(r,i.error_11102,""),(0,o.default)(r,i.error_11103,"(,)"),(0,o.default)(r,i.error_11104,""),(0,o.default)(r,i.error_11105,"License"),(0,o.default)(r,i.error_11106,""),(0,o.default)(r,i.error_11107,""),(0,o.default)(r,i.error_11108,""),(0,o.default)(r,i.error_11109,""),(0,o.default)(r,i.error_11110,""),(0,o.default)(r,i.error_11111,""),(0,o.default)(r,i.error_11112,""),(0,o.default)(r,i.error_11113,""),(0,o.default)(r,i.error_11114,""),(0,o.default)(r,i.error_11115,""),(0,o.default)(r,i.error_11116,""),(0,o.default)(r,i.error_11118,""),(0,o.default)(r,i.error_11119,""),(0,o.default)(r,i.error_11180,""),(0,o.default)(r,i.error_11181,""),(0,o.default)(r,i.error_11182,""),(0,o.default)(r,i.error_11183,""),(0,o.default)(r,i.error_11184,""),(0,o.default)(r,i.error_11186,"+"),(0,o.default)(r,i.error_11188,"VMR"),(0,o.default)(r,i.error_11190,"VMR"),(0,o.default)(r,i.error_11191,"VMR"),(0,o.default)(r,i.error_11192,""),(0,o.default)(r,i.error_11193,""),(0,o.default)(r,i.error_11194,""),(0,o.default)(r,i.error_11195,""),(0,o.default)(r,i.error_11196,""),(0,o.default)(r,i.error_11197,""),(0,o.default)(r,i.error_11198,""),(0,o.default)(r,i.error_11199,""),(0,o.default)(r,i.error_11200,"CloudMCU"),r)},854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileAppConfig=t.AppConfig=t.MAX_STRING_LENGTH=t.SERVICE_PROFILE_FUNC_ID_LIST=t.RECORD_STATUS=void 0;var r=n(855),a=n(952);t.RECORD_STATUS=a.RECORD_STATUS,t.SERVICE_PROFILE_FUNC_ID_LIST=r.SERVICE_PROFILE_FUNC_ID_LIST,t.MAX_STRING_LENGTH=a.MAX_STRING_LENGTH;t.AppConfig={navBarConfig:{style:{height:"30px",width:"30px",padding:"4px"}},pasteTextFilter:[["embed","script","input","textarea","object","audio","video","iframe"],["class","id","start","target","width","height","onclick","contenteditable"],["background","font-variant","text-indent","-webkit-text-stroke","width","height","text-transform","word-spacing","letter-spacing","white-space","float","orphans","widows","font-style","overflow","text-align","word-break","font-weight","text-decoration","list-style","word-wrap","color","margin-left","margin-right","margin","position","float","display"]],IM:{myLoadingImgSrc:"../resources/svg/pic-default.svg",otherLoadingImgSrc:"../resources/svg/pic-default.svg",transparentImgSrc:"../resources/image/pic-transparent.png",reloadImgSrc:"../resources/icon/reload_pic.png",showMessageListAvatarStatus:!1,conversationToggleLoading:!1,messageReceiveNotify:!1,maxOnceQueryMessageNum:50,isShowAt:!1},recent:{},UM:{noUseUmProxyAddress:"",fileMaxSize:1024},DEFAULT_AVATAR_CONFIG:{MALE_BG_COLOR:{0:"rgb(103, 142, 221)",1:"rgb(121, 207, 208)",2:"rgb(131, 185, 229)",3:"rgb(138, 150, 236)",4:"rgb(119, 210, 242)"},FEMALE_BG_COLOR:{0:"rgb(250, 163, 143)",1:"rgb(193, 183, 246)"},AVATAR_SIZE:60,FILE_TYPE:".bmp"}},t.MobileAppConfig={pasteTextFilter:[["embed","script"],["class","id","start","target","width","height","onclick","contenteditable"],["background","font-variant","text-indent","-webkit-text-stroke","width","height","text-transform","word-spacing","letter-spacing","white-space","float","orphans","widows","font-style","overflow","text-align","word-break","font-weight","text-decoration","list-style","word-wrap","color","margin-left","margin-right","margin","font-size","position","float","display"]],IM:{conversationToggleLoading:!1,showMessageListAvatarStatus:!1,androidTransparentImgSrc:"../resources/image/pic-transparent.png",iosTransparentImgSrc:"./WeLinkProject/resources/image/pic-transparent.png",androidLoadingImgSrc:"../resources/svg/pic-default.svg",iosLoadingImgSrc:"./WeLinkProject/resources/svg/pic-default.svg"}}},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SERVICE_PROFILE_FUNC_ID_LIST={VoiceCall:1,Conference:3,VideoCall:4,DataConference:10,CTDCall:11,CallLimit:33,FileTrans:34,EnterBussBook:38,Sms:43,CreateFixedGroup:44,MultiOfflineTrans:71,IMRoaming:74,BYOD:75,MobileVoiceCall:76,MobileConf:77,MobileDataConference:78,WebDataConference1:80,WebDataConference2:81,OffLineFileTranslate:83,UMEncrypt:84,RecentRoam:86,GroupShare:87,DiscussGroup:90,VideoConf:91,CallNoEncrypt:95,LimitCtd:129}},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AVATAR_SIZE={SMALL:0,Middle:1,BIG:2},t.EADDR_SERVER_TYPE={UC1:0,UC2:1,LDAP:2,RCS:3}},857:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.SELECT_BOX_RECEIVE_TYPE=t.CHILD_SEND_TYPE=t.CHILD_RECEIVE_TYPE=void 0;var a=n(858),o=r(a),i=n(859),s=r(i);t.CHILD_RECEIVE_TYPE=o.CHILD_RECEIVE_TYPE,t.CHILD_SEND_TYPE=o.CHILD_SEND_TYPE,t.SELECT_BOX_RECEIVE_TYPE=s.CHILD_RECEIVE_TYPE},858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CHILD_SEND_TYPE={CONF_MEMBER_ERROR:"ConfMemberList_confMemberError",PRINT_INFO_LOG:"ConfMemberList_printInfoLog",closeWindows:"ConfMemberList_closeWindows",clickAllMute:"ConfMemberList_clickAllMute",cancelClickAllMute:"cancelClickAllMute",searchMemberlist:"ConfMemberList_searchMemberlist",PRINT_ERROR_LOG:"ConfMemberList_printErrorLog",clickSingleUserSvg:"ConfMemberList_clickSingleUserSvg",rightContextMenu:"ConfMemberList_rightContextMenu",rightMenuOption:"ConfMemberList_rightMenuOption",muteSpeakMost:"ConfMemberList_muteSpeakMost",closerightMenu:"ConfSelectBox_closerightMenu",updateMemberListchairman:"updateMemberListchairman",exportMem:"exportMem",handleHandupBtn:"handleHandupBtn",showrealaseChairman:"showrealaseChairman",showrequestChairman:"showrequestChairman",canclerealaseChairman:"canclerealaseChairman",confirmrrealaseChairman:"confirmrrealaseChairman",closerealaseChairman:"closerealaseChairman",canclerequestChairman:"canclerequestChairman",confirmrequestChairman:"confirmrequestChairman",closerequestChairman:"closerequestChairman",cancelRemoveAttendee:"cancelRemoveAttendee",confirmRemoveAttendee:"confirmRemoveAttendee",closeRemoveAttendee:"closeRemoveAttendee",cancelTransferChairman:"cancelTransferChairman",confirmTransferChairman:"confirmTransferChairman",closeTransferChairman:"closeTransferChairman",saveToggleChoose:"ConfSelectBox_saveToggleChoose",toggleContactExpandedLogic:"ConfSelectBox_toggleContactExpandedLogic",clickAccountSelectedLogic:"ConfSelectBox_clickAccountSelectedLogic",loadMoreSelectCorporateLogic:"ConfSelectBox_loadMoreSelectCorporateLogic",saveSearchText:"ConfSelectBox_saveSearchText",selectBoxSearch:"ConfSelectBox_selectBoxSearch",selectBoxSaveData:"ConfSelectBox_selectBoxSaveData",closeWindowsSelectBox:"ConfMemberList_closeWindowsSelectBox",copyToBorad:"ConfSelectBox_copyToBorad",openWinKeyboard:"openWinKeyboard"},t.CHILD_RECEIVE_TYPE={updateMemberPageProps:"ConfMemberList_updateMemberPageProps",updateMemberListProps:"updateMemberListProps",updateMemberListSpeakersProps:"updateMemberListSpeakersProps",updateConfMemberListTitleProps:"updateConfMemberListTitleProps",updateConfMemberAudioStatusProps:"updateConfMemberAudioStatusProps",updateConfMemberRightMenuProps:"updateConfMemberRightMenuProps",updateConfMembershowRealsasechairman:"updateConfMembershowRealsasechairman",updateConfMembershowrequesetchairman:"updateConfMembershowrequesetchairman",updateConfMemberclosechairman:"updateConfMemberclosechairman",languageChange:"ConfMemberList_languageChange",updateConfMemberHandupOrNo:"updateConfMemberHandupOrNo",updateConfSelectBoxProps:"ConfSelectBox_updateConfSelectBoxProps",updateConfLeftPanelProps:"ConfSelectBox_updateConfLeftPanelProps",updateContactStatusMapProps:"ConfSelectBox_updateContactStatusMapProps",updateConfSearchTextProps:"ConfSelectBox_updateConfSearchTextProps",updateConfTempSelectedProps:"ConfSelectBox_updateConfTempSelectedProps",updateConfMemberShowRemoveAttendee:"updateConfMemberShowRemoveAttendee",updateConfMemberTransferChairman:"updateConfMemberTransferChairman"}},859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CHILD_SEND_TYPE={copyToBorad:"ConfSelectBox_copyToBorad"},t.CHILD_RECEIVE_TYPE={languageChange:"ConfSelectBox_languageChange"}},860:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorLogInfo=t.ErrorInfo=t.ERR_START=t.UPLOAD_FILE_TYPE=void 0;var r,a,o=n(104),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(t.UPLOAD_FILE_TYPE={NORMAL:"normal",GROUP:"group"},t.ERR_START=134242560,{OK:0,INIT_FAIL:1,UNINIT:2,INVALID_PARAM:3,INVALID_HANDLE:4,HANDLE_INUSE:5,HANDLE_STATE_ERROR:6,ALLOC_MEM_FAIL:7,CREATE_HANDLE_FAIL:8,INVALID_TLS_MODE:9,INVALID_URL:10,INVALID_HEAD_TYPE:11,OPEN_LOG_FAIL:12,WRITE_LOG_FAIL:13,INVALID_FILEPATH:14,HANDLE_RELEASED:15,CREATE_MUTEX_FAIL:16,LOCK_MUTEX_FAIL:17,UNLOCK_MUTEX_FAIL:18,CREATE_THREAD_FAIL:19,NOT_SUPPORT:20,SVN_SOCKET_CREATE_FAIL:21,SVN_SOCKET_CONNECT_FAIL:22,SVN_SOCKET_SLECET_FAIL:23,SVN_SOCKET_SEND_FAIL:24,SVN_SOCKET_RECV_FAIL:25,GETHOSTNAME_FAIL:26,NET_NTOA_FAIL:27,RESPONSE_PARSE_ERR:28,INVALID_AUTH_MODE:29,NOT_LOGIN:30,LOGINING:31,UPLOAD_DOWNLOAD_TIMEOUT:32,LOGINED:33,INITED:34,LOGPATH_TOOLONG:35,LOGPATH_EMPTY:36,CURLE_UNSUPPORTED_PROTOCOL:101,CURLE_FAILED_INIT:102,CURLE_URL_MALFORMAT:103,CURLE_NOT_BUILT_IN:104,CURLE_COULDNT_RESOLVE_PROXY:105,CURLE_COULDNT_RESOLVE_HOST:106,CURLE_COULDNT_CONNECT:107,CURLE_FTP_WEIRD_SERVER_REPLY:108,CURLE_REMOTE_ACCESS_DENIED:109,CURLE_FTP_ACCEPT_FAILED:110,CURLE_FTP_WEIRD_PASS_REPLY:111,CURLE_FTP_ACCEPT_TIMEOUT:112,CURLE_FTP_WEIRD_PASV_REPLY:113,CURLE_FTP_WEIRD_227_FORMAT:114,CURLE_FTP_CANT_GET_HOST:115,CURLE_OBSOLETE16:116,CURLE_FTP_COULDNT_SET_TYPE:117,CURLE_PARTIAL_FILE:118,CURLE_FTP_COULDNT_RETR_FILE:119,CURLE_OBSOLETE20:120,CURLE_QUOTE_ERROR:121,CURLE_OFFLINE_RETURNED_ERROR:122,CURLE_WRITE_ERROR:123,CURLE_OBSOLETE24:124,CURLE_UPLOAD_FAILED:125,CURLE_READ_ERROR:126,CURLE_OUT_OF_MEMORY:127,CURLE_OPERATION_TIMEDOUT:128,CURLE_OBSOLETE29:129,CURLE_FTP_PORT_FAILED:130,CURLE_FTP_COULDNT_USE_REST:131,CURLE_OBSOLETE32:132,CURLE_RANGE_ERROR:133,CURLE_OFFLINE_POST_ERROR:134,CURLE_SSL_CONNECT_ERROR:135,CURLE_BAD_DOWNLOAD_RESUME:136,CURLE_FILE_COULDNT_READ_FILE:137,CURLE_LDAP_CANNOT_BIND:138,CURLE_LDAP_SEARCH_FAILED:139,CURLE_OBSOLETE40:140,CURLE_FUNCTION_NOT_FOUND:141,CURLE_ABORTED_BY_CALLBACK:142,CURLE_BAD_FUNCTION_ARGUMENT:143,CURLE_OBSOLETE44:144,CURLE_INTERFACE_FAILED:145,CURLE_OBSOLETE46:146,CURLE_TOO_MANY_REDIRECTS:147,CURLE_UNKNOWN_OPTION:148,CURLE_TELNET_OPTION_SYNTAX:149,CURLE_OBSOLETE50:150,CURLE_PEER_FAILED_VERIFICATION:151,CURLE_GOT_NOTHING:152,CURLE_SSL_ENGINE_NOTFOUND:153,CURLE_SSL_ENGINE_SETFAILED:154,CURLE_SEND_ERROR:155,CURLE_RECV_ERROR:156,CURLE_OBSOLETE57:157,CURLE_SSL_CERTPROBLEM:158,CURLE_SSL_CIPHER:159,CURLE_SSL_CACERT:160,CURLE_BAD_CONTENT_ENCODING:161,CURLE_LDAP_INVALID_URL:162,CURLE_FILESIZE_EXCEEDED:163,CURLE_USE_SSL_FAILED:164,CURLE_SEND_FAIL_REWIND:165,CURLE_SSL_ENGINE_INITFAILED:166,CURLE_LOGIN_DENIED:167,CURLE_TFTP_NOTFOUND:168,CURLE_TFTP_PERM:169,CURLE_REMOTE_DISK_FULL:170,CURLE_TFTP_ILLEGAL:171,CURLE_TFTP_UNKNOWNID:172,CURLE_REMOTE_FILE_EXISTS:173,CURLE_TFTP_NOSUCHUSER:174,CURLE_CONV_FAILED:175,CURLE_CONV_REQD:176,CURLE_SSL_CACERT_BADFILE:177,CURLE_REMOTE_FILE_NOT_FOUND:178,CURLE_SSH:179,CURLE_SSL_SHUTDOWN_FAILED:180,CURLE_AGAIN:181,CURLE_SSL_CRL_BADFILE:182,CURLE_SSL_ISSUER_ERROR:183,CURLE_FTP_PRET_FAILED:184,CURLE_RTSP_CSEQ_ERROR:185,CURLE_RTSP_SESSION_ERROR:186,CURLE_FTP_BAD_FILE_LIST:187,CURLE_CHUNK_FAILED:188,CURL_CREATE_HANDLE_FAIL:201,CURL_SET_HEAD_FAIL:202,LOGIN_FAILED:203,LOAD_NSCALIB_FAIL:204,GET_NSCAFUNC_FAIL:205,CHECKLABEL_TRUE:206,INVALID_FILEINFO:207,INVALID_FILESHA1:208,GETSHARELINK_FAIL:209,INVALID_SERVERMODE:210,PRUPLOAD_EXIST:211,PRUPLOAD_FAIL:212,UPLOAD_FAIL:213,MORETHAN_TRANSMAX:214,DELETEFILE_FAIL:215,FINISHFILE_FAIL:216,PARTCOUNT_LARGER:217,OPENFILE_FAIL:218,UPLOADFILE_FINISHING:219,RESUMEURL_NULL:220,DISK_FULL:221,ERROR_EXPIREDAT:222,ERROR_INITPARTINFO:223,ERROR_GETDOWNLOADURL:224,ERROR_CREATEFOLDER:225,ERROR_MODIFYFOLDER:226,ERROR_MOVEFILE:227,ERROR_SERVER_INTERNAL_ERROR:228});t.default=s;t.ErrorInfo=(r={},(0,i.default)(r,s.OK,0),(0,i.default)(r,s.INIT_FAIL,""),(0,i.default)(r,s.UNINIT,""),(0,i.default)(r,s.NOT_LOGIN,""),(0,i.default)(r,s.INVALID_PARAM,""),(0,i.default)(r,s.INVALID_HANDLE,""),(0,i.default)(r,s.CURLE_COULDNT_CONNECT,""),(0,i.default)(r,s.INVALID_FILEINFO,""),(0,i.default)(r,s.CURLE_COULDNT_RESOLVE_HOST,""),(0,i.default)(r,s.HANDLE_INUSE,5),(0,i.default)(r,s.HANDLE_STATE_ERROR,6),(0,i.default)(r,s.ALLOC_MEM_FAIL,7),(0,i.default)(r,s.CREATE_HANDLE_FAIL,8),(0,i.default)(r,s.INVALID_TLS_MODE,9),(0,i.default)(r,s.INVALID_URL,10),(0,i.default)(r,s.INVALID_HEAD_TYPE,11),(0,i.default)(r,s.OPEN_LOG_FAIL,12),(0,i.default)(r,s.WRITE_LOG_FAIL,13),(0,i.default)(r,s.INVALID_FILEPATH,14),(0,i.default)(r,s.HANDLE_RELEASED,15),(0,i.default)(r,s.CREATE_MUTEX_FAIL,16),(0,i.default)(r,s.LOCK_MUTEX_FAIL,17),(0,i.default)(r,s.UNLOCK_MUTEX_FAIL,18),(0,i.default)(r,s.CREATE_THREAD_FAIL,19),(0,i.default)(r,s.NOT_SUPPORT,20),(0,i.default)(r,s.SVN_SOCKET_CREATE_FAIL,21),(0,i.default)(r,s.SVN_SOCKET_CONNECT_FAIL,22),(0,i.default)(r,s.SVN_SOCKET_SLECET_FAIL,23),(0,i.default)(r,s.SVN_SOCKET_SEND_FAIL,24),(0,i.default)(r,s.SVN_SOCKET_RECV_FAIL,25),(0,i.default)(r,s.GETHOSTNAME_FAIL,26),(0,i.default)(r,s.NET_NTOA_FAIL,27),(0,i.default)(r,s.RESPONSE_PARSE_ERR,28),(0,i.default)(r,s.INVALID_AUTH_MODE,29),(0,i.default)(r,s.LOGINING,31),(0,i.default)(r,s.UPLOAD_DOWNLOAD_TIMEOUT,32),(0,i.default)(r,s.LOGINED,33),(0,i.default)(r,s.INITED,34),(0,i.default)(r,s.LOGPATH_TOOLONG,35),(0,i.default)(r,s.LOGPATH_EMPTY,36),(0,i.default)(r,s.CURLE_UNSUPPORTED_PROTOCOL,101),(0,i.default)(r,s.CURLE_FAILED_INIT,102),(0,i.default)(r,s.CURLE_URL_MALFORMAT,103),(0,i.default)(r,s.CURLE_NOT_BUILT_IN,104),(0,i.default)(r,s.CURLE_COULDNT_RESOLVE_PROXY,105),(0,i.default)(r,s.CURLE_FTP_WEIRD_SERVER_REPLY,108),(0,i.default)(r,s.CURLE_REMOTE_ACCESS_DENIED,109),(0,i.default)(r,s.CURLE_FTP_ACCEPT_FAILED,110),(0,i.default)(r,s.CURLE_FTP_WEIRD_PASS_REPLY,111),(0,i.default)(r,s.CURLE_FTP_ACCEPT_TIMEOUT,112),(0,i.default)(r,s.CURLE_FTP_WEIRD_PASV_REPLY,113),(0,i.default)(r,s.CURLE_FTP_WEIRD_227_FORMAT,114),(0,i.default)(r,s.CURLE_FTP_CANT_GET_HOST,115),(0,i.default)(r,s.CURLE_OBSOLETE16,116),(0,i.default)(r,s.CURLE_FTP_COULDNT_SET_TYPE,117),(0,i.default)(r,s.CURLE_PARTIAL_FILE,118),(0,i.default)(r,s.CURLE_FTP_COULDNT_RETR_FILE,119),(0,i.default)(r,s.CURLE_OBSOLETE20,120),(0,i.default)(r,s.CURLE_QUOTE_ERROR,121),(0,i.default)(r,s.CURLE_OFFLINE_RETURNED_ERROR,122),(0,i.default)(r,s.CURLE_WRITE_ERROR,123),(0,i.default)(r,s.CURLE_OBSOLETE24,124),(0,i.default)(r,s.CURLE_UPLOAD_FAILED,125),(0,i.default)(r,s.CURLE_READ_ERROR,126),(0,i.default)(r,s.CURLE_OUT_OF_MEMORY,127),(0,i.default)(r,s.CURLE_OPERATION_TIMEDOUT,128),(0,i.default)(r,s.CURLE_OBSOLETE29,129),(0,i.default)(r,s.CURLE_FTP_PORT_FAILED,130),(0,i.default)(r,s.CURLE_FTP_COULDNT_USE_REST,131),(0,i.default)(r,s.CURLE_OBSOLETE32,132),(0,i.default)(r,s.CURLE_RANGE_ERROR,133),(0,i.default)(r,s.CURLE_OFFLINE_POST_ERROR,134),(0,i.default)(r,s.CURLE_SSL_CONNECT_ERROR,135),(0,i.default)(r,s.CURLE_BAD_DOWNLOAD_RESUME,136),(0,i.default)(r,s.CURLE_FILE_COULDNT_READ_FILE,137),(0,i.default)(r,s.CURLE_LDAP_CANNOT_BIND,138),(0,i.default)(r,s.CURLE_LDAP_SEARCH_FAILED,139),(0,i.default)(r,s.CURLE_OBSOLETE40,140),(0,i.default)(r,s.CURLE_FUNCTION_NOT_FOUND,141),(0,i.default)(r,s.CURLE_ABORTED_BY_CALLBACK,142),(0,i.default)(r,s.CURLE_BAD_FUNCTION_ARGUMENT,143),(0,i.default)(r,s.CURLE_OBSOLETE44,144),(0,i.default)(r,s.CURLE_INTERFACE_FAILED,145),(0,i.default)(r,s.CURLE_OBSOLETE46,146),(0,i.default)(r,s.CURLE_TOO_MANY_REDIRECTS,147),(0,i.default)(r,s.CURLE_UNKNOWN_OPTION,148),(0,i.default)(r,s.CURLE_TELNET_OPTION_SYNTAX,149),(0,i.default)(r,s.CURLE_OBSOLETE50,150),(0,i.default)(r,s.CURLE_PEER_FAILED_VERIFICATION,151),(0,i.default)(r,s.CURLE_GOT_NOTHING,152),(0,i.default)(r,s.CURLE_SSL_ENGINE_NOTFOUND,153),(0,i.default)(r,s.CURLE_SSL_ENGINE_SETFAILED,154),(0,i.default)(r,s.CURLE_SEND_ERROR,155),(0,i.default)(r,s.CURLE_RECV_ERROR,156),(0,i.default)(r,s.CURLE_OBSOLETE57,157),(0,i.default)(r,s.CURLE_SSL_CERTPROBLEM,158),(0,i.default)(r,s.CURLE_SSL_CIPHER,159),(0,i.default)(r,s.CURLE_SSL_CACERT,160),(0,i.default)(r,s.CURLE_BAD_CONTENT_ENCODING,161),(0,i.default)(r,s.CURLE_LDAP_INVALID_URL,162),(0,i.default)(r,s.CURLE_FILESIZE_EXCEEDED,163),(0,i.default)(r,s.CURLE_USE_SSL_FAILED,164),(0,i.default)(r,s.CURLE_SEND_FAIL_REWIND,165),(0,i.default)(r,s.CURLE_SSL_ENGINE_INITFAILED,166),(0,i.default)(r,s.CURLE_LOGIN_DENIED,167),(0,i.default)(r,s.CURLE_TFTP_NOTFOUND,168),(0,i.default)(r,s.CURLE_TFTP_PERM,169),(0,i.default)(r,s.CURLE_REMOTE_DISK_FULL,170),(0,i.default)(r,s.CURLE_TFTP_ILLEGAL,171),(0,i.default)(r,s.CURLE_TFTP_UNKNOWNID,172),(0,i.default)(r,s.CURLE_REMOTE_FILE_EXISTS,173),(0,i.default)(r,s.CURLE_TFTP_NOSUCHUSER,174),(0,i.default)(r,s.CURLE_CONV_FAILED,175),(0,i.default)(r,s.CURLE_CONV_REQD,176),(0,i.default)(r,s.CURLE_SSL_CACERT_BADFILE,177),(0,i.default)(r,s.CURLE_REMOTE_FILE_NOT_FOUND,178),(0,i.default)(r,s.CURLE_SSH,179),(0,i.default)(r,s.CURLE_SSL_SHUTDOWN_FAILED,180),(0,i.default)(r,s.CURLE_AGAIN,181),(0,i.default)(r,s.CURLE_SSL_CRL_BADFILE,182),(0,i.default)(r,s.CURLE_SSL_ISSUER_ERROR,183),(0,i.default)(r,s.CURLE_FTP_PRET_FAILED,184),(0,i.default)(r,s.CURLE_RTSP_CSEQ_ERROR,185),(0,i.default)(r,s.CURLE_RTSP_SESSION_ERROR,186),(0,i.default)(r,s.CURLE_FTP_BAD_FILE_LIST,187),(0,i.default)(r,s.CURLE_CHUNK_FAILED,188),(0,i.default)(r,s.CURL_CREATE_HANDLE_FAIL,201),(0,i.default)(r,s.CURL_SET_HEAD_FAIL,202),(0,i.default)(r,s.LOGIN_FAILED,203),(0,i.default)(r,s.LOAD_NSCALIB_FAIL,204),(0,i.default)(r,s.GET_NSCAFUNC_FAIL,205),(0,i.default)(r,s.CHECKLABEL_TRUE,206),(0,i.default)(r,s.INVALID_FILESHA1,208),(0,i.default)(r,s.GETSHARELINK_FAIL,209),(0,i.default)(r,s.INVALID_SERVERMODE,210),(0,i.default)(r,s.PRUPLOAD_EXIST,211),(0,i.default)(r,s.PRUPLOAD_FAIL,212),(0,i.default)(r,s.UPLOAD_FAIL,213),(0,i.default)(r,s.MORETHAN_TRANSMAX,214),(0,i.default)(r,s.DELETEFILE_FAIL,215),(0,i.default)(r,s.FINISHFILE_FAIL,216),(0,i.default)(r,s.PARTCOUNT_LARGER,217),(0,i.default)(r,s.OPENFILE_FAIL,218),(0,i.default)(r,s.UPLOADFILE_FINISHING,219),(0,i.default)(r,s.RESUMEURL_NULL,220),(0,i.default)(r,s.DISK_FULL,221),(0,i.default)(r,s.ERROR_EXPIREDAT,222),(0,i.default)(r,s.ERROR_INITPARTINFO,223),(0,i.default)(r,s.ERROR_GETDOWNLOADURL,224),(0,i.default)(r,s.ERROR_CREATEFOLDER,225),(0,i.default)(r,s.ERROR_MODIFYFOLDER,226),(0,i.default)(r,s.ERROR_MOVEFILE,227),(0,i.default)(r,s.ERROR_SERVER_INTERNAL_ERROR,228),r),t.ErrorLogInfo=(a={},(0,i.default)(a,s.OK,0),(0,i.default)(a,s.INIT_FAIL,"Init fail"),(0,i.default)(a,s.UNINIT,"uninit"),(0,i.default)(a,s.INVALID_PARAM,"invalid param"),(0,i.default)(a,s.INVALID_HANDLE,"invalid handle"),(0,i.default)(a,s.HANDLE_INUSE,"handle in using, can't be set"),(0,i.default)(a,s.HANDLE_STATE_ERROR,"current handle state not support this operation"),(0,i.default)(a,s.ALLOC_MEM_FAIL," fail"),(0,i.default)(a,s.CREATE_HANDLE_FAIL," handle fail "),(0,i.default)(a,s.INVALID_TLS_MODE,"invalid tls mode"),(0,i.default)(a,s.INVALID_URL,"invalid URL"),(0,i.default)(a,s.INVALID_HEAD_TYPE,"invalid head type"),(0,i.default)(a,s.OPEN_LOG_FAIL,"open log file fail"),(0,i.default)(a,s.WRITE_LOG_FAIL,"write log file fail"),(0,i.default)(a,s.INVALID_FILEPATH,"invalid file path"),(0,i.default)(a,s.HANDLE_RELEASED,"handle has been released"),(0,i.default)(a,s.CREATE_MUTEX_FAIL,"create mutex fail"),(0,i.default)(a,s.LOCK_MUTEX_FAIL,"lock mutex fail"),(0,i.default)(a,s.UNLOCK_MUTEX_FAIL,"unlock mutex fail"),(0,i.default)(a,s.CREATE_THREAD_FAIL,"create thread fail"),(0,i.default)(a,s.NOT_SUPPORT,"not support this function"),(0,i.default)(a,s.SVN_SOCKET_CREATE_FAIL,"svn socket create fail"),(0,i.default)(a,s.SVN_SOCKET_CONNECT_FAIL,"svn socket connect fail"),(0,i.default)(a,s.SVN_SOCKET_SLECET_FAIL,"svn socket select fail"),(0,i.default)(a,s.SVN_SOCKET_SEND_FAIL,"svn socket send fail"),(0,i.default)(a,s.SVN_SOCKET_RECV_FAIL,"svn socket recv fail"),(0,i.default)(a,s.GETHOSTNAME_FAIL,"get hostname fail"),(0,i.default)(a,s.NET_NTOA_FAIL,"IP net transfer fail"),(0,i.default)(a,s.RESPONSE_PARSE_ERR,"response parse fail"),(0,i.default)(a,s.INVALID_AUTH_MODE,"invalid auth mode"),(0,i.default)(a,s.NOT_LOGIN,"is not login"),(0,i.default)(a,s.LOGINING,"is  logining"),(0,i.default)(a,s.UPLOAD_DOWNLOAD_TIMEOUT,"is  TIMEOUT"),(0,i.default)(a,s.LOGINED,"is  logined"),(0,i.default)(a,s.INITED,"is  inited"),(0,i.default)(a,s.LOGPATH_TOOLONG,"is  LogPath is too long"),(0,i.default)(a,s.LOGPATH_EMPTY,"is  LogPath is empty"),(0,i.default)(a,s.CURLE_COULDNT_CONNECT,""),(0,i.default)(a,s.CURLE_UNSUPPORTED_PROTOCOL,101),(0,i.default)(a,s.CURLE_FAILED_INIT,102),(0,i.default)(a,s.CURLE_URL_MALFORMAT,103),(0,i.default)(a,s.CURLE_NOT_BUILT_IN,104),(0,i.default)(a,s.CURLE_COULDNT_RESOLVE_PROXY,105),(0,i.default)(a,s.CURLE_COULDNT_RESOLVE_HOST,"curle couldn't resolve host"),(0,i.default)(a,s.CURLE_FTP_WEIRD_SERVER_REPLY,108),(0,i.default)(a,s.CURLE_REMOTE_ACCESS_DENIED,"a service was denied by the server due to lack of access - when login fails this is not returned."),(0,i.default)(a,s.CURLE_FTP_ACCEPT_FAILED,110),(0,i.default)(a,s.CURLE_FTP_WEIRD_PASS_REPLY,111),(0,i.default)(a,s.CURLE_FTP_ACCEPT_TIMEOUT,"timeout occurred accepting server"),(0,i.default)(a,s.CURLE_FTP_WEIRD_PASV_REPLY,113),(0,i.default)(a,s.CURLE_FTP_WEIRD_227_FORMAT,114),(0,i.default)(a,s.CURLE_FTP_CANT_GET_HOST,115),(0,i.default)(a,s.CURLE_OBSOLETE16,116),(0,i.default)(a,s.CURLE_FTP_COULDNT_SET_TYPE,117),(0,i.default)(a,s.CURLE_PARTIAL_FILE,118),(0,i.default)(a,s.CURLE_FTP_COULDNT_RETR_FILE,119),(0,i.default)(a,s.CURLE_OBSOLETE20,120),(0,i.default)(a,s.CURLE_QUOTE_ERROR,"quote command failure"),(0,i.default)(a,s.CURLE_OFFLINE_RETURNED_ERROR,122),(0,i.default)(a,s.CURLE_WRITE_ERROR,123),(0,i.default)(a,s.CURLE_OBSOLETE24,124),(0,i.default)(a,s.CURLE_UPLOAD_FAILED,"failed upload"),(0,i.default)(a,s.CURLE_READ_ERROR,"couldn't open/read from file"),(0,i.default)(a,s.CURLE_OUT_OF_MEMORY,"out of memory"),(0,i.default)(a,s.CURLE_OPERATION_TIMEDOUT,"the timeout time was reached"),(0,i.default)(a,s.CURLE_OBSOLETE29,129),(0,i.default)(a,s.CURLE_FTP_PORT_FAILED,"FTP PORT operation failed"),(0,i.default)(a,s.CURLE_FTP_COULDNT_USE_REST,"the REST command failed"),(0,i.default)(a,s.CURLE_OBSOLETE32,132),(0,i.default)(a,s.CURLE_RANGE_ERROR,"RANGE command didn't work"),(0,i.default)(a,s.CURLE_OFFLINE_POST_ERROR,134),(0,i.default)(a,s.CURLE_SSL_CONNECT_ERROR,"wrong when connecting with SSL"),(0,i.default)(a,s.CURLE_BAD_DOWNLOAD_RESUME,"couldn't resume download"),(0,i.default)(a,s.CURLE_FILE_COULDNT_READ_FILE,137),(0,i.default)(a,s.CURLE_LDAP_CANNOT_BIND,138),(0,i.default)(a,s.CURLE_LDAP_SEARCH_FAILED,139),(0,i.default)(a,s.CURLE_OBSOLETE40,140),(0,i.default)(a,s.CURLE_FUNCTION_NOT_FOUND,141),(0,i.default)(a,s.CURLE_ABORTED_BY_CALLBACK,142),(0,i.default)(a,s.CURLE_BAD_FUNCTION_ARGUMENT,143),(0,i.default)(a,s.CURLE_OBSOLETE44,144),(0,i.default)(a,s.CURLE_INTERFACE_FAILED,"CURLOPT_INTERFACE failed"),(0,i.default)(a,s.CURLE_OBSOLETE46,146),(0,i.default)(a,s.CURLE_TOO_MANY_REDIRECTS,"catch endless re-direct loops"),(0,i.default)(a,s.CURLE_UNKNOWN_OPTION,"User specified an unknown option"),(0,i.default)(a,s.CURLE_TELNET_OPTION_SYNTAX,"Malformed telnet option"),(0,i.default)(a,s.CURLE_OBSOLETE50,150),(0,i.default)(a,s.CURLE_PEER_FAILED_VERIFICATION,"peer's certificate or fingerprint wasn't verified fine"),(0,i.default)(a,s.CURLE_GOT_NOTHING,"when this is a specific error"),(0,i.default)(a,s.CURLE_SSL_ENGINE_NOTFOUND,"SSL crypto engine not found"),(0,i.default)(a,s.CURLE_SSL_ENGINE_SETFAILED,"can not set SSL crypto engine as default"),(0,i.default)(a,s.CURLE_SEND_ERROR,"failed sending network data"),(0,i.default)(a,s.CURLE_RECV_ERROR,"failure in receiving network data"),(0,i.default)(a,s.CURLE_OBSOLETE57,157),(0,i.default)(a,s.CURLE_SSL_CERTPROBLEM,"failure in receiving network data"),(0,i.default)(a,s.CURLE_SSL_CIPHER,"couldn't use specified cipher"),(0,i.default)(a,s.CURLE_SSL_CACERT,"problem with the CA cert (path?)"),(0,i.default)(a,s.CURLE_BAD_CONTENT_ENCODING,"nrecognized/bad encoding"),(0,i.default)(a,s.CURLE_LDAP_INVALID_URL,"Invalid LDAP URL"),(0,i.default)(a,s.CURLE_FILESIZE_EXCEEDED,"Maximum file size exceeded"),(0,i.default)(a,s.CURLE_USE_SSL_FAILED,"Requested FTP SSL level failed"),(0,i.default)(a,s.CURLE_SEND_FAIL_REWIND,"Sending the data requires a rewind that failed"),(0,i.default)(a,s.CURLE_SSL_ENGINE_INITFAILED,"failed to initialise ENGINE"),(0,i.default)(a,s.CURLE_LOGIN_DENIED,"user, password or similar was not accepted and we failed to login"),(0,i.default)(a,s.CURLE_TFTP_NOTFOUND,"file not found on server"),(0,i.default)(a,s.CURLE_TFTP_PERM,"permission problem on server"),(0,i.default)(a,s.CURLE_REMOTE_DISK_FULL,"out of disk space on server"),(0,i.default)(a,s.CURLE_TFTP_ILLEGAL,"Illegal TFTP operation"),(0,i.default)(a,s.CURLE_TFTP_UNKNOWNID,"Unknown transfer ID"),(0,i.default)(a,s.CURLE_REMOTE_FILE_EXISTS,"File already exists"),(0,i.default)(a,s.CURLE_TFTP_NOSUCHUSER,174),(0,i.default)(a,s.CURLE_CONV_FAILED,"conversion failed"),(0,i.default)(a,s.CURLE_CONV_REQD,"caller must register conversion\n                                                      callbacks using curl_easy_setopt options\n                                                    CURLOPT_CONV_FROM_NETWORK_FUNCTION,\n                                                      CURLOPT_CONV_TO_NETWORK_FUNCTION, and\n                                                    CURLOPT_CONV_FROM_UTF8_FUNCTION "),(0,i.default)(a,s.CURLE_SSL_CACERT_BADFILE,"could not load CACERT file, missing or wrong format"),(0,i.default)(a,s.CURLE_REMOTE_FILE_NOT_FOUND,"remote file not found"),(0,i.default)(a,s.CURLE_SSH,"error from the SSH layer, somewhat generic so the error message will be of interest when this has happened"),(0,i.default)(a,s.CURLE_SSL_SHUTDOWN_FAILED,"Failed to shut down the SSL connection"),(0,i.default)(a,s.CURLE_AGAIN,"socket is not ready for send/recv,wait till it's ready and try again (Added in 7.18.2)"),(0,i.default)(a,s.CURLE_SSL_CRL_BADFILE,"could not load CRL file, missing or wrong format (Added in 7.19.0)"),(0,i.default)(a,s.CURLE_SSL_ISSUER_ERROR,"Issuer check failed."),(0,i.default)(a,s.CURLE_FTP_PRET_FAILED,"a PRET command failed"),(0,i.default)(a,s.CURLE_RTSP_CSEQ_ERROR,"mismatch of RTSP CSeq numbers"),(0,i.default)(a,s.CURLE_RTSP_SESSION_ERROR,"mismatch of RTSP Session Ids"),(0,i.default)(a,s.CURLE_FTP_BAD_FILE_LIST,"unable to parse FTP file list"),(0,i.default)(a,s.CURLE_CHUNK_FAILED,"chunk callback reported error"),(0,i.default)(a,s.CURL_CREATE_HANDLE_FAIL,201),(0,i.default)(a,s.CURL_SET_HEAD_FAIL,202),(0,i.default)(a,s.LOGIN_FAILED,"[en]Indicates login failed."),(0,i.default)(a,s.LOAD_NSCALIB_FAIL,"[en]Indicates load NSCA library failed."),(0,i.default)(a,s.GET_NSCAFUNC_FAIL,"[en]Indicates get NSCA library function failed."),(0,i.default)(a,s.CHECKLABEL_TRUE,"[en]Indicates the document has NSCA label."),(0,i.default)(a,s.INVALID_FILEINFO,"Indicates invalid file info.   "),(0,i.default)(a,s.INVALID_FILESHA1,"[en]Indicates the MD5 error of the transferred file."),(0,i.default)(a,s.GETSHARELINK_FAIL,"[en]Indicates failed to get inbound link"),(0,i.default)(a,s.INVALID_SERVERMODE,"[en]Indicates invalid server type "),(0,i.default)(a,s.PRUPLOAD_EXIST,"[en]Indicates pre-upload file already exists. "),(0,i.default)(a,s.PRUPLOAD_FAIL,"[en]Indicates failed to Pre-upload file. "),(0,i.default)(a,s.UPLOAD_FAIL,"[en]Indicates failed to upload file. "),(0,i.default)(a,s.MORETHAN_TRANSMAX,"[en]Indicates upload file exceeds the maximum limit of 3G. "),(0,i.default)(a,s.DELETEFILE_FAIL,"[en]Indicates failed to delete file. "),(0,i.default)(a,s.FINISHFILE_FAIL,"[en]Indicates fragment transmission failed. "),(0,i.default)(a,s.PARTCOUNT_LARGER,"[en]Indicates the number of slices exceeds the number of HTTP connections "),(0,i.default)(a,s.OPENFILE_FAIL,"[en]Indicates failed to open file. "),(0,i.default)(a,s.UPLOADFILE_FINISHING,"[en]Indicates the file upload is almost finished. "),(0,i.default)(a,s.RESUMEURL_NULL,"[en]Indicates the URL for the resumed URL is empty. "),(0,i.default)(a,s.DISK_FULL,"[en]Indicates the server is full. "),(0,i.default)(a,s.ERROR_EXPIREDAT,"[en]Indicates error flushing token value. "),(0,i.default)(a,s.ERROR_INITPARTINFO,"[en]Indicates unable to initialize slice information. "),(0,i.default)(a,s.ERROR_GETDOWNLOADURL,"[en]Indicates that getting the download URL failed. "),(0,i.default)(a,s.ERROR_CREATEFOLDER,"[en]Indicates that create folder failed. "),(0,i.default)(a,s.ERROR_MODIFYFOLDER,"[en]Indicates that modify folder failed. "),(0,i.default)(a,s.ERROR_MOVEFILE,"[en]Indicates that move file failed. "),(0,i.default)(a,s.ERROR_SERVER_INTERNAL_ERROR,"[en]Indicates that server internal error."),a)},861:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isInReCall=t.reCallSuc=t.reCallEnterConf=t.terminateReCall=t.reCallTerminate=t.reCallStart=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1663),u=r(c),f=n(600),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=window.Logger("reCallModel")("index"),h=null,p=(t.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return d.info("savedRecallInfo is null, no need recall"),e.abrupt("return");case 3:if(null===h){e.next=6;break}return d.info("is already deal recall"),e.abrupt("return");case 6:if(!l.isUserEndConf()){e.next=9;break}return d.info("is in user endConf, no deal recall"),e.abrupt("return");case 9:h=new u.default(t,p),h.startReCall();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reCallTerminate=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,h.reCallTerminate();case 5:h=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.terminateReCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,h.terminateReCall();case 5:h=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h){e.next=3;break}return d.info("reCallervice is null, not to deal reCallEnterConf"),e.abrupt("return");case 3:h.reCallEnterConf();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallSuc=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h){e.next=3;break}return d.info("reCallervice is null, not to deal reCallSuc"),e.abrupt("return");case 3:h.reCallSucToStopReCall(),h=null;case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReCall=function(){return null!==h}},862:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.meetingHWsetCaptureCamera=t.meetingHWcameraOnOrOff=t.meetingHWmicrophoneOnOrOff=t.meetingHWspeakerOnOrOff=t.meetingHWreCallTimeOut=t.startCallFailed=t.firstQosReport=t.meetingHWLeaveConf=t.sipRegisterFailed=t.uportalLoginFailed=t.qosAlertSend=t.meetingHWsaveBigParam=t.meetingHWJoinConf=void 0;var a=n(98),o=r(a),i=n(1),s=r(i),c=n(100),u=r(c),f=n(2),l=r(f),d=null,h=null,p="",_=null,C=!0,v=window.Logger("logic")("meetingHWBuried"),m=function(){d=null,h=null,p="",C=!0,clearInterval(_)},S=function(){d=!0,h=null,C=!0},g=(t.meetingHWJoinConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_join_success",n="",v.info("joinConfData: ",p),r="string"==typeof p?p:(0,u.default)(p),S(),g(),w(t,n,r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.meetingHWsaveBigParam=function(e){p=e},t.qosAlertSend=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,f,l,p,_,C;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.isVideoConf,n=$getState().call.mediaInfo,r=n.audio,a=n.video,o={audioRecvBitRate:r.recv.bitRate,audioSendBitRate:r.send.bitRate,audioRecvLossFraction:r.recv.lost,audioSendLossFraction:r.send.lost,audioRecvDelay:r.recv.delay,audioSendDelay:r.send.delay,audioRecvJitter:r.recv.jitter,audioSendJitter:r.send.jitter},i={videoRecvBitRate:a.recv.bitRate,videoSendBitRate:a.send.bitRate,videoRecvResolutionRatio:a.recv.frameSize,videoSendResolutionRatio:a.send.frameSize,videoRecvFrameRate:a.recv.frameRate,videoSendFrameRate:a.send.frameRate,videoRecvLossFraction:a.recv.lost,videoSendLossFraction:a.send.lost,videoRecvDelay:a.recv.delay,videoSendDelay:a.send.delay,videoRecvJitter:a.recv.jitter,videoSendJitter:a.send.jitter},d&&null===h&&(c="string"==typeof o?o:(0,u.default)(o),f="Telepresence_qos_audio_alarm",l="Qos",t?(p="Telepresence_qos_video_alarm",_="Qos",C="string"==typeof i?i:(0,u.default)(i),w(f,l,c),w(p,_,C)):w(f,l,c),h=!0,setTimeout(function(){h=null},6e4));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.uportalLoginFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_uportal_login_fail",r="uPortal",a={reason:t},o=(0,u.default)(a),w(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sipRegisterFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_sip_register_fail",r="SIP",a={reason:t},o=(0,u.default)(a),w(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWLeaveConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_leave",n="",m(),w(t,n,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d&&(_=setInterval(function(){E()},3e5));case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),E=(t.firstQosReport=function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C&&E();case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().conf,t=e.isVideoConf,n=e.sharePersonNum,r=$getState().call.mediaInfo,a=r.audio,o=r.video,i=r.bfcp,s=0,c=0,f={audioRecvBitRate:a.recv.bitRate,audioSendBitRate:a.send.bitRate,audioRecvLossFraction:a.recv.lost,audioSendLossFraction:a.send.lost,audioRecvDelay:a.recv.delay,audioSendDelay:a.send.delay,audioRecvJitter:a.recv.jitter,audioSendJitter:a.send.jitter};for(var l in f)"- -"!==f[l]&&"--"!==f[l]&&(s+=1);if(8===s){var d="string"==typeof f?f:(0,u.default)(f);w("Telepresence_qos_audio_info","Qos",d),C=!1}if(t){var h={videoRecvBitRate:o.recv.bitRate,videoSendBitRate:o.send.bitRate,videoRecvResolutionRatio:o.recv.frameSize,videoSendResolutionRatio:o.send.frameSize,videoRecvFrameRate:o.recv.frameRate,videoSendFrameRate:o.send.frameRate,videoRecvLossFraction:o.recv.lost,videoSendLossFraction:o.send.lost,videoRecvDelay:o.recv.delay,videoSendDelay:o.send.delay,videoRecvJitter:o.recv.jitter,videoSendJitter:o.send.jitter};for(var p in h)"- -"!==h[p]&&"--"!==h[p]&&(c+=1);if(12===c){var _="string"==typeof h?h:(0,u.default)(h);w("Telepresence_qos_video_info","Qos",_)}}if(""!==n){var v={dataRecvBitRate:i.recv.bitRate&&"--"!==i.recv.bitRate?i.recv.bitRate:-1,dataSendBitRate:i.send.bitRate&&"--"!==i.send.bitRate?i.send.bitRate:-1,dataRecvResolutionRatio:i.recv.frameSize&&"--"!==i.recv.frameSize?i.recv.frameSize:-1,dataSendResolutionRatio:i.send.frameSize&&"--"!==i.send.frameSize?i.send.frameSize:-1,dataRecvFrameRate:i.recv.frameRate&&"--"!==i.recv.frameRate?i.recv.frameRate:-1,dataSendFrameRate:i.send.frameRate&&"--"!==i.send.frameRate?i.send.frameRate:-1,dataRecvLossFraction:i.recv.lost&&"--"!==i.recv.lost?i.recv.lost:-1,dataSendLossFraction:i.send.lost&&"--"!==i.send.lost?i.send.lost:-1,dataRecvDelay:i.recv.delay&&"--"!==i.recv.delay?i.recv.delay:-1,dataSendDelay:i.send.delay&&"--"!==i.send.delay?i.send.delay:-1,dataRecvJitter:i.recv.jitter&&"--"!==i.recv.jitter?i.recv.jitter:-1,dataSendJitter:i.send.jitter&&"--"!==i.send.jitter?i.send.jitter:-1},m="string"==typeof v?v:(0,u.default)(v);w("Telepresence_qos_data_info","Qos",m)}}),w=(t.startCallFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_make_call_fail",r="makeCall",a={reason:t},o=(0,u.default)(a),w(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWreCallTimeOut=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_abnormal_break",r="",a={reason:t},o=(0,u.default)(a),m(),w(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWspeakerOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_speaker",r="",n+=t?"_on":"_off",w(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWmicrophoneOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_microphone",r="MIC",n+=t?"_on":"_off",w(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWcameraOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="",n+=t?"_on":"_off",w(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWsetCaptureCamera=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="",1===t?(n+="_back",r=""):(n+="_front",r=""),w(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="ios",""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.meetingWHBuriedReport(t,n,r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}())},863:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});window.Logger("logic")("conference/dataUpdate"),t.updateIsShowExtendConf=function(e){$dispatch(coreUi.updateIsShowExtendConf(e))},t.updatePastponeTimeLogic=function(e){$dispatch(coreUi.updatePastponeTime(e))},t.changeConfAcsId=function(e){$dispatch(coreUi.changeConfAcsId(e))},t.changeConfAcsState=function(e){$dispatch(coreUi.changeConfAcsState(e))},t.changeExperienceConfId=function(e){$dispatch(coreUi.changeExperienceConfId(e))}},864:function(e,t,n){(function(e){function r(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),s(r,e,r.depth)}function a(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function o(e,t){return e}function i(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&N(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return m(a)||(a=s(e,a,r)),a}var o=c(e,n);if(o)return o;var p=Object.keys(n),_=i(p);if(e.showHidden&&(p=Object.getOwnPropertyNames(n)),T(n)&&(p.indexOf("message")>=0||p.indexOf("description")>=0))return u(n);if(0===p.length){if(N(n)){var C=n.name?": "+n.name:"";return e.stylize("[Function"+C+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return u(n)}var v="",S=!1,g=["{","}"];if(h(n)&&(S=!0,g=["[","]"]),N(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(E(n)&&(v=" "+RegExp.prototype.toString.call(n)),I(n)&&(v=" "+Date.prototype.toUTCString.call(n)),T(n)&&(v=" "+u(n)),0===p.length&&(!S||0==n.length))return g[0]+v+g[1];if(r<0)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=S?f(e,n,r,_,p):p.map(function(t){return l(e,n,r,_,t,S)}),e.seen.pop(),d(w,v,g)}function c(e,t){if(g(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,a){for(var o=[],i=0,s=t.length;i<s;++i)y(t,String(i))?o.push(l(e,t,n,r,String(i),!0)):o.push("");return a.forEach(function(a){a.match(/^\d+$/)||o.push(l(e,t,n,r,a,!0))}),o}function l(e,t,n,r,a,o){var i,c,u;if(u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},u.get?c=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(c=e.stylize("[Setter]","special")),y(r,a)||(i="["+a+"]"),c||(e.seen.indexOf(u.value)<0?(c=_(n)?s(e,u.value,null):s(e,u.value,n-1),c.indexOf("\n")>-1&&(c=o?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n"))):c=e.stylize("[Circular]","special")),g(i)){if(o&&a.match(/^\d+$/))return c;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+c}function d(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function _(e){return null===e}function C(e){return null==e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function g(e){return void 0===e}function E(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"==typeof e&&null!==e}function I(e){return w(e)&&"[object Date]"===O(e)}function T(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function N(e){return"function"==typeof e}function b(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function M(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return a.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(i,null,t)},function(t){e.nextTick(L,t,i)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,D(t)),n}var D=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},x=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,a=arguments,o=a.length,i=String(e).replace(x,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(a[n++]);case"%d":return Number(a[n++]);case"%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return e}}),s=a[n];n<o;s=a[++n])_(s)||!w(s)?i+=" "+s:i+=" "+r(s);return i},t.deprecate=function(n,r){function a(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return a};var k,P={};t.debuglog=function(n){if(g(k)&&(k=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!P[n])if(new RegExp("\\b"+n+"\\b","i").test(k)){var r=e.pid;P[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else P[n]=function(){};return P[n]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=_,t.isNullOrUndefined=C,t.isNumber=v,t.isString=m,t.isSymbol=S,t.isUndefined=g,t.isRegExp=E,t.isObject=w,t.isDate=I,t.isError=T,t.isFunction=N,t.isPrimitive=b,t.isBuffer=n(961);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=n(114),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var U="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push(function(e,r){e?n(e):t(r)});try{e.apply(this,a)}catch(e){n(e)}return r}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(U&&e[U]){var t=e[U];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,U,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),U&&Object.defineProperty(t,U,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,D(e))},t.promisify.custom=U,t.callbackify=M}).call(t,n(154))},902:function(e,t){},903:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){e.copy(t,n)}var o=n(117).Buffer,i=n(904);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},904:function(e,t){},905:function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var a=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(906),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(16))},906:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,s(c),c++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(f)setTimeout(i,0,e);else{var t=u[e];if(t){f=!0;try{o(t)}finally{a(e),f=!1}}}}if(!e.setImmediate){var s,c=1,u={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;s=function(t){var n=l.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(i,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(16),n(154))},907:function(e,t,n){(function(t){function n(e,t){function n(){if(!a){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var a=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(16))},908:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}e.exports=r;var a=n(588),o=n(396);o.inherits=n(114),o.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},909:function(e,t,n){e.exports=n(493)},910:function(e,t,n){e.exports=n(200)},911:function(e,t,n){e.exports=n(492).Transform},912:function(e,t,n){e.exports=n(492).PassThrough},918:function(e,t,n){e.exports=n(0)(123)},93:function(e,t,n){e.exports=n(0)(45)},94:function(e,t,n){e.exports=n(0)(47)},95:function(e,t,n){e.exports={default:n(143),__esModule:!0}},951:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endConfSendQos=t.startRecordQos=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(599),u=window.Logger("bigwinBuried")("buried"),f=void 0,l=void 0,d=0,h=!1,p=void 0,_=void 0,C=function(){f={qosType:11,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},l={qosType:0,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},d=0,h=!1},v=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,p,_,C,v,m,S,g,E;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return u.error("client config is not bigwin."),e.abrupt("return");case 3:return e.next=5,new coreTup.HWTupCall;case 5:return t=e.sent,e.next=8,t.getCallMediaParams({});case 8:n=e.sent,r=n.param,d++,a=r.svc_stream_info,r&&r.audio_stream_info&&(l.rcvTtlBytes=null!==r.audio_stream_info.bytes_received&&r.audio_stream_info.bytes_received>=l.rcvTtlBytes?r.audio_stream_info.bytes_received:l.rcvTtlBytes,l.sndTtlBytes=null!==r.audio_stream_info.bytes_sent&&r.audio_stream_info.bytes_sent>=l.sndTtlBytes?r.audio_stream_info.bytes_sent:l.sndTtlBytes,l.rcvAvgBitR=null!==r.audio_stream_info.recv_bit_rate&&r.audio_stream_info.recv_bit_rate>=l.rcvAvgBitR?r.audio_stream_info.recv_bit_rate:l.rcvAvgBitR,l.sndAvgBitR=null!==r.audio_stream_info.send_bit_rate&&r.audio_stream_info.send_bit_rate>=l.sndAvgBitR?r.audio_stream_info.send_bit_rate:l.sndAvgBitR,l.rcvMaxLossR=null!==r.audio_stream_info.recv_loss_fraction&&r.audio_stream_info.recv_loss_fraction>=l.rcvMaxLossR?r.audio_stream_info.recv_loss_fraction:l.rcvMaxLossR,l.sndMaxLossR=null!==r.audio_stream_info.send_loss_fraction&&r.audio_stream_info.send_loss_fraction>=l.sndMaxLossR?r.audio_stream_info.send_loss_fraction:l.sndMaxLossR,l.rcvMaxDelay=null!==r.audio_stream_info.recv_delay&&r.audio_stream_info.recv_delay>=l.rcvMaxDelay?r.audio_stream_info.recv_delay:l.rcvMaxDelay,l.sndMaxDelay=null!==r.audio_stream_info.send_delay&&r.audio_stream_info.send_delay>=l.sndMaxDelay?r.audio_stream_info.send_delay:l.sndMaxDelay,l.rcvMaxJitter=null!==r.audio_stream_info.recv_jitter&&r.audio_stream_info.recv_jitter>=l.rcvMaxJitter?r.audio_stream_info.recv_jitter:l.rcvMaxJitter,l.sndMaxJitter=null!==r.audio_stream_info.send_jitter&&r.audio_stream_info.send_jitter>=l.sndMaxJitter?r.audio_stream_info.send_jitter:l.sndMaxJitter),i=0,s=0,c=0,p=0,_=0,C=0,v=0,m=0,S=0,g=0;for(E in a)""===a[E].decode_name&&""===a[E].encode_name||(h=!0),i=null!==a[E].bytes_received&&a[E].bytes_received>=i?a[E].bytes_received:i,s=null!==a[E].bytes_sent&&a[E].bytes_sent>=s?a[E].bytes_sent:s,c=null!==a[E].video_recv_bit_rate&&a[E].video_recv_bit_rate/1e3>=c?a[E].video_recv_bit_rate/1e3:c,p=null!==a[E].video_send_bit_rate&&a[E].video_send_bit_rate/1e3>=p?a[E].video_send_bit_rate/1e3:p,_=null!==a[E].recv_loss_fraction&&a[E].recv_loss_fraction>=_?a[E].recv_loss_fraction:_,C=null!==a[E].send_loss_fraction&&a[E].send_loss_fraction>=C?a[E].send_loss_fraction:C,v=null!==a[E].recv_delay&&a[E].recv_delay>=v?a[E].recv_delay:v,m=null!==a[E].send_delay&&a[E].send_delay>=m?a[E].send_delay:m,S=null!==a[E].recv_jitter&&a[E].recv_jitter>=S?a[E].recv_jitter:S,g=null!==a[E].send_jitter&&a[E].send_jitter>=g?a[E].send_jitter:g;!0===h&&(f.rcvTtlBytes=f.rcvTtlBytes>=i?f.rcvTtlBytes:i,f.sndTtlBytes=f.sndTtlBytes>=s?f.sndTtlBytes:s,f.rcvAvgBitR=f.rcvAvgBitR>=c?f.rcvAvgBitR:c,f.sndAvgBitR=f.sndAvgBitR>=p?f.sndAvgBitR:p,f.rcvMaxLossR=f.rcvMaxLossR>=_?f.rcvMaxLossR:_,f.sndMaxLossR=f.sndMaxLossR>=C?f.sndMaxLossR:C,f.rcvMaxDelay=f.rcvMaxDelay>=v?f.rcvMaxDelay:v,f.sndMaxDelay=f.sndMaxDelay>=m?f.sndMaxDelay:m,f.rcvMaxJitter=f.rcvMaxJitter>=S?f.rcvMaxJitter:S,f.sndMaxJitter=f.sndMaxJitter>=g?f.sndMaxJitter:g);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.startRecordQos=function(){if(u.info("buried startRecordQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");C(),p=setInterval(function(){v()},5e3),_=setInterval(function(){!0===h&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),C()},6e4)},t.endConfSendQos=function(){if(u.info("buried endConfSendQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");clearInterval(p),clearInterval(_),d<1||(!0===h&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),C())}},952:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECORD_STATUS={NORMAL_RECORD:"NORMAL_RECORD",CANCEL_RECORD:"CANCEL_RECORD"},t.MAX_STRING_LENGTH={MAX_LENGTH:"25"}},953:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EncoderAdpt=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=window.Logger("conf")("logic/video/svcManager"),u={LEVEL_INVALID:-1,LEVEL_0:0,LEVEL_1:1},f=[{width:1280,height:720,framerate:25,bitrate:1856},{width:960,height:540,framerate:20,bitrate:1216},{width:640,height:360,framerate:20,bitrate:960}],l=function(){function e(){(0,o.default)(this,e),this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1}return(0,s.default)(e,[{key:"clear",value:function(){this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1}},{key:"check",value:function(e){var t=!1;return this.punishCheck>=0&&(this.punishCheck++,e>=80&&(this.punishTime=this.punishTime<480?2*(this.punishTime+15)-15:465,this.ResolutionDowngrade(),this.continuousTime=0,this.punishCheck=-1,t=!0,c.info("punish: ",this.punishTime)),this.punishCheck>=2&&(this.punishCheck=-1)),this.clearPunishCheck&&e<80&&(this.punishTime=0,this.clearPunishCheck=!1,t=!0,c.info("clear punish: ",this.punishTime)),t}},{key:"feed",value:function(e){c.info(">>>>>>>>>current cpu rate: ",e);var t=e>80?u.LEVEL_1:u.LEVEL_0;if(t!==this.continuousLevel?(this.continuousLevel=t,this.continuousTime=5):this.continuousTime+=5,!this.check(e)&&(this.continuousTime>=15&&this.continuousLevel===u.LEVEL_1&&(this.ResolutionDowngrade(),this.continuousTime=0),this.continuousTime>=15+this.punishTime&&this.continuousLevel===u.LEVEL_0)){var n=this.ResolutionUpgrade();this.continuousTime=0,n&&(this.punishCheck=0),this.punishTime&&(this.clearPunishCheck=!0)}}},{key:"ResolutionDowngrade",value:function(){if(c.info("resolution downgrade"),this.encoderLevel>=f.length-1)return c.info("can not downgrade encoder level"),!1;this.encoderLevel++,this.encoderLevel>=f.length&&(this.encoderLevel=f.length-1),c.info("current encoder level[",this.encoderLevel,"]",f[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,f[this.encoderLevel].width,f[this.encoderLevel].height,f[this.encoderLevel].framerate,f[this.encoderLevel].bitrate),!0}},{key:"ResolutionUpgrade",value:function(){if(c.info("resolution upgrade"),this.encoderLevel<=0)return c.info("can not upgrade encoder level"),!1;if(2===window.cpu_core_num&&2===window.cpu_proc_num&&f[this.encoderLevel].height>360)return c.info("2 core 2 logical processors cpu, can not upgrade encoder level"),!1;this.encoderLevel--,this.encoderLevel<=0&&(this.encoderLevel=0),c.info("current encoder level[",this.encoderLevel,"]",f[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,f[this.encoderLevel].width,f[this.encoderLevel].height,f[this.encoderLevel].framerate,f[this.encoderLevel].bitrate),!0}}]),e}();t.EncoderAdpt=new l},954:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(){function e(e){this.mode=u.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var r=[],a=this.data.charCodeAt(t);a>65536?(r[0]=240|(1835008&a)>>>18,r[1]=128|(258048&a)>>>12,r[2]=128|(4032&a)>>>6,r[3]=128|63&a):a>2048?(r[0]=224|(61440&a)>>>12,r[1]=128|(4032&a)>>>6,r[2]=128|63&a):a>128?(r[0]=192|(1984&a)>>>6,r[1]=128|63&a):r[0]=a,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(e,t){if(void 0===e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0===e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function a(e,t){this.totalCount=e,this.dataCount=t}function o(){this.buffer=[],this.length=0}function i(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var n=t.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(e=parseFloat(n[1]))}return e}function s(e,t){for(var n=1,r=c(e),a=0,o=_.length;a<=o;a++){var i=0;switch(t){case f.L:i=_[a][0];break;case f.M:i=_[a][1];break;case f.Q:i=_[a][2];break;case f.H:i=_[a][3];break;default:i=0}if(r<=i)break;n++}if(n>_.length)throw new Error("Too long data");return n}function c(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null===this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0===r||6===r)||0<=r&&r<=6&&(0===n||6===n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=d.getLostPoint(this);(0===n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var a=0;a<this.modules.length;a++)for(var o=1*a,i=0;i<this.modules[a].length;i++){var s=1*i,c=this.modules[a][i];c&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+1,o),r.lineTo(s+1,o+1),r.lineTo(s,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=d.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],a=e[n];if(null==this.modules[r][a])for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)this.modules[r+o][a+i]=-2===o||2===o||-2===i||2===i||0===o&&0===i}},setupTypeNumber:function(e){for(var t=d.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=d.getBCHTypeInfo(n),a=0;a<15;a++){var o=!e&&1==(r>>a&1);a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;a<15;a++){var o=!e&&1==(r>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,a=7,o=0,i=this.moduleCount-1;i>0;i-=2)for(6===i&&i--;;){for(var s=0;s<2;s++)if(null===this.modules[r][i-s]){var c=!1;o<e.length&&(c=1==(e[o]>>>a&1));var u=d.getMask(t,r,i-s);u&&(c=!c),this.modules[r][i-s]=c,a--,-1===a&&(o++,a=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){for(var i=a.getRSBlocks(e,n),s=new o,c=0;c<r.length;c++){var u=r[c];s.put(u.mode,4),s.put(u.getLength(),d.getLengthInBits(u.mode,e)),u.write(s)}for(var f=0,c=0;c<i.length;c++)f+=i[c].dataCount;if(s.getLengthInBits()>8*f)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*f+")");for(s.getLengthInBits()+4<=8*f&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*f)break;if(s.put(t.PAD0,8),s.getLengthInBits()>=8*f)break;s.put(t.PAD1,8)}return t.createBytes(s,i)},t.createBytes=function(e,t){for(var r=0,a=0,o=0,i=new Array(t.length),s=new Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,f=t[c].totalCount-u;a=Math.max(a,u),o=Math.max(o,f),i[c]=new Array(u);for(var l=0;l<i[c].length;l++)i[c][l]=255&e.buffer[l+r];r+=u;var h=d.getErrorCorrectPolynomial(f),p=new n(i[c],h.getLength()-1),_=p.mod(h);s[c]=new Array(h.getLength()-1);for(var l=0;l<s[c].length;l++){var C=l+_.getLength()-s[c].length;s[c][l]=C>=0?_.get(C):0}}for(var v=0,l=0;l<t.length;l++)v+=t[l].totalCount;for(var m=new Array(v),S=0,l=0;l<a;l++)for(var c=0;c<t.length;c++)l<i[c].length&&(m[S++]=i[c][l]);for(var l=0;l<o;l++)for(var c=0;c<t.length;c++)l<s[c].length&&(m[S++]=s[c][l]);return m};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;d.getBCHDigit(t)-d.getBCHDigit(d.G15)>=0;)t^=d.G15<<d.getBCHDigit(t)-d.getBCHDigit(d.G15);return(e<<10|t)^d.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;d.getBCHDigit(t)-d.getBCHDigit(d.G18)>=0;)t^=d.G18<<d.getBCHDigit(t)-d.getBCHDigit(d.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return d.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case l.PATTERN000:return(t+n)%2==0;case l.PATTERN001:return t%2==0;case l.PATTERN010:return n%3==0;case l.PATTERN011:return(t+n)%3==0;case l.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case l.PATTERN101:return t*n%2+t*n%3==0;case l.PATTERN110:return(t*n%2+t*n%3)%2==0;case l.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),r=0;r<e;r++)t=t.multiply(new n([1,h.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:case u.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var a=0;a<t;a++){for(var o=0,i=e.isDark(r,a),s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||0===s&&0===c||i===e.isDark(r+s,a+c)&&o++;o>5&&(n+=3+o-5)}for(var r=0;r<t-1;r++)for(var a=0;a<t-1;a++){var u=0;e.isDark(r,a)&&u++,e.isDark(r+1,a)&&u++,e.isDark(r,a+1)&&u++,e.isDark(r+1,a+1)&&u++,0!==u&&4!==u||(n+=3)}for(var r=0;r<t;r++)for(var a=0;a<t-6;a++)e.isDark(r,a)&&!e.isDark(r,a+1)&&e.isDark(r,a+2)&&e.isDark(r,a+3)&&e.isDark(r,a+4)&&!e.isDark(r,a+5)&&e.isDark(r,a+6)&&(n+=40);for(var a=0;a<t;a++)for(var r=0;r<t-6;r++)e.isDark(r,a)&&!e.isDark(r+1,a)&&e.isDark(r+2,a)&&e.isDark(r+3,a)&&e.isDark(r+4,a)&&!e.isDark(r+5,a)&&e.isDark(r+6,a)&&(n+=40);for(var f=0,a=0;a<t;a++)for(var r=0;r<t;r++)e.isDark(r,a)&&f++;return n+=Math.abs(100*f/t/t-50)/5*10}},h={glog:function(e){if(e<1)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},p=0;p<8;p++)h.EXP_TABLE[p]=1<<p;for(var p=8;p<256;p++)h.EXP_TABLE[p]=h.EXP_TABLE[p-4]^h.EXP_TABLE[p-5]^h.EXP_TABLE[p-6]^h.EXP_TABLE[p-8];for(var p=0;p<255;p++)h.LOG_TABLE[h.EXP_TABLE[p]]=p;n.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<e.getLength();a++)t[r+a]^=h.gexp(h.glog(this.get(r))+h.glog(e.get(a)));return new n(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<e.getLength();a++)r[a]^=h.gexp(h.glog(e.get(a))+t);return new n(r,0).mod(e)}},a.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a.getRSBlocks=function(e,t){var n=a.getRsBlockTable(e,t);if(void 0===n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,o=[],i=0;i<r;i++)for(var s=n[3*i+0],c=n[3*i+1],u=n[3*i+2],f=0;f<s;f++)o.push(new a(c,u));return o},a.getRsBlockTable=function(e,t){switch(t){case f.L:return a.RS_BLOCK_TABLE[4*(e-1)+0];case f.M:return a.RS_BLOCK_TABLE[4*(e-1)+1];case f.Q:return a.RS_BLOCK_TABLE[4*(e-1)+2];case f.H:return a.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},o.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var _=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],C=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}var n=this._htOption,r=this._el,a=e.getModuleCount();Math.floor(n.width/a),Math.floor(n.height/a);this.clear();var o=t("svg",{viewBox:"0 0 "+String(a)+" "+String(a),width:"100%",height:"100%",fill:n.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(o),o.appendChild(t("rect",{fill:n.colorLight,width:"100%",height:"100%"})),o.appendChild(t("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;i<a;i++)for(var s=0;s<a;s++)if(e.isDark(i,s)){var c=t("use",{x:String(s),y:String(i)});c.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(c)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),v="svg"===document.documentElement.tagName.toLowerCase(),m=v?C:function(){return"undefined"!=typeof CanvasRenderingContext2D}()?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none",this._htOption.successCallback&&this._htOption.successCallback.call(this,this._elImage.src)}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var r=document.createElement("img"),a=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},o=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return r.onabort=a,r.onerror=a,r.onload=o,void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var n=function(e,t){this._bIsPainted=!1,this._android=i(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(e){var t=this._elImage,n=this._oContext,r=this._htOption,a=e.getModuleCount(),o=r.width/a,i=r.height/a,s=Math.round(o),c=Math.round(i);t.style.display="none",this.clear();for(var u=0;u<a;u++)for(var f=0;f<a;f++){var l=e.isDark(u,f),d=f*o,h=u*i;n.strokeStyle=l?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=l?r.colorDark:r.colorLight,n.fillRect(d,h,o,i),n.strokeRect(Math.floor(d)+.5,Math.floor(h)+.5,s,c),n.strokeRect(Math.ceil(d)-.5,Math.ceil(h)-.5,s,c)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},n}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,n=this._el,r=e.getModuleCount(),a=Math.floor(t.width/r),o=Math.floor(t.height/r),i=['<table style="border:0;border-collapse:collapse;">'],s=0;s<r;s++){i.push("<tr>");for(var c=0;c<r;c++)i.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+a+"px;height:"+o+"px;background-color:"+(e.isDark(s,c)?t.colorDark:t.colorLight)+';"></td>');i.push("</tr>")}i.push("</table>"),n.innerHTML=i.join("");var u=n.childNodes[0],f=(t.width-u.offsetWidth)/2,l=(t.height-u.offsetHeight)/2;f>0&&l>0&&(u.style.margin=l+"px "+f+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();r=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.H,success:Noop,title:""},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(m=C),this._android=i(),this._el=e,this._oQRCode=null,this._oDrawing=new m(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},r.prototype.makeCode=function(e){this._oQRCode=new t(s(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=this._htOption.title||e,this._oDrawing.draw(this._oQRCode),this.makeImage()},r.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},r.prototype.clear=function(){this._oDrawing.clear()},r.CorrectLevel=f}(),t.default=r},955:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function o(e){return u.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function i(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}var c=n(1674),u=n(1675);t.parse=a,t.resolve=i,t.resolveObject=s,t.format=o,t.Url=r;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(h),_=["'"].concat(p),C=["%","/","?",";","#"].concat(_),v=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=n(1676);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(a),i=/\\/g;o[0]=o[0].replace(i,"/"),e=o.join(a);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var l=d.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?I.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=f.exec(s);if(h){h=h[0];var p=h.toLowerCase();this.protocol=p,s=s.substr(h.length)}if(n||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===s.substr(0,2);!T||h&&E[h]||(s=s.substr(2),this.slashes=!0)}if(!E[h]&&(T||h&&!w[h])){for(var N=-1,b=0;b<v.length;b++){var O=s.indexOf(v[b]);-1!==O&&(-1===N||O<N)&&(N=O)}var A,R;R=-1===N?s.lastIndexOf("@"):s.lastIndexOf("@",N),-1!==R&&(A=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(A)),N=-1;for(var b=0;b<C.length;b++){var O=s.indexOf(C[b]);-1!==O&&(-1===N||O<N)&&(N=O)}-1===N&&(N=s.length),this.host=s.slice(0,N),s=s.slice(N),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var L=this.hostname.split(/\./),b=0,M=L.length;b<M;b++){var D=L[b];if(D&&!D.match(m)){for(var x="",k=0,P=D.length;k<P;k++)D.charCodeAt(k)>127?x+="x":x+=D[k];if(!x.match(m)){var F=L.slice(0,b),U=L.slice(b+1),B=D.match(S);B&&(F.push(B[1]),U.unshift(B[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=c.toASCII(this.hostname));var W=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+W,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!g[p])for(var b=0,M=_.length;b<M;b++){var V=_[b];if(-1!==s.indexOf(V)){var $=encodeURIComponent(V);$===V&&($=escape(V)),s=s.split(V).join($)}}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var Y=s.indexOf("?");if(-1!==Y?(this.search=s.substr(Y),this.query=s.substr(Y+1),t&&(this.query=I.parse(this.query)),s=s.slice(0,Y)):t&&(this.search="",this.query={}),s&&(this.pathname=s),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",j=this.search||"";this.path=W+j}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=I.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+a+n+i+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),o=0;o<a.length;o++){var i=a[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var f=s[c];"protocol"!==f&&(n[f]=e[f])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!w[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var h=l[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var _=n.pathname||"",C=n.search||"";n.path=_+C}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=m||v||n.host&&e.pathname,g=S,I=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],T=n.protocol&&!w[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===I[0]?I[0]=n.host:I.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),S=S&&(""===p[0]||""===I[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,I=p;else if(p.length)I||(I=[]),I.pop(),I=I.concat(p),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(T){n.hostname=n.host=I.shift();var N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");N&&(n.auth=N.shift(),n.host=n.hostname=N.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!I.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=I.slice(-1)[0],O=(n.host||e.host||I.length>1)&&("."===b||".."===b)||""===b,A=0,R=I.length;R>=0;R--)b=I[R],"."===b?I.splice(R,1):".."===b?(I.splice(R,1),A++):A&&(I.splice(R,1),A--);if(!S&&!g)for(;A--;A)I.unshift("..");!S||""===I[0]||I[0]&&"/"===I[0].charAt(0)||I.unshift(""),O&&"/"!==I.join("/").substr(-1)&&I.push("");var y=""===I[0]||I[0]&&"/"===I[0].charAt(0);if(T){n.hostname=n.host=y?"":I.length?I.shift():"";var N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");N&&(n.auth=N.shift(),n.host=n.hostname=N.shift())}return S=S||n.host&&I.length,S&&!y&&I.unshift(""),I.length?n.pathname=I.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},956:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return a.exec(e).slice(1)};t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),o=r(n.split("/")),i=Math.min(a.length,o.length),s=i,c=0;c<i;c++)if(a[c]!==o[c]){s=c;break}for(var u=[],c=s;c<a.length;c++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(154))},957:function(e,t,n){e.exports={default:n(958),__esModule:!0}},958:function(e,t,n){n(959);var r=n(8).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},959:function(e,t,n){var r=n(503),a=n(960).f;n(120)("getOwnPropertyDescriptor",function(){return function(e,t){return a(r(e),t)}})},960:function(e,t,n){e.exports=n(0)(196)},961:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},962:function(e,t,n){"use strict";function r(e){i.info("checkConferenceId");var t=isNullOrEmpty(e);return t&&(i.info("userClick  checkConferenceId",language.ENTER_CONF_ACS_ID_NULL),window.alert(language.ENTER_CONF_ACS_ID_NULL)),t}function a(e){i.info("getExperienceConferenceInfo");var t=e.split("*"),n={confId:t[0]};return 2!==t.length||isNullOrEmpty(t[1])||(i.info("getExperienceConferenceInfo mi ma"),n.confPwd=t[1]),n}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConferenceId=r,t.getExperienceConferenceInfo=a;var o=n(863),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(o),window.Logger("logic")("conference/audio/joinConference"))},963:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getConfShareUrl=t.dateConvertTo=t.maxhubSkipLogin=t.registerMaxhubEvent=t.OnCleanValue=t.OnDecryptValue=t.OnEncryptValue=t.onStopCloudLink=t.onShowOrHideMainWnd=t.onGetMainWnd=t.onChangeLanguage=t.onLogout=t.onLeaveConference=t.onRunCloudLink=t.NotifyCameraListUpdateEx=t.onJoinConfFailed=t.changeHasSent=t.OnBigWinSetRecvShareParam=t.OnBigWinSetDevice=t.onBiggetDeviceList=t.onBiggetSpkValue=t.onBiggetMicValue=t.onBigWinSetSpkValue=t.onBigWinSetMicValue=t.onBigWinSharingUsername=t.onBigWinDataSharingHwnd=t.onBigWinVideoHwnd=t.onBigWinCtrlLocalCamera=t.resumeDeviceInfo=t.onBigWinLeaveConference=t.onBigWinJoinConference=t.onBigWinReLogin=t.onBigWinRunCloudLink=t.registerBigWinEvent=t.initWebSocketAPI=void 0;var a=n(100),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(158),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(f),n(224)),d=n(599),h=n(601),p=r(h),_=n(234),C=n(204),v=window.Logger("conference")("index");window.confAccesscode="",window.confPasscode="",window.confVip="",window.ConfUsername="",window.loginPass="",window.anonymousJoinConf=!1;var m=null,S=function(){var e=$getState().call;m=new Object,["micValue","voiceValue","micDevicesList","spkDevicesList","cameraDevicesList"].forEach(function(t){e.hasOwnProperty(t)&&(m[t]=e[t])})},g=(t.initWebSocketAPI=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isHubEnv){e.next=5;break}return e.next=3,(0,l.initMaxhubAPI)();case 3:e.next=6;break;case 5:(0,l.initAPI)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.registerBigWinEvent=function(){v.info("registerBigWinEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",g),coreCommon.BigwinObserver.subscribe("OnReloginCloudLink",E),coreCommon.BigwinObserver.subscribe("OnJoinConference",T),coreCommon.BigwinObserver.subscribe("OnLeaveConference",N),coreCommon.BigwinObserver.subscribe("OnCtrlLocalCamera",O),coreCommon.BigwinObserver.subscribe("OnSetMicValue",R),coreCommon.BigwinObserver.subscribe("OnSetSpkValue",y),coreCommon.BigwinObserver.subscribe("OnSetDevice",x),coreCommon.BigwinObserver.subscribe("ongetMicValue",L),coreCommon.BigwinObserver.subscribe("ongetSpkValue",M),coreCommon.BigwinObserver.subscribe("ongetDeviceList",D),coreCommon.BigwinObserver.subscribe("OnChangeHasSent",k),coreCommon.BigwinObserver.subscribe("OnJoinConfFailed",P),coreCommon.BigwinObserver.subscribe("onBigWinVideoHwnd",A),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",F)},t.onBigWinRunCloudLink=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="2052",n=0===t.param.language?"1033":"2052",setLanguage(n),!isNullOrEmpty(t.param.uPartal_acc)&&!isNullOrEmpty(t.param.uPartal_url)){e.next=15;break}return v.info("uPartal_acc or uPartal_url is null"),window.anonymousJoinConf=!0,e.next=8,new coreTup.HWTupCall;case 8:return r=e.sent,e.next=11,r.config({log_path:window.LOG_PATH,enable_json_log:window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG||0});case 11:return e.next=13,(new coreCall.CallManager).setCallNotifyFunc();case 13:return coreSetting.initMediaDevice(),e.abrupt("return");case 15:return a=t.param.uPartal_acc,o=t.param.uPartal_url,i=t.param.uPartal_port,window.anonymousJoinConf=!1,window.switchAccount=!1,e.next=22,window.handleSwitchAccount({account:a,serverAddress:o,serverPort:i,noNeedLogout:!0});case 22:return e.next=24,coreSecurity.PasswordManager.setPassword("password",t.param.uPartal_pas);case 24:coreAccount.login();case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());window.retryUportalLoginTimes=0,window.baseTimeInterval=0,window.shouldStopRertyLogin=!0,window.bigwinReTryLogin=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("window.shouldStopRertyLogin = "+window.shouldStopRertyLogin),!0!==window.shouldStopRertyLogin){e.next=3;break}return e.abrupt("return");case 3:window.retryUportalLoginTimes++,t=5,window.switchAccount&&(t=15),window.retryUportalLoginTimes<=t?(n=0,window.switchAccount?n=2:1===window.retryUportalLoginTimes?(n=parseInt(21*Math.random()+10,10),window.baseTimeInterval=n):n=window.baseTimeInterval*Math.pow(2,window.retryUportalLoginTimes),v.info("bigwinReTryLogin, retryUportalLoginTimes = "+window.retryUportalLoginTimes+" , totalTimes = "+t+" , timeInterval = "+n),setTimeout(function(){coreAccount.login()},1e3*n)):(window.shouldStopRertyLogin=!0,(0,l.NotifyLoginFailedEx)(1),v.info("bigwinReTryLogin, try many times. retry times = "+window.retryUportalLoginTimes));case 7:case"end":return e.stop()}},e,void 0)}));var E=t.onBigWinReLogin=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinReLogin: description="+t.description+",call="+t.call+",cmd="+t.cmd+",opt="+t.opt+",port="+t.param.port+",url="+t.param.url+",userno="+t.param.acc),e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!1===(n=e.sent)){e.next=13;break}return r=t.param.acc,a=t.param.url,o=t.param.port,e.next=10,window.handleSwitchAccount({account:r,serverAddress:a,serverPort:o});case 10:return e.next=12,coreSecurity.PasswordManager.setPassword("password",t.param.pas);case 12:setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login()},500);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"9"===t.substr(0,1)||"2"===t.substr(0,1)||"3"===t.substr(0,1)?window.bigConfIsVideo=!0:window.bigConfIsVideo=!1,v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().login.serverAddress,v.info("onBigWinJoinConference, uportal changed, old: "+n+" new: "+t.param.url+" isRelogin: "+r),window.confAccesscode=t.param.acccode,window.confPasscode=t.param.passcode,window.confVip=t.param.vip,window.ConfUsername=t.param.username,window.loginPass=t.param.pas,window.switchAccount=!0,e.next=10,window.handleSwitchAccount({account:t.param.acc,serverAddress:t.param.url,serverPort:t.param.port});case 10:if(!r){e.next=17;break}return e.next=13,coreSecurity.PasswordManager.setPassword("password",t.param.pas);case 13:coreAccount.getLoginModel().isSupportProxy=!1,setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login()},500),e.next=17;break;case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=t.onBigWinJoinConference=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinJoinConference: ",(0,o.default)(t)),e.next=3,w(t.param.passcode);case 3:if(window.delayDispatchRecvBFCP=!1,!window.anonymousJoinConf){e.next=8;break}return v.info("anonymous join "+window.anonymousJoinConf),I(t,!0),e.abrupt("return");case 8:if("VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=13;break}return v.error("CloudLink is in call status , can not start call."),(0,l.NotifyJoinConfFailed)(0),$getState().bigwinBuried.buried.postHasSent||((0,d.joinConfFailed)(),$dispatch(coreUi.changeHasSentState(!0))),e.abrupt("return");case 13:if((n=coreAccount.getLoginModel().isSipRegSuc())&&!window.isOffline){e.next=18;break}return v.info("CloudLink is offline. Relogin"),I(t,!0),e.abrupt("return");case 18:if(r=$getState().login.serverAddress,!isNullOrEmpty(t.param.url)&&r!==t.param.url){e.next=35;break}if(v.info("onBigWinJoinConference, address equal: "+r),a=t.param.vip?t.param.vip:"",$dispatch(coreUi.changeBuriedAccesscode(t.param.acccode)),$dispatch(coreUi.changeBuriedPasscode(t.param.passcode)),$dispatch(coreUi.changeBuriedJoinConfVip(a)),i=t.param.acccode+"*"+t.param.passcode,isNullOrEmpty(t.param.username)){e.next=31;break}return e.next=29,new coreTup.HWTupCall;case 29:c=e.sent,c.configTUPCallCfgAccountName(t.param.username);case 31:v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo),coreCall.CallOut(i,{number:i,addr_vip:a},window.bigConfIsVideo),e.next=36;break;case 35:I(t,!1);case 36:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.bigwinCommonLogic=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWin CloudLink, bigwinCommonLogic."),e.next=3,coreSecurity.PasswordManager.setPassword("password",window.loginPass);case 3:window.loginPass="",v.info("onBigWin CloudLink, start login."),coreAccount.login();case 6:case"end":return e.stop()}},e,void 0)}));var N=t.onBigWinLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.anonymousJoinConf&&S(),t=$getState(),n=t.conf.confHandle,r=t.call.callId,""===n){e.next=9;break}return v.info("onBigWin leave conf, confHandle=",n),window.CLIENTCONFIG.ISBIGWIN&&((0,C.setCloseShareDataOperate)(!0),v.info("onBigWinLeaveConference hasCloseShareDataOperate : true")),e.next=7,(0,f.actionLeaveConf)();case 7:e.next=12;break;case 9:return v.info("onBigWin end call, callId=",r),e.next=12,(0,f.endCallInConf)(r);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=t.resumeDeviceInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,f,l,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("resumeDeviceInfo begin"),e.next=3,new coreTup.HWTupCall;case 3:return t=e.sent,e.next=6,t.config({log_path:window.LOG_PATH,enable_json_log:window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG||0});case 6:return e.next=8,(new coreCall.CallManager).setCallNotifyFunc();case 8:n=[{name:"cameraDevicesList",handler:changeCameraDevicesList},{name:"spkDevicesList",handler:changeSpkDevicesList},{name:"micDevicesList",handler:changeMicDevicesList}],r=0;case 10:if(!(r<n.length)){e.next=19;break}return a=n[r],e.next=14,coreAccount.get(a.name,!0);case 14:o=e.sent,Array.isArray(o)&&(v.info(a.name,o),$dispatch(a.handler(o)));case 16:r++,e.next=10;break;case 19:i=[{name:"spkDevice-value",handler:setVoiceValue},{name:"micDevice-value",handler:setMicValue},{name:"spkDevices-selected",handler:setSpkIndex},{name:"micDevices-selected",handler:setMicIndex},{name:"cameraDevices-selected",handler:setVideoIndex}],c=0;case 21:if(!(c<i.length)){e.next=30;break}return u=i[c],e.next=25,coreAccount.get(u.name,!0);case 25:f=e.sent,isNullOrEmpty(f)||(v.info(u.name,f),u.handler(f));case 27:c++,e.next=21;break;case 30:return e.next=32,coreAccount.get("share-wnd-width",!0);case 32:return l=e.sent,e.next=35,coreAccount.get("share-wnd-height",!0);case 35:d=e.sent,v.info("share-wnd-width",l),v.info("share-wnd-height",d),isNullOrEmpty(l)||isNullOrEmpty(d)||_.NativeInterface.setBigconfDataInitRect(l,d),m=null,v.info("resumeDeviceInfo end");case 41:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.bigWinCommonLogOut=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("bigWinCommonLogOut"),!window.anonymousJoinConf){e.next=14;break}return v.info("onBigWin anonymous logout before"),S(),t=!1,"login"===window.getRoute()&&(t=!0),window.loginPass="",e.next=9,appService.logOff();case 9:if(!t){e.next=13;break}return e.next=12,coreCommon.initDb();case 12:b();case 13:v.info("onBigWin anonymous logout end");case 14:case"end":return e.stop()}},e,void 0)}));var O=t.onBigWinCtrlLocalCamera=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("onBigWinCtrlLocalCamera: ",(0,o.default)(t)),n=$getState(),r=n.conf.confHandle,""!==r?coreCall.openOrOffCamera(t.param.bstop):v.error("onBigWin is not in conference, you can't control camera");case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=t.onBigWinVideoHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,1!==t.param.video_wnd){e.next=11;break}return a=(0,o.default)(t),v.info("onBigWinGetVHwnd data:",a),e.next=7,_.NativeInterface.getFrameHwnd();case 7:r=e.sent,n.hWnd=r.param.frameHwnd,e.next=12;break;case 11:n.hWnd=0;case 12:return v.info("onBigWinGetVHwnd hhwnd:",n.hWnd),i=null,e.next=16,new p.default;case 16:i=e.sent,i.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),R=(t.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}v.info("getBfcpFrameHwnd"),r=_.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return v.info("getDataConfFrameWnd"),e.next=10,_.NativeInterface.getDataConfFrameWnd();case 10:r=e.sent;case 11:return v.info("onBigWinGetSharingHwnd 2data:",r),r&&r.param&&r.param.frameHwnd?n.hWnd=r.param.frameHwnd:v.error("onBigWinGetSharingHwnd value undefined!"),a=null,e.next=16,new p.default;case 16:a=e.sent,a.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},t.onBigWinSetMicValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setMicValue(n);case 3:coreAccount.set("micDevice-value",n,!0),v.info("SetMicValue ="+n),isNullOrEmpty(m)||(m.micValue=n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),y=t.onBigWinSetSpkValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setVoiceValue(n);case 3:coreAccount.set("spkDevice-value",n,!0),v.info("SetSpkValue ="+n),isNullOrEmpty(m)||(m.voiceValue=n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=t.onBiggetMicValue=function(e){var t=m;return isNullOrEmpty(t)&&(t=$getState().call,v.info("onBiggetMicValue")),e.vol=t.micValue,v.info("getMicValue ="+e.vol),e.vol},M=t.onBiggetSpkValue=function(e){var t=m;return isNullOrEmpty(t)&&(t=$getState().call),e.vol=t.voiceValue,v.info("getSpkValue ="+e.vol),e.vol},D=t.onBiggetDeviceList=function(e,t){var n=m;isNullOrEmpty(n)&&(n=$getState().call);var r=e.param.device_type,a=[],o=[],i=[],s=[];switch(o=n.micDevicesList,i=n.spkDevicesList,s=n.cameraDevicesList,v.info("data =",e),v.info("micList =",o),v.info("spkList =",i),v.info("cameraList =",s),r){case 1:a=s;break;case 2:a=i;break;case 3:a=o;break;default:v.error("device type index is error, type is =",r)}v.info("device_list =:",a);for(var c=0;c<a.length;c++){var u={};u.device_id=a[c].index,u.device_name=a[c].name,t.device_list.push(u)}return t.device_list},x=t.OnBigWinSetDevice=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=1,r=2,a=3,v.info("data =",(0,o.default)(t)),i=t.param.device_type,c=t.param.device_id,e.t0=i,e.next=e.t0===n?9:e.t0===r?13:e.t0===a?17:21;break;case 9:return e.next=11,coreSetting.setVideoIndex(c);case 11:return coreAccount.set("cameraDevices-selected",c,!0),e.abrupt("break",23);case 13:return e.next=15,coreSetting.setSpkIndex(c);case 15:return coreAccount.set("spkDevices-selected",c,!0),e.abrupt("break",23);case 17:return e.next=19,coreSetting.setMicIndex(c);case 19:return coreAccount.set("micDevices-selected",c,!0),e.abrupt("break",23);case 21:return v.error("device type index is error, type is =",i),e.abrupt("break",23);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),k=(t.OnBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("OnBigWinSetRecvShareParam =:",(0,o.default)(t)),t.param.width&&t.param.height&&(coreAccount.set("share-wnd-width",t.param.width,!0),coreAccount.set("share-wnd-height",t.param.height,!0),_.NativeInterface.setBigconfDataInitRect(t.param.width,t.param.height));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeHasSent=function(e){$dispatch(coreUi.changeHasSentState(e))}),P=t.onJoinConfFailed=function(){(0,d.joinConfFailed)()},F=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["cameraDevicesList","spkDevicesList","micDevicesList","spkDevice-value","micDevice-value","spkDevices-selected","micDevices-selected","cameraDevices-selected","share-wnd-width","share-wnd-height"],r=0;case 2:if(!(r<n.length)){e.next=9;break}return a=n[r],e.next=6,coreAccount.remove(a,!0);case 6:r++,e.next=2;break;case 9:setTimeout(function(){try{appService.exitApp()}catch(e){v.error("closeApp",{e:e.toJSON()})}},500);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),U=(t.NotifyCameraListUpdateEx=function(e){(0,l.NotifyCameraListUpdate)(e);var t=$getState().call.cameraDevicesList;isNullOrEmpty(m)||(m.cameraDevicesList=t),coreAccount.set("cameraDevicesList",t)},t.onRunCloudLink=function(e){v.info("onRunCloudLink: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",setLanguage(t)}),B=t.onLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),""===(n=t.conf.confHandle)){e.next=7;break}return v.info("onLeaveConference: confHandle=",n),e.next=5,(0,f.actionLeaveConf)();case 5:e.next=8;break;case 7:v.info("onLeaveConference: not in conf");case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),W=t.onLogout=function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT),coreAccount.changeAutoLogin()},H=t.onChangeLanguage=function(e){v.info("onChangeLanguage: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",coreUi.choseLanguage(t)},V=t.onGetMainWnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={hWnd:0},r=win.getNativeWindowHandle(),n.hWnd=r.readUInt32LE(0),v.info("onGetMainWnd js main wnd:",n.hWnd),a=null,e.next=7,new p.default;case 7:a=e.sent,a.postRpsParamMessage(t,n,0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$=t.onShowOrHideMainWnd=function(e){v.info("onShowOrHideMainWnd: ",e.param),0===e.param.isShow?win.hide():(1===e.param.showSkip?$dispatch(coreUi.changeShowSkipBtn(!0)):$dispatch(coreUi.changeShowSkipBtn(!1)),appService.showWindow())},G=t.onStopCloudLink=function(e){v.info("onStopCloudLink: ",(0,o.default)(e)),setTimeout(function(){try{appService.exitApp()}catch(e){v.error("onStopCloudLink:",{e:e.toJSON()})}},500)},Y=t.OnEncryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,e.next=5,coreSecurity.encryptKMC(t.param.value);case 5:if(r=e.sent,t.param.value="",0!==r.result){e.next=15;break}return a={key:"MAXHUBKEY_"+t.param.key,value:r.param.CiperText},e.next=11,coreDb.saveEncryptValue(a);case 11:v.info("OnEncryptValue: enc succ"),n.postRpsMessage(t,0),e.next=17;break;case 15:v.info("OnEncryptValue: enc fail"),n.postRpsMessage(t,1e3);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),j=t.OnDecryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.queryEncryptValue(r);case 6:if(""!==(a=e.sent)){e.next=12;break}v.info("OnDecryptValue: query fail"),n.postRpsMessage(t,1e3),e.next=19;break;case 12:return v.info("OnDecryptValue: query succ"),e.next=15,coreSecurity.decryptKMC(a);case 15:o=e.sent,i=o&&o.param&&o.param.PlainText||"",v.info("OnDecryptValue retValue: "+i==""?"failed":"success"),""===i?(v.info("OnDecryptValue: dec fail"),n.postRpsMessage(t,1e3)):(v.info("OnDecryptValue: dec succ"),c={key:t.param.key,decrypt_vaule:i},n.postRpsParamMessage(t,c,0),c.decrypt_vaule="",i="");case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),q=t.OnCleanValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.cleanEncryptValue(r);case 6:n.postRpsMessage(t,0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),J=(t.registerMaxhubEvent=function(){v.info("registerMaxhubEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",U),coreCommon.BigwinObserver.subscribe("OnLeaveConference",B),coreCommon.BigwinObserver.subscribe("OnLogout",W),coreCommon.BigwinObserver.subscribe("OnChangeLanguage",H),coreCommon.BigwinObserver.subscribe("OnGetMainWnd",V),coreCommon.BigwinObserver.subscribe("OnShowOrHideMainWnd",$),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",G),coreCommon.BigwinObserver.subscribe("OnEncryptValue",Y),coreCommon.BigwinObserver.subscribe("OnDecryptValue",j),coreCommon.BigwinObserver.subscribe("OnCleanValue",q)},t.maxhubSkipLogin=function(){v.info("maxhub user click skipLogin"),(0,l.NotifySkipLogin)(0)},t.dateConvertTo=function(e){if(null!==e&&void 0!==e){var t=e.split(" "),n=(new Date).getFullYear(),r=t[0].replace(/-/g,"/").split("/"),a=r[0],o=r[1],i=r[2];return a!==n.toString()?a+language.YEAR+o+language.MONTH+i+language.DAY+" "+t[1]:o+language.MONTH+i+language.DAY+" "+t[1]}});t.getConfShareUrl=function(e){var t=decodeURI("%0d%0a"),n=e.scheduser_name,r=e.conf_subject,a=e.conf_id,o=e.vmr_id,i=e.guest_join_uri,s=e.start_time,c=e.end_time,u=J(s)+" - "+(s.split(" ")[0]===c.split(" ")[0]?c.split(" ")[1]:J(c)),f=isNullOrEmpty(o)?a:o;return""+language.CONF_THEME+r+t+language.CONF_TIME+u+t+language.CONF_SPONSOR+n+t+language.CONF_ID+f+t+language.CONF_LINK+(i||"")}},964:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.Logger("conf")("logic"),a=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.changeCreateMeetingSubject=function(e){return $dispatch(coreUi.changeCreateConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.toggleCreateVideoConf=function(e){return $dispatch(coreUi.changeCreateMeetingType(e))},t.toggleCreateMeetingPassword=function(e){return $dispatch(coreUi.changeCreateMeetingPassword(e))},t.toggleCreateMeetingPasswordDefault=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordDefault(e))},t.toggleCreateMeetingPasswordOption=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordOption(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeTimeZone=function(e){return $dispatch(coreUi.updateTimeZone(e))}),o=t.changeConfLen=function(e){return $dispatch(coreUi.updateConfLen(e))},i=t.changeStartTime=function(e){return $dispatch(coreUi.updateStartTime(e))},s=t.changeStartTimeHour=function(e){return $dispatch(coreUi.updateStartTimeHour(e))},c=t.changeStartTimeMin=function(e){return $dispatch(coreUi.updateStartTimeMin(e))};t.changeStartTimeMobile=function(e){return $dispatch(coreUi.updateStartTimeMobile(e))},t.changeShowType=function(e){return $dispatch(coreUi.changeAttendeeShowType(e))},t.toggleIsReacrdSwitch=function(e){return $dispatch(coreUi.setIsReacrdSwitchType(e))},t.isShowReacrdTypeLogic=function(e){return $dispatch(coreUi.setIsShowReacrdType(e))},t.setRecordSchednameLogic=function(e){return $dispatch(coreUi.setRecordSchedname(e))},t.isReacrdLogic=function(e){return $dispatch(coreUi.setIsReacrd(e))},t.haveRecordedLogic=function(e){return $dispatch(coreUi.setHaveReacorded(e))},t.clearRecordInfoLogic=function(){return $dispatch(coreUi.clearRecordInfo())},t.changeConfImmediatelyClearData=function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()};a(0),o([1,0]),i(t),s(""),c("")},t.getDefaultDate=function(){var e=new Date,t=e;23===e.getHours()&&e.getMinutes()>15&&(t=new Date(e.getTime()+864e5));var n={year:t.getFullYear(),month:t.getMonth(),day:t.getDate()};r.info("default date is",t),i(n)},t.returnTimeCur=function(){var e=new Date,t=void 0,n=void 0,r=e.getHours(),a=e.getMinutes()+15;return t=a>30?23===r?0:r+1:r,n=(a>60?a-60:a)>30?0:30,coreConf.changeStartTimeHour(t),coreConf.changeStartTimeMin(n),t=parseInt(t)<10?"0"+t:""+t,n=parseInt(n)<10?"0"+n:""+n,t+":"+n},t.resetDefaultValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf.isCreateMeetingPasswordDefault;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.changeCreateMeetingPassword(n)),$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.updateStartTimeMobile("")),$dispatch(coreUi.meetingTypeValue(0))},t.resetBookConfValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf.isCreateMeetingPasswordDefault;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.changeCreateMeetingPassword(n))},t.resetCreateConfValue=function(){var e=$getState(),t=e.conf.isCreateMeetingPasswordDefault;$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),$dispatch(coreUi.changeCreateMeetingPassword(t)),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0))},t.resetJoinConfValue=function(){$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0))},t.currentAccountIsRole=function(e,t){var n=$getState(),r=n.myInfo,a=r.bind_no,o=r.account,i=e.filter(function(e){return e.acount_id===a})[0];return!(!i||1!==i.role)||t===o},t.getAttendee=function(e){return e.map(function(t,n){if(1===t.role){var r={acount_id:t.acount_id,email:"",is_mute:0,name:t.name,role:1,sms:"",type:0,number:t.number};e.splice(n,1),e.unshift(r)}}),e}},965:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setBleDeviceList=function(e){$dispatch(coreUi.changeBleDeviceList(e))},t.setPairDeviceInfo=function(e){$dispatch(coreUi.changePairDeviceInfo(e))},t.cleanPairDeviceInfo=function(){$dispatch(coreUi.clearPairDeviceInfo())},t.setAutoPairSwitch=function(e){$dispatch(coreUi.changeAutoPairSwitch(e))},t.setPairedDeviceInfo=function(e){$dispatch(coreUi.changePairedDeviceInfo(e))},t.setPairType=function(e){$dispatch(coreUi.changePairType(e))},t.setIsInPairConf=function(e){$dispatch(coreUi.changeInPairConf(e))},t.setPairDeviceConfInfo=function(e){$dispatch(coreUi.changePairDeviceConfInfo(e))},t.setNearestDevice=function(e){$dispatch(coreUi.changeNearestDevice(e))},t.setPairConfInfo=function(e){$dispatch(coreUi.changePairConfInfo(e))}},966:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairClosedNotify=t.endPairWithPeripherals=t.endOldPairAndRepair=t.handlePairClosed=t.sendMakePair=t.queryPairInfo=t.startMakePair=t.startQRCodePair=t.startManualPair=t.startAutoBlePair=t.initTupPairClient=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(3),u=r(c),f=n(965),l=n(1130),d=window.Logger("logic")("synergism/client/pair"),h="",p=function(e){return new u.default(function(t,n){n(e)})},_=function(){var e=$getState().login.account,t="";if(window.CLIENTCONFIG.ISMOBILE)t=window.device.uuid+e;else{t=(window.cwmpLocalIp?window.cwmpLocalIp:window.localIp)+e}h=coreCommon.sha512(t),d.info("getUnicode: creat device unicode success, unicode=",h)},C=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairType(constant.PAIR_TYPE.IDLE)),$dispatch(coreUi.changePairTokenIndex(-1)),(0,f.setPairedDeviceInfo)({}),$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairState(constant.PAIR_STATE.IDLE));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),v=(t.initTupPairClient=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.pairEnable(1,1);case 2:t=e.sent,d.info("initTupPairClient: enable tup pair ret=",t),_(),C();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){window.CLIENTCONFIG.ISMOBILE&&window.confirm(language.FORCE_PAIR_TIPS).then(function(e){e.ret?(d.info("forcePairConfirm: userClick force pair"),window.startScanQRCode(language.SCAN_QR_CODE_TIPS,!0)):d.info("forcePairConfirm: userClick cancel force pair")})}),m=function(e){if(d.info("dealPairFailed: reason=",e),e===constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE)return C(),void v();window.CLIENTCONFIG.ISMOBILE&&$getState().synergismInfo.pairType!==constant.PAIR_TYPE.AUTO&&window.Toast(language.PAIRING_FAILED,2,null,!1),C()},S=function(e){var t=e.pair_session_res.id,n=e.pair_session_res.pair_result;d.info("dealPairSuccess: [token] id="+t+", device name="+n.device_name+", interval="+n.heartbeat_interval+", ip="+n.ip),$dispatch(coreUi.changePairTokenIndex(t)),(0,f.setPairedDeviceInfo)(n),d.info("dealPairSuccess: change pair state to <pair success>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIR_SUCCESS)),coreSetting.setCurrentCode(""),window.CLIENTCONFIG.ISMOBILE&&(window.Toast(language.DEVICE_PAIRED_TOAST,2,null,!1),window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"))},g=(t.startAutoBlePair=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("startAutoBlePair: start auto ble pair"),n=$getState().synergismInfo.pairState,r=2,t.id!==$getState().synergismInfo.nearestDevice.id?(t.count=1,(0,f.setNearestDevice)(t)):(t.count=t.count<r?t.count+1:r,(0,f.setNearestDevice)(t)),d.info("startAutoBlePair: the nearest device=",t),constant.PAIR_STATE.IDLE!==n){e.next=11;break}$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),E(t.advertising,constant.PAIR_TYPE.AUTO,!1),e.next=22;break;case 11:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=21;break}if(a=$getState().synergismInfo.pairDevice,!(t.id!==a.id&&t.count>=r||s)){e.next=19;break}return d.info("startAutoBlePair: the nearest peripherals changed, try to change pair device, isOut ="+s+", old device="+a),e.next=17,N();case 17:i=e.sent,i?($dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),E(t.advertising,constant.PAIR_TYPE.AUTO,!1)):d.info("startAutoBlePair: try to change pair peripherals failed");case 19:e.next=22;break;case 21:d.info("startAutoBlePair: in pairing or cancel pairing, quit auto pair");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startManualPair=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("startManualPair: start manual pair, pairCode="+t+", isForce="+r),""!==t){e.next=4;break}return d.info("startManualPair: error, pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return d.info("startManualPair: in pairing or ending pair state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:E(t,constant.PAIR_TYPE.MANUAL,r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=(t.startQRCodePair=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("startQRCodePair: pairCode="+t+", isForce="+r),""!==t){e.next=4;break}return d.info("startQRCodePair: pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return d.info("startQRCodePair: in pairing or canceling state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=13;break}return d.info("startQRCodePair: has paired, close old pair first"),e.next=13,N();case 13:E(t,constant.PAIR_TYPE.QRCODE,r);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startMakePair=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.info("startMakePair: change pair state to <pairing>, pair type=",n+", isForce=",r),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),w(t).then(function(e){return I(e,r)},function(e){return p(e)}).then(function(e){S(e)},function(e){m(e)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),w=t.queryPairInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.default(function(){var e=(0,s.default)(o.default.mark(function e(n,r){var a,i,s,c,u,f,l,p,_,C,v,m,S;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){if(0===e.param.result&&0===e.param.pair_info.resut_code){var t=e.param.pair_info;d.info("queryPairInfoNotify: get peripherals info success, file path="+t.public_key_file+", remain lock time="+t.remain_lock_time+", remain times="+t.remain_times+", remote ip="+t.remote_ip),n(t)}else d.info("queryPairInfoNotify: get peripherals info failed, data=",e),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)},e.next=3,new coreTup.HWUportal;case 3:return i=e.sent,i.setNotifyFunc(360476,a),s=$getState().login,c=s.isSupportProxy,u=s.proxyAddress,f=s.proxyPort,l=s.euaServer,p=s.account,l&&""!==l||(d.info("queryPairInfo: the eua server info is null"),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)),_=l.split(":"),C=_[0],v=_[1]?_[1]:8544,c||(u=null,f=null),m=window.cwmpLocalIp?window.cwmpLocalIp:window.localIp,e.next=15,i.getPairInfo(C,v,t,h,m,u,f,window.APP_DATA_PATH,p);case 15:S=e.sent,0!==S.result?(d.info("queryPairInfo: send request failed, ret=",S),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)):d.info("queryPairInfo: send request success");case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=t.sendMakePair=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u.default(function(){var e=(0,s.default)(o.default.mark(function e(r,a){var i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){var t=e.param;1===t.is_permit?(d.info("pairResultNotify: make pair success"),r(t)):t.reason===constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED?(d.info("pairResultNotify: paired client over limit, support_force=",t.support_force),a(t.support_force?constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE:constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_UNSUPPORT_FORCE)):(d.info("pairResultNotify: make pair failed, param=",t),a(constant.MAKE_PAIR_FAILED_REASON.FAILED))},e.next=3,new coreTup.HWTupCall;case 3:return s=e.sent,s.setNotifyFunc(98658,i),d.info("sendMakePair: isForce=",n),e.next=8,coreCall.makePair($getState().login.account,t.tmpKey,t.public_key_file,t.remote_sip_num,n);case 8:c=e.sent,0!==c.result?(d.info("sendMakePair: send request failed, ret=",c),a(constant.MAKE_PAIR_FAILED_REASON.FAILED)):(u=c.param.id,$dispatch(coreUi.changePairTokenIndex(u)),d.info("sendMakePair: send request success, [token] id=",u));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),T=t.handlePairClosed=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("handlePairClosed: deal pair closed"),e.next=3,C();case 3:coreSetting.setIsResultVisible(!1),window.CLIENTCONFIG.ISMOBILE&&""!==t&&window.Toast(t,2,null,!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=(t.endOldPairAndRepair=function(){var e=(0,s.default)(o.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("endOldPairAndRepair: start to end old pair and repair with peripherals, type="+t+", code=",n),e.next=3,N(language.PAIR_CLOSED);case 3:t===constant.PAIR_TYPE.AUTO?(0,l.startAutoPair)():g(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endPairWithPeripherals=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().synergismInfo.tokenIndex,d.info("endPairWithPeripherals: [token] index=",t),-1===t){e.next=11;break}return d.info("endPairWithPeripherals: change pair state to <cancel pairing>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.CANCEL_PAIRING)),e.next=7,coreCall.cancelPair(0,t);case 7:return n=e.sent,d.info("endPairWithPeripherals: send end pair with peripherals request, ret=",n),e.next=11,T(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.pairClosedNotify=function(e){d.info("pairClosedNotify: param=",e),constant.SYNERGISM_FAIL_REASON.SOFT_TERMINAL_INITIATE===e.reason?d.info("pairClosedNotify: the software initiative to close the pair"):T(language.PAIR_CLOSED)}},967:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendJoinPairResult=t.receiveJoinPairConf=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(158),u=window.Logger("logic")("synergism/server/conf"),f=(t.receiveJoinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.info("receiveJoinPairConf: id = ",t+", confId = ",n.confId+", confAcs = ",n.confAcs),!(coreCall.getCallCount()>0||coreConf.isInConf())){e.next=5;break}return u.info("receiveJoinPairConf: maxhub device is busy"),f(t,constant.PAIR_CONF_RESULT.BUSY),e.abrupt("return");case 5:return(0,c.toggleChangeConfAcsId)(n.confId),(0,c.toggleChangeConfAcsNum)(n.confAcs),e.next=9,(0,c.toggleChangeConfAcsPas)(n.confPas);case 9:return(0,c.toggleChangeConfAcsState)(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),e.next=12,(0,c.oneKeyEnterConf)(n.confAcs,n.confId,n.confPas,!0);case 12:if(!1!==(r=e.sent)){e.next=16;break}return f(t,constant.PAIR_CONF_RESULT.FAILED),e.abrupt("return");case 16:window.pairId=t;case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pairId=0,r={description:"pair_join_conf_result",command_rsp:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{result:n,msg:{}}},e.next=4,coreCall.sendUniversalInfo(t,r);case 4:return a=e.sent,u.info("send join conf result command ret = ",a),e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},968:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"callToConfFail",value:function(){}},{key:"confIncoming",value:function(){}},{key:"confInfoNotify",value:function(){}},{key:"svcSeessionModify",value:function(){}},{key:"acceptConfStart",value:function(){}},{key:"rejectConf",value:function(){}},{key:"closeConfPage",value:function(){}},{key:"showExitConfTip",value:function(){}},{key:"notifyPluginConfEnd",value:function(){}},{key:"notifyPluginLogout",value:function(){}},{key:"showErrorMsgBox",value:function(){}},{key:"showCallOutPage",value:function(){}},{key:"showVideoOutPage",value:function(){}},{key:"showVideoConnectedPage",value:function(){}},{key:"showCallConnectedPage",value:function(){}},{key:"p2pToVideoConnectedPage",value:function(){}},{key:"changeAudioToVideo",value:function(){}},{key:"changeVideoToAudio",value:function(){}},{key:"changeIsSvcConfS",value:function(){}},{key:"dealMemberList",value:function(){}}]),e}();t.default=c},98:function(e,t,n){e.exports=n(0)(276)}});